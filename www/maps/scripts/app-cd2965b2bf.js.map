{"version":3,"sources":["scripts/app.js"],"names":["angular","module","openTermsDirective","restrict","link","scope","elem","attr","openModal","href","window","cordova","ThemeableBrowser","open","statusbar","color","toolbar","height","title","showPageTitle","backButtonCanClose","bind","directive","configLanguage","$translatePartialLoaderProvider","$translateProvider","AppConfig","tmhDynamicLocaleProvider","useLoader","urlTemplate","useSanitizeValueStrategy","useLocalStorage","localeLocationPattern","langvar","navigator","language","userlanguage","userlangvar","split","preferredLocale","searchLang","_","some","locales","code","filter","item","preferredLanguage","moment","locale","$inject","config","constant","path","configCompile","$compileProvider","debugInfoEnabled","startParse","$localStorage","$location","$rootScope","Parse","initialize","parse","appId","serverURL","server","currentUser","User","current","unit","map","mapType","type","console","log","runIonic","$ionicPlatform","$translate","$cordovaGlobalization","ConnectMonitor","ready","plugins","Keyboard","disableScroll","StatusBar","styleLightContent","registerBackButtonAction","event","preventDefault","lang","use","globalization","getPreferredLanguage","then","configIonic","$ionicConfigProvider","platform","ios","backButton","previousTitleText","icon","android","text","tabs","position","navBar","alignTitle","views","maxCache","configFacebook","$facebookProvider","setAppId","facebookAppId","setPermissions","runFacebook","LangVar","userLanguage","userLangVar","substring","toUpperCase","fbAsyncInit","FacebookUtils","init","version","xfbml","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","run","app","name","url","image","routes","home","login","statusBarColor","gaTrackingId","onesignal","google","translation","DAO","tables","columns","username","email","facebookimg","gender","img","facebook","qtdFollow","status","createdAt","attributes","user_id","followId","location","isLiked","likes","action","userAvatar","userName","gallery_id","key","value","$stateProvider","$urlRouterProvider","addPart","state","templateUrl","controller","controllerAs","abstract","template","$state","logOut","go","clear","tabHome","tabSearch","tabProfile","tabActivity","otherwise","signinModalDirective","$ionicModal","Loading","Toast","UserForm","signinModalLink","$scope","formFields","routeLogged","form","password","submitLogin","rForm","data","copy","$invalid","start","signIn","closeModal","end","resp","alert","fromTemplateUrl","animation","focusFirstInput","modal","show","hide","$on","remove","signupModalDirective","signupModalLink","register","submitRegister","$valid","signUp","error","buyDirective","$cordovaInAppBrowser","buyLink","closeButton","imagePressed","align","compareToDirective","targetModel","require","element","attrs","ctrl","compare","e1","val","e2","$watch","newValue","$setValidity","distanceModalDirective","distanceModalLink","storage","distances","onDistanceSelected","distance","closeDistanceModal","emailValidatorDirective","emailValidatorLink","ngModel","$asyncValidators","modelValue","viewValue","validateEmail","facebookLoginDirective","$q","Facebook","Dialog","facebookLoginLink","facebookLogin","processFacebookLogin","fbAuthData","fbData","me","findByEmail","user","signInViaFacebook","get","deferred","defer","reject","instant","promise","updateWithFacebookData","getCurrentUser","tempUser","facebookStatus","userFacebook","focusMeDirective","$timeout","openKeyboard","focus","click","heartDirective","heartLink","addClass","ionLoading","loading","runLoading","$ionicLoading","showLoading","$broadcast","hideLoading","parseInt","seconds","factory","PhotogramLoadingDirective","photogramFollowDirective","Photogram","modalFollow","getFollow","photoGridDirective","Gallery","$ionicPopup","Share","FeedbackModal","$ionicActionSheet","photoGridCtrl","isLoadingViewShown","isGalleriesViewShown","isErrorViewShown","isEmptyViewShown","showGalleries","showErrorView","showEmptyView","ensureMoreData","length","isMoreData","setGalleries","i","push","setCurrentPage","page","params","loadFeed","feed","objectId","unshift","onLoadMore","moreDataCanBeLoaded","showLoadingView","onReload","gallery","actionButtons","index","share","message","confirm","res","destroy","$emit","buttons","buttonDelete","actionSheet","titleText","cancelText","buttonClicked","profile","photoCommentDirective","$http","$ionicScrollDelegate","GalleryComment","GalleryForm","nocomments","galleryObj","openModalComment","formComment","submitComment","deleteComment","editComment","getComments","myIndexValue","searchPeople","term","peopleList","getFollowing","response","each","imageUrl","photo","_url","bio","indexOf","people","when","getPeopleTextRaw","obj","onTap","e","update","comments","galleryId","dataForm","create","photoLikeDirective","_model","progress","liked","likeGallery","likesTotal","photoListDirective","photoListController","openComment","load","openLikers","profileModalEditDirective","logout","linkFacebook","facebookLink","submitUpdateProfile","profileModalDirective","profileModalLink","follow","loadingFollow","userObj","isFollow","followersTotal","modalProfile","changeTab","tab","list","grid","ionSearchDirective","getData","search","watchSearch","minLength","str","results","placeholder","input","$apply","source","settingsModalDirective","Auth","getLoggedUser","languages","sref","usernameValidatorDirective","usernameValidatorLink","validateUsername","hashtag","$filter","target","replacedText","targetAttr","isDefined","replacePattern1","replace","replacePattern2","words","isNaN","inputWords","slice","join","$provide","PLURAL_CATEGORY","ZERO","ONE","TWO","FEW","MANY","OTHER","DATETIME_FORMATS","AMPMS","DAY","ERANAMES","ERAS","FIRSTDAYOFWEEK","MONTH","SHORTDAY","SHORTMONTH","STANDALONEMONTH","WEEKENDRANGE","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","NUMBER_FORMATS","CURRENCY_SYM","DECIMAL_SEP","GROUP_SEP","PATTERNS","gSize","lgSize","maxFrac","minFrac","minInt","negPre","negSuf","posPre","posSuf","pluralCat","n","opt_precision","pt_br","defineLocale","months","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","this","day","sameElse","relativeTime","future","past","m","mm","h","hh","dd","M","MM","y","yy","ordinalParse","ordinal","GalleryFormFactory","templateOptions","required","iconPlaceholder","label","toggleClass","formShare","UserFormFactory","options","valueProp","labelProp","ActionSheetFactory","Camera","$cordovaActionSheet","option","sourceType","getPicture","resolve","buttonLabels","addCancelButtonWithLabel","androidEnableCancelButton","androidTheme","actionsheet","ANDROID_THEMES","THEME_HOLO_LIGHT","btnIndex","cancel","setSessionToken","sessionToken","mSessionToken","ensureLoggedIn","become","recoverPassword","requestPasswordReset","success","resetPassword","logIn","CameraFactory","$cordovaCamera","PictureSourceType","CAMERA","PHOTOLIBRARY","quality","targetWidth","targetHeight","saveToPhotoAlbum","correctOrientation","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","fileInput","on","evt","tempImage","currentTarget","files","reader","FileReader","onload","result","readAsDataURL","toBase64Image","img_path","width","imageResizer","resizeImage","imageDataType","ImageResizer","IMAGE_DATA_TYPE_URL","resizeType","RESIZE_TYPE_FACTOR","format","RESIZE_TYPE_MIN_PIXEL","pixelDensity","storeImage","photoAlbum","service","ConnectMonitorFactory","$cordovaNetwork","watch","ionic","Platform","isWebView","onLine","isOnline","networkState","addEventListener","DAOFactory","$interval","database","_db","undefined","sqlitePlugin","openDatabase","createFromLocation","_promises","forEach","table","query","_query","_tables","all","getLastSync","column","lastSync","rows","insert","_columns","_values","bindings","transaction","executeSql","paginate","_table","_where","_join","_order","limit","_limit","_query1","total","TOTAL","fetchAll","output","DataUtilFactory","parseData","string","parts","Date","parseString","toLocaleDateString","getDate","inicio","year","getFullYear","month","getMonth","formatDate","milliseconds","getMonthName","meses","getFirstDay","getLastDay","DialogFactory","$cordovaDialogs","buttonsText","FacebookFactory","$facebook","$cordovaFacebook","getLoginStatus","api","fields","invite","showDialog","method","ui","friends","getTime","access_token","expiration_date","set","Boolean","save","ParseCloud","ParseObject","Object","extend","getStatus","isApproved","Query","contains","order","ascending","descending","date","startOf","endOf","greaterThanOrEqualTo","toDate","lessThanOrEqualTo","doesNotExist","equalTo","include","skip","find","count","defineProperty","prototype","GeoPoint","latitude","longitude","GalleryFactory","objPlace","address","geo","expiresAt","GeolocationFactory","getCurrentPosition","$cordovaGeolocation","geolocation","timeout","enableHighAccuracy","maximumAge","GoogleAnalyticsFactory","$cordovaGoogleAnalytics","trackingId","debugMode","startTrackerWithId","canTrack","warn","TAG","trackEvent","category","trackView","viewName","trackException","description","isFatal","InstallFactory","OneSignalFactory","OneSignal","setLogLevel","logLevel","visualLevel","googleProjectNumber","jsonData","JSON","stringify","enableInAppAlertNotification","ParseCloudFactory","Cloud","upload","file","ext","filename","File","PhotogramShareFactory","$window","socialsharing","shareWithOptions","subject","ToastFactory","$cordovaToast","okType","msg","UserFactory","$cordovaDevice","getFollowers","getLikers","device","getDevice","getCordova","model","getModel","getPlatform","uuid","getUUID","getVersion","userAgent","match","roleName","acl","ACL","setPublicReadAccess","setPublicWriteAccess","setACL","authData","expiration","setSeconds","getSeconds","authResponse","expiresIn","toISOString","facebookAuthData","userID","accessToken","fetch","userFetched","getPublicData","first","userData","Promise","setPhoto","parseFile","userId","findUsername","delete","ionLanguageDirective","modalLanguageLink","styleDefault","searchValue","selectLanguage","GeoServiceFactory","getLocation","posOptions","coords","err","findMe","pos","getGoogleAddress","logErr","lat","lng","address_normal","formatted_address","address_components","imagem","numero","short_name","rua","long_name","bairro","cidade","estado","uf","pais","paisCode","cep","zoom","w","parseAddress","place","resume","geometry","addressType","types","componentForm","componentFormName","street","number","city","country","searchAddress","autocompleteService","getQueryPredictions","getDetails","placeId","detailsService","maps","places","AutocompleteService","PlacesService","street_number","route","locality","sublocality","neighborhood","political","administrative_area_level_1","postal_code","ionLocationDirective","GeoService","ionLocationLink","suggestions","selectPlace","place_id","closeModalLocation","choosePlace","modalLocation","fromTemplate","loading1","FeedbackModalFactory","GalleryFeedback","GalleryFeedbackForm","submitFeedback","$new","photogramId","GalleryFeedbackFormFactory","feedbackDirective","PhotogramFeedback","PhotogramFeedbackForm","photogram","submit","GalleryCommentController","$stateParams","$ionicHistory","scrollBottom","goBack","LoadingController","$cordovaSplashscreen","intro","localStorage","splashscreen","ProfileController","vm","galleries","empty","more","isMe","openFollowers","openFollowing","MainTabController","PhotoService","ActionSheet","PhotoFilter","ParseFile","postPhoto","modalPost","editFilter","modalFilter","closeAddress","close","base64","imageUploaded","AccountController","getFollower","loadingFollowers","loadingFollowing","loadingPhotos","ActivityController","GalleryActivity","openProfile","HomeController","SearchCtrl","onSearch","SearchMapController","Geolocation","setPosition","LatLng","setGallerys","imageThumb","size","Size","origin","Point","anchor","shape","addMarker","Animation","DROP","marker","Marker","infoWindow","InfoWindow","content","addListener","loadGallerys","removeGallerys","removeMarkers","markers","maxRating","latLng","mapOptions","center","mapTypeId","MapTypeId","ROADMAP","Map","addListenerOnce","getBounds","errorMessage","onSearchHere","getCameraPosition","camera","showMap","isMapViewShown","onGalleryClicked","closeGallerysModal","showInfoWindow","getPosition","setMapPosition","openGallerysModal","setClickable","setMyLocationEnabled","off","toState","moveCamera","UserAvatarController","submitAvatar","userAvatarDirective","UserFollowerController","users","clearSearch","UserFollowingController","UserIntroController","UserLikerController","UserListController","UserMergeController","recoveryPassDirective","recovery","erro","button","$viewValue","isUndefined","forgot","UserRecoveryPassController","submitForgot","WalkthroughController","$ionicSlideBoxDelegate","currentPlatform","slideIndex","slideChanged","next","previous","slides","camanDirective","CamanJs","camanDirectiveLink","effect","ionCropDirective","$jrCrop","ionCropLink","getElem","fileUpload","crop","chooseText","canvas","toDataURL","cropSave","photoShareDirective","PhotogramSetting","photoShareLink","allowEdit","allowRotation","goHome","closeModalPost","submitPost","post","closePost","photoFilterCarouselDirective","apply","filters","applyFilter","photoFilterDirective","CamanJsFactory","Caman","revert","render","resetEffect","reset","PhotoFilterFactory","submitCapture","dataUrl","PhotoServiceFactory","$cordovaCapture","capture","filterModal","buttonCancel","aspectRatio","popoverOptions","CameraPopoverOptions","cropModal","setting","shareModal","shareSocial","social","socials","sociais","openFilter","closeFilter","submitFilter","templateFilter","cropImage","getVideo","captureVideo","duration","mediaFiles","fullPath","jrCrop","VideoFactory","createFileEntry","fileURI","resolveLocalFileSystemURL","entry","copyFile","fail","fileEntry","substr","lastIndexOf","newName","makeid","dataDirectory","fileSystem2","copyTo","succ","onCopySuccess","nativeURL","PKVideoThumbnail","createThumbnail","prevSucc","prevImageSuccess","correctUrl","possible","charAt","Math","floor","random","saveVideo","localURL","$templateCache","put"],"mappings":"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","file":"scripts/app-cd2965b2bf.js","sourcesContent":["(function () {\n    'use strict';\n    angular\n        .module('starter', [\n            'ionic',\n            'formlyIonic',\n            'ngMessages',\n            'ngCookies',\n            'ngStorage',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale', // angular-dynamic-locale\n            'angularMoment',\n            'ngFacebook',\n            'angular-cache',\n            'ngSanitize',\n            'mentio',\n            'ion-affix',\n            'jett.ionic.scroll.sista',\n            'ngCordova',\n            'ionic.components',\n            'app.main',\n        ]);\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('ionic.components', [\n            'ion-language',\n            'ion-location',\n            // 'ion-affix',\n            // 'ngCache',\n            'ion-photo'\n        ]);\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('href', openTermsDirective);\n\n    function openTermsDirective() {\n        return {\n            restrict: 'A',\n            link    : function (scope, elem, attr) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var href = attr.href;\n\n                    if (window.cordova) {\n                        // Keep in mind that you must add your own images to native resource.\n                        // Images below are for sample only. They are not imported by this plugin.\n                        window.cordova.ThemeableBrowser.open(href, '_blank', {\n                            statusbar         : {\n                                color: '#ffffffff'\n                            },\n                            toolbar           : {\n                                height: 44,\n                                color : '#f0f0f0ff'\n                            },\n                            title             : {\n                                color        : '#000',\n                                showPageTitle: true\n                            },\n                            backButtonCanClose: true\n                        })\n                        ;\n                    } else {\n                        window.open(href);\n                    }\n\n                    return false;\n                }\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main', [\n            'ionic',\n            'ngCordova',\n        ]);\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('ion-language', [\n            'ngCookies',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale' // angular-dynamic-locale\n        ])\n        .config(configLanguage);\n\n    function configLanguage($translatePartialLoaderProvider, $translateProvider, AppConfig, tmhDynamicLocaleProvider) {\n\n        // angular-translate configuration\n        $translateProvider.useLoader('$translatePartialLoader', {\n            urlTemplate: '{part}/i18n/{lang}.json'\n        });\n        $translateProvider.useSanitizeValueStrategy(null);\n\n        // Translate Config\n        //$translateProvider.useMissingTranslationHandlerLog();\n        $translateProvider.useLocalStorage(); // saves selected language to localStorage\n        tmhDynamicLocaleProvider.localeLocationPattern('../bower_components/angular-i18n/angular-locale_{{locale}}.js');\n\n        var langvar     = navigator.language || navigator.userlanguage;\n        var userlangvar = langvar.split('-')[0];\n        var language    = AppConfig.preferredLocale;\n        var searchLang  = _.some(AppConfig.locales, {\n            code: userlangvar\n        });\n\n        if (searchLang) {\n            language = AppConfig.locales.filter(function (item) {\n                return language == item.code\n            })[0].code;\n        }\n        $translateProvider.preferredLanguage(language);\n        moment.locale(language);\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ion-location', [\n      'ionic'\n    ]);\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('ion-photo', [\n            'ionic',\n            'ngCordova',\n            'jrCrop'\n        ])\n        .constant('config', {\n            path: 'app/component/ion-photo'\n        })\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.main');\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .run(startParse)\n        .run(runIonic)\n        .run(runFacebook)\n        .config(configCompile)\n        .config(configFacebook)\n        .config(configIonic);\n\n    function configCompile($compileProvider) {\n        $compileProvider.debugInfoEnabled(false);\n    }\n\n    function startParse(AppConfig, $localStorage, $location, $rootScope) {\n        Parse.initialize(AppConfig.parse.appId);\n        Parse.serverURL        = AppConfig.parse.server;\n        $rootScope.currentUser = Parse.User.current();\n\n        if (!$localStorage.unit) {\n            $localStorage.unit = AppConfig.map.unit;\n        }\n\n        if (!$localStorage.mapType) {\n            $localStorage.mapType = AppConfig.map.type;\n        }\n\n        console.log($rootScope.currentUser);\n        if (!$rootScope.currentUser) {\n            $location.path('/');\n        }\n    }\n\n    function runIonic($ionicPlatform, $localStorage, $translate, $cordovaGlobalization, ConnectMonitor, AppConfig, User) {\n\n        $ionicPlatform.ready(function () {\n\n            if (window.cordova && window.cordova.plugins.Keyboard) {\n                cordova.plugins.Keyboard.disableScroll(true);\n                window.StatusBar.styleLightContent();\n            }\n\n            // Remove back button android\n            $ionicPlatform.registerBackButtonAction(function (event) {\n                event.preventDefault();\n            }, 100);\n\n            if ($localStorage.lang) {\n                $translate.use($localStorage.lang);\n            } else {\n                if (typeof navigator.globalization !== 'undefined') {\n                    $cordovaGlobalization.getPreferredLanguage().then(function (language) {\n                        $translate.use((language.value).split('-')[0]);\n                    }, null);\n                }\n            }\n\n            //OneSignal.init(AppConfig.onesignal.id, AppConfig.onesignal.google);\n\n            // Enable to debug issues.\n            //if (window.plugins.OneSignal) {\n            //    window.plugins.OneSignal.setLogLevel({\n            //        logLevel   : 4,\n            //        visualLevel: 4\n            //    });\n            //\n            //    // Update with your OneSignal AppId and googleProjectNumber before running.\n            //    window.plugins.OneSignal.init(AppConfig.onesignal.id, {googleProjectNumber: AppConfig.onesignal.google}, function (jsonData) {\n            //        //alert(\"Notification received:\\n\" + JSON.stringify(jsonData));\n            //        console.log(jsonData);\n            //\n            //    });\n            //\n            //    window.plugins.OneSignal.enableInAppAlertNotification(true);\n            //\n            //}\n            //ConnectMonitor.watch();\n        });\n\n\n    }\n\n    function configIonic($ionicConfigProvider) {\n        $ionicConfigProvider.platform.ios.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        $ionicConfigProvider.platform.android.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        //$ionicConfigProvider.views.swipeBackEnabled (true);\n        $ionicConfigProvider.backButton.text(' ').icon('ion-ios-arrow-left');\n        //$ionicConfigProvider.backButton.previousTitleText (false).text ('Voltar').icon ('ion-ios-arrow-left');\n        //$ionicConfigProvider.views.transition ('platform');\n        $ionicConfigProvider.tabs.position('bottom');\n        $ionicConfigProvider.navBar.alignTitle('center');\n        $ionicConfigProvider.views.maxCache(1);\n    }\n\n    // Facebook\n    function configFacebook($facebookProvider, AppConfig) {\n        if (!window.cordova) {\n            console.log('Facebook Browser');\n            $facebookProvider.setAppId(AppConfig.facebookAppId);\n            $facebookProvider.setPermissions('id,name,email,user_likes,bio');\n        }\n    }\n\n    function runFacebook(AppConfig) {\n\n        if (!window.cordova) {\n            console.log('Facebook Browser');\n            var LangVar     = window.navigator.language || window.navigator.userLanguage;\n            var userLangVar = LangVar.substring(0, 2) + '_' + LangVar.substring(3, 5).toUpperCase();\n\n            window.fbAsyncInit = function () {\n                Parse.FacebookUtils.init({\n                    appId  : AppConfig.facebookAppId,\n                    version: 'v2.3',\n                    xfbml  : true\n                });\n            };\n\n            (function (d, s, id) {\n                var js, fjs = d.getElementsByTagName(s)[0];\n                if (d.getElementById(id)) {return;}\n                js     = d.createElement(s);\n                js.id  = id;\n                js.src = 'http://connect.facebook.net/' + userLangVar + '/sdk.js';\n                fjs.parentNode.insertBefore(js, fjs);\n            }(document, 'script', 'facebook-jssdk'));\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('ionic').constant('AppConfig', AppConfig());\n\n    function AppConfig() {\n        return {\n            path           : 'app/module/photogram',\n            app            : {\n                name : 'Photogram',\n                url  : 'http://photogramapp.com',\n                image: 'http://photogramapp.com/social-share.jpg',\n            },\n            routes         : {\n                home : 'tab.home',\n                login: 'user.intro'\n            },\n            statusBarColor : '#00796B',\n            gaTrackingId   : 'UA-69485876-2',\n            facebookAppId  : '1024016557617380',\n            parse          : {\n                appId : 'myAppId',\n                server: 'https://photogramapp.com/parse/',\n                //server: 'http://localhost:1337/parse/',\n            },\n            onesignal      : {\n                id    : '7b08c66d-d5a3-47b9-b091-b7f4a5bb7624',\n                google: 'AIzaSyCEBeAMSs4nrAC-2cvG6N6Q_KqJpnUrnh0'\n            },\n            map            : {\n                unit: 'mi',\n                type: 'normal',\n            },\n            locales        : [\n                {\n                    translation: 'portugues',\n                    code       : 'pt'\n                },\n                {\n                    translation: 'english',\n                    code       : 'en'\n                },\n                {\n                    translation: 'turkish',\n                    code       : 'tr'\n                },\n                {\n                    translation: 'persian',\n                    code       : 'fa'\n                },\n                {\n                    translation: 'german',\n                    code       : 'de'\n                }\n            ],\n            preferredLocale: 'en',\n            DAO            : {\n                name  : 'photogram_db',\n                tables: [\n                    {\n                        name   : 'User',\n                        columns: {\n                            id         : 'TEXT PRIMARY KEY',\n                            name       : 'TEXT',\n                            username   : 'TEXT',\n                            email      : 'TEXT',\n                            language   : 'TEXT',\n                            facebookimg: 'TEXT',\n                            gender     : 'TEXT',\n                            img        : 'TEXT',\n                            facebook   : 'INTEGER',\n                            qtdFollow  : 'INTEGER',\n                            status     : 'TEXT',\n                            createdAt  : 'INTEGER',\n                            attributes : 'TEXT'\n                        }\n                    },\n                    {\n                        name   : 'UserFollow',\n                        columns: {\n                            id      : 'TEXT PRIMARY KEY',\n                            user_id : 'TEXT',\n                            followId: 'TEXT'\n                        },\n                    },\n                    {\n                        name   : 'Gallery',\n                        columns: {\n                            id       : 'TEXT PRIMARY KEY',\n                            img      : 'TEXT',\n                            title    : 'TEXT',\n                            user_id  : 'TEXT',\n                            location : 'TEXT',\n                            isLiked  : 'BOOLEAN',\n                            likes    : 'INTEGER',\n                            createdAt: 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GalleryActivity',\n                        columns: {\n                            id        : 'TEXT PRIMARY KEY',\n                            action    : 'TEXT',\n                            img       : 'TEXT',\n                            userAvatar: 'TEXT',\n                            userName  : 'TEXT',\n                            user_id   : 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt : 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GalleryComment',\n                        columns: {\n                            id        : 'TEXT PRIMARY KEY',\n                            name      : 'TEXT',\n                            user_id   : 'TEXT',\n                            userName  : 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt : 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GallerySetting',\n                        columns: {\n                            key  : 'TEXT',\n                            value: 'TEXT'\n                        }\n                    }\n                ]\n            }\n        };\n    }\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').config(routes);\n\n    function routes($stateProvider, $urlRouterProvider, $translatePartialLoaderProvider) {\n\n        // Translation\n        $translatePartialLoaderProvider.addPart('app/');\n\n        $stateProvider\n\n            .state('loading', {\n                url         : '/',\n                templateUrl : 'app/main/loading/loading.html',\n                controller  : 'LoadingCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('walkthrough', {\n                url         : '/walkthrough',\n                templateUrl : 'app/main/walkthrough/walkthrough.html',\n                controller  : 'WalkthroughCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user', {\n                url        : '/user',\n                abstract   : true,\n                templateUrl: 'app/main/user-layout/user-layout.html'\n            })\n\n            .state('user.avatar', {\n                url         : '/avatar',\n                templateUrl : 'app/main/user-avatar/user-avatar.html',\n                controller  : 'UserAvatarCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user.intro', {\n                url        : '/intro',\n                templateUrl: 'app/main/user-intro/user-intro.html',\n                controller : 'UserIntroCtrl'\n            })\n\n            .state('user.merge', {\n                url         : '/merge',\n                controller  : 'UserMergeCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/user-merge/merge.html'\n            })\n\n            .state('logout', {\n                url         : '/logout',\n                template    : '<ion-view view-title=\"Logout\" cache-view=\"false\"><ion-content></ion-content></ion-view>',\n                controller  : function (User, $state) {\n                    User.logOut();\n                    $state.go('user.login', {clear: true});\n                },\n                controllerAs: 'vm'\n            })\n\n\n            .state('profile', {\n                url         : '/profile/:username',\n                templateUrl : 'app/main/profile/profile.html',\n                controllerAs: 'vm',\n            })\n\n\n            .state('tab', {\n                url         : '/tab',\n                abstract    : true,\n                controller  : 'MainTabCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/tab/main-tab.html'\n            })\n\n            .state('tab.home', {\n                url  : '/home',\n                views: {\n                    tabHome: {\n                        controller  : 'HomeCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-home/home.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfile', {\n                url  : '/home/:username',\n                views: {\n                    tabHome: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('galleryComments', {\n                url         : '/home/:galleryId/comments',\n                controller  : 'GalleryComment',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/gallery-comment/gallery-comment.html'\n            })\n\n            .state('tab.homeGalleryLikers', {\n                url  : '/home/:galleryId/likers',\n                views: {\n                    tabHome: {\n                        controller  : 'UserLikersCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-likers/user-likers.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfileFollowers', {\n                url  : '/home/:username/followers',\n                views: {\n                    tabHome: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfileFollowing', {\n                url  : '/home/:username/follwing',\n                views: {\n                    tabHome: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.homeUserlist', {\n                url  : '/home/userlist',\n                views: {\n                    tabHome: {\n                        controller  : 'UserListCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-list/user-list.html'\n                    }\n                }\n            })\n\n            .state('tab.search', {\n                url  : '/search/:text',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search/search.html',\n                    }\n                }\n            })\n\n            .state('tab.map', {\n                url  : '/map',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchMapCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search-map/searchMap.html',\n                    }\n                }\n            })\n\n            .state('tab.account', {\n                url  : '/account',\n                views: {\n                    tabProfile: {\n                        controller  : 'AccountCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-account/account.html'\n                    }\n                }\n            })\n\n            .state('tab.accountFollowers', {\n                url  : '/account/:username/followers',\n                views: {\n                    tabProfile: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.accountFollowing', {\n                url  : '/account/:username/follwing',\n                views: {\n                    tabProfile: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.activity', {\n                url  : '/activity',\n                views: {\n                    tabActivity: {\n                        controller  : 'ActivityCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-activity/activity.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfile', {\n                url  : '/activity/:username',\n                views: {\n                    tabActivity: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfileFollowers', {\n                url  : '/activity/:username/followers',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfileFollowing', {\n                url  : '/activity/:username/follwing',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n        ;\n\n        // Translation\n        //$translatePartialLoaderProvider.addPart('app/main');\n        $urlRouterProvider.otherwise('/');\n\n    }\n\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('signinModal', signinModalDirective);\n\n    function signinModalDirective($ionicModal, Loading, User, $state, Toast, UserForm, AppConfig, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : signinModalLink,\n        };\n\n        function signinModalLink($scope, elem, attr) {\n            elem.bind('click', function () {\n\n                $scope.formFields  = UserForm.login;\n                $scope.routeLogged = AppConfig.routes.home;\n\n                $scope.form = {\n                    username: '',\n                    password: ''\n                };\n\n                $scope.submitLogin = function (rForm, data) {\n                    var form = angular.copy(data);\n                    if (!rForm.$invalid) {\n                        Loading.start();\n                        User.signIn(form).then(function (data) {\n                            console.log(data);\n                            $rootScope.currentUser = data;\n                            $state.go($scope.routeLogged, {\n                                clear: true\n                            });\n                            $scope.closeModal();\n                            Loading.end();\n                        }).catch(function (resp) {\n                            Toast.alert({\n                                title: 'Error',\n                                text : 'Incorrect username or password'\n                            });\n                            Loading.end();\n                        });\n                    } else {\n                        return false;\n                    }\n                };\n\n                $ionicModal.fromTemplateUrl('app/directive/SigninModalDirective.html', {\n                    scope          : $scope,\n                    animation      : 'slide-in-up',\n                    focusFirstInput: true,\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('signupModal', signupModalDirective);\n\n    function signupModalDirective(UserForm, AppConfig, Loading, User, $state, Toast, $ionicModal, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : signupModalLink,\n        };\n\n        function signupModalLink($scope, elem, attr) {\n            elem.bind('click', function () {\n\n                $scope.formFields  = UserForm.register;\n                $scope.routeLogged = AppConfig.routes.home;\n\n                $scope.form = {\n                    username: '',\n                    email   : '',\n                    password: ''\n                };\n\n                $scope.submitRegister = function (rForm, data) {\n                    if (rForm.$valid) {\n                        Loading.start();\n                        var form = angular.copy(data);\n                        User.signUp(form).then(function (resp) {\n                            console.log(resp);\n\n                            // After register, login\n                            User.signIn({\n                                username: form.username,\n                                password: form.password\n                            }).then(function (data) {\n                                console.log(data);\n                                $rootScope.currentUser = Parse.User.current();\n                                $state.go('user.avatar', {\n                                    clear: true\n                                });\n                                Loading.end();\n                                $scope.closeModal();\n                            }).catch(function (resp) {\n                                console.log(resp);\n                                Toast.alert({\n                                    title: 'Alert',\n                                    text : resp.error\n                                });\n                                Loading.end();\n                            });\n                        }).catch(function (resp) {\n                            console.log(resp);\n                            Toast.alert({\n                                title: 'Alert',\n                                text : resp.error\n                            });\n                            Loading.end();\n                        });\n                    }\n\n\n                };\n\n                $ionicModal.fromTemplateUrl('app/directive/SignupModalDirective.html', {\n                    scope          : $scope,\n                    animation      : 'slide-in-up',\n                    focusFirstInput: true,\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .directive('buy', buyDirective);\n\n    function buyDirective($cordovaInAppBrowser) {\n        return {\n            restrict: 'A',\n            link: buyLink\n        };\n\n        function buyLink(scope, elem) {\n            elem.bind('click', function () {\n                var url     = 'https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S';\n\n                if(window.cordova ) {\n                    cordova\n                        .ThemeableBrowser\n                        .open(url, '_blank', {\n                            statusbar: {\n                                color: '#ffffffff'\n                            },\n                            toolbar: {\n                                height: 44,\n                                color: '#f0f0f0ff'\n                            },\n                            title: {\n                                color: '#333333',\n                                showPageTitle: true\n                            },\n                            closeButton: {\n                                image: 'close',\n                                imagePressed: 'close_pressed',\n                                align: 'left',\n                                event: 'closePressed'\n                            },\n                            backButtonCanClose: true\n                        });\n                } else {\n                    window.open(url,'_blank');\n                }\n            });\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('compareTo', compareToDirective);\n\n    function compareToDirective() {\n        return {\n            restrict: 'A',\n            scope   : {\n                targetModel: '=compareTo'\n            },\n            require : 'ngModel',\n            link    : function postLink(scope, element, attrs, ctrl) {\n\n                var compare = function () {\n\n                    var e1 = element.val();\n                    var e2 = scope.targetModel;\n\n                    if (e2 !== null) {\n                        return e1 === e2;\n                    }\n\n                    return false;\n                };\n\n                scope.$watch(compare, function (newValue) {\n                    ctrl.$setValidity('errorCompareTo', newValue);\n                });\n\n            }\n        };\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('distanceModal', distanceModalDirective);\n\n    function distanceModalDirective($localStorage, $ionicModal) {\n        return {\n            restrict: 'A',\n            link    : distanceModalLink\n        };\n\n        function distanceModalLink($scope, elem, attr) {\n\n            elem.bind('click', function () {\n                    $scope.storage   = $localStorage;\n                    $scope.distances = [\n                        {\n                            val : 0.20,\n                            text: 'perto'\n                        },\n                        {\n                            val : 0.60,\n                            text: 'longe'\n                        },\n                        {\n                            val : 1.00,\n                            text: '1 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 5.00,\n                            text: '5 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 10.00,\n                            text: '10 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 25.00,\n                            text: '25 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 50.00,\n                            text: '50 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 100.00,\n                            text: '100 ' + $scope.storage.unit\n                        },\n                    ];\n\n                    $ionicModal.fromTemplateUrl('app/directive/distanceModal.html', {\n                        scope: $scope\n                    }).then(function (modal) {\n                        $scope.modal = modal;\n                        $scope.modal.show();\n\n                    });\n\n                    $scope.onDistanceSelected = function (distance) {\n                        console.log('Distance', distance);\n                    };\n\n                    $scope.closeDistanceModal = function () {\n                        $scope.modal.hide();\n                        $scope.modal.remove();\n                    };\n\n\n                }\n            );\n        }\n    }\n\n})\n();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('emailValidator', emailValidatorDirective);\n\n    function emailValidatorDirective(User) {\n        return {\n            require: 'ngModel',\n            link    : emailValidatorLink,\n        };\n\n        function emailValidatorLink(scope, elem, attr,ngModel) {\n            ngModel.$asyncValidators.email = function  (modelValue, viewValue) {\n                console.log(viewValue);\n                if(viewValue) {\n                    return User.validateEmail(viewValue);\n                }\n            }\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('facebookLogin', facebookLoginDirective);\n\n    function facebookLoginDirective(Loading, $state, $q, $translate, Facebook, Dialog, User, $rootScope, Toast) {\n        return {\n            restrict: 'E',\n            link    : facebookLoginLink,\n            template: '<button class=\"button button-block button-facebook\"><i class=\"icon ion-social-facebook\"></i> <span>{{ name || \\'loginWithFacebook\\'| translate}}</span> </button>',\n        };\n\n        function facebookLoginLink(scope, elem, attr) {\n\n            scope.facebookStatus = null;\n            Facebook.getCurrentUser().then(function (resp) {\n                console.log(resp);\n                scope.facebookStatus = resp;\n                return resp;\n            }).then(function (facebookStatus) {\n                if (facebookStatus.status === 'connected') {\n                    Facebook.me().then(function (userFacebook) {\n                        scope.name = userFacebook.name;\n                    });\n                }\n            }).catch(function () {\n                console.log('Not logged');\n            });\n\n            elem.bind('click', facebookLogin);\n\n            function facebookLogin() {\n                Loading.start();\n\n                Facebook.getCurrentUser().then(function (fbAuthData) {\n                    console.log(fbAuthData);\n\n                    if (fbAuthData.status === 'connected') {\n                        var fbData = null;\n                        return Facebook.me().then(function (data) {\n                            fbData = data;\n                            return User.findByEmail(data.email);\n                        }).then(function (user) {\n\n                            if (!user.id) {\n                                return User.signInViaFacebook(fbAuthData);\n                            } else if (user.get('authData')) {\n                                if (user.get('authData').facebook.id === fbData.id) {\n                                    return User.signInViaFacebook(fbAuthData);\n                                }\n                            } else {\n                                console.log(user);\n                                console.log(user.attributes);\n                                // merge\n                                $rootScope.tempUser = user;\n                                $state.go('user.merge', {\n                                    clear: true\n                                });\n                                Loading.end();\n                                //var deferred = $q.defer();\n                                //deferred.reject($translate.instant('emailFacebookTakenText'));\n                                //return deferred.promise;\n                            }\n                        });\n                        //           .then(function () {\n                        //               return User.updateWithFacebookData(fbData);\n                        //           }).then(function (user) {\n                        //    Toast.show($translate.instant('loggedInAsText') + ' ' + user.get('email'));\n                        //}, function (error) {\n                        //    Dialog.alert(error);\n                        //});\n\n                    }\n\n                    switch (fbAuthData.status) {\n                        case 'connected':\n                            // logado\n                            processFacebookLogin();\n                            //Loading.end();\n                            //$state.go(AppConfig.routes.home, {\n                            //    clear: true\n                            //});\n                            break;\n                        case 1:\n                            // novo user\n                            $state.go('user.avatar', {\n                                clear: true\n                            });\n                            break;\n                        case 2:\n                            // merge\n                            $state.go('user.merge', {\n                                clear: true\n                            });\n                            break;\n                    }\n                }).catch(function () {\n                    Loading.end();\n                });\n\n                function processFacebookLogin(fbAuthData) {\n\n                    Loading.start();\n\n                    var fbData = null;\n\n                    return Facebook.me().then(function (data) {\n                        fbData = data;\n                        return User.findByEmail(data.email);\n                    }).then(function (user) {\n                        if (!user.id) {\n                            return User.signInViaFacebook(fbAuthData);\n                        } else if (user.get('authData')) {\n                            if (user.get('authData').facebook.id === fbData.id) {\n                                return User.signInViaFacebook(fbAuthData);\n                            }\n                        } else {\n                            var deferred = $q.defer();\n                            deferred.reject($translate.instant('emailFacebookTakenText'));\n                            return deferred.promise;\n                        }\n                    }).then(function () {\n                        return User.updateWithFacebookData(fbData);\n                    }).then(function (user) {\n                        Toast.show($translate.instant('loggedInAsText') + ' ' + user.get('email'));\n                    }, function (error) {\n                        Dialog.alert(error);\n                    });\n                }\n\n            }\n\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('focusMe', focusMeDirective);\n\n    function focusMeDirective($timeout, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : function (scope, element, attrs) {\n\n                $rootScope.$on('openKeyboard', openKeyboard);\n\n                openKeyboard();\n\n                function openKeyboard() {\n                    $timeout(function () {\n                        element[0].focus();\n                        element[0].click();\n                        if (window.cordova) {\n                            cordova.plugins.Keyboard.show();\n                        }\n                    }, 750);\n                }\n            }\n        };\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n angular\n    .module('starter')\n    .directive('heart', heartDirective);\n\n  function heartDirective() {\n    return {\n      restrict: 'A',\n      scope: {\n        item: '='\n      },\n      link: heartLink\n    };\n\n    function heartLink(scope, elem, attr) {\n      elem.bind('click', function () {\n        console.log(scope.item);\n        elem.addClass('happy');\n      });\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter')\n           .directive('ionLoading', ionLoading)\n           .run(runLoading)\n           .factory('Loading', Loading);\n\n    function ionLoading() {\n        return {\n            restrict: 'E',\n            scope   : {\n                icon   : '@',\n                loading: '='\n            },\n            template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n        };\n    }\n\n    function runLoading($rootScope, $ionicLoading) {\n        //Loading\n        $rootScope.$on('ionicLoading:true', function (text) {\n            $rootScope.loading = true;\n            $ionicLoading.show(text);\n        });\n        $rootScope.$on('ionicLoading:false', function () {\n            $rootScope.loading = false;\n            $ionicLoading.hide();\n        });\n    }\n\n    function Loading($rootScope, $timeout) {\n        var seconds = 0;\n\n        return {\n            start: showLoading,\n            end: hideLoading,\n        };\n\n\n        function showLoading(text) {\n            $rootScope.$broadcast('ionicLoading:true', text);\n        }\n\n        function hideLoading() {\n            $timeout(function () {\n                $rootScope.$broadcast('ionicLoading:false');\n            }, parseInt(seconds + '000'));\n        }\n    }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('loading', PhotogramLoadingDirective);\n\n  function PhotogramLoadingDirective() {\n    return {\n      restrict: 'E',\n      scope   : {\n        loading: '=',\n        icon   : '@'\n      },\n      template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular\n    .module('starter')\n    .directive('photogramFollow', photogramFollowDirective);\n\n  function photogramFollowDirective($ionicModal, AppConfig, Photogram) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        user: '='\n      },\n      link: function (scope, elem, attr) {\n        elem.bind('click', openModal);\n        scope.closeModal = closeModal;\n\n        function openModal() {\n          $ionicModal.fromTemplateUrl(path + '/directive/follow/photogram.follow.modal.html', {\n            scope: scope\n          }).then(function (modal) {\n            scope.modalFollow = modal;\n            console.log('Open modal follow', scope.user);\n\n            Photogram\n              .getFollow(scope.user)\n              .then(function (resp) {\n                console.log(resp);\n                scope.data = resp;\n                scope.modalFollow.show();\n              });\n\n          });\n        }\n\n        function closeModal() {\n          scope.modalFollow.hide();\n          scope.modalFollow.remove();\n        }\n      }\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoGrid', photoGridDirective);\n\n    function photoGridDirective(Gallery, $rootScope, $ionicPopup, Share, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                username: '=',\n                user    : '=',\n                profile : '='\n            },\n            templateUrl: 'app/directive/photoGridDirective.html',\n            link       : photoGridCtrl\n        };\n\n        function photoGridCtrl($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 1;\n            $scope.data        = [];\n\n            if ($scope.username) {\n                $scope.params.username = $scope.username;\n            }\n\n            $scope.loading = true;\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n\n            var isMoreData = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n\n                Gallery.feed($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                    $scope.$broadcast('scroll.refreshComplete');\n                    $scope.loading = false;\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $scope.action = function (gallery) {\n\n                var buttons = [{\n                    text: '<i class=\"icon ion-share\"></i>' + ('Share')\n                }, {\n                    text: '<i class=\"icon ion-alert-circled\"></i>' + ('Report')\n                }];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user_id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + ('Delete your photo')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    titleText    : ('Photo'),\n                    cancelText   : ('Cancel'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            Share.share(message);\n                            break;\n                        case 1:\n                            FeedbackModal.modal(gallery);\n                            break;\n                        case 2:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : ('Delete photo'),\n                                    template: ('Are you sure?')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery).then(function () {\n                                            console.log('Photo deleted');\n                                            $scope.$emit('PhotogramHome:reload');\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoComment', photoCommentDirective);\n\n    function photoCommentDirective($ionicModal, $http, $q, $ionicScrollDelegate, Loading, $ionicPopup, User, Dialog, $rootScope, Gallery, GalleryComment, GalleryForm) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function ($scope, elem) {\n\n\n                elem.bind('click', openModalComment);\n\n                function init() {\n                    $scope.currentUser = Parse.User.current();\n                    $scope.nocomments  = false;\n                    $scope.loading     = false;\n                    $scope.form        = {\n                        gallery: $scope.ngModel.galleryObj,\n                        text   : ''\n                    };\n                }\n\n                function openModalComment() {\n                    console.log($scope.ngModel);\n\n                    init();\n\n                    $scope.loading       = true;\n                    $scope.formFields    = GalleryForm.formComment;\n                    $scope.submitComment = submitComment;\n                    $scope.deleteComment = deleteComment;\n                    $scope.editComment   = editComment;\n                    $scope.closeModal    = function () {\n                        $scope.modal.hide();\n                        $scope.modal.remove();\n                    };\n\n                    getComments();\n\n                    //Mentios\n                    // shows the use of dynamic values in mentio-id and mentio-for to link elements\n                    $scope.myIndexValue = \"5\";\n\n\n                    $scope.searchPeople = function (term) {\n                        var peopleList = [];\n                        return User.getFollowing().then(function (response) {\n                            _.each(response, function (item) {\n                                item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                                item.bio      = item.status;\n                                if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                                    peopleList.push(item);\n                                }\n                            });\n                            $scope.people = peopleList;\n                            console.log(peopleList);\n                            return $q.when(peopleList);\n                        });\n                    };\n\n                    $scope.getPeopleTextRaw = function (item) {\n                        return '@' + item.username;\n                    };\n\n\n                    //$scope.comments = $scope.ngModel.comments || [];\n                    //$timeout(function () {\n                    //    if ($scope.comments.length === 0) {\n                    //        $scope.nocomments = true;\n                    //    }\n                    //}, 500);\n\n\n                    $ionicModal.fromTemplateUrl('app/directive/photoCommentDirective.html', {\n                        scope          : $scope,\n                        focusFirstInput: true\n                    }).then(function (modal) {\n                        $scope.modal = modal;\n                        $scope.modal.show();\n\n                    });\n                }\n\n                function deleteComment(obj) {\n                    console.log(obj);\n                    Dialog.confirm(('Delete comment'), ('You are sure?')).then(function (resp) {\n                        console.log(resp);\n                        if (resp) {\n                            GalleryComment.destroy(obj).then(function (resp) {\n                                console.log(resp);\n                                getComments();\n                            });\n                        }\n                    });\n                }\n\n                function editComment(obj) {\n                    console.log(obj);\n                    // An elaborate, custom popup\n                    $scope.data = angular.copy(obj);\n                    $ionicPopup\n                        .show({\n                            template: '<input type=\"text\" ng-model=\"data.text\">',\n                            title   : ('Edit comment'),\n                            //subTitle: 'Please use normal things',\n                            scope   : scope,\n                            buttons : [{\n                                text: ('Cancel')\n                            }, {\n                                text : '<b>OK</b>',\n                                type : 'button-positive',\n                                onTap: function (e) {\n                                    console.log($scope.data);\n                                    if (!$scope.data.text) {\n                                        //don't allow the user to close unless he enters wifi password\n                                        e.preventDefault();\n                                    } else {\n                                        return $scope.data;\n                                    }\n                                }\n                            }]\n                        })\n                        .then(function (resp) {\n                            console.log(resp);\n                            if (resp) {\n                                GalleryComment.update(resp)\n                                              .then(function (resp) {\n                                                  console.log(resp);\n                                                  getComments();\n                                              });\n                            }\n                        });\n                }\n\n                function getComments() {\n                    $scope.loading = true;\n\n\n                    Gallery.comments({galleryId: $scope.ngModel.id}).then(function (resp) {\n                        $scope.comments         = resp;\n                        $scope.ngModel.comments = resp;\n                        $scope.loading          = false;\n\n                        //$timeout(function () {\n                        //    // Scroll to bottom\n                        //    $ionicScrollDelegate.scrollBottom();\n                        //}, 1);\n                    });\n                }\n\n                function submitComment(rForm, form) {\n                    if (rForm.$valid) {\n                        var dataForm = angular.copy(form);\n                        console.log(dataForm);\n                        Loading.start();\n                        GalleryComment.create(dataForm).then(function (resp) {\n                            console.log(resp);\n                            getComments();\n                            $rootScope.$emit('openKeyboard');\n                            Loading.end();\n                            $scope.closeModal();\n                        });\n                    }\n                }\n\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('photoLike', photoLikeDirective);\n\n    function photoLikeDirective(Gallery) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function (scope, elem) {\n                elem.bind('click', function () {\n                        var _model      = scope.ngModel;\n                        _model.progress = true;\n                        _model.liked    = !_model.liked;\n\n                        Gallery.likeGallery({galleryId: scope.ngModel.galleryObj.id}).then(function (resp) {\n                            console.log(resp);\n                            _model.likes    = resp.likes;\n                            _model.progress = false;\n                            console.log(_model, resp);\n                            if (resp.action === 'like') {\n                                scope.ngModel.isLiked = true;\n                                scope.ngModel.likesTotal += 1;\n                            }\n\n                            if (resp.action === 'unlike') {\n                                scope.ngModel.isLiked = false;\n                                scope.ngModel.likesTotal -= 1;\n                            }\n                        });\n                    }\n                );\n\n            }\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoList', photoListDirective);\n\n    function photoListDirective(Gallery, $rootScope, $ionicPopup, $translate, $state, Share, Toast, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                username  : '=',\n                profile   : '=',\n                load      : '=',\n                openLikers: '=',\n            },\n            templateUrl: 'app/directive/photoListDirective.html',\n            link       : photoListController\n        };\n\n        function photoListController($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 0;\n            $scope.data        = [];\n\n            if ($scope.username) {\n                $scope.params.username = $scope.username;\n            }\n\n            $scope.loading = true;\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n            $scope.openComment = function (galleryId) {\n                $state.go('galleryComments', {galleryId: galleryId})\n            };\n\n            $scope.share = Share.open;\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n            var isMoreData           = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n                Gallery.feed($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.loading = false;\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                    $scope.$broadcast('scroll.refreshComplete');\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $scope.action = function (gallery) {\n\n                var buttons = [{\n                    text: '<i class=\"icon ion-alert-circled\"></i>' + $translate.instant('reportText')\n                }];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user.obj.id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + $translate.instant('deleteGallery')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    cancelText   : $translate.instant('cancelText'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            FeedbackModal.modal(gallery.galleryObj);\n                            break;\n                        case 1:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : $translate.instant('deleteGalleryConfirmText'),\n                                    template: $translate.instant('areSure')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery.galleryObj).then(function () {\n                                            console.log('Photo deleted');\n                                            Toast.alert({\n                                                title: 'Photo',\n                                                text : 'Photo deleted'\n                                            })\n                                            $scope.onReload();\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('profileModalEdit', profileModalEditDirective);\n\n    function profileModalEditDirective($ionicModal, User, Loading, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                user: '='\n            },\n            template: '',\n            link    : function (scope, elem) {\n\n                scope.linkFacebook        = linkFacebook;\n                scope.logout              = logout;\n                scope.submitUpdateProfile = submitUpdateProfile;\n                scope.closeModal          = closeModal;\n\n                elem.bind('click', openModal);\n                function init() {\n                    var user   = Parse.User.current().attributes;\n                    scope.form = {\n                        name    : user.name,\n                        email   : user.email,\n                        status  : user.status,\n                        photo   : user.photo,\n                        username: user.username,\n                        gender  : user.gender,\n                        facebook: user.facebook\n                    };\n                    console.log(scope.form);\n                    scope.formFields = UserForm.profile;\n                }\n\n\n                function openModal() {\n\n                    init();\n                    $ionicModal.fromTemplateUrl('app/directive/profile-edit-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n\n                    // Cleanup the modal when we're done with it!\n                    scope.$on('$destroy', function () {\n                        scope.modal.remove();\n                    });\n\n                }\n\n                function logout() {\n                    $state.go('logout');\n                    scope.closeModal();\n                }\n\n                function linkFacebook() {\n                    User.facebookLink().then(function (resp) {\n                        console.log(resp);\n                    });\n                }\n\n                function submitUpdateProfile() {\n                    var dataForm = angular.copy(scope.form);\n                    Loading.start();\n                    User.update(dataForm).then(function (resp) {\n                        console.log(resp);\n                        scope.user = resp;\n                        Loading.end();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('profileModal', profileModalDirective);\n\n    function profileModalDirective($ionicModal, User) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                username: '='\n            },\n            link    : profileModalLink\n        };\n\n        function profileModalLink(scope, elem) {\n            elem.bind('click', function () {\n\n                console.log(scope.username);\n\n                User.profile(scope.username).then(function (data) {\n                    console.log(data);\n                    scope.user = data;\n                    openModal();\n                });\n\n            });\n\n            function openModal() {\n\n                console.log(scope.user.attributes);\n\n                $ionicModal.fromTemplateUrl('app/directive/profile-modal.html', {\n                    scope: scope\n                }).then(function (modal) {\n                    scope.modalProfile  = modal;\n                    scope.loadingFollow = true;\n                    scope.changeTab     = changeTab;\n                    scope.follow        = follow;\n                    scope.closeModal    = closeModal;\n                    scope.modalProfile.show();\n\n                    changeTab('list');\n\n                    function follow() {\n\n                        scope.loadingFollow = true;\n                        var status;\n\n                        if (scope.user.follow) {\n                            status = false;\n                        } else {\n                            status = true;\n                        }\n\n                        User.follow(scope.user.userObj.id).then(function (resp) {\n                            console.log('Follow result', resp);\n                            scope.user.isFollow = (resp === 'follow') ? true : false;\n                            if (resp == 'follow') {\n                                scope.user.followersTotal += 1;\n                            }\n                            if (resp == 'unfollow') {\n                                scope.user.followersTotal -= 1;\n                            }\n                            scope.loadingFollow = false;\n                        });\n\n\n                    }\n\n                    function closeModal() {\n                        delete scope.data;\n                        scope.modalProfile.hide();\n                    }\n                });\n\n                // Cleanup the modal when we're done with it!\n                scope.$on('$destroy', function () {\n                    scope.modalProfile.remove();\n                });\n            }\n\n            function changeTab(tab) {\n                if (tab === 'list') {\n                    scope.tab = {\n                        list: true,\n                        grid: false\n                    };\n                } else {\n                    scope.tab = {\n                        list: false,\n                        grid: true\n                    };\n                }\n            }\n\n\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('ionSearch', ionSearchDirective);\n\n  function ionSearchDirective($timeout) {\n\n    return {\n      restrict   : 'E',\n      scope      : {\n        getData: '&source',\n        ngModel: '=?',\n        search : '=?filter'\n      },\n      templateUrl: 'app/module/photogram/directive/search/search-directive.html',\n      link       : function (scope, element, attrs) {\n        attrs.minLength = attrs.minLength || 0;\n        scope.placeholder = attrs.placeholder || '';\n        scope.clear = function () {\n          console.log('Limpar campo');\n          scope.input = '';\n          scope.$apply();\n        };\n\n        if (attrs.class) {\n          element.addClass(attrs.class);\n        }\n\n        if (attrs.source) {\n          scope.$watch('search.value', watchSearch);\n        }\n\n        function watchSearch(newValue) {\n          if (newValue.length > attrs.minLength) {\n            $timeout(function () {\n              scope\n                .getData({\n                  str: newValue\n                })\n                .then(function (results) {\n                  scope.ngModel = results;\n                });\n            }, 1000);\n          } else {\n            scope.ngModel = [];\n          }\n        }\n\n      }\n\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .directive('settingsModal', settingsModalDirective);\n\n    function settingsModalDirective($ionicModal, $translate, AppConfig, $cordovaInAppBrowser, Share, Auth, User, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            template: '',\n            link    : function (scope, elem) {\n\n                elem.bind('click', openModal);\n                scope.closeModal     = closeModal;\n                scope.link           = link;\n                scope.share          = Share.share;\n\n                scope.logout = function  () {\n                    $state.go(AppConfig.routes.login);\n                    scope.closeModal();\n                };\n\n                function init() {\n                    scope.form       = Auth.getLoggedUser();\n                    scope.formFields = UserForm.profile;\n                    scope.languages  = AppConfig.locales;\n                    scope.language   = $translate.use();\n                }\n\n                function openModal() {\n\n                    init();\n                    $ionicModal.fromTemplateUrl('app/directive/settings-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n                }\n\n                function link(sref) {\n                    $state.go(sref);\n                    scope.closeModal();\n                }\n\n                function submitUpdateProfile(form) {\n                    var dataForm = angular.copy(form);\n                    User.update(dataForm).then(function (resp) {\n                        console.log(resp);\n                        init();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                    scope.modal.remove();\n                }\n\n            }\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('usernameValidator', usernameValidatorDirective);\n\n    function usernameValidatorDirective(User) {\n        return {\n            require: 'ngModel',\n            restrict: 'A',\n            link    : usernameValidatorLink,\n        };\n\n        function usernameValidatorLink(scope, elem, attr, ngModel) {\n            ngModel.$asyncValidators.username = function  (modelValue, viewValue) {\n                if(viewValue) {\n                    return User.validateUsername(viewValue);\n                }\n            }\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').filter('hashtag', hashtag);\n\n    function hashtag($filter) {\n        return function (text, target) {\n            if (!text) return text;\n\n            var replacedText = $filter('linky')(text, target);\n\n            var targetAttr = \"\";\n            if (angular.isDefined(target)) {\n                targetAttr = target;\n            }\n\n            // replace #hashtags and send them to twitter\n            var replacePattern1 = /(^|\\s)#(\\w*[a-zA-Z_]+\\w*)/gim;\n            replacedText        = text.replace(replacePattern1, '$1<a href=\"#/tab/search/%23$2\"' + targetAttr + '>#$2</a>');\n\n            // replace @mentions but keep them to our site\n            var replacePattern2 = /(^|\\s)\\@(\\w*[a-zA-Z_]+\\w*)/gim;\n            replacedText        = replacedText.replace(replacePattern2, '$1<a href=\"#/tab/home/$2\" >@$2</a>');\n\n            return replacedText;\n        };\n    }\n\n})();\n\n\n(function () {\n    'use strict';\n\n    angular.module('starter').filter('words', words);\n\n    function words() {\n\n        ////////////////\n\n        return function (input, words) {\n            if (isNaN(words)) {\n                return input;\n            }\n            if (words <= 0) {\n                return '';\n            }\n            if (input) {\n                var inputWords = input.split(/\\s+/);\n                if (inputWords.length > words) {\n                    input = inputWords.slice(0, words).join(' ') + '\\u2026';\n                }\n            }\n            return input;\n        };\n    }\n\n})();\n\n\n'use strict';\nangular.module(\"ngLocale\", [], [\"$provide\", function ($provide) {\n  var PLURAL_CATEGORY = {\n    ZERO: \"zero\",\n    ONE: \"one\",\n    TWO: \"two\",\n    FEW: \"few\",\n    MANY: \"many\",\n    OTHER: \"other\"\n  };\n  $provide.value(\"$locale\", {\n    \"DATETIME_FORMATS\": {\n      \"AMPMS\": [\n        \"AM\",\n        \"PM\"\n      ],\n      \"DAY\": [\n        \"domingo\",\n        \"segunda-feira\",\n        \"ter\\u00e7a-feira\",\n        \"quarta-feira\",\n        \"quinta-feira\",\n        \"sexta-feira\",\n        \"s\\u00e1bado\"\n      ],\n      \"ERANAMES\": [\n        \"Antes de Cristo\",\n        \"Ano do Senhor\"\n      ],\n      \"ERAS\": [\n        \"a.C.\",\n        \"d.C.\"\n      ],\n      \"FIRSTDAYOFWEEK\": 6,\n      \"MONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"SHORTDAY\": [\n        \"dom\",\n        \"seg\",\n        \"ter\",\n        \"qua\",\n        \"qui\",\n        \"sex\",\n        \"s\\u00e1b\"\n      ],\n      \"SHORTMONTH\": [\n        \"jan\",\n        \"fev\",\n        \"mar\",\n        \"abr\",\n        \"mai\",\n        \"jun\",\n        \"jul\",\n        \"ago\",\n        \"set\",\n        \"out\",\n        \"nov\",\n        \"dez\"\n      ],\n      \"STANDALONEMONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"WEEKENDRANGE\": [\n        5,\n        6\n      ],\n      \"fullDate\": \"EEEE, d 'de' MMMM 'de' y\",\n      \"longDate\": \"d 'de' MMMM 'de' y\",\n      \"medium\": \"d 'de' MMM 'de' y HH:mm:ss\",\n      \"mediumDate\": \"d 'de' MMM 'de' y\",\n      \"mediumTime\": \"HH:mm:ss\",\n      \"short\": \"dd/MM/yy HH:mm\",\n      \"shortDate\": \"dd/MM/yy\",\n      \"shortTime\": \"HH:mm\"\n    },\n    \"NUMBER_FORMATS\": {\n      \"CURRENCY_SYM\": \"R$\",\n      \"DECIMAL_SEP\": \",\",\n      \"GROUP_SEP\": \".\",\n      \"PATTERNS\": [{\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 3,\n        \"minFrac\": 0,\n        \"minInt\": 1,\n        \"negPre\": \"-\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\",\n        \"posSuf\": \"\"\n      }, {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 2,\n        \"minFrac\": 2,\n        \"minInt\": 1,\n        \"negPre\": \"-\\u00a4\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\\u00a4\",\n        \"posSuf\": \"\"\n      }]\n    },\n    \"id\": \"pt-br\",\n    \"pluralCat\": function (n, opt_precision) {\n      if (n >= 0 && n <= 2 && n != 2) {\n        return PLURAL_CATEGORY.ONE;\n      }\n      return PLURAL_CATEGORY.OTHER;\n    }\n  });\n}]);\n(function () {\n    'use strict';\n    //! moment.js locale configuration\n//! locale : brazilian portuguese (pt-br)\n//! author : Caio Ribeiro Pereira : https://github.com/caio-ribeiro-pereira\n    \n    var pt_br = window.moment.defineLocale('pt', {\n        months: 'Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split(\n            '_'),\n        monthsShort: 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),\n        weekdays: 'Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado'.split('_'),\n        weekdaysShort: 'Dom_Seg_Ter_Qua_Qui_Sex_Sb'.split('_'),\n        weekdaysMin: 'Dom_2_3_4_5_6_Sb'.split('_'),\n        longDateFormat: {\n            LT: 'HH:mm',\n            LTS: 'HH:mm:ss',\n            L: 'DD/MM/YYYY',\n            LL: 'D [de] MMMM [de] YYYY',\n            LLL: 'D [de] MMMM [de] YYYY [s] HH:mm',\n            LLLL: 'dddd, D [de] MMMM [de] YYYY [s] HH:mm'\n        },\n        calendar: {\n            sameDay: '[Hoje s] LT',\n            nextDay: '[Amanh s] LT',\n            nextWeek: 'dddd [s] LT',\n            lastDay: '[Ontem s] LT',\n            lastWeek: function () {\n                return (this.day() === 0 || this.day() === 6) ?\n                    '[ltimo] dddd [s] LT' : // Saturday + Sunday\n                    '[ltima] dddd [s] LT'; // Monday - Friday\n            },\n            sameElse: 'L'\n        },\n        relativeTime: {\n            future: 'em %s',\n            past: '%s atrs',\n            s: 'segs',\n            m: 'um minuto',\n            mm: '%d minutos',\n            h: 'uma hora',\n            hh: '%d horas',\n            d: 'um dia',\n            dd: '%d dias',\n            M: 'um ms',\n            MM: '%d meses',\n            y: 'um ano',\n            yy: '%d anos'\n        },\n        ordinalParse: /\\d{1,2}/,\n        ordinal: '%d'\n    });\n\n    return pt_br;\n})();\n(function () {\n  'use strict';\n  angular\n    .module('starter')\n    .factory('GalleryForm', GalleryFormFactory);\n\n  function GalleryFormFactory($translate) {\n\n    var form = [{\n      key: 'title',\n      type: 'input',\n      templateOptions: {\n        type: 'text',\n        placeholder: $translate.instant('PHOTOGRAM.FORM.TITLE'),\n        icon: 'icon-envelope',\n        required: true,\n        iconPlaceholder: true,\n        focus: true\n      }\n    }, {\n      key: 'geo',\n      type: 'toggle',\n      templateOptions: {\n        label: $translate.instant('PHOTOGRAM.FORM.GEOLOCATION'),\n        toggleClass: 'positive'\n      }\n    }];\n\n    var formComment = [{\n      key: 'text',\n      type: 'input',\n      templateOptions: {\n        placeholder: $translate.instant('addComment'),\n        type: 'text',\n        required: true,\n        focus: true\n          //icon           : 'icon-envelope',\n          //iconPlaceholder: true\n      }\n    }];\n\n    var formShare = [{\n      key: 'facebook',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Facebook',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'twitter',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Twitter',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'whatsapp',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Whatsapp',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'SMS',\n      type: 'toggle',\n      templateOptions: {\n        label: 'SMS',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'email',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Email',\n        toggleClass: 'positive'\n      }\n    }, ];\n    return {\n      form: form,\n      formComment: formComment,\n      formShare: formShare\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('UserForm', UserFormFactory);\n\n    function UserFormFactory($translate) {\n\n        return {\n            login   : login(),\n            register: register(),\n            profile : profile()\n        };\n\n        function login() {\n            return [{\n                type           : 'input',\n                key            : 'username',\n                templateOptions: {\n                    type           : 'text',\n                    placeholder    : $translate.instant('username'),\n                    icon           : 'icon-user',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }, {\n                type           : 'input',\n                key            : 'password',\n                templateOptions: {\n                    type           : 'password',\n                    placeholder    : $translate.instant('password'),\n                    icon           : 'icon-lock',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }];\n        }\n\n        function register() {\n            return [\n                {\n                    type           : 'input',\n                    key            : 'username',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'email',\n                    templateOptions: {\n                        type           : 'email',\n                        placeholder    : $translate.instant('email'),\n                        icon           : 'icon-envelope',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'password',\n                    templateOptions: {\n                        type           : 'password',\n                        placeholder    : $translate.instant('password'),\n                        icon           : 'icon-lock',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }];\n        }\n\n        function profile() {\n            return [\n                {\n                    key            : 'username',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-ios-at',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    key            : 'name',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('name'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    key            : 'status',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('status'),\n                        icon           : 'ion-quote',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    type           : 'select',\n                    key            : 'gender',\n                    templateOptions: {\n                        label          : $translate.instant('gender'),\n                        options        : [{\n                            'label': $translate.instant('man'),\n                            'id'   : 'male',\n                        }, {\n                            'label': $translate.instant('woman'),\n                            'id'   : 'female',\n                        }],\n                        valueProp      : 'id',\n                        labelProp      : 'label',\n                        //icon           : 'ion-ios-body-outline',\n                        //iconPlaceholder: true\n                    }\n                }];\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ActionSheet', ActionSheetFactory);\n\n    function ActionSheetFactory($ionicActionSheet, Camera, $cordovaActionSheet, $q) {\n\n        return {\n            show : show,\n            image: image\n        };\n\n        function image() {\n            var defer = $q.defer();\n            show({\n                title     : 'Choose an option',\n                cancelText: 'Cancel',\n                options   : [{text: 'Photo Library'}, {text: 'Photo'}]\n            }).then(function (option) {\n                var sourceType;\n                if (option === 1) {\n                    sourceType = 'photoLibrary';\n                }\n\n                if (option === 2) {\n                    sourceType = 'camera';\n                }\n                return Camera.getPicture({sourceType: sourceType});\n            }).then(defer.resolve).catch(defer.reject);\n\n            return defer.promise;\n        }\n\n        function show(params) {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                var options = {\n                    title                    : params.title,\n                    buttonLabels             : _.map(params.options, function (item) {return item.text}),\n                    addCancelButtonWithLabel : params.cancelText,\n                    androidEnableCancelButton: true,\n                    androidTheme             : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT\n                };\n\n                $cordovaActionSheet.show(options).then(function (btnIndex) {\n                    if (btnIndex !== 3) {\n                        defer.resolve(btnIndex);\n                    }\n                    defer.reject('cancel');\n                });\n\n            } else {\n                var actionSheet = $ionicActionSheet.show({\n                    buttons      : params.options,\n                    titleText    : params.title,\n                    cancelText   : params.cancelText,\n                    cancel       : function () {\n                        actionSheet();\n                    },\n                    buttonClicked: function (btnIndex) {\n                        actionSheet();\n                        if (btnIndex !== 3) {\n                            defer.resolve(btnIndex);\n                        }\n                        defer.reject('cancel');\n                    }\n                });\n\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Auth', function ($q) {\n\n        var mSessionToken = null;\n        return {\n            getLoggedUser  : getLoggedUser,\n            setSessionToken: setSessionToken,\n            ensureLoggedIn : ensureLoggedIn,\n            recoverPassword: recoverPassword,\n            resetPassword  : resetPassword,\n            logIn          : logIn,\n            logOut         : logOut\n        };\n\n        function getLoggedUser() {\n            return Parse.User.current();\n        }\n\n        function setSessionToken(sessionToken) {\n            mSessionToken = sessionToken;\n        }\n\n        function ensureLoggedIn() {\n            var defer = $q.defer();\n\n            if (mSessionToken === null) {\n                defer.reject('Session token invalid');\n                return defer.promise;\n            }\n\n            if (!Parse.User.current()) {\n                Parse.User.become(mSessionToken).then(defer.resolve, defer.reject);\n            } else {\n                defer.resolve(Parse.User.current());\n            }\n\n            return defer.promise;\n        }\n\n        function recoverPassword(email) {\n            var defer = $q.defer();\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function resetPassword(email) {\n\n            var defer = $q.defer();\n\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logIn(obj) {\n            var defer = $q.defer();\n\n            Parse.User.logIn(obj.username, obj.password, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            Parse.User.logOut().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Camera', CameraFactory);\n\n    function CameraFactory($cordovaCamera, $q) {\n\n        return {\n            getPicture   : getPicture,\n            resizeImage  : resizeImage,\n            toBase64Image: toBase64Image\n        };\n\n        function getPicture(params) {\n\n            var defer = $q.defer();\n            if (window.cordova) {\n                var sourceType = params.sourceType || Camera.PictureSourceType.CAMERA;\n                if (params.sourceType === 'photoLibrary') {\n                    sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n                }\n                if (params.sourceType === 'camera') {\n                    sourceType = Camera.PictureSourceType.CAMERA;\n                }\n\n                var options = {\n                    quality           : 70,\n                    targetWidth       : 800,\n                    targetHeight      : 800,\n                    saveToPhotoAlbum  : false,\n                    correctOrientation: true,\n                    sourceType        : sourceType,\n                    destinationType   : Camera.DestinationType.DATA_URL,\n                    encodingType      : Camera.EncodingType.JPEG,\n                };\n\n                $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n            } else {\n                console.log('Input File');\n                //defer.reject('Unsupported platform');\n\n                var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n                fileInput[0].click();\n                fileInput.on('change', function (evt) {\n                    var tempImage = evt.currentTarget.files[0];\n                    var reader    = new FileReader();\n                    reader.onload = function (evt) {\n                        defer.resolve(evt.target.result);\n                    };\n                    reader.readAsDataURL(tempImage);\n                });\n            }\n\n            return defer.promise;\n        }\n\n        //https://github.com/timkalinowski/PhoneGap-Image-Resizer\n        function toBase64Image(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject, img_path, width || 1, height || 1, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_FACTOR,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n        function resizeImage(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject,  img_path, width || 640, height || 640, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_MIN_PIXEL,\n                pixelDensity : true,\n                storeImage   : false,\n                photoAlbum   : false,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('ConnectMonitor', ConnectMonitorFactory);\n\n    function ConnectMonitorFactory($rootScope, $cordovaNetwork) {\n        \n        return {\n            watch: watch\n        };\n\n        function watch() {\n\n            if (ionic.Platform.isWebView()) {\n                $rootScope.onLine = $cordovaNetwork.isOnline();\n                $rootScope.$apply();\n\n\n                $rootScope.$on('$cordovaNetwork:online', function (event, networkState) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                });\n\n                $rootScope.$on('$cordovaNetwork:offline', function (event, networkState) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                });\n            } else {\n                $rootScope.onLine = navigator.onLine;\n                $rootScope.$apply();\n\n                window.addEventListener('online', function (e) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                }, false);\n\n                window.addEventListener('offline', function (e) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                }, false);\n            }\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('DAO', DAOFactory);\n    function DAOFactory($interval, $q) {\n        var _db;\n        var _tables = [];\n\n        return {\n            init       : init,\n            insert     : insert,\n            query      : query,\n            getLastSync: getLastSync,\n            paginate   : paginate,\n            fetchAll   : fetchAll\n        };\n\n        function init(database) {\n\n            if (!_db) {\n                if (window.sqlitePlugin !== undefined) {\n                    _db = window.sqlitePlugin.openDatabase({\n                        name              : database.name,\n                        location          : 2,\n                        createFromLocation: 1\n                    });\n                } else {\n                    // For debugging in the browser\n                    _db = window.openDatabase(database.name, \"1.0\", \"Database\", 200000);\n                }\n            }\n\n            var _promises = [];\n            angular.forEach(database.tables, function (table) {\n                var columns = [];\n                angular.forEach(table.columns, function (type, name) {\n                    columns.push(name + ' ' + type);\n                });\n                query('DROP TABLE ' + table.name);\n                var _query = 'CREATE TABLE IF NOT EXISTS ' + table.name + ' (' + columns.join(',') + ')';\n                _promises.push(query(_query));\n                _tables.push(table);\n                // console.log(_query);\n                // console.log('Table ' + table.name + ' initialized');\n            });\n\n            return $q.all(_promises);\n        }\n\n        function getLastSync(table, column) {\n            var defer = $q.defer();\n            query(\"SELECT MAX(\" + column + \") as lastSync FROM \" + table)\n                .then(function (data) {\n                    var lastSync = data.rows.item[0].lastSync;\n                    defer.resolve(lastSync);\n                });\n            return defer.promise;\n        }\n\n        function insert(obj) {\n            var defer    = $q.defer();\n            var _columns = [];\n            var _values  = [];\n\n            angular.forEach(obj.columns, function (value, key) {\n                _columns.push(key);\n                if (typeof  value === 'number') {\n                    _values.push(value);\n                } else {\n                    _values.push(\"'\" + value + \"'\");\n                }\n            });\n\n            var _query = \"INSERT OR REPLACE INTO \" + obj.table + \" (\" + _columns.join(',') + \") VALUES (\" + _values.join(',') + \")\"\n            // console.info(_query);\n            query(_query).then(defer.resolve).catch(defer.reject);\n            return defer.promise;\n\n        }\n\n        function query(query, bindings) {\n            bindings  = typeof bindings !== 'undefined' ? bindings : [];\n            var defer = $q.defer();\n\n            _db.transaction(function (transaction) {\n                transaction.executeSql(query, bindings, function (transaction, result) {\n                    // console.log(result);\n                    var results = {\n                        rows: []\n                    };\n                    if (result && result.rows) {\n                        for (var i = 0; i < result.rows.length; i++) {\n                            results.rows.push(angular.copy(result.rows[i]));\n                        }\n                    }\n                    // console.log(results);\n                    defer.resolve(results);\n                }, function (transaction, error) {\n                    console.log(transaction, error);\n                    defer.reject(error);\n                });\n            });\n\n            return defer.promise;\n        }\n\n        function paginate(_table, columns, _where, _join, _order, limit, page) {\n            var defer = $q.defer();\n            if (page === undefined) page = -1;\n            var _columns = columns;\n            var _limit   = limit ? limit : 10;\n            var _query1  = \"SELECT SUM(id) as TOTAL FROM \" + _table + \"  \" + _where;\n            var _query   = \"SELECT \" + _columns + \" FROM \" + _table + \"  \" + _where + \" \" + _join + \" \" + _order + \" LIMIT \" + _limit + \" OFFSET \" + page;\n\n            console.log('query', _query1);\n            console.log('query', _query);\n\n            query(_query1).then(function (data) {\n                var result = {\n                    page : page,\n                    total: data.rows[0].TOTAL,\n                    rows : []\n                };\n\n                query(_query).then(function (data) {\n                    console.log(data);\n\n                    result.rows = data.rows;\n                    defer.resolve(result);\n                });\n            });\n            return defer.promise;\n        }\n\n        function fetchAll(result) {\n            var output = [];\n            for (var i = 0; i < result.rows.length; i++) {\n                output.push(result.rows.item(i));\n            }\n            return output;\n        }\n    }\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('DataUtil', DataUtilFactory);\n\n    function DataUtilFactory() {\n\n        return {\n            parseData: parseData,\n            parseString: parseString,\n            getDate: getDate,\n            formatDate: formatDate,\n            getMonthName: getMonthName,\n            getFirstDay: getFirstDay,\n            getLastDay: getLastDay\n        };\n\n        function parseData(string) {\n            var parts = string.split('-');\n            return new Date(parts[0], parts[1] - 1, parts[2]);\n        }\n\n        function parseString(data) {\n            return new Date(data).toLocaleDateString();\n        }\n\n\n        function getDate() {\n            var data   = new Date();\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function formatDate(milliseconds) {\n            var data   = new Date(milliseconds);\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function getMonthName(data) {\n            var meses = ['Janeiro', 'Feveiro', 'Maro', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\n            return meses[data.getMonth()];\n        }\n\n        function getFirstDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth();\n            return new Date(year, month, 1);\n        }\n\n        function getLastDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth() + 1;\n            return new Date(year, month, 0);\n        }\n\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Dialog', DialogFactory);\n\n    function DialogFactory($cordovaDialogs, $ionicPopup, $q) {\n\n        return {\n            alert  : alert,\n            confirm: confirm\n        };\n\n        function alert(message, title) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.alert(message, title).then(defer.resolve);\n            } else {\n                $ionicPopup.alert({\n                    title   : title,\n                    template: message\n                });\n            }\n            return defer.promise;\n        }\n\n        function confirm(message, title, buttonsText) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.confirm(message, title, buttonsText).then(function (result) {\n                    if (result === 2) {\n                        defer.resolve(true);\n                    }\n                    defer.reject(true);\n                });\n\n            } else {\n                $ionicPopup.confirm({\n                    title   : title,\n                    template: message\n                }).then(function (res) {\n                    if (res) {\n                        defer.resolve(true);\n                    } else {\n                        defer.reject(true);\n                    }\n                });\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').service('Facebook', FacebookFactory);\n\n    function FacebookFactory($q, $facebook, $cordovaFacebook) {\n\n        var facebook = window.cordova ? $cordovaFacebook : $facebook;\n\n        return {\n            getCurrentUser: getCurrentUser,\n            logIn         : logIn,\n            logOut        : logOut,\n            me            : me,\n            invite        : invite,\n            friends       : friends,\n            api           : api,\n            link          : link\n        };\n\n        function getCurrentUser() {\n            var defer = $q.defer();\n            facebook.getLoginStatus().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function logIn() {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaFacebook.login(['public_profile', 'email']).then(defer.resolve, defer.reject);\n\n            } else {\n                Parse.FacebookUtils.logIn(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n            }\n            return defer.promise;\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            $cordovaFacebook.logout().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function me() {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                $cordovaFacebook.api('me?fields=name,first_name,last_name,gender,email', ['public_profile'])\n                                .then(defer.resolve, defer.reject);\n\n            } else {\n                facebook.api('/me', {fields: 'name, first_name, last_name, gender, email'})\n                        .then(function (response) {\n                            if (!response || response.error) {\n                                defer.reject(response.error);\n                            } else {\n                                defer.resolve(response);\n                            }\n                        });\n            }\n\n            return defer.promise;\n        }\n\n        function invite() {\n            var defer = $q.defer();\n            if (window.cordova) {\n                facebook.showDialog({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            } else {\n                facebook.ui({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            }\n            return defer.promise;\n        }\n\n\n        function friends() {\n            var defer = $q.defer();\n            facebook.api('me/friends').then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function api(api) {\n            var defer = $q.defer();\n            facebook.api(api).then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function link(user) {\n            var defer = $q.defer();\n            if (user) {\n                facebook.login(['email']).then(function (response) {\n                    console.log('facebook login', response);\n                    //Pega o Status do Login\n                    var data = new Date(new Date().getTime() + response['authResponse']['expiresIn'] * 1000);\n\n                    console.log(user, response, data);\n\n                    Parse.FacebookUtils.link(user, {\n                        id             : response['authResponse']['userID'],\n                        access_token   : response['authResponse']['accessToken'],\n                        expiration_date: data\n                    }, {\n                        success: function (user) {\n                            // Funo caso tenha logado tanto no face quanto no Parse\n                            console.log('User', user);\n                            user.set('facebook', response['authResponse']['userID']);\n                            user.set('facebookimg', 'https://graph.facebook.com/' + response['authResponse']['userID'] + '/picture?width=250&height=250');\n                            user.set('facebook_complete', Boolean(true));\n                            user.save().then(defer.resolve);\n                        }\n                    });\n                }, defer.resolve);\n            } else {\n                defer.reject('not logged');\n            }\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryActivity', function ($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryActivity', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            feed   : function (params) {\n                return ParseCloud.run('feedActivity', params);\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n                // Order Table\n                if (params.order) {\n                    if (params.order.indexOf('-') < -1) {\n                        query.ascending(params.order);\n                    } else {\n                        query.descending(params.order.replace('-'));\n                    }\n                }\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n\n                }\n\n                query.include('gallery')\n                query.include('user')\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'fromUser', {\n            get: function () {\n                return this.get('fromUser');\n            },\n            set: function (value) {\n                this.set('fromUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'toUser', {\n            get: function () {\n                return this.get('toUser');\n            },\n            set: function (value) {\n                this.set('toUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'gallery', {\n            get: function () {\n                return this.get('gallery');\n            },\n            set: function (value) {\n                this.set('gallery', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryComment', function ($q, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryComment', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            create : function (item) {\n                var defer = $q.defer();\n                new ParseObject().save(item, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                // Order Table\n\n                query.include('user');\n                query.ascending('createdAt');\n                query.equalTo('gallery', params.gallery);\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'text', {\n            get: function () {\n                return this.get('text');\n            },\n            set: function (value) {\n                this.set('text', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Gallery', GalleryFactory);\n\n    function GalleryFactory($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('Gallery', {\n                getStatus: function () {\n                    if (this.isApproved) {\n                        return 'Approved';\n                    } else if (this.isApproved === false) {\n                        return 'Rejected';\n                    } else {\n                        return 'Pending';\n                    }\n                }\n            },\n            {\n                create     : function (item) {\n                    var defer    = $q.defer();\n                    var objPlace = new ParseObject();\n\n                    if (item.address.geo) {\n                        item.location = new Parse.GeoPoint(item.address.geo);\n                    }\n\n                    objPlace.save(item, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                update     : function (item) {\n                    var defer = $q.defer();\n                    item.save(null, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                destroy    : function (item) {\n                    var defer = $q.defer();\n                    item.destroy({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                comments   : function (params) {\n                    return ParseCloud.run('commentGallery', params);\n                },\n                feed       : function (params) {\n                    return ParseCloud.run('feedGallery', params);\n                },\n                follow     : function (params) {\n                    console.log('Follow', params);\n                    return ParseCloud.run('followUser', params);\n                },\n                likeGallery: function (params) {\n                    console.log(params);\n                    return ParseCloud.run('likeGallery', {galleryId: params.galleryId});\n                },\n                get        : function (galleryId) {\n                    var defer = $q.defer();\n                    new Parse.Query(this)\n\n                        .get(galleryId, {\n                            success: defer.resolve,\n                            error  : defer.reject\n                        });\n\n                    return defer.promise;\n                },\n                all        : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    //if (params.filter != '') {\n                    //    query.contains('words', params.filter);\n                    //}\n\n                    // Order Table\n                    if (params.order) {\n                        if (params.order.indexOf('-') < -1) {\n                            query.ascending(params.order);\n                        } else {\n                            query.descending(params.order.replace('-'));\n                        }\n                    }\n\n                    // Status\n                    if (params.status && params.status !== null) {\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    // Limit by page\n                    query.limit(params.limit);\n\n                    // Paginate\n                    query.skip((params.page * params.limit) - params.limit);\n                    query.find({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                count      : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    if (params.filter != '') {\n                        query.contains('words', params.filter);\n                    }\n\n                    if (params.date && params.date !== null) {\n                        var start = moment(params.date).startOf('day');\n                        var end   = moment(params.date).endOf('day');\n                        query.greaterThanOrEqualTo('createdAt', start.toDate());\n                        query.lessThanOrEqualTo('createdAt', end.toDate());\n                    }\n\n                    if (params.status && params.status !== null) {\n\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    query.count({\n                        success: function (count) {\n                            defer.resolve(count);\n                        },\n                        error  : function (error) {\n                            defer.reject(error);\n                        }\n                    });\n\n                    return defer.promise;\n                }\n            });\n\n        Object.defineProperty(ParseObject.prototype, 'likesTotal', {\n            get: function () {\n                return this.get('likesTotal');\n            },\n            set: function (value) {\n                this.set('likesTotal', value);\n            }\n        });\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GalleryFeedback', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GalleryFeedback', {\n      getStatus: function () {\n        if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n        item.user    = Parse.User.current();\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n\n        }\n\n        query.include('gallery')\n        query.include('User')\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        // Order Table\n        if (params.order) {\n          if (params.order.indexOf('-') < -1) {\n            query.ascending(params.order);\n          } else {\n            query.descending(params.order.replace('-'));\n          }\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n        }\n\n        query.count({\n          success: function (count) {\n            defer.resolve(count);\n          },\n          error  : function (error) {\n            defer.reject(error);\n          }\n        });\n\n        return defer.promise;\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'user', {\n      get: function () {\n        return this.get('user');\n      },\n      set: function (value) {\n        this.set('user', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'subject', {\n      get: function () {\n        return this.get('subject');\n      },\n      set: function (value) {\n        this.set('subject', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'title', {\n      get: function () {\n        return this.get('title');\n      },\n      set: function (value) {\n        this.set('title', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'hashtags', {\n      get: function () {\n        return this.get('hashtags');\n      },\n      set: function (value) {\n        this.set('hashtags', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'words', {\n      get: function () {\n        return this.get('words');\n      },\n      set: function (value) {\n        this.set('words', value);\n      }\n    });\n\n\n    Object.defineProperty(ParseObject.prototype, 'isApproved', {\n      get: function () {\n        return this.get('isApproved');\n      },\n      set: function (value) {\n        this.set('isApproved', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n      get: function () {\n        return this.get('expiresAt');\n      },\n      set: function (value) {\n        this.set('expiresAt', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GallerySetting', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GallerySetting', {\n      getStatus: function () {\n        if (moment().toDate() >= this.expiresAt) {\n          return 'Expired';\n        }\n        else if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('canonical', params.filter);\n        }\n\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        query.count({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      }\n\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'key', {\n      get: function () {\n        return this.get('key');\n      },\n      set: function (value) {\n        this.set('key', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'value', {\n      get: function () {\n        return this.get('value');\n      },\n      set: function (value) {\n        this.set('value', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Geolocation', GeolocationFactory);\n\n    function GeolocationFactory($ionicPlatform, $q) {\n        return {\n            getCurrentPosition: getCurrentPosition\n        };\n\n        function getCurrentPosition($cordovaGeolocation) {\n            var defer = $q.defer();\n\n            $ionicPlatform.ready(function () {\n                var options = {\n                    maximumAge        : 3000,\n                    timeout           : 1000,\n                    enableHighAccuracy: true\n                };\n\n                var options = {timeout: 10000, enableHighAccuracy: true};\n\n                if (navigator.geolocation) {\n                    navigator.geolocation.getCurrentPosition(\n                        function(position) {\n                            // Get current cordinates.\n                            console.log(position);\n                            defer.resolve(position);\n                        },\n                        function(error) {\n                            defer.reject(error);\n                        },\n                        {timeout: 30000, enableHighAccuracy: true, maximumAge: 75000}\n                    );\n                }\n                \n                //$cordovaGeolocation.getCurrentPosition(options).then(defer.resolve).catch(defer.reject);\n\n                //navigator.geolocation.getCurrentPosition(\n                //    defer.resolve,\n                //    defer.reject,\n                //    options);\n            });\n\n            return defer.promise;\n        }\n    }\n\n})();\n(function () {\n  'use strict';\n  angular.module('starter').factory('GoogleAnalytics', GoogleAnalyticsFactory);\n\n  function GoogleAnalyticsFactory($cordovaGoogleAnalytics) {\n    var TAG      = 'AnalyticsService';\n    var canTrack = false;\n    return {\n      init          : init,\n      trackView     : trackView,\n      trackEvent    : trackEvent,\n      trackException: trackException\n    };\n\n    function init(trackingId) {\n      if (trackingId !== null && trackingId !== '' && window.cordova) {\n        $cordovaGoogleAnalytics.debugMode();\n        $cordovaGoogleAnalytics.startTrackerWithId(trackingId);\n        canTrack = true;\n      } else {\n        console.warn('[' + TAG + ']: Invalid Tracker ID or not using emulator');\n      }\n    }\n\n    function trackEvent(category, action, label) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackEvent(category, action, label);\n      }\n    }\n\n    function trackView(viewName) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackView(viewName);\n      }\n    }\n\n    function trackException(description, isFatal) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackException(description, isFatal)\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Install', InstallFactory);\n\n    function InstallFactory(ParseCloud) {\n        return {\n            start : start,\n            status: status,\n        };\n\n        function start(data) {\n            return ParseCloud.run('install', data);\n        }\n\n        function status(data) {\n            return ParseCloud.run('status', data);\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('OneSignal', OneSignalFactory);\n\n    function OneSignalFactory($q) {\n\n        return {\n            init: init\n        };\n\n        function init(id, google) {\n            var defer = $q.defer();\n\n            if (window.cordova.OneSignal) {\n                // Enable to debug issues.\n                window.plugins.OneSignal.setLogLevel({\n                    logLevel   : 4,\n                    visualLevel: 4\n                });\n\n                // Update with your OneSignal AppId and googleProjectNumber before running.\n                window.plugins.OneSignal.init(id, {googleProjectNumber: google}, function (jsonData) {\n                     alert(\"Notification received:\\n\" + JSON.stringify(jsonData));\n\n                });\n\n                window.plugins.OneSignal.enableInAppAlertNotification(true);\n            } else {\n                defer.reject('OneSignal plugin istalled');\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ParseCloud', ParseCloudFactory);\n\n    function ParseCloudFactory($q) {\n        return {\n            run: run\n        };\n\n        function run(action, data) {\n            var defer = $q.defer();\n            Parse.Cloud.run(action, data, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('ParseFile', function ($q) {\n    return {\n      upload: upload\n    };\n\n    function upload(file, ext) {\n      var defer = $q.defer();\n      var filename = 'file.jpg';\n\n      if (ext) {\n        filename.replace('.jpg', ext);\n      }\n      \n      new Parse.File(filename, file)\n        .save({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n      return defer.promise;\n    }\n  });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Share', PhotogramShareFactory);\n\n    function PhotogramShareFactory(AppConfig, $q, $translate, $window) {\n\n        var options = {\n            title  : $translate.instant('Join me from ') + AppConfig.app.name + '!',\n            subject: $translate.instant(\"I'm at \") + AppConfig.app.name + '!. ' + (\n                'Install the application and follow me!') + ' ' + AppConfig.app.url,\n            image  : AppConfig.app.image,\n            link   : AppConfig.app.url\n        };\n\n        return {\n            open: open\n        };\n\n        function open(image, title) {\n            var defer = $q.defer();\n\n            if (image) {\n                options.image = image;\n            }\n\n            if (title) {\n                options.title = title;\n            }\n\n            $window.plugins.socialsharing.shareWithOptions(options, defer.success, defer.reject);\n\n            return defer.promise;\n        }\n\n    }\n})();\n\n(function () {\n  'use strict';\n\n  angular.module('starter').factory('Toast', ToastFactory);\n\n  function ToastFactory($cordovaToast, $ionicPopup) {\n\n    return {\n      alert  : alert,\n      confirm: confirm\n    };\n\n    function alert(params) {\n      if (window.cordova) {\n        $cordovaToast.show(params.text, 'short', 'bottom');\n      } else {\n        $ionicPopup.alert({\n          title   : params.title,\n          template: params.text,\n          okType  : 'button button-clear button-assertive',\n        });\n      }\n    }\n\n    function confirm(title, msg) {\n      return $ionicPopup.confirm({\n        title   : title,\n        template: msg\n      });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('User', UserFactory);\n\n    function UserFactory($q, $cordovaDevice, ParseCloud) {\n\n        var User = Parse.User.extend({}, {\n            profile               : function (username) {\n                return ParseCloud.run('profile', {username: username})\n            },\n            list                  : function (params) {\n                return ParseCloud.run('listUsers',params)\n            },\n            getFollowers          : function (username) {\n                return ParseCloud.run('getFollowers', {username: username})\n            },\n            getLikers             : function (galleryId) {\n                return ParseCloud.run('getLikers', {galleryId: galleryId})\n            },\n            getFollowing          : function (username) {\n                return ParseCloud.run('getFollowing', {username: username})\n            },\n            signIn                : function (obj) {\n                var defer = $q.defer();\n\n                Parse.User.logIn(obj.username, obj.password, {\n                    success: function (currentUser) {\n\n                        // device\n                        var device;\n                        if (window.cordova) {\n                            device = {\n                                device  : $cordovaDevice.getDevice(),\n                                cordova : $cordovaDevice.getCordova(),\n                                model   : $cordovaDevice.getModel(),\n                                platform: $cordovaDevice.getPlatform(),\n                                uuid    : $cordovaDevice.getUUID(),\n                                version : $cordovaDevice.getVersion()\n                            };\n                        } else {\n                            device = {\n                                device  : {device: window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[0]},\n                                cordova : '',\n                                model   : window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[0],\n                                platform: window.navigator.platform,\n                                uuid    : '',\n                                version : window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[1]\n                            };\n                        }\n\n                        console.log(currentUser);\n                        console.log(device);\n\n                        User.update(device).then(function () {\n                            defer.resolve(currentUser);\n                        }).catch(defer.reject)\n\n                        console.log('updateUser', device);\n                        //user.save(defer.resolve, defer.reject);\n                    },\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            signUp                : function (data) {\n                var defer = $q.defer();\n                var user  = new Parse.User()\n                    .set({'name': data.name})\n                    .set({'username': data.username})\n                    .set({'email': data.email})\n                    .set({'password': data.password})\n                    .set({'roleName': 'User'});\n\n                var acl = new Parse.ACL();\n                acl.setPublicReadAccess(false);\n                acl.setPublicWriteAccess(false);\n                user.setACL(acl);\n                user.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            signInViaFacebook     : function (authData) {\n                var defer      = $q.defer();\n                var expiration = new Date();\n                expiration.setSeconds(expiration.getSeconds() + authData.authResponse.expiresIn);\n                expiration = expiration.toISOString();\n\n                var facebookAuthData = {\n                    'id'             : authData.authResponse.userID,\n                    'access_token'   : authData.authResponse.accessToken,\n                    'expiration_date': expiration\n                };\n                Parse.FacebookUtils.logIn(facebookAuthData, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            logOut                : function () {\n                var defer = $q.defer();\n                Parse.User.logOut().then(defer.resolve, defer.reject);\n                return defer.promise;\n            },\n            findByEmail           : function (email) {\n                return ParseCloud.run('findUserByEmail', {email: email});\n            },\n            updateWithFacebookData: function (data) {\n                var defer = $q.defer();\n                ParseCloud.run('saveFacebookPicture', {}).then(function () {\n                    var user = Parse.User.current();\n                    user.set({'email': data.email});\n                    user.set({'username': data.email});\n                    user.set({'name': data.name});\n                    user.setACL(new Parse.ACL(user));\n                    user.save(null, {\n                        success: function () {\n                            user.fetch().then(function (userFetched) {\n                                defer.resolve(userFetched);\n                            }, function (error) {\n                                defer.reject(error);\n                            });\n                        }\n                    });\n                }).catch(defer.reject);\n                return defer.promise;\n            },\n            getPublicData         : function (user) {\n                console.log(user);\n                var defer = $q.defer();\n                new Parse.Query('UserData').equalTo('user', user).first().then(function (userData) {\n                    if (userData) {\n                        defer.resolve(userData);\n                    } else {\n                        defer.reject(Parse.Promise.error({\n                            code   : 1,\n                            message: 'User Data not found'\n                        }));\n                    }\n                }, defer.reject);\n                return defer.promise;\n            },\n            recoverPassword       : function (email) {\n                var defer = $q.defer();\n                Parse.User.requestPasswordReset(email, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy               : function () {\n                var defer = $q.defer();\n                Parse.User.current().destroy().then(defer.resolve, defer.reject);\n                return defer.promise;\n            },\n            setPhoto              : function (parseFile) {\n                var defer = $q.defer();\n                var user  = Parse.User.current();\n                user.set({'photo': parseFile});\n                user.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            follow                : function (userId) {\n                return ParseCloud.run('followUser', {userId: userId});\n            },\n            all                   : function (params) {\n                return ParseCloud.run('getUsers', params);\n            },\n            validateUsername      : function (input) {\n                return ParseCloud.run('validateUsername', {username: input});\n            },\n            validateEmail         : function (input) {\n                return ParseCloud.run('validateEmail', {email: input});\n            },\n            findUsername          : function (username) {\n                var defer = $q.defer();\n                new Parse.Query(this).equalTo('username', username).first({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            update                : function (params) {\n                var defer = $q.defer();\n                var user  = Parse.User.current();\n                angular.forEach(params, function (value, key) {\n                    user.set(key, value);\n                });\n                user.save({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            delete                : function (data) {\n                return ParseCloud.run('destroyUser', data);\n            },\n            fetch                 : function () {\n                var defer = $q.defer();\n                if (Parse.User.current()) {\n                    Parse.User.current().fetch().then(defer.resolve, defer.reject);\n                } else {\n                    defer.reject();\n                }\n                return defer.promise;\n            }\n\n        });\n\n        Object.defineProperty(User.prototype, 'name', {\n            get: function () {\n                return this.get('name');\n            },\n            set: function (val) {\n                this.set('name', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'username', {\n            get: function () {\n                return this.get('username');\n            },\n            set: function (val) {\n                this.set('username', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'status', {\n            get: function () {\n                return this.get('status');\n            },\n            set: function (val) {\n                this.set('status', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'gender', {\n            get: function () {\n                return this.get('gender');\n            },\n            set: function (val) {\n                this.set('gender', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'email', {\n            get: function () {\n                return this.get('email');\n            },\n            set: function (val) {\n                this.set('email', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photo', {\n            get: function () {\n                return this.get('photo');\n            },\n            set: function (val) {\n                this.set('photo', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photoThumb', {\n            get: function () {\n                return this.get('photoThumb');\n            },\n            set: function (val) {\n                this.set('photoThumb', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'roleName', {\n            get: function () {\n                return this.get('roleName');\n            },\n            set: function (val) {\n                this.set('roleName', val);\n            }\n        });\n\n        return User;\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name modalLanguage\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict A\n     * */\n\n    var path = 'app/component/ion-language';\n\n    angular\n        .module('ion-language')\n        .directive('ionLanguage', ionLanguageDirective);\n\n    function ionLanguageDirective(AppConfig, $translate, $timeout, Loading, $ionicModal) {\n        return {\n            restrict: 'E',\n            link: modalLanguageLink,\n            templateUrl: path + '/ion-language.html'\n        };\n\n        function modalLanguageLink(scope, elem, attr) {\n\n\n            scope.languages = AppConfig.locales;\n            scope.language  = scope.languages.filter(function (item) {\n                return item.code === $translate.use()\n            })[0];\n\n            console.log(scope.language);\n\n            elem.bind('click', openModal);\n\n            function openModal() {\n\n                window.StatusBar.styleDefault();\n\n                scope.closeModal = function () {\n                    scope.modal.hide();\n                    // scope.modal.remove();\n                    window.StatusBar.styleLightContent();\n                };\n\n\n                scope.searchValue = '';\n\n                scope.selectLanguage = function (language) {\n                    console.log(language);\n                    $translate.use(language.code);\n                    moment.locale(language.code);\n                    scope.language = language;\n                    Loading.start();\n                    scope.closeModal();\n                    $timeout(function () {\n                        Loading.end();\n                    }, 1000);\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/modal-language.html', {\n                        scope: scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n\n                    });\n            }\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n\n    angular\n        .module('ion-location')\n        .factory('GeoService', GeoServiceFactory);\n\n    function GeoServiceFactory($http, $window, $cordovaGeolocation, $ionicPopup, $timeout, $q) {\n\n        /**\n         'street_address', //indicates a precise street address.\n         'route', //indicates a named route (such as \"US 101\").\n         'intersection', //indicates a major intersection, usually of two major roads.\n         'political', //indicates a political entity. Usually, this type indicates a polygon of some civil administration.\n         'country', //indicates the national political entity, and is typically the highest order type returned by the Geocoder.\n         'administrative_area_level_1', //indicates a first-order civil entity below the country level. Within the United States, these administrative levels are states. Not all nations exhibit these administrative levels.\n         'administrative_area_level_2', //indicates a second-order civil entity below the country level. Within the United States, these administrative levels are counties. Not all nations exhibit these administrative levels.\n         'administrative_area_level_3', //indicates a third-order civil entity below the country level. This type indicates a minor civil division. Not all nations exhibit these administrative levels.\n         'colloquial_area', //indicates a commonly-used alternative name for the entity.\n         'locality', //indicates an incorporated city or town political entity.\n         'sublocality', //indicates an first-order civil entity below a locality\n         'neighborhood', //indicates a named neighborhood\n         'premise', //indicates a named location, usually a building or collection of buildings with a common name\n         'subpremise', //indicates a first-order entity below a named location, usually a singular building within a collection of buildings with a common name\n         'postal_code', //indicates a postal code as used to address postal mail within the country.\n         'natural_feature', //indicates a prominent natural feature.\n         'airport', //indicates an airport.\n         'park', //indicates a named park.\n         'point_of_interest', //indicates a named point of interest. Typically, these \"POI\"s are prominent local entities that don't easily fit in another category such as \"Empire State Building\" or \"Statue of Liberty.\"\n\n         //In addition to the above, address components may exhibit the following types:\n\n         'post_box', //indicates a specific postal box.\n         'street_number', //indicates the precise street number.\n         'floor indicates', //the floor of a building address.\n         'room indicates'; //the room of a building address.'\n         */\n        var options             = {\n            types: ['geocode']\n        };\n        var autocompleteService = new $window.google.maps.places.AutocompleteService();\n        var detailsService      = new $window.google.maps.places.PlacesService($window.document.createElement('input'),\n            options);\n        var componentForm       = {\n            street_number              : 'long_name',\n            //number\n            route                      : 'long_name',\n            //street\n            locality                   : 'long_name',\n            // district\n            sublocality                : 'long_name',\n            // district\n            neighborhood               : 'long_name',\n            //state\n            political                  : 'long_name',\n            //state\n            administrative_area_level_1: 'long_name',\n            //state\n            country                    : 'long_name',\n            //country\n            postal_code                : 'long_name' //zipcode\n        };\n        var componentFormName   = {\n            street_number              : 'number',\n            //number\n            route                      : 'street',\n            //street\n            locality                   : 'city',\n            // district\n            administrative_area_level_1: 'state',\n            //state\n            country                    : 'country',\n            //country\n            postal_code                : 'zipcode',\n            //zipcode\n            neighborhood               : 'district' //zipcode\n        };\n\n        var data = {\n            coords: {},\n            src   : ''\n        };\n\n\n        return {\n            src          : src,\n            getDetails   : getDetails,\n            searchAddress: searchAddress,\n            parseAddress : parseAddress,\n            findMe       : findMe\n        };\n\n        function getLocation() {\n            // Pega a Localizao da Pessoa\n            var defer = $q.defer();\n\n            if (data.location) {\n                $timeout(function () {\n                    defer.resolve(data.location);\n                }, 1000);\n            } else {\n                var posOptions = {\n                    timeout           : 10000,\n                    enableHighAccuracy: false\n                };\n                $cordovaGeolocation.getCurrentPosition(posOptions).then(function (position) {\n                    // console.log('Fez a requisio', position);\n                    data.location = {\n                        latitude : position.coords.latitude,\n                        longitude: position.coords.longitude\n                    };\n                    defer.resolve(data.location);\n                }, function (err) {\n                    // error\n                    // console.log('Error na geolocalizao', err);\n                    $ionicPopup.alert({\n                        title   : 'Geo Error',\n                        template: err.message\n                    });\n                    defer.reject(err);\n                });\n            }\n\n\n            return defer.promise;\n        }\n\n\n        function findMe() {\n            var defer = $q.defer();\n\n            getLocation().then(function (pos) {\n                console.log(pos);\n                getGoogleAddress(pos.latitude, pos.longitude).success(function (resp) {\n                    resp.geolocation = pos;\n                    console.log(resp);\n                    defer.resolve(resp);\n                }).error(logErr);\n            });\n            return defer.promise;\n        }\n\n\n        function logErr(error) {\n            console.log(error);\n        }\n\n        function getGoogleAddress(lat, lng) {\n            return $http.get('http://maps.google.com/maps/api/geocode/json?latlng=' + lat + ',' + lng + '&sensor=true')\n                        .success(function (data) {\n                            data.address_normal = data.results[0].formatted_address;\n                            data.address        = address(data.results[0].address_components);\n                            data.src            = imagem(lat, lng, 18, 500, 300);\n                        });\n        }\n\n        function address(data) {\n            if (!data) {\n                return false;\n            } else {\n                return {\n                    numero  : data[0].short_name,\n                    rua     : data[1].long_name,\n                    bairro  : data[2].short_name,\n                    cidade  : data[3].short_name,\n                    estado  : data[5].long_name,\n                    uf      : data[5].short_name,\n                    pais    : data[6].long_name,\n                    paisCode: data[6].short_name,\n                    cep     : data[7].short_name\n                };\n            }\n\n        }\n\n        function imagem(lat, lng, zoom, w, h) {\n            return 'http://maps.google.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom + '&size=' +\n                w + 'x' + h + '&maptype=roadmap&sensor=true';\n        }\n\n        function parseAddress(place) {\n            var defer = $q.defer();\n            console.log('parseAddress', place);\n            if(!place) {\n                defer.reject('not place')\n            }\n            var address = {\n                resume: '',\n                geo   : {\n                    latitude : place.geometry.location.lat(),\n                    longitude: place.geometry.location.lng()\n                }\n            };\n            var image   = src(address.geo.latitude, address.geo.longitude, 16, 900, 200);\n\n            for (var i = 0; i < place.address_components.length; i++) {\n                var addressType = place.address_components[i].types[0];\n                if (componentForm[addressType]) {\n                    var val                                 = place.address_components[i][componentForm[addressType]];\n                    address[componentFormName[addressType]] = val;\n                }\n            }\n            address.name   = place.name;\n            address.street = address.street + ', ' + address.number;\n            address.image  = image;\n            address.resume = address.street + ' - ' + address.city + ', ' + address.state + ', ' + address.country;\n            defer.resolve(address);\n\n            return defer.promise;\n        }\n\n        function searchAddress(input) {\n            var deferred = $q.defer();\n            autocompleteService.getQueryPredictions({\n                input: input\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function getDetails(placeId) {\n            var deferred = $q.defer();\n            detailsService.getDetails({\n                placeId: placeId\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function src(lat, lng, zoom, w, h) {\n            console.log('src latitude', lat, lng, zoom, w, h);\n\n            var link = 'http://maps.googleapis.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom +\n                '&scale=1&size=' + w + 'x' + h +\n                '&maptype=roadmap&format=jpg&visual_refresh=true&markers=size:small%7Ccolor:0xff2600%7Clabel:0%7C' + lat +\n                ',' + lng + '&sensor=true';\n            console.log(link);\n            return link;\n        }\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-location').directive('ionLocation', ionLocationDirective);\n\n    function ionLocationDirective($ionicModal, GeoService) {\n        return {\n            restrict: 'A',\n            scope   : {\n                location: '=ngModel'\n            },\n            link    : ionLocationLink\n        };\n\n        function ionLocationLink($scope, element) {\n\n\n            element.bind('click', function () {\n                function init() {\n                    $scope.search             = {};\n                    $scope.search.suggestions = [];\n                    $scope.search.query       = '';\n                }\n\n\n                function selectPlace(place_id) {\n                    GeoService.getDetails(place_id).then(function (location) {\n                        GeoService.parseAddress(location).then(function (address) {\n                            console.log(address);\n                            $scope.location = address;\n                            $scope.closeModalLocation();\n                        })\n                    });\n                }\n\n                init();\n\n                $scope.findMe = function () {\n                    $scope.loading = true;\n                    GeoService.findMe().then(function (location) {\n                        GeoService.searchAddress(location.address_normal).then(function (result) {\n                            console.log(result);\n                            $scope.search.suggestions = result;\n                            $scope.loading            = false;\n                        });\n                    });\n                };\n\n                $scope.findMe();\n\n                $scope.choosePlace = function (place) {\n                    selectPlace(place.place_id);\n                }\n\n                $scope.modalLocation = $ionicModal.fromTemplate('<ion-modal-view>' +\n                    '<ion-header-bar class=\"bar bar-light item-input-inset\">' +\n                    '<ion-spinner ng-if=\"loading\"></ion-spinner>' +\n                    '<button class=\"button button-clear button-icon ion-navigate\" ng-click=\"findMe()\" ng-hide=\"loading\"></button>' +\n                    '<label class=\"item-input-wrapper\">' +\n                    '<input type=\"search\" ng-model=\"search.query\" ng-model-options=\"{ debounce: 1500 }\" placeholder=\"{{ \\'searchText\\' | translate }}\"></label>' +\n                    '<button class=\"button button-clear\" ng-click=\"closeModalLocation()\" translate=\"cancel\"></button>' +\n                    '</ion-header-bar>' +\n                    '<ion-content padding=\"false\">' +\n                    '<ion-list>' +\n                    '<div class=\"center padding\" ng-if=\"loading1\"><ion-spinner ></ion-spinner></div>' +\n                    '<ion-item ng-repeat=\"suggestion in search.suggestions\" ng-click=\"choosePlace(suggestion)\" ng-bind=\"suggestion.description\"></ion-item>' +\n                    '<ion-item class=\"item-divider\"><img src=\"https://developers.google.com/maps/documentation/places/images/powered-by-google-on-white.png\"alt=\"\"/></ion-item>' +\n                    '</ion-list>' +\n                    '</ion-content>' +\n                    '</ion-modal-view>', {\n                        scope          : $scope,\n                        focusFirstInput: true\n                    }\n                );\n\n                $scope.modalLocation.show();\n\n                $scope.closeModalLocation = function () {\n                    $scope.modalLocation.hide();\n                    $scope.modalLocation.remove();\n                };\n\n                $scope.$watch('search.query', function (newValue) {\n                    if (newValue) {\n                        $scope.loading1           = true;\n                        $scope.search.suggestions = [];\n                        GeoService.searchAddress(newValue).then(function (result) {\n                            console.log(result);\n                            $scope.search.suggestions = result;\n                            $scope.loading1           = false;\n                        });\n                    }\n                });\n\n\n            });\n\n        }\n    }\n})();\n\n(function () {\n\n    angular.module('app.main').factory('FeedbackModal', FeedbackModalFactory);\n\n    function FeedbackModalFactory($q, AppConfig, GalleryFeedback, $rootScope, GalleryFeedbackForm, $ionicModal, Toast) {\n        var path = AppConfig.path;\n\n        return {\n            modal: modal\n        };\n        function modal(gallery) {\n            var $scope            = $rootScope.$new();\n            $scope.formFields     = GalleryFeedbackForm.form;\n            $scope.submitFeedback = submitFeedback;\n            $scope.closeModal     = closeModal;\n            $scope.form           = {\n                photogramId: gallery.id,\n                subject    : 'complaint'\n            };\n\n            function submitFeedback() {\n                var dataForm = angular.copy($scope.form);\n                GalleryFeedback.create(dataForm).then(function (resp) {\n                    closeModal();\n                });\n            }\n\n\n            function closeModal() {\n                $scope.modal.hide();\n                $scope.modal.remove();\n                delete $scope.modal;\n            }\n\n            $ionicModal\n                .fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                })\n                .then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n        }\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('GalleryFeedbackForm', GalleryFeedbackFormFactory);\n\n    function GalleryFeedbackFormFactory($translate) {\n\n        var form = [{\n            key: 'title',\n            type: 'input',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('FEEDBACK.TITLE'),\n                required: true\n            }\n        }, {\n            key: 'subject',\n            type: 'select',\n            templateOptions: {\n                label: $translate.instant('FEEDBACK.SUBJECT'),\n                options: [{\n                    'label': $translate.instant('FEEDBACK.COMPLAINT'),\n                    'id': 'complaint',\n                }, {\n                    'label': $translate.instant('FEEDBACK.BUG'),\n                    'id': 'bug',\n                }, {\n                    'label': $translate.instant('FEEDBACK.SUGGESTION'),\n                    'id': 'suggestion',\n                }],\n                valueProp: 'id',\n                labelProp: 'label',\n                icon: 'icon-list',\n                iconPlaceholder: true\n            }\n        }, {\n            key: 'status',\n            type: 'textarea',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('FEEDBACK.MESSAGE'),\n                icon: 'ion-quote',\n                required: true,\n                iconPlaceholder: true\n            }\n        }];\n\n        return {\n            form: form\n        };\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular.module('app.main').directive('feedback', feedbackDirective);\n\n  function feedbackDirective($ionicModal, AppConfig, PhotogramFeedback, PhotogramFeedbackForm, $state) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '@'\n      },\n      template: '',\n      link: function (scope, elem, attr) {\n\n        scope.link = link;\n        scope.submitFeedback = submitFeedback;\n        scope.closeModal = closeModal;\n        elem.bind('click', openModal);\n\n        function init() {\n          scope.form = {\n            photogramId: scope.photogram\n          };\n          scope.formFields = PhotogramFeedbackForm.form;\n        }\n\n        function openModal() {\n\n          init();\n          $ionicModal.fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n              scope: scope,\n              focusFirstInput: true\n            })\n            .then(function (modal) {\n              scope.modal = modal;\n              scope.modal.show();\n            });\n        }\n\n        function link(sref) {\n          $state.go(sref)\n          scope.closeModal();\n        }\n\n        function submitFeedback() {\n          var dataForm = angular.copy(scope.form);\n          PhotogramFeedback\n            .submit(dataForm)\n            .then(function (resp) {\n              console.log(resp);\n              init();\n              scope.closeModal();\n            });\n        }\n\n\n        function closeModal() {\n          scope.modal.hide();\n          scope.modal.remove();\n        }\n\n      }\n    };\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').controller('GalleryComment', GalleryCommentController);\n\n    function GalleryCommentController($scope, $stateParams, $q, $ionicScrollDelegate, $ionicHistory, Loading, $ionicPopup, User, Dialog, $timeout, Gallery, GalleryComment, GalleryForm) {\n\n        $scope.currentUser = Parse.User.current();\n\n        function init() {\n            $scope.nocomments = false;\n            $scope.loading    = false;\n            Gallery.get($stateParams.galleryId).then(function (gallery) {\n                $scope.form = {\n                    gallery: gallery,\n                    text   : ''\n                };\n            });\n        }\n\n        $scope.backButton = function () {\n            $ionicHistory.goBack();\n        };\n\n        init();\n\n        $scope.loading       = true;\n        $scope.formFields    = GalleryForm.formComment;\n        $scope.submitComment = submitComment;\n        $scope.deleteComment = deleteComment;\n        $scope.editComment   = editComment;\n\n        getComments();\n\n        //Mentios\n        // shows the use of dynamic values in mentio-id and mentio-for to link elements\n        $scope.myIndexValue = \"5\";\n\n\n        $scope.searchPeople = function (term) {\n            var peopleList = [];\n            return User.getFollowing().then(function (response) {\n                _.each(response, function (item) {\n                    item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                    item.bio      = item.status;\n                    if(item.name) {\n                        if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                            peopleList.push(item);\n                        }\n                    } else {\n                        item.name = 'Not name';\n                        peopleList.push(item);\n                    }\n                });\n                $scope.people = peopleList;\n                console.log(peopleList);\n                return $q.when(peopleList);\n            });\n        };\n\n        $scope.getPeopleTextRaw = function (item) {\n            return '@' + item.username;\n        };\n\n\n        function deleteComment(obj) {\n            console.log(obj);\n            Dialog.confirm(('Delete comment'), ('You are sure?')).then(function (resp) {\n                console.log(resp);\n                if (resp) {\n                    GalleryComment.destroy(obj).then(function (resp) {\n                        console.log(resp);\n                        getComments();\n                    });\n                }\n            });\n        }\n\n        function editComment(obj) {\n            console.log(obj);\n            // An elaborate, custom popup\n            $scope.data = angular.copy(obj);\n            $ionicPopup\n                .show({\n                    template: '<input type=\"text\" ng-model=\"data.text\">',\n                    title   : ('Edit comment'),\n                    //subTitle: 'Please use normal things',\n                    scope   : scope,\n                    buttons : [{\n                        text: ('Cancel')\n                    }, {\n                        text : '<b>OK</b>',\n                        type : 'button-positive',\n                        onTap: function (e) {\n                            console.log($scope.data);\n                            if (!$scope.data.text) {\n                                //don't allow the user to close unless he enters wifi password\n                                e.preventDefault();\n                            } else {\n                                return $scope.data;\n                            }\n                        }\n                    }]\n                })\n                .then(function (resp) {\n                    console.log(resp);\n                    if (resp) {\n                        GalleryComment.update(resp)\n                                      .then(function (resp) {\n                                          console.log(resp);\n                                          getComments();\n                                      });\n                    }\n                });\n        }\n\n        function getComments() {\n            $scope.loading = true;\n\n\n            Gallery.comments({galleryId: $stateParams.galleryId}).then(function (resp) {\n                $scope.comments = resp;\n                $scope.loading  = false;\n                $ionicScrollDelegate.scrollBottom();\n            });\n        }\n\n        function submitComment(rForm, form) {\n            if (rForm.$valid) {\n                var dataForm = angular.copy(form);\n                console.log(dataForm);\n                Loading.start();\n                GalleryComment.create(dataForm).then(function (resp) {\n                    init();\n                    Loading.end();\n                });\n            }\n        }\n\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('LoadingCtrl', LoadingController);\n\n    function LoadingController($scope, $rootScope, $ionicPlatform, $cordovaSplashscreen, AppConfig, $state) {\n        var user  = $rootScope.currentUser;\n        var intro = window.localStorage['walkthrough'];\n\n        if (intro !== 'true') {\n            $state.go('walkthrough', {clear: true});\n        } else {\n            if (user) {\n                console.log(user);\n                if (user.name) {\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                } else {\n                    $state.go('user.avatar', {\n                        clear: true\n                    });\n                }\n            } else {\n                $state.go(AppConfig.routes.login, {\n                    clear: true\n                });\n            }\n        }\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                }\n            });\n        });\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('ProfileCtrl', ProfileController);\n\n    function ProfileController(User, $state, $stateParams) {\n        var vm       = this;\n        vm.changeTab = changeTab;\n\n        vm.loading = true;\n        User.profile($stateParams.username).then(function (data) {\n            console.log(data);\n            console.log(Parse.User.current());\n            vm.isMe    = Parse.User.current().id === data.id ? true : false;\n            vm.user    = data;\n            vm.loading = false;\n        });\n\n        vm.openFollowers = function () {\n            console.log($state, $stateParams);\n            switch ($state.current.name) {\n                case 'tab.homeProfile':\n                    $state.go('tab.homeProfileFollowers', {username: $stateParams.username});\n                    break;\n                case 'tab.activityProfile':\n                    $state.go('tab.activityProfileFollowers', {username: $stateParams.username});\n                    break;\n            }\n        };\n\n        vm.openFollowing = function () {\n            console.log($state, $stateParams);\n            switch ($state.current.name) {\n                case 'tab.homeProfile':\n                    $state.go('tab.homeProfileFollowing', {username: $stateParams.username});\n                    break;\n                case 'tab.activityProfile':\n                    $state.go('tab.activityProfileFollowing', {username: $stateParams.username});\n                    break;\n            }\n        };\n\n        vm.follow = function () {\n\n            vm.loadingFollow = true;\n\n\n            User.follow(vm.user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                vm.user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    vm.user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    vm.user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n\n        init();\n        changeTab('grid');\n\n        function changeTab(tab) {\n            if (tab === 'list') {\n                vm.tab = {\n                    list: true,\n                    grid: false\n                };\n            } else {\n                vm.tab = {\n                    list: false,\n                    grid: true\n                };\n            }\n        }\n\n        function init() {\n            vm.data  = {\n                total    : false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('MainTabCtrl', MainTabController);\n\n    function MainTabController($localStorage, $scope, PhotoService, User, $cordovaSplashscreen, $ionicPlatform, ActionSheet, $q, Gallery, PhotoFilter, ParseFile, $ionicModal, Loading, Toast) {\n        var vm = this;\n        var tempImage;\n\n        $scope.storage = $localStorage;\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                    window.StatusBar.styleDefault();\n                }\n            });\n        });\n\n        vm.postPhoto = function () {\n            //ActionSheet.image().then(function (image) {\n            //    tempImage = image;\n            //    //return PhotoFilter.load(image);\n            //    return PhotoService.crop(image);\n            //    //return image;\n            //})\n            PhotoService.open().then(modalPost).then(function (form) {\n                //console.log('Cadastra na Galeria', form);\n                Loading.start();\n                ParseFile.upload({base64: form.image}).then(function (imageUploaded) {\n                    form.image = imageUploaded;\n                    Gallery.create(form).then(function (item) {\n                        $scope.$emit('photoInclude', item);\n                        Loading.end();\n                    });\n                });\n            });\n\n\n            function modalPost(image) {\n                var defer    = $q.defer();\n                $scope.image = image;\n                $scope.form  = {\n                    title: ''\n                };\n\n                $scope.editFilter = function () {\n                    PhotoFilter.load(tempImage).then(function (image) {\n                        $scope.image = image;\n                    });\n                };\n\n                //Mentios\n                // shows the use of dynamic values in mentio-id and mentio-for to link elements\n                $scope.searchPeople = function (term) {\n                    var peopleList = [];\n                    return User.getFollowers().then(function (response) {\n                        _.each(response, function (item) {\n                            item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                            item.bio      = item.status;\n                            if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                                peopleList.push(item);\n                            }\n                        });\n                        $scope.people = peopleList;\n                        //console.log(peopleList);\n                        return $q.when(peopleList);\n                    });\n                };\n\n                $scope.getPeopleTextRaw = function (item) {\n                    return '@' + item.username;\n                };\n\n                $ionicModal.fromTemplateUrl('app/main/share/share-modal.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                }).then(function (modal) {\n                    $scope.modalFilter = modal;\n                    $scope.modalFilter.show();\n                });\n\n\n                $scope.form.address = {};\n                $scope.closeAddress = function () {\n                    $scope.form.address = {};\n                };\n\n                $scope.close = function () {\n                    $scope.modalFilter.hide();\n                };\n\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n\n                $scope.submit = function () {\n                    var form   = angular.copy($scope.form);\n                    form.image = $scope.image;\n                    tempImage  = '';\n                    $scope.close();\n                    defer.resolve(form);\n                };\n\n                return defer.promise;\n            }\n        };\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('AccountCtrl', AccountController);\n\n    function AccountController(User, $state, $rootScope) {\n        var vm       = this;\n        vm.changeTab = changeTab;\n\n        vm.user  = $rootScope.currentUser;\n        vm.photo = $rootScope.currentUser.attributes.photo;\n\n        vm.loading = true;\n        User.getPublicData(Parse.User.current()).then(function (user) {\n            console.log('Profile', user.attributes);\n            vm.user    = user;\n            vm.loading = false;\n        });\n\n        vm.openFollowers = function () {\n            $state.go('tab.accountFollowers', {username: $rootScope.currentUser.attributes.username});\n        };\n\n        vm.openFollowing = function () {\n            $state.go('tab.accountFollowing', {username: $rootScope.currentUser.attributes.username});\n        };\n\n        init();\n        changeTab('grid');\n\n        function changeTab(tab) {\n            if (tab === 'list') {\n                vm.tab = {\n                    list: true,\n                    grid: false\n                };\n            } else {\n                vm.tab = {\n                    list: false,\n                    grid: true\n                };\n            }\n        }\n\n        function init() {\n            vm.data  = {\n                total    : false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n            getFollower();\n        }\n\n        function getFollower() {\n            vm.loadingFollowers = true;\n            vm.loadingFollowing = true;\n            vm.loadingPhotos    = true;\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('ActivityCtrl', ActivityController);\n\n    function ActivityController($scope, $state, GalleryActivity) {\n        var vm          = this;\n        vm.params       = {};\n        vm.params.page  = 1;\n        vm.params.limit = 30;\n        vm.data         = [];\n\n        vm.openProfile = function (username) {\n            $state.go('tab.activityProfile', {username: username})\n        };\n\n        $scope.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                vm.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            vm.params.page = page;\n        }\n\n        function loadFeed() {\n\n            GalleryActivity.feed(vm.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage(vm.params.page + 1);\n                setGalleries(data);\n\n                if (vm.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n                $scope.$broadcast('scroll.refreshComplete');\n                $scope.loading = false;\n\n            }).catch(function () {\n                if (vm.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        vm.onLoadMore = function () {\n            loadFeed();\n        };\n\n        vm.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        vm.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        vm.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        vm.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        vm.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        vm.onReload = function () {\n            vm.params.page = 0;\n            vm.data        = [];\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('HomeCtrl', HomeController);\n\n    function HomeController($state) {\n        var vm = this;\n\n        vm.openProfile = function (username) {\n            $state.go('tab.homeProfile', {username: username})\n        };\n\n        vm.openLikers = function (galleryId) {\n            $state.go('tab.homeGalleryLikers', {galleryId: galleryId})\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('app.main')\n        .controller('SearchCtrl', SearchCtrl);\n\n    function SearchCtrl($scope, $filter, $ionicLoading, $state) {\n\n\n        $scope.onSearch = function () {\n\n            if ($scope.params.search !== '') {\n                $scope.params.page   = 0;\n                $scope.places        = [];\n                $scope.params.search = $filter('lowercase')($scope.params.search);\n            }\n        };\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('SearchMapCtrl', SearchMapController);\n\n    function SearchMapController($scope, $rootScope, $ionicLoading, $state, $stateParams, $timeout, $localStorage, Toast, Gallery, Geolocation, Dialog) {\n\n        $scope.maxRating = 5;\n        $scope.storage   = $localStorage;\n        $scope.galleries = [];\n        $scope.params    = {\n            location: null,\n            distance: 100.00,\n            page    : 1,\n            limit   : 10\n        };\n        var marker;\n\n        $scope.loading = true;\n        Geolocation.getCurrentPosition().then(function (position) {\n\n            $scope.params.location = {\n                latitude : position.coords.latitude,\n                longitude: position.coords.longitude\n            }\n\n            var latLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\n\n            var mapOptions = {\n                center   : latLng,\n                zoom     : 15,\n                mapTypeId: google.maps.MapTypeId.ROADMAP\n            };\n\n            $scope.map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);\n\n            //Wait until the map is loaded\n            google.maps.event.addListenerOnce($scope.map, 'idle', function () {\n\n                var bounds = $scope.map.getBounds();\n\n                marker = new google.maps.Marker({\n                    map      : $scope.map,\n                    animation: google.maps.Animation.DROP,\n                    position : latLng\n                });\n\n                var infoWindow = new google.maps.InfoWindow({\n                    content: \"Here I am!\"\n                });\n\n                google.maps.event.addListener(marker, 'click', function () {\n                    infoWindow.open($scope.map, marker);\n                });\n\n            });\n            $scope.loading = false;\n\n            loadGallerys();\n        }, function (error) {\n            $scope.params.location = null;\n\n            var errorMessage;\n            if (error.code === 1 || error.code === 3) {\n                errorMessage = 'errorGpsDisabledText';\n            } else {\n                errorMessage = 'errorLocationMissingText';\n            }\n            Dialog.alert(errorMessage);\n\n        });\n\n        function setPosition(location) {\n            if (location) {\n                return new google.maps.LatLng(location.latitude, location.longitude);\n            }\n        }\n\n\n        function setGallerys(galleries) {\n            $scope.galleries = galleries;\n\n            galleries.map(function (item) {\n                var icon = '#E84545';\n\n                if (item.imageThumb) {\n                    icon = {\n                        url   : item.imageThumb.url(),\n                        size  : new google.maps.Size(32, 32),\n                        // The origin for this image is (0, 0).\n                        origin: new google.maps.Point(0, 0),\n                        // The anchor for this image is the base of the flagpole at (0, 32).\n                        anchor: new google.maps.Point(0, 32)\n                    }\n                }\n\n                // Shapes define the clickable region of the icon. The type defines an HTML\n                // <area> element 'poly' which traces out a polygon as a series of X,Y points.\n                // The final coordinate closes the poly by connecting to the first coordinate.\n                var shape = {\n                    coords: [1, 1, 1, 20, 18, 20, 18, 1],\n                    type  : 'poly'\n                };\n\n\n                var addMarker = {\n                    map      : $scope.map,\n                    //icon     : icon,\n                    title    : item.title,\n                    position : setPosition(item.attributes.location),\n                    animation: google.maps.Animation.DROP,\n                    shape    : shape,\n                };\n\n                console.log(item, addMarker);\n\n                marker = new google.maps.Marker(addMarker);\n\n                var infoWindow = new google.maps.InfoWindow({\n                    content: \"Here I am!\"\n                });\n\n                google.maps.event.addListener(marker, 'click', function () {\n                    infoWindow.open($scope.map, marker);\n                });\n\n            })\n\n        }\n\n        function loadGallerys() {\n\n            Gallery.all($scope.params).then(function (galleries) {\n                setGallerys(galleries);\n                //showMap();\n\n                if (galleries.length === 0) {\n                    Dialog.alert('galleriesNotFoundText');\n                } else {\n                    //setMapZoomToFit();\n                }\n\n            }, function () {\n                Toast.show('errorText');\n            });\n        }\n\n        function removeGallerys() {\n            $scope.galleries = [];\n        }\n\n        function removeMarkers() {\n            for (var i = 0; i < markers.length; i++) {\n                markers[i].remove();\n            }\n        };\n\n        $scope.onSearchHere = function () {\n\n            map.getCameraPosition(function (camera) {\n\n                $scope.params.location.latitude  = camera.target.lat;\n                $scope.params.location.longitude = camera.target.lng;\n\n                showLoading();\n                removeMarkers();\n                removeGallerys();\n                loadGallerys();\n            });\n        }\n\n        $scope.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        $scope.showMap = function () {\n            return isMapViewShown;\n        };\n\n        $scope.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n\n        $scope.onGalleryClicked = function (item) {\n            $scope.closeGallerysModal();\n\n            for (var i = 0; i < markers.length; i++) {\n                if (markers[i].get('item') === item) {\n                    var marker = markers[i];\n                    marker.showInfoWindow();\n                    marker.getPosition(function (position) {\n                        setMapPosition(position);\n                    });\n                }\n            }\n        };\n\n        $scope.openGallerysModal = function () {\n            map.setClickable(false);\n            // Open profile\n        };\n\n        $scope.closeGallerysModal = function () {\n            map.setClickable(true);\n        };\n\n\n        $scope.$on('$ionicView.leave', function () {\n            if (window.cordova) {\n                map.setMyLocationEnabled(false);\n                map.setClickable(false);\n                map.off();\n            }\n        });\n\n        $scope.$on('$ionicView.beforeEnter', function () {\n            if (window.cordova) {\n                // Fix issue with side menu + google maps\n                map.setMyLocationEnabled(true);\n                map.setClickable(true);\n            }\n        });\n\n        $rootScope.$on('$stateChangeStart', function (event, toState) {\n            if (toState.name !== 'tab.map') {\n                if (window.cordova) {\n                    map.clear();\n                    map.moveCamera({\n                        target: setPosition(0.0, 0.0),\n                        zoom  : 1\n                    });\n                }\n            }\n        });\n    }\n\n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name UserAvatarCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.main')\n        .controller('UserAvatarCtrl', UserAvatarController);\n\n    function UserAvatarController(User, Auth, AppConfig, $rootScope, $state, Toast, UserForm) {\n        var vm          = this;\n        vm.submitAvatar = submitAvatar;\n        init();\n\n        vm.photo = Parse.User.current().attributes.photo;\n\n        function init() {\n            var user      = Auth.getLoggedUser();\n            vm.form       = {\n                name    : user.name,\n                email   : user.email,\n                status  : user.status,\n                gender  : user.gender,\n                img     : user.img,\n                username: user.username\n            };\n            vm.formFields = UserForm.profile;\n            console.log(vm.form);\n            console.log(vm.formFields);\n        }\n\n        function submitAvatar() {\n            console.log(vm.rForm);\n\n            if (vm.rForm.$valid) {\n                var dataForm = angular.copy(vm.form);\n                console.log(dataForm);\n\n                User.update(dataForm).then(function (resp) {\n                    console.log(resp);\n                    $rootScope.currentUser = Parse.User.current();\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Fill out the fields in red')\n                });\n            }\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').directive('userAvatar', userAvatarDirective);\n\n    function userAvatarDirective(ActionSheet, Loading, ParseFile, User) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function ($scope, elem) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var tempImage;\n\n                    ActionSheet.image().then(function (image) {\n                        tempImage = image;\n                        //return PhotoFilter.load(image);\n                        return image;\n                    }).then(function (form) {\n                        $scope.loading = true;\n                        ParseFile.upload({base64: form}).then(function (imageUploaded) {\n                            User.setPhoto(imageUploaded).then(function (user) {\n                                console.log(user);\n                                $scope.ngModel = user.attributes.photo;\n                                console.log(user.attributes.photo);\n                                $scope.loading = false;\n                            });\n                        });\n                    });\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserFollowerCtrl', UserFollowerController);\n\n    function UserFollowerController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n        User.getFollowers($stateParams.username).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserFollowingCtrl', UserFollowingController);\n\n    function UserFollowingController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n        User.getFollowing($stateParams.username).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserIntroCtrl', UserIntroController);\n\n    function UserIntroController($scope, $ionicPlatform, $cordovaSplashscreen) {\n        var vm = this;\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                    window.StatusBar.styleLightContent();\n                }\n            });\n        });\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserLikersCtrl', UserLikerController);\n\n    function UserLikerController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n\n        User.getLikers($stateParams.galleryId).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserListCtrl', UserListController);\n\n    function UserListController(User, $scope, $state) {\n        var vm          = this;\n        vm.params       = {};\n        vm.params.page  = 1;\n        vm.params.limit = 30;\n        vm.data         = [];\n\n        vm.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                vm.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            vm.params.page = page;\n        }\n\n        function loadFeed() {\n\n            User.list(vm.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage(vm.params.page + 1);\n                setGalleries(data);\n\n                if (vm.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n                $scope.$broadcast('scroll.refreshComplete');\n                vm.loading = false;\n\n            }).catch(function () {\n                if (vm.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        vm.onLoadMore = function () {\n            loadFeed();\n        };\n\n        vm.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        vm.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        vm.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        vm.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        vm.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        vm.onReload = function () {\n            vm.params.page = 0;\n            vm.data        = [];\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('UserMergeCtrl', UserMergeController);\n\n    function UserMergeController(Auth, $rootScope, AppConfig, Facebook, $state, Toast, UserForm) {\n        var vm        = this;\n        vm.formFields = UserForm.register;\n\n        init();\n        function init() {\n            if ($rootScope.tempUser) {\n                vm.form = {\n                    email   : $rootScope.tempUser.attributes.email,\n                    username: $rootScope.tempUser.attributes.username,\n                    password: ''\n                };\n            } else {\n                $state.go('user.intro', {clear: true});\n            }\n        }\n\n        vm.submit = function (rForm, form) {\n\n            console.log(rForm);\n            console.table(form);\n            if (vm.form.password !== '') {\n                console.log(form);\n                Auth.logIn(form).then(function (user) {\n                    console.log(user);\n                    $rootScope.currentUser = user;\n                    if (Auth.getLoggedUser()) {\n                        Facebook.link(Parse.User.current()).then(function (resp) {\n                            console.log(resp);\n                            $state.go(AppConfig.routes.home, {\n                                clear: true\n                            });\n                        }).catch(function (resp) {\n                            console.log(resp);\n                            Toast.alert({\n                                title: 'Ops',\n                                text : resp.message\n                            });\n                        });\n                    }\n\n\n                }).catch(function (resp) {\n                    Toast.alert({\n                        title: 'Ops',\n                        text : resp.message\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Please enter your email')\n                });\n            }\n\n        };\n\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name recoveryPass\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict E\n   * */\n\n  angular\n    .module('app.main')\n    .directive('recoveryPass', recoveryPassDirective);\n\n  function recoveryPassDirective(User, $ionicPopup, Loading, Toast) {\n    return {\n      restrict: 'A',\n      scope: {\n        login: '@',\n        register: '@',\n      },\n      link: function ($scope, elem) {\n\n        elem.bind('click', openModal);\n\n        function openModal() {\n\n          $scope.form = {\n            recovery: ''\n          };\n\n          $scope.erro = '';\n\n          $scope.text = {\n            button: (''),\n            input: ('Email')\n          };\n\n          $ionicPopup\n            .show({\n              scope: $scope,\n              template: '<div class=\"popup-recovery\"><form name=\"form.recovery\" form-manager><label class=\"item item-input\"><i class=\"icon ion-email placeholder-icon\"></i><input type=\"email\" ng-model=\"email\" id=\"email\" name=\"email\" placeholder=\"{{ text.input }}\" required ng-maxlength=\"80\"></label><span class=\"error-msg\">{{erro}}</span></form></div>',\n              title: ('A new password will be sent to your e-mail address'),\n              buttons: [{\n                text: ('Cancel'),\n                type: 'button-calm'\n              }, {\n                text: ('Send'),\n                type: 'button-positive',\n                onTap: function (e) {\n                  if ($scope.form.recovery.$valid) {\n                    return $scope.form.recovery.email.$viewValue;\n                  } else {\n                    //no permite o usurio fechar at ele digitar o email\n                    e.preventDefault();\n                    $scope.erro = ('Invalid Email');\n                  }\n                }\n              }]\n            })\n            .then(function (res) {\n              if (!angular.isUndefined(res)) {\n                var email = res;\n\n                console.log(res);\n\n                Loading.start();\n\n                User\n                  .forgot(email)\n                  .then(function (resp) {\n                    console.log(resp);\n                    Toast.alert({\n                      login: ('Forgot your password'),\n                      text: ('Access your accout mail')\n                    });\n                    Loading.end();\n                  })\n                  .catch(function (resp) {\n                    Toast.alert({\n                      login: 'Ops',\n                      text: resp\n                    });\n                    Loading.end();\n                  });\n              }\n            });\n\n        }\n      }\n    };\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name UserRecoveryPassCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.main')\n    .controller('UserRecoveryPassCtrl', UserRecoveryPassController);\n\n  function UserRecoveryPassController(User, Toast) {\n    var vm = this;\n    vm.form = {};\n    vm.submitForgot = submitForgot;\n\n    function submitForgot() {\n      User\n        .forgot(vm.form)\n        .then(function (resp) {\n          console.log(resp);\n        })\n        .catch(function (resp) {\n          Toast.alert('Ops', resp);\n        });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('WalkthroughCtrl', WalkthroughController);\n\n    function WalkthroughController($ionicSlideBoxDelegate, $scope, $ionicPlatform, $cordovaSplashscreen) {\n        var vm              = this;\n        var currentPlatform = window.ionic.Platform.platform();\n        vm.slideIndex       = 0;\n\n        vm.slideChanged = function (index) {\n            vm.slideIndex = index;\n        };\n        vm.next         = function () {\n            $ionicSlideBoxDelegate.next();\n        };\n        vm.previous     = function () {\n            $ionicSlideBoxDelegate.previous();\n        };\n\n        if (currentPlatform) {\n            vm.device = (currentPlatform === 'android') ? 'android' : 'iphone';\n        } else {\n            vm.device = 'android';\n        }\n\n        vm.slides                          = [{\n            text: 'STEP1',\n            img : 'img/intro1.jpg'\n        }, {\n            text: 'STEP2',\n            img : 'img/intro2.jpg'\n        }, {\n            text: 'STEP3',\n            img : 'img/intro3.jpg'\n        }, {\n            text: 'STEP4',\n            img : 'img/intro4.jpg'\n        }, {\n            text: 'STEP5',\n            img : 'img/intro5.jpg'\n        }\n        ];\n        window.localStorage['walkthrough'] = true;\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                    window.StatusBar.styleLightContent()\n                }\n            });\n        });\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('caman', camanDirective);\n\n  function camanDirective(CamanJs, $timeout) {\n    return {\n      restrict: 'A',\n      scope: {\n        name: '=',\n        image: '=',\n        filter: '=',\n        loading: '='\n      },\n      template: '<img ng-src=\"{{ image }}\" id=\"{{ name }}\">',\n      link: camanDirectiveLink\n    };\n\n    function camanDirectiveLink($scope) {\n      $scope.loading = true;\n      $timeout(function () {\n        CamanJs\n          .effect($scope.name, $scope.filter)\n          .then(function () {\n            $scope.loading = false;\n          });\n      }, 500);\n    }\n  }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('ionCrop', ionCropDirective);\n\n  function ionCropDirective($jrCrop, $translate, $ionicActionSheet) {\n\n    return {\n      restrict: 'A',\n      scope: {\n        ngModel: '=',\n        option: '=',\n        cropSave: '&'\n      },\n      template: '<div><input type=\"file\" id=\"browseBtn\" image=\"image\" accept=\"image/*\" style=\"display: none\"/></div>',\n      link: ionCropLink\n    };\n\n    function ionCropLink($scope, element) {\n\n      // Triggered on a button click, or some other target\n      $scope.action = action;\n      element.bind('click', getElem);\n      $scope.crop = crop;\n      angular.element(document.getElementById('browseBtn'))\n        .on('change', fileUpload);\n\n\n      function getElem() {\n        document.getElementById('browseBtn')\n          .click();\n      }\n\n      function action() {\n\n        // Show the action sheet\n        $ionicActionSheet.show({\n          buttons: [{\n            text: '<i class=\"icon ion-camera\"></i>' + ('Photo Camera')\n          }, {\n            text: '<i class=\"icon ion-images\"></i> ' + ('Photo Album')\n          }],\n          //destructiveText:  ('Delete'),\n          titleText: ('Change Image'),\n          cancelText: ('Cancel'),\n          cancel: function () {\n            // add cancel code..\n          },\n          buttonClicked: function (index) {\n\n            if (index === 0) {\n              console.log('Photo Camera');\n            }\n            // Photo Album\n            if (index === 1) {\n              document.getElementById('browseBtn')\n                .click();\n            }\n            return true;\n          }\n        });\n\n      }\n\n      function fileUpload(e) {\n\n        var file = e.target.files[0];\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n\n        reader.onload = function (event) {\n          var image = event.target.result;\n          $scope.crop(image);\n        };\n\n        // Clear input file\n        angular.element(document.getElementById('browseBtn')).val('');\n\n      }\n\n      function crop(image) {\n\n        console.log($scope.option);\n\n        $jrCrop\n          .crop({\n            url: image,\n            width: $scope.option ? $scope.option.width : 200,\n            height: $scope.option ? $scope.option.height : 200,\n            cancelText: ('Cancel'),\n            chooseText: ('Save')\n          })\n          .then(function (canvas) {\n            var image = canvas.toDataURL();\n            //            var name = $scope.option ? $scope.option.name : 'thumb';\n            //            var filename = ($scope.option ? $scope.option.name : '') + '_' + name + window.Number(new window.Date() + '.jpg';\n\n            //var file = base64ToBlob(image.replace('data:image/png;base64,', ''), 'image/jpeg');\n            //            file.name = filename;\n\n            //upload(file);\n\n            console.log(image);\n            $scope.ngModel = image;\n\n\n          });\n\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').directive('photoShare', photoShareDirective);\n\n    function photoShareDirective($state, AppConfig, $rootScope, $ionicModal, Loading, PhotogramSetting, PhotoService) {\n        return {\n            restrict: 'A',\n            link: photoShareLink,\n            template: ''\n        };\n\n        function photoShareLink($scope, elem, attr) {\n            var path = AppConfig.path;\n\n            elem.bind('click', open);\n\n            function open() {\n                console.log('Open share');\n                var option = {\n                    crop: PhotogramSetting.get('imageCrop'),\n                    allowEdit: PhotogramSetting.get('imageEdit'),\n                    filter: true,\n                    //filter: PhotogramSetting.get('imageFilter'),\n                    allowRotation: PhotogramSetting.get('imageRotation'),\n                    quality: PhotogramSetting.get('imageQuality'),\n                    correctOrientation: PhotogramSetting.get('imageEdit'),\n                    targetWidth: PhotogramSetting.get('imageWidth'),\n                    targetHeight: PhotogramSetting.get('imageHeight'),\n                    saveToPhotoAlbum: PhotogramSetting.get('imageSaveAlbum')\n                };\n                console.log(option);\n\n                PhotoService\n                    .open(option)\n                    .then(modalPost)\n                    .catch(goHome);\n            }\n\n\n            function goHome() {\n                console.warn('Deu erro');\n                $state.go('photogram.home');\n            }\n\n            function modalPost(image) {\n                $scope.closePost  = closeModalPost;\n                $scope.submitPost = submitPost;\n                $scope.form       = {\n                    title: '',\n                    location: '',\n                    photo: image,\n                    geo: false\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/module/share/photogram.post.modal.html', {\n                        scope: $scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        $scope.form.photo = image;\n                        $scope.modalPost  = modal;\n                        $scope.modalPost.show();\n                    });\n\n                function closeModalPost() {\n                    $scope.modalPost.hide();\n                    $scope.modalPost.remove();\n                    Loading.end();\n                }\n\n                function submitPost(resp) {\n                    var form = angular.copy(resp);\n                    console.log(form);\n                    Loading.start();\n                    Photogram\n                        .post(form)\n                        .then(function () {\n                            closeModalPost();\n                            $rootScope.$emit('filterModal:close');\n                            $rootScope.$emit('PhotogramHome:reload');\n                        });\n                }\n            }\n        }\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('photoFilterCarousel', photoFilterCarouselDirective);\n\n  function photoFilterCarouselDirective(CamanJs, config) {\n    return {\n      restrict: 'E',\n      scope: {\n        image: '=',\n        apply: '='\n      },\n      templateUrl: config.path + '/view/photo.filter.carousel.html',\n      link: function ($scope) {\n        $scope.filters = CamanJs.filters;\n        $scope.applyFilter = $scope.apply;\n      }\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('photoFilter', photoFilterDirective);\n\n  function photoFilterDirective(config, CamanJs) {\n    return {\n      restrict: 'E',\n      scope: {\n        image: '='\n      },\n      templateUrl: config.path + '/view/photo.filter.html',\n      link: function ($scope, elem) {\n        $scope.applyFilter = function (elem, effect) {\n          $scope.loading = true;\n          if (effect) {\n            CamanJs\n              .effect(elem, effect, true)\n              .then(function (resp) {\n                $scope.loading = false;\n              });\n          }\n        };\n      }\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n\n  angular\n    .module('ion-photo')\n    .factory('CamanJs', CamanJsFactory);\n\n  function CamanJsFactory($q) {\n    var Caman = window.Caman;\n    var filters = [\n      'normal',\n      'vintage',\n      'lomo',\n      'clarity',\n      'sinCity',\n      'sunrise',\n      'crossProcess',\n      'orangePeel',\n      'love',\n      'grungy',\n      'jarques',\n      'pinhole',\n      'oldBoot',\n      'glowingSun',\n      'hazyDays',\n      'herMajesty',\n      'nostalgia',\n      'hemingway',\n      'concentrate'\n    ];\n\n    return {\n      filters: filters,\n      effect: filter,\n      reset: resetEffect\n    };\n\n    function filter(elem, effect, status) {\n      var defer = $q.defer();\n      var image = window.document.getElementById(elem);\n\n      if (image) {\n        Caman(image, function () {\n          if (effect === 'normal') {\n            this.revert();\n            this.render(function () {\n              defer.resolve(effect);\n            });\n          }\n\n          if (effect in this) {\n            this[effect]();\n\n            if (status) {\n              this.revert();\n            }\n            this.render(function () {\n              defer.resolve(effect);\n            });\n          }\n\n        });\n      } else {\n        defer.reject();\n      }\n      return defer.promise;\n    }\n\n    function resetEffect(elem) {\n\n      var defer = $q.defer();\n      var image = window.document.getElementById(elem);\n\n      Caman(image, function () {\n        this.revert();\n        defer.resolve(true);\n      });\n\n      return defer.promise;\n    }\n  }\n})();\n(function () {\n    'use strict';\n    angular.module('ion-photo').factory('PhotoFilter', PhotoFilterFactory);\n\n    function PhotoFilterFactory($rootScope, $q, $ionicModal) {\n\n        return {\n            load: modalFilter\n        };\n\n        function modalFilter(image) {\n            var defer    = $q.defer();\n            var template = '<ion-modal-view class=\"modal-capture\"><ion-header-bar class=\"bar-light\"><button class=\"button button-clear button-icon ion-ios-close-empty\" ng-click=\"close()\"></button><div class=\"title text-left\">{{ \\'ION-PHOTO.FILTERS\\' | translate }}</div><button class=\"button button-clear\" ng-click=\"submitCapture()\">{{ \\'ION-PHOTO.NEXT\\' | translate }}</button></ion-header-bar><ion-content scroll=\"false\"><photo-filter image=\"form.photo\"></photo-filter></ion-content></ion-modal-view>';\n            var scope    = $rootScope.$new(true);\n\n            scope.form = {\n                photo: image\n            };\n\n            scope.modal = $ionicModal.fromTemplate(template, {\n                scope: scope\n            });\n\n            scope.modal.show();\n\n\n            scope.submitCapture = function () {\n                var canvas  = window.document.getElementById('image');\n                var dataUrl = canvas.toDataURL();\n                scope.close();\n                defer.resolve(dataUrl);\n            };\n\n            scope.close = function () {\n                scope.modal.hide();\n            };\n\n            // Cleanup the modal when we're done with it!\n            scope.$on('$destroy', function () {\n                scope.modal.remove();\n            });\n\n\n            return defer.promise;\n\n        }\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').factory('PhotoService', PhotoServiceFactory);\n\n    function PhotoServiceFactory($ionicActionSheet, $translate, AppConfig, Share,$cordovaActionSheet, $jrCrop, $rootScope, $ionicModal, $cordovaCamera, $cordovaCapture, $q) {\n\n        // Default Setting\n        var tempImage;\n        var cordova = window.cordova;\n        var setting = {\n            jrCrop            : true,\n            quality           : 90,\n            allowEdit         : false,\n            filter            : true,\n            correctOrientation: true,\n            targetWidth       : 300,\n            targetHeight      : 300,\n            saveToPhotoAlbum  : false,\n            allowRotation     : false,\n            aspectRatio       : 0\n        };\n\n        return {\n            open  : openModal,\n            crop  : cropModal,\n            filter: filterModal,\n            share : shareModal,\n        };\n\n        function openModal(option) {\n            var defer       = $q.defer();\n            var options     = {\n                quality           : 80,\n                aspectRatio       : 0,\n                allowRotation     : false,\n                allowEdit         : true,\n                correctOrientation: true,\n                targetWidth       : 640,\n                targetHeight      : 640,\n                saveToPhotoAlbum  : true,\n                destinationType   : window.cordova ? Camera.DestinationType.DATA_URL : null,\n                encodingType      : window.cordova ? Camera.EncodingType.JPEG : null,\n                popoverOptions    : window.cordova ? CameraPopoverOptions : null,\n            };\n            var buttons     = [{\n                text: '<i class=\"icon ion-ios-camera\"></i>' + $translate.instant('captureLibrary')\n            }, {\n                text: '<i class=\"icon ion-images\"></i>' + $translate.instant('capturePhoto')\n            },\n                // {text: '<i class=\"icon ion-ios-videocam\"></i>' + $translate.instant('ION-PHOTO.VIDEO')}\n            ];\n            var actionSheet = $ionicActionSheet.show({\n                buttons      : buttons,\n                titleText    : $translate.instant('submit'),\n                cancelText   : $translate.instant('cancel'),\n                cancel       : buttonCancel,\n                buttonClicked: buttonClicked\n            });\n\n            function buttonClicked(index) {\n                console.log(index);\n                actionSheet();\n                capture(index, options)\n                    .then(filterModal)\n                    .then(function (resp) {\n                        console.log('Final rest');\n                        defer.resolve(resp);\n                    })\n                    .catch(buttonCancel);\n            }\n\n\n            function buttonCancel(resp) {\n                actionSheet(resp);\n            }\n\n            return defer.promise;\n        }\n\n        function cropModal(image) {\n            var defer = $q.defer();\n\n            $jrCrop.crop({\n                url          : image,\n                aspectRatio  : setting.aspectRatio ? setting.aspectRatio : false,\n                allowRotation: setting.allowRotation ? setting.allowRotation : false,\n                width        : setting.width ? setting.width : setting.targetWidth,\n                height       : setting.height ? setting.height : setting.targetHeight,\n                cancelText   : $translate.instant('cancel'),\n                chooseText   : $translate.instant('submit')\n            }).then(function (canvas) {\n                defer.resolve(canvas.toDataURL());\n            }).catch(defer.reject);\n\n            return defer.promise;\n        }\n\n        function shareModal(image) {\n            var template =\n                    '<ion-modal-view class=\"modal-share\"> <ion-header-bar class=\"bar-dark\"> <div class=\"title\">{{ \\'submit\\' | translate }}</div> <button class=\"button button-positive\" ng-click=\"modal.hide()\"> <i class=\"icon ion-arrow-right-b\"></i> </button> </ion-header-bar> <ion-content ng-cloak> <div id=\"image\"> <img ng-src=\"{{form.photo}}\"> <div class=\"title\">{{ form.title }}</div></div> <ul class=\"list\"> <li class=\"padding\"> <button ng-repeat=\"social in sociais\" ng-click=\"share(form, social)\"class=\"button button-block button-{{ social }}\"><i class=\"icon ion-social-{{ social }}\"></i>{{ social | uppercase }} </button> </li> </ul> </ion-content> </ion-modal-view>';\n\n            if (image === undefined) return false;\n            var scope   = $rootScope.$new(true);\n            var socials = [\n                'facebook',\n                'instagram',\n                'whatsapp',\n                'twitter'\n            ];\n            //image = image.attributes;\n\n            scope.sociais = socials;\n            scope.share   = shareSocial;\n            scope.form    = {\n                title: '',\n                photo: image\n            };\n\n            scope.modal = $ionicModal.fromTemplate(template, {\n                scope: scope\n            });\n            scope.modal.show();\n\n\n            function shareSocial(social, form) {\n                console.log('share', social, form);\n                Share.share(social, {\n                    text : form.title,\n                    image: form.photo,\n                    link : AppConfig.app.url\n                });\n            }\n\n\n        }\n\n        function filterModal(image) {\n            var defer = $q.defer();\n\n            function openFilter(image) {\n                var templateFilter = '<ion-modal-view class=\"modal-capture\"><ion-header-bar class=\"bar-light\"><button class=\"button button-clear button-icon ion-ios-arrow-thin-left\" ng-click=\"cropImage()\"></button><div class=\"title\">{{ \\'ION-PHOTO.FILTERS\\' | translate }}</div><button class=\"button button-icon \" ng-click=\"submitFilter()\"><i class=\"icon ion-ios-arrow-thin-right\"></i></button></ion-header-bar><ion-content><photo-filter image=\"form.photo\"></photo-filter></ion-content></ion-modal-view>';\n                var scope          = $rootScope.$new(true);\n                scope.closeFilter  = closeFilter;\n                scope.submitFilter = submitFilter;\n                tempImage          = image;\n                scope.form         = {\n                    photo: image\n                };\n\n                scope.modalFilter = $ionicModal.fromTemplate(templateFilter, {\n                    scope: scope\n                });\n\n                scope.cropImage = function () {\n                    scope.modalFilter.remove();\n                    cropModal(tempImage)\n                        .then(openFilter);\n                };\n\n                scope.modalFilter.show();\n\n                function closeFilter() {\n                    defer.reject();\n                    scope.modalFilter.hide();\n                }\n\n                function submitFilter() {\n                    var canvas  = window.document.getElementById('image');\n                    var dataUrl = canvas.toDataURL();\n                    scope.modalFilter.remove();\n                    defer.resolve(dataUrl);\n                }\n\n            }\n\n            openFilter(image);\n\n            return defer.promise;\n        }\n\n\n        function capture(type, options) {\n            var defer = $q.defer();\n\n            // CAMERA\n            if (type === 0) {\n                getPicture(0);\n            }\n\n            // GALLERY\n            if (type === 1) {\n                getPicture(1);\n            }\n\n            // Video\n            if (type === 2) {\n                getVideo();\n            }\n\n            function getPicture(method) {\n                if (method === 0 && cordova) options.sourceType = Camera.PictureSourceType.CAMERA;\n                if (method === 1 && cordova) options.sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n\n                if (cordova) {\n                    $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n                } else {\n                    var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n                    fileInput[0].click();\n                    fileInput.on('change', function (evt) {\n                        tempImage     = evt.currentTarget.files[0];\n                        var reader    = new FileReader();\n                        reader.onload = function (evt) {\n                            defer.resolve(evt.target.result);\n                        };\n                        reader.readAsDataURL(tempImage);\n                    });\n                }\n            }\n\n            function getVideo() {\n                $cordovaCapture.captureVideo({\n                    limit   : 1,\n                    duration: 5\n                }).then(function (mediaFiles) {\n                    tempImage = mediaFiles[0].fullPath;\n                    defer.resolve(tempImage);\n                }, defer.reject);\n            }\n\n\n            return defer.promise;\n        }\n\n        function show(params) {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                var options = {\n                    title                    : params.title,\n                    buttonLabels             : _.map(params.options, function (item) {return item.text}),\n                    addCancelButtonWithLabel : params.cancelText,\n                    androidEnableCancelButton: true,\n                    androidTheme             : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT\n                };\n\n                $cordovaActionSheet.show(options).then(function (btnIndex) {\n                    if (btnIndex !== 3) {\n                        defer.resolve(btnIndex);\n                    }\n                    defer.reject('cancel');\n                });\n\n            } else {\n                var actionSheet = $ionicActionSheet.show({\n                    buttons      : params.options,\n                    titleText    : params.title,\n                    cancelText   : params.cancelText,\n                    cancel       : function () {\n                        actionSheet();\n                    },\n                    buttonClicked: function (btnIndex) {\n                        actionSheet();\n                        if (btnIndex !== 3) {\n                            defer.resolve(btnIndex);\n                        }\n                        defer.reject('cancel');\n                    }\n                });\n\n            }\n            return defer.promise;\n        }\n\n\n\n    }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .factory('Video', VideoFactory);\n\n  function VideoFactory($window, $q) {\n    var deferred = $q.defer();\n    //https://devdactic.com/capture-and-store-videos-ionic/\n    // Resolve the URL to the local file\n    // Start the copy process\n    function createFileEntry(fileURI) {\n      $window.resolveLocalFileSystemURL(fileURI, function (entry) {\n        return copyFile(entry);\n      }, fail);\n    }\n\n    // Create a unique name for the videofile\n    // Copy the recorded video to the app dir\n    function copyFile(fileEntry) {\n      var name = fileEntry.fullPath.substr(fileEntry.fullPath.lastIndexOf('/') + 1);\n      var newName = makeid() + name;\n\n      $window.resolveLocalFileSystemURL(cordova.file.dataDirectory, function (fileSystem2) {\n          fileEntry.copyTo(fileSystem2, newName, function (succ) {\n            return onCopySuccess(succ);\n          }, fail);\n        },\n        fail\n      );\n    }\n\n    // Called on successful copy process\n    // Creates a thumbnail from the movie\n    // The name is the moviename but with .png instead of .mov\n    function onCopySuccess(entry) {\n      var name = entry.nativeURL.slice(0, -4);\n      $window.PKVideoThumbnail.createThumbnail(entry.nativeURL, name + '.png', function (prevSucc) {\n        return prevImageSuccess(prevSucc);\n      }, fail);\n    }\n\n    // Called on thumbnail creation success\n    // Generates the currect URL to the local moviefile\n    // Finally resolves the promies and returns the name\n    function prevImageSuccess(succ) {\n      var correctUrl = succ.slice(0, -4);\n      correctUrl += '.MOV';\n      deferred.resolve(correctUrl);\n    }\n\n    // Called when anything fails\n    // Rejects the promise with an Error\n    function fail(error) {\n      console.log('FAIL: ' + error.code);\n      deferred.reject('ERROR');\n    }\n\n    // Function to make a unique filename\n    function makeid() {\n      var text = '';\n      var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      for (var i = 0; i < 5; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n      }\n      return text;\n    }\n\n    // The object and functions returned from the Service\n    return {\n      // This is the initial function we call from our controller\n      // Gets the videoData and calls the first service function\n      // with the local URL of the video and returns the promise\n      saveVideo: function (data) {\n        createFileEntry(data[0].localURL);\n        return promise;\n      }\n    };\n  }\n\n})();\n\n;(function() {\n\"use strict\";\n\nangular.module(\"ionic\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/directive/SigninModalDirective.html\",\"<ion-modal-view id=\\\"user-layout\\\" class=\\\"modal-auth bg-animate\\\" cache-view=\\\"false\\\"><ion-header-bar><h1 class=\\\"title\\\" \\ntranslate=\\\"signin\\\"></h1><a ng-click=\\\"closeModal()\\\" class=\\\"button button-icon icon ion-ios-close-empty\\\"></a>\\n</ion-header-bar><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step2\\\"><formly-form model=\\\"form\\\" \\nfields=\\\"formFields\\\" form=\\\"rForm\\\"><button class=\\\"button button-block button-outline button-light\\\" type=\\\"button\\\" \\nng-disabled=\\\"rForm.$invalid\\\" ng-click=\\\"submitLogin(rForm, form)\\\" translate=\\\"signin\\\"></button></formly-form><span \\nclass=\\\"term\\\">{{::\\'termAccept\\' | translate}} <a href=\\\"http://photogramapp.com\\\">{{::\\'terms\\' | translate}}</a></span>\\n</div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/SignupModalDirective.html\",\"<ion-modal-view id=\\\"user-layout\\\" class=\\\"modal-auth bg-animate\\\" cache-view=\\\"false\\\"><ion-header-bar><h1 class=\\\"title\\\" \\ntranslate=\\\"register\\\"></h1><a ng-click=\\\"closeModal()\\\" class=\\\"button button-icon icon ion-ios-close-empty\\\"></a>\\n</ion-header-bar><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step2\\\"><form name=\\\"myForm\\\" \\nnovalidate=\\\"novalidate\\\" ng-submit=\\\"submitRegister(myForm, form)\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-envelope placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"email\\\" name=\\\"email\\\" \\nng-model=\\\"form.email\\\" email-validator ng-model-options=\\\"{debounce: 1000}\\\" placeholder=\\\"user@example.com\\\"></label><div \\nng-if=\\\"myForm.email.$dirty\\\"><div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div ng-message=\\\"required\\\" \\ntranslate=\\\"emailRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"emailInUse\\\"></div></div><div \\nng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" translate=\\\"checkingEmail\\\"></div>\\n</div></div><label class=\\\"item item-input\\\"><i class=\\\"icon icon-user placeholder-icon\\\"></i> <input required=\\\"required\\\" \\ntype=\\\"text\\\" name=\\\"username\\\" ng-model=\\\"form.username\\\" username-validator ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" \\nng-model-options=\\\"{debounce: 1000}\\\" ng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" placeholder=\\\"Your login\\\"></label><div \\nng-if=\\\"myForm.username.$dirty\\\"><div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div \\nng-message=\\\"required\\\" translate=\\\"usernameRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"usernameInUse\\\"></div></div>\\n<div ng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" \\ntranslate=\\\"checkingUsername\\\"></div></div></div><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-lock placeholder-icon\\\"></i> <input required type=\\\"password\\\" name=\\\"password\\\" ng-model=\\\"form.password\\\" \\nplaceholder=\\\"Password\\\"></label><button class=\\\"button button-block button-outline button-light\\\" type=\\\"submit\\\" \\ntranslate=\\\"submit\\\"></button></form><span class=\\\"term\\\">{{::\\'termAccept\\' | translate}} <a href=\\\"http://photogramapp.com\\\">\\n{{::\\'terms\\' | translate}}</a></span></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/distanceModal.html\",\"<ion-modal-view><ion-header-bar class=\\\"bar-light\\\"><div class=\\\"buttons\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-close-empty\\\" ng-click=\\\"closeDistanceModal()\\\"></button></div><div \\nclass=\\\"title\\\">{{ \\\"chooseDistanceText\\\" | translate }}</div></ion-header-bar><ion-content><ion-list><ion-item \\nclass=\\\"item item-icon-right\\\" ng-repeat=\\\"distance in distances\\\" ng-click=\\\"onDistanceSelected(distance.val)\\\" bindonce><h2\\n bo-bind=\\\"distance.text\\\"></h2><i class=\\\"icon ion-checkmark\\\" ng-show=\\\"params.distance === distance.val\\\"></i></ion-item>\\n</ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/follow.modal.html\",\"<ion-modal-view class=\\\"modal-profile photogram-profile\\\"><ion-header-bar class=\\\"bar-positive\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\nFollow Users</div></ion-header-bar><ion-content><div class=\\\"list\\\"><div class=\\\"item item-avatar item-button-right\\\" \\nng-repeat=\\\"item in data\\\"><img ng-src=\\\"{{ ::item.src }}\\\"><h2>{{ ::item.name }}</h2><p>{{ ::item.status }}</p><button \\nclass=\\\"button\\\" ng-click=\\\"item.follow = !item.follow\\\" ng-class=\\\"item.follow ? \\'button-positive\\' : \\'button-stable\\'\\\"><i \\nclass=\\\"icon\\\" ng-class=\\\"item.follow? \\'ion-thumbsup\\' : \\'ion-plus\\'\\\"></i></button></div></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/likeDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-dark\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ ::\\'Likes\\' | translate }} ({{ ::likes.length }})</div></ion-header-bar><ion-content><div class=\\\"list step1\\\"><div \\nng-repeat=\\\"item in likes\\\" class=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ ::item.user.img }}\\\"><h2>\\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div><p>{{ ::item.created | amTimeAgo }}</p><button \\nclass=\\\"button button-positive button-outline\\\"><i class=\\\"icon ion-ios-plus-empty\\\"></i> {{ ::\\'Follow\\' }}</button></div>\\n</div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/photoCommentDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n<span translate=\\\"commentPhotoText\\\"></span>({{ comments.length }})</div></ion-header-bar><ion-content><div \\nclass=\\\"padding center\\\" ng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><ion-list class=\\\"list\\\" \\nng-show=\\\"comments.length\\\" can-swipe=\\\"true\\\"><ion-item ng-repeat=\\\"item in comments | orderBy:createdAt\\\" \\nclass=\\\"item item-avatar\\\"><img ng-src=\\\"{{ ::item.user.photo._url || \\'./img/user.png\\'}}\\\"><div class=\\\"row\\\"><h2>\\n{{ ::item.user.name }}</h2></div><div class=\\\"row\\\"><div class=\\\"text\\\">{{ ::item.text }}</div></div><div class=\\\"row\\\"><p>\\n{{ ::item.createdAt | amTimeAgo }}</p></div><div ng-if=\\\"item.user.id === currentUser.id\\\"><ion-option-button \\nclass=\\\"button-info\\\" ng-click=\\\"editComment(item)\\\" translate=\\\"edit\\\">Edit</ion-option-button><ion-option-button \\nclass=\\\"button-assertive\\\" ng-click=\\\"deleteComment(item)\\\" translate=\\\"remove\\\">Remove</ion-option-button></div></ion-item>\\n</ion-list><div class=\\\"center-ico\\\" ng-if=\\\"nocomments\\\"><i class=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 \\ntranslate=\\\"noComments\\\"></h1></div></ion-content><form name=\\\"rForm\\\" ng-submit=\\\"submitComment(rForm, form)\\\" novalidate>\\n<ion-footer-bar class=\\\"bar-stable item-input-inset message-footer\\\" keyboard-attach><label class=\\\"item-input-wrapper\\\"><i\\n class=\\\"icon ion-ios-compose-outline placeholder-icon\\\"></i><textarea mentio mentio-trigger-char=\\\"\\'@\\'\\\" \\nmentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" mentio-search=\\\"searchPeople(term)\\\" \\nmentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" ng-model=\\\"form.text\\\" \\nplaceholder=\\\"Send a comment...\\\" required minlength=\\\"1\\\" maxlength=\\\"1500\\\">\\n                </textarea></label><div \\nclass=\\\"footer-btn-wrap\\\"><button class=\\\"button button-positive button-outline\\\" type=\\\"submit\\\" \\nng-disabled=\\\"!form.text || form.text === \\'\\'\\\">Publish</button></div></ion-footer-bar></form></ion-modal-view>\");\n$templateCache.put(\"app/directive/photoGridDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" on-refresh=\\\"onReload()\\\"></ion-refresher>\\n<div class=\\\"row animated fadeIn\\\" ng-if=\\\"$index % 3 === 0\\\" ng-repeat=\\\"image in data\\\"><div \\nclass=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data[$index].user.obj\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 1 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 1].user.obj\\\" \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 2 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 2].user.obj\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"></div></div><ion-infinite-scroll \\non-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/photoListDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" on-refresh=\\\"onReload()\\\"></ion-refresher>\\n<div class=\\\"list card\\\" ng-repeat=\\\"gallery in data | orderBy:createdAt:true\\\" ng-if=\\\"showGalleries()\\\"><div \\nclass=\\\"item item-avatar\\\" ng-click=\\\"load(gallery.user.username)\\\" ion-affix data-affix-within-parent-with-class=\\\"card\\\">\\n<img ng-if=\\\"profile\\\" ng-src=\\\"{{ ::gallery.user.photo._url}}\\\"> <img \\nng-src=\\\"{{ ::gallery.user.photo._url || \\'img/user.png\\'}}\\\"><h2>{{ ::gallery.user.name}}</h2><p>\\n{{ ::gallery.user.status}}</p><span>{{ ::gallery.createdAt | amTimeAgo}}</span></div><div class=\\\"item item-body\\\" \\non-double-tap=\\\"like(gallery.id)\\\" ng-model=\\\"gallery\\\"><div class=\\\"icon ion-ios-heart heart\\\" \\nng-class=\\\"gallery.isLiked ? \\'happy\\' : \\'broken\\' \\\"></div><i class=\\\"icon\\\" ng-if=\\\"like\\\"></i> <img \\nng-src=\\\"{{ gallery.image._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></div><div class=\\\"item item-buttons\\\"><div class=\\\"row\\\"><div \\nclass=\\\"col col-75\\\"><ion-spinner ng-show=\\\"gallery.progress\\\"></ion-spinner><button photo-like ng-model=\\\"gallery\\\" \\nng-if=\\\"!gallery.progress\\\" ng-class=\\\"gallery.isLiked ? \\'ion-ios-heart\\' : \\'ion-ios-heart-outline\\' \\\" \\nclass=\\\"button-clear button-icon button-heart\\\"></button> <button ng-click=\\\"openComment(gallery.id)\\\" ng-model=\\\"gallery\\\" \\nclass=\\\"button-clear button-icon ion-ios-chatbubble-outline\\\"></button> <button \\nng-click=\\\"share(gallery.image._url, gallery.title)\\\" photogram=\\\"{{ :: gallery.id }}\\\" \\nclass=\\\"button-clear button-icon ion-android-share\\\"></button></div><div class=\\\"col text-right\\\"><button \\nng-click=\\\"action(gallery)\\\" photogram=\\\"{{ :: gallery.id }}\\\" class=\\\"button-clear button-icon ion-android-more-vertical\\\">\\n</button></div></div></div><div class=\\\"padding\\\"><span class=\\\"likes\\\" ng-click=\\\"openLikers(gallery.id)\\\"><i \\nclass=\\\"icon ion-ios-heart\\\"></i> <span ng-if=\\\"!gallery.progress\\\">{{ gallery.likesTotal }}</span> <span \\ntranslate=\\\"likesText\\\"></span></span><div class=\\\"list-comments\\\"><div class=\\\"comment-item\\\"><span profile-modal \\nusername=\\\"gallery.user.username\\\" class=\\\"username\\\">{{ :: gallery.user.name }}</span> <span class=\\\"comment\\\" \\nng-bind-html=\\\"gallery.title | hashtag \\\"></span></div><div class=\\\"comment-item\\\" \\nng-repeat=\\\"item in gallery.comments |limitTo:3 | orderBy:createdAt:true \\\"><span class=\\\"username\\\" profile-modal \\nusername=\\\"gallery.user.username\\\">{{ :: item.user.name }}</span> <span class=\\\"comment\\\" \\nng-bind-html=\\\"item.text | hashtag\\\"></span></div><a class=\\\"comment-item\\\" photo-comment ng-model=\\\"gallery\\\" \\nng-if=\\\"gallery.commentsTotal>3\\\" translate=\\\"seeAllCommentText\\\"></a></div><button \\nclass=\\\"button button-block button-clear button-comment\\\" photo-comment ng-model=\\\"gallery\\\"><span translate=\\\"addComment\\\">\\n</span></button></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner \\ndistance=\\\"1%\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/profile-edit-modal.html\",\"<ion-modal-view class=\\\"profile-edit\\\"><ion-header-bar class=\\\"bar-light\\\"><button class=\\\"button button-clear\\\" \\nng-click=\\\"closeModal()\\\" translate=\\\"cancel\\\"></button><div class=\\\"title\\\">{{ ::\\'editProfile\\' | translate }}</div><button \\nclass=\\\"button button-clear\\\" ng-click=\\\"submitUpdateProfile(rForm, form)\\\" translate=\\\"submit\\\"></button></ion-header-bar>\\n<ion-content class=\\\"view-avatar\\\"><div class=\\\"step2\\\"><form name=\\\"rForm\\\" novalidate><img class=\\\"avatar\\\" user-avatar \\nng-src=\\\"{{ form.photo._url || \\'img/user.png\\' }}\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-clipboard placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"name\\\" \\nng-model=\\\"form.name\\\" placeholder=\\\"{{\\'name\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-pound placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"username\\\" \\nng-model=\\\"form.username\\\" ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" ng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" \\nplaceholder=\\\"{{\\'username\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-earth placeholder-icon\\\"></i> <input type=\\\"url\\\" name=\\\"website\\\" ng-model=\\\"form.website\\\" \\nplaceholder=\\\"{{\\'site\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-information-circled placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"status\\\" \\nng-model=\\\"form.status\\\" placeholder=\\\"{{\\'status\\' | translate}}\\\"></label><ion-item class=\\\"item-divider\\\" \\ntranslate=\\\"privateInformation\\\"></ion-item><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-envelope placeholder-icon\\\"></i> <input type=\\\"email\\\" name=\\\"email\\\" ng-model=\\\"form.email\\\" \\ndisabled=\\\"disabled\\\" ng-model-options=\\\"{debounce: 1000}\\\" placeholder=\\\"user@example.com\\\"></label><label \\nclass=\\\"item item-input\\\"><i class=\\\"icon ion-iphone placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"tel\\\" \\nname=\\\"phone\\\" ng-model=\\\"form.phone\\\" placeholder=\\\"{{\\'phone\\' | translate }}\\\"></label></form></div><div \\nclass=\\\"padding step3\\\"><button ng-click=\\\"linkFacebook()\\\" ng-disabled=\\\"form.facebook\\\" \\nclass=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\"></i> <span translate=\\\"facebookLink\\\">\\n</span></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/profile-modal.html\",\"<ion-modal-view id=\\\"account-view\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ user.name }}</div></ion-header-bar><ion-content overflow-scroll=\\\"true\\\"><div class=\\\"profile-top\\\"><div class=\\\"row\\\">\\n<div class=\\\"col-25\\\"><img class=\\\"avatar\\\" ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\"></div><div \\nclass=\\\"col col-statics\\\"><div class=\\\"row\\\"><div class=\\\"row\\\"><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ ::user.galleriesTotal || 0}}</span><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ user.followersTotal || 0}}</span><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\"><span \\nclass=\\\"text-center\\\">{{ ::user.followingsTotal || 0}}</span><h3 translate=\\\"followingText\\\"></h3></div></div></div><div \\nclass=\\\"row col-edit\\\"><div class=\\\"col\\\"><photogram-loading loading=\\\"loadingFollow\\\"></photogram-loading><button \\nng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-follow\\': !user.isFollow}\\\" ng-click=\\\"follow()\\\" class=\\\"button\\\"><span\\n ng-show=\\\"!user.isFollow\\\" translate>Follow</span> <span ng-show=\\\"user.isFollow\\\" translate>Following</span></button>\\n</div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">{{ user.name }}</span><p class=\\\"user-status\\\">\\n{{ user.status }}</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button \\nclass=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{active: tab.grid}\\\" ng-click=\\\"changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: tab.list}\\\" ng-click=\\\"changeTab(\\'list\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recent\\\"></div><div class=\\\"tab\\\" ng-if=\\\"tab.list\\\"></div><div class=\\\"tab\\\" ng-if=\\\"tab.grid\\\"></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/search-directive.html\",\"<label class=\\\"item item-input\\\"><i class=\\\"icon ion-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"input\\\" \\nplaceholder=\\\"{{\\'SEARCH.FORM.INPUT\\' | translate }}\\\"> <button class=\\\"button button-icon\\\" ng-if=\\\"input.length\\\" \\nng-click=\\\"clearSearch()\\\"><i class=\\\"icon ion-close\\\"></i></button></label>\");\n$templateCache.put(\"app/directive/settings-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"settingTitle\\\"></div></ion-header-bar><ion-content class=\\\"animated fadeIn\\\"><div class=\\\"list\\\"><ion-language>\\n</ion-language><ion-toggle class=\\\"toggle-positive\\\" ng-model=\\\"form.push\\\"><h3><small translate=\\\"notificationText\\\">\\n</small></h3><p ng-if=\\\"form.push\\\" translate=\\\"on\\\"></p><p ng-if=\\\"!form.push\\\" translate=\\\"off\\\"></p></ion-toggle><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S\\\"><h3>\\n<small translate=\\\"buy\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3><small translate=\\\"help\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item class=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3>\\n<small translate=\\\"terms\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" ng-click=\\\"show();\\\"><h3><small translate=\\\"report\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item></div><div class=\\\"padding\\\"><button ng-click=\\\"logout()\\\" \\nclass=\\\"button button-block button-positive\\\" translate=\\\"logout\\\"></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/mentio/people-mentions.html\",\"<ul class=\\\"list-group user-search\\\"><li mentio-menu-item=\\\"person\\\" ng-repeat=\\\"person in items\\\" class=\\\"list-group-item\\\">\\n<img ng-src=\\\"{{person.imageUrl}}\\\" class=\\\"user-photo\\\"><div class=\\\"description\\\"><span class=\\\"text-primary\\\" \\nng-bind-html=\\\"person.username | mentioHighlight:typedTerm:\\'menu-highlighted\\' | unsafe\\\"></span> <em class=\\\"text-muted\\\" \\nng-bind=\\\"person.status | words:5\\\"></em></div></li></ul>\");\n$templateCache.put(\"app/mentio/photo-mentions.html\",\"<ul class=\\\"list-group product-search demo-scrollable-menu\\\"><li mentio-menu-item=\\\"product\\\" ng-repeat=\\\"product in items\\\" \\nclass=\\\"list-group-item clearfix\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-2 text-center\\\"><img ng-src=\\\"{{product.imageUrl}}\\\" \\nclass=\\\"product-photo\\\"></div><div class=\\\"col-xs-10\\\"><h4 class=\\\"list-group-item-heading\\\">{{product.title | words:5}}</h4>\\n<p class=\\\"list-group-item-text\\\">{{product.description | words:7}}</p></div></div></li></ul>\");\n$templateCache.put(\"app/component/ion-language/ion-language.html\",\"<button class=\\\"button button-block button-clear button-light button-language\\\">{{language.translation | translate}} <i \\nclass=\\\"icon ion-chevron-down\\\"></i></button>\");\n$templateCache.put(\"app/component/ion-language/modal-language.html\",\"<ion-modal-view><ion-header-bar><h1 class=\\\"title\\\" translate=\\\"selectLanguageText\\\"></h1><a ng-click=\\\"closeModal()\\\" \\nclass=\\\"button button-icon icon ion-close\\\"></a></ion-header-bar><div \\nclass=\\\"bar bar-subheader item-input-inset bar-stable\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" placeholder=\\\"{{\\'searchText\\' | translate}}\\\" \\nng-model=\\\"searchValue\\\"></label><button type=\\\"button\\\" class=\\\"button button-clear\\\" ng-show=\\\"searchValue.length\\\" \\nng-click=\\\"searchValue=\\'\\'\\\">Clear</button></div><ion-content class=\\\"has-subheader has-header\\\"><ion-list><ion-item \\nclass=\\\"item\\\" ng-click=\\\"selectLanguage(item)\\\" ng-repeat=\\\"item in languages | filter:searchValue\\\" \\nng-bind-html=\\\"item.translation | translate\\\"></ion-item></ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/account-friend-list/account-friend-list.html\",\"<ion-view><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/feedback/feedback-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"FEEDBACK.TITLE\\\"></div></ion-header-bar><ion-content><formly-form model=\\\"form\\\" form=\\\"rForm\\\" \\nfields=\\\"formFields\\\"></formly-form><div class=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" \\nng-click=\\\"submitFeedback()\\\"><span translate=\\\"BUTTON.SEND\\\"></span></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/gallery-comment/gallery-comment.html\",\"<ion-view class=\\\"modal-comment\\\" view-title=\\\"Comments\\\" cache-view=\\\"false\\\"><ion-nav-bar class=\\\"bar-light\\\"><ion-nav-title>\\n<div class=\\\"title\\\"><span translate=\\\"commentPhotoText\\\"></span>({{ comments.length }})</div></ion-nav-title>\\n<ion-nav-buttons side=\\\"left\\\"><button class=\\\"button button-icon button-clear ion-ios-arrow-left\\\" \\nng-click=\\\"$ionicGoBack()\\\"></button></ion-nav-buttons></ion-nav-bar><ion-content><div class=\\\"padding center\\\" \\nng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><ion-list class=\\\"list\\\" ng-show=\\\"comments.length\\\" can-swipe=\\\"true\\\">\\n<ion-item ng-repeat=\\\"item in comments | orderBy:createdAt\\\" class=\\\"item item-avatar\\\"><img \\nng-src=\\\"{{ ::item.user.photo._url || \\'./img/user.png\\'}}\\\"><div class=\\\"row\\\"><h2>{{ ::item.user.name }}</h2></div><div \\nclass=\\\"row\\\"><div class=\\\"text\\\">{{ ::item.text }}</div></div><div class=\\\"row\\\"><p>{{ ::item.createdAt | amTimeAgo }}</p>\\n</div><div ng-if=\\\"item.user.id === currentUser.id\\\"><ion-option-button class=\\\"button-info\\\" ng-click=\\\"editComment(item)\\\" \\ntranslate=\\\"edit\\\">Edit</ion-option-button><ion-option-button class=\\\"button-assertive\\\" ng-click=\\\"deleteComment(item)\\\" \\ntranslate=\\\"remove\\\">Remove</ion-option-button></div></ion-item></ion-list><div class=\\\"center-ico\\\" ng-if=\\\"nocomments\\\"><i \\nclass=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 translate=\\\"noComments\\\"></h1></div></ion-content><form name=\\\"rForm\\\" \\nng-submit=\\\"submitComment(rForm, form)\\\" novalidate><ion-footer-bar class=\\\"bar-stable item-input-inset message-footer\\\" \\nkeyboard-attach><label class=\\\"item-input-wrapper\\\"><i class=\\\"icon ion-ios-compose-outline placeholder-icon\\\"></i>\\n<textarea mentio mentio-trigger-char=\\\"\\'@\\'\\\" mentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" \\nmentio-search=\\\"searchPeople(term)\\\" mentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" \\nng-model=\\\"form.text\\\" focus-me id=\\\"textComment\\\" placeholder=\\\"Send a comment...\\\" required minlength=\\\"1\\\" maxlength=\\\"1500\\\">\\n                </textarea></label><div class=\\\"footer-btn-wrap\\\"><button class=\\\"button button-positive button-outline\\\" \\ntype=\\\"submit\\\" ng-disabled=\\\"!form.text || form.text === \\'\\'\\\">Publish</button></div></ion-footer-bar></form></ion-view>\");\n$templateCache.put(\"app/main/loading/loading.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/profile/profile.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-bar class=\\\"bar bar-light\\\"><ion-nav-back-button>\\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span>{{ vm.user.name }}</span></ion-nav-title><ion-content \\nscroll-sista=\\\"header-tabs\\\" class=\\\"animated fadeIn\\\"><div class=\\\"profile-top\\\"><div class=\\\"row\\\"><div class=\\\"col-25\\\"><img \\nclass=\\\"avatar\\\" user-avatar ng-model=\\\"vm.user\\\" ng-src=\\\"{{ vm.user.photo._url || \\'img/user.png\\' }}\\\"></div><div \\nclass=\\\"col col-statics\\\"><div class=\\\"row\\\"><div class=\\\"col\\\"><span class=\\\"text-center\\\">{{ vm.user.galleriesTotal || 0}}\\n</span><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\" ng-click=\\\"vm.openFollowers()\\\"><span class=\\\"text-center\\\">\\n{{ vm.user.followersTotal || 0}}</span><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\" \\nng-click=\\\"vm.openFollowing()\\\"><span class=\\\"text-center\\\">{{ vm.user.followingsTotal || 0}}</span><h3 \\ntranslate=\\\"followingText\\\"></h3></div></div><div class=\\\"row col-edit\\\"><div class=\\\"col center\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"col\\\" ng-if=\\\"vm.isMe && !vm.loading\\\"><button profile-modal-edit \\nuser=\\\"vm.user\\\" class=\\\"button\\\"><div translate=\\\"editProfile\\\"></div></button></div><div class=\\\"col\\\" \\nng-if=\\\"!vm.isMe && !vm.loading\\\"><button \\nng-class=\\\"{\\'button-unfollow\\': vm.user.isFollow, \\'button-follow\\': !vm.user.isFollow}\\\" ng-click=\\\"vm.follow()\\\" \\nclass=\\\"button\\\"><span ng-show=\\\"!vm.user.isFollow\\\" translate>Follow</span> <span ng-show=\\\"vm.user.isFollow\\\" translate>\\nFollowing</span></button></div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">{{ vm.user.name }}\\n</span><p class=\\\"user-status\\\">{{ vm.user.status }}</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button\\n class=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{active: vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> \\n<button class=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\">\\n</button> <button class=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"center padding\\\" \\nng-if=\\\"vm.loading\\\"><ion-spinner></ion-spinner></div><div ng-if=\\\"!vm.loading\\\"><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recentText\\\">Recent</div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.list\\\"><photo-list username=\\\"vm.user.username\\\">\\n</photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.grid\\\"><photo-grid username=\\\"vm.user.username\\\"></photo-grid></div>\\n</div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/share/post-modal.html\",\"<ion-modal-view class=\\\"modal-post\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closePost()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"SHARE.TITLE\\\"></div><button class=\\\"button button-positive\\\" ng-click=\\\"submitPost(form)\\\"><i \\nclass=\\\"icon ion-arrow-right-b\\\"></i></button></ion-header-bar><ion-content><div id=\\\"image\\\"><img ng-src=\\\"{{image}}\\\">\\n</div><ul class=\\\"list\\\"><li class=\\\"item\\\"><textarea ng-model=\\\"form.title\\\" \\nplaceholder=\\\"{{ \\'SHARE.FORM.LEGEND\\' | translate }}\\\"></textarea></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/share/share-modal.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-close-empty\\\" ng-click=\\\"close()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"shareGalleryText\\\"></div></ion-header-bar><ion-content><div class=\\\"list\\\"><div \\nclass=\\\"item item-thumbnail-left\\\"><img ng-src=\\\"{{image}}\\\" ng-click=\\\"editFilter()\\\"><textarea mentio \\nmentio-trigger-char=\\\"\\'@\\'\\\" mentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" \\nmentio-search=\\\"searchPeople(term)\\\" mentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" \\ntype=\\\"text\\\" ng-model=\\\"form.title\\\" placeholder=\\\"{{ \\'description\\'|translate }}\\\"></textarea></div></div><div class=\\\"list\\\">\\n<a class=\\\"item item-icon-left\\\" ion-location ng-model=\\\"form.address\\\" ng-if=\\\"!form.address.resume\\\"><i \\nclass=\\\"icon ion-ios-location\\\"></i> <span translate=\\\"addLocale\\\"></span> </a><a \\nclass=\\\"item item-icon-left item-button-right\\\" ng-if=\\\"form.address.resume\\\"><i class=\\\"icon ion-ios-location\\\"></i><h2>\\n{{form.address.name || form.address.resume}}</h2><p>{{form.address.resume}}</p><button class=\\\"button button-icon\\\" \\nng-click=\\\"closeAddress()\\\"><i class=\\\"icon ion-ios-close\\\"></i></button></a></div><div class=\\\"padding\\\"><button \\nclass=\\\"button button-block button-positive\\\" type=\\\"button\\\" ng-click=\\\"submit(form)\\\" translate=\\\"submit\\\"></button></div>\\n</ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/tab/main-tab.html\",\"<ion-view><ion-nav-bar class=\\\"bar bar-light\\\"><ion-nav-back-button></ion-nav-back-button></ion-nav-bar><ion-tabs \\nclass=\\\"tabs-light tabs-photogram\\\"><ion-tab title=\\\"{{ \\'PHOTOGRAM.TITLE.HOME\\' | translate }}\\\" icon-on=\\\"ion-ios-home\\\" \\nicon-off=\\\"ion-ios-home-outline\\\" ui-sref=\\\"tab.home\\\"><ion-nav-view name=\\\"tabHome\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SEARCH\\' | translate }}\\\" icon-on=\\\"ion-ios-world\\\" icon-off=\\\"ion-ios-world-outline\\\" \\nui-sref=\\\"tab.search\\\"><ion-nav-view name=\\\"tabSearch\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SHARE\\' | translate }}\\\" icon-on=\\\"ion-ios-camera\\\" icon-off=\\\"ion-ios-camera-outline\\\" \\nng-click=\\\"vm.postPhoto()\\\"><ion-nav-view name=\\\"tabCapture\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.ACTIVITY\\' | translate }}\\\" icon-on=\\\"ion-ios-heart\\\" icon-off=\\\"ion-ios-heart-outline\\\" \\nui-sref=\\\"tab.activity\\\"><ion-nav-view name=\\\"tabActivity\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.PROFILE\\' | translate }}\\\" icon-on=\\\"ion-ios-person\\\" icon-off=\\\"ion-ios-person-outline\\\" \\nui-sref=\\\"tab.account\\\"><ion-nav-view name=\\\"tabProfile\\\"></ion-nav-view></ion-tab></ion-tabs></ion-view>\");\n$templateCache.put(\"app/main/tab-account/account.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-title><span>{{ vm.user.attributes.name }}</span>\\n</ion-nav-title><ion-nav-buttons side=\\\"right\\\"><button settings-modal class=\\\"button button-icon icon ion-gear-a\\\">\\n</button></ion-nav-buttons><ion-content scroll-sista=\\\"header-tabs\\\" class=\\\"animated fadeIn\\\"><div class=\\\"profile-top\\\">\\n<div class=\\\"row\\\"><div class=\\\"col-25\\\"><img class=\\\"avatar\\\" user-avatar ng-model=\\\"vm.photo\\\" \\nng-src=\\\"{{ vm.photo._url || \\'img/user.png\\' }}\\\"></div><div class=\\\"col col-statics\\\"><div class=\\\"row\\\"><div class=\\\"col\\\">\\n<span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">{{ vm.user.attributes.galleriesTotal || 0}}</span><ion-spinner \\nng-if=\\\"vm.loading\\\"></ion-spinner><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\" ng-click=\\\"vm.openFollowers()\\\">\\n<span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">{{ vm.user.attributes.followersTotal || 0}}</span><ion-spinner \\nng-if=\\\"vm.loading\\\"></ion-spinner><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\" \\nng-click=\\\"vm.openFollowing()\\\"><span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">\\n{{ vm.user.attributes.followingsTotal || 0}}</span><ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner><h3 \\ntranslate=\\\"followingText\\\"></h3></div></div><div class=\\\"row col-edit\\\"><div class=\\\"col\\\"><button profile-modal-edit \\nuser=\\\"vm.user\\\" class=\\\"button\\\"><div translate=\\\"editProfile\\\"></div></button></div></div></div></div><div class=\\\"padding\\\">\\n<span class=\\\"user-username\\\">{{ vm.user.attributes.name }}</span><p class=\\\"user-status\\\">{{ vm.user.attributes.status }}\\n</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button class=\\\"button button-icon icon ion-grid\\\" \\nng-class=\\\"{active: vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\"></button> \\n<button class=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recentText\\\">Recent</div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.list && !vm.loading\\\"><photo-list \\nusername=\\\"vm.user.attributes.username\\\"></photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.grid && !vm.loading\\\">\\n<photo-grid username=\\\"currentUser.username\\\"></photo-grid></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-activity/activity.html\",\"<ion-view class=\\\"list-activity\\\"><ion-nav-title><span translate=\\\"activities\\\"></span></ion-nav-title><ion-content \\nscroll-sista=\\\"\\\"><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"vm.showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-positive\\\" ng-click=\\\"vm.onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"vm.showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i>\\n<p>{{ \\\"activityNotFoundText\\\" | translate }}</p></div></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" \\non-refresh=\\\"onReload()\\\"></ion-refresher><div class=\\\"list\\\"><div class=\\\"item item-avatar item-animate1\\\" \\nng-repeat=\\\"item in vm.data\\\"><img ng-src=\\\"{{ item.user.photo._url  || \\'./img/user.png\\'}}\\\"><h2 \\nng-click=\\\"vm.openProfile(item.user.username)\\\">{{ item.user.name}}</h2><div class=\\\"text\\\">{{ item.action | translate }}\\n</div><p>{{ item.createdAt | amTimeAgo }}</p><div class=\\\"img-right\\\" ng-if=\\\"item.item.gallery\\\"><img \\nng-src=\\\"{{ item.item.gallery.attributes.imageThumb._url}}\\\"></div><div class=\\\"item-button-right\\\" \\nng-if=\\\"!item.item.gallery\\\"><button class=\\\"button button-positive button-outline icon\\\" \\nng-class=\\\"{\\'ion-ios-person-outline\\': item.user.isFollow, \\'ion-ios-personadd-outline\\': !item.user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"></button></div></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" \\nng-if=\\\"vm.moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-home/home.html\",\"<ion-view class=\\\"view-home\\\"><ion-nav-buttons side=\\\"left\\\"><button \\nclass=\\\"button button-icon icon ion-ios-personadd-outline\\\" ui-sref=\\\"tab.homeUserlist\\\"></button></ion-nav-buttons>\\n<ion-nav-title><span class=\\\"icon2-logo\\\"></span></ion-nav-title><ion-content><photo-list profile=\\\"true\\\" \\nload=\\\"vm.openProfile\\\" open-likers=\\\"vm.openLikers\\\"></photo-list></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-search/search.html\",\"<ion-view><ion-nav-title><span>{{ \\'searchText\\' | translate }}</span></ion-nav-title><ion-nav-buttons side=\\\"right\\\">\\n<button class=\\\"button button-icon ion-ios-location\\\" ui-sref=\\\"tab.map\\\"></button></ion-nav-buttons><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"params.search\\\" ng-change=\\\"onSearch()\\\" \\nng-model-options=\\\"{debounce:1000}\\\" style=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\">\\n</label><button class=\\\"button button-clear\\\" ng-if=\\\"search.length\\\" ng-click=\\\"clearSearch()\\\">\\n{{ \\\"cancelText\\\" | translate }}</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><photo-grid user=\\\"\\\">\\n</photo-grid></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-search-map/searchMap.html\",\"<ion-view id=\\\"view-map\\\"><ion-nav-title>{{ \\'mapTitle\\' | translate }}</ion-nav-title><ion-nav-buttons side=\\\"right\\\">\\n<button class=\\\"button button-icon\\\" distance-modal><i class=\\\"icon ion-funnel\\\"></i></button> <button \\nclass=\\\"button button-icon\\\" ng-disabled=\\\"places.length === 0\\\" ng-click=\\\"openGallerysModal()\\\"><i \\nclass=\\\"icon ion-ios-list-outline\\\"></i></button></ion-nav-buttons><ion-content scroll=\\\"false\\\"><div \\nclass=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><div id=\\\"map_canvas\\\" data-tap-disabled=\\\"true\\\">\\n</div></ion-content><ion-footer-bar><button class=\\\"button button-positive button-block button-outline\\\" \\nng-click=\\\"onSearchHere()\\\">{{ \\'searchInHere\\' | translate }}</button></ion-footer-bar></ion-view>\");\n$templateCache.put(\"app/main/user-avatar/user-avatar.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content class=\\\"padding view-avatar\\\"><div class=\\\"row step1\\\"><div \\nclass=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar ng-model=\\\"vm.photo\\\" ng-src=\\\"{{ vm.photo._url || \\'img/user.png\\' }}\\\"></div>\\n</div><div class=\\\"step2\\\"><form><label class=\\\"item item-input\\\"><i class=\\\"icon icon-envelope placeholder-icon\\\"></i> \\n<input type=\\\"email\\\" name=\\\"email\\\" ng-model=\\\"vm.form.email\\\" disabled=\\\"disabled\\\"></label></form><formly-form \\nmodel=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"vm.rForm\\\"></formly-form></div><div class=\\\"step3\\\"><button \\nng-click=\\\"vm.submitAvatar()\\\" class=\\\"button button-block button-positive\\\" translate=\\\"submit\\\"></button></div>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-followers/user-followers.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"followersText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-following/user-following.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"followingText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-intro/user-intro.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><div class=\\\"bar bar-header\\\"><ion-language>\\n</ion-language></div><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"center\\\"><div class=\\\"step1\\\"><div \\nclass=\\\"logo\\\"><span class=\\\"icon2-logo\\\"></span></div><p>{{::\\'userIntroText\\' | translate}}</p><facebook-login>\\n</facebook-login></div></div></ion-content><ion-footer-bar><div class=\\\"row\\\"><div class=\\\"col\\\"><button \\nclass=\\\"button button-block button-light button-outline\\\" translate=\\\"signin\\\" signin-modal></button></div><div \\nclass=\\\"col\\\"><button class=\\\"button button-block button-light button-outline\\\" translate=\\\"register\\\" signup-modal></button>\\n</div></div></ion-footer-bar></ion-view>\");\n$templateCache.put(\"app/main/user-layout/user-layout.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content padding=\\\"false\\\"><ion-nav-view></ion-nav-view></ion-content>\\n</ion-view>\");\n$templateCache.put(\"app/main/user-likers/user-likers.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"likersText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-list/user-list.html\",\"<ion-view id=\\\"user-list\\\" cache-view=\\\"false\\\"><ion-nav-title><span translate=\\\"findPeople\\\"></span></ion-nav-title>\\n<ion-header-bar class=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div \\nclass=\\\"error\\\"><i class=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button\\n class=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" on-refresh=\\\"vm.onReload()\\\">\\n</ion-refresher><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.data | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div><ion-infinite-scroll \\non-infinite=\\\"vm.onLoadMore()\\\" ng-if=\\\"vm.moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-merge/merge.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><ion-content class=\\\"view-avatar padding\\\"><div \\nclass=\\\"row step1\\\"><div class=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar \\nng-src=\\\"{{ tempUser.attributes.photo._url || \\'./img/user.png\\' }}\\\"></div></div><div class=\\\"step2\\\"><formly-form \\nmodel=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"rForm\\\"><input type=\\\"hidden\\\" ng-model=\\\"vm.form.facebookimg\\\"></formly-form>\\n</div><div class=\\\"padding step3\\\"><button ng-click=\\\"vm.submit(rForm, vm.form)\\\" \\nclass=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\"></i> <span translate=\\\"mergeAccount\\\">\\n</span></button></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/walkthrough/walkthrough.html\",\"<ion-view class=\\\"view-intro bg-animate\\\" can-swipe-back=\\\"false\\\"><ion-content scroll=\\\"false\\\"><div class=\\\"intro-slider\\\">\\n<ion-slide-box active-slide=\\\"slideIndex\\\" show-pager=\\\"true\\\" on-slide-changed=\\\"vm.slideChanged($index)\\\"><ion-slide \\nng-repeat=\\\"item in vm.slides track by $index\\\"><div class=\\\"content\\\" ng-if=\\\"$index == vm.slideIndex\\\"><span class=\\\"top\\\">\\n<h2>{{ item.text | translate }}</h2></span><div class=\\\"phone {{ vm.device }}\\\"><img ng-src=\\\"{{ item.img }}\\\"></div></div>\\n</ion-slide><ion-slide><div class=\\\"content\\\" ng-if=\\\"vm.slides.length == vm.slideIndex\\\"><div class=\\\"last\\\"><div \\nclass=\\\"logo2 step1\\\"><img src=\\\"img/icon.png\\\"> <span class=\\\"icon2-logo\\\"></span></div><button \\nclass=\\\"button button-block button-clear step2\\\" ui-sref=\\\"user.intro\\\" translate=\\\"signin\\\"></button></div></div>\\n</ion-slide></ion-slide-box></div><button class=\\\"button button-positive button-fab left\\\" ng-if=\\\"vm.slideIndex\\\" \\nng-click=\\\"vm.previous()\\\"><i class=\\\"icon ion-ios-arrow-left\\\"></i></button> <button \\nclass=\\\"button button-positive button-fab right\\\" ng-hide=\\\"vm.slideIndex === vm.slides.length\\\" ng-click=\\\"vm.next()\\\"><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></button></ion-content></ion-view>\");\n$templateCache.put(\"app/component/ion-photo/view/modal.share.photo.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-dark\\\"><div class=\\\"title\\\">{{ ::\\'Share\\' | translate }}\\n</div><button class=\\\"button button-positive\\\" ng-click=\\\"modal.hide()\\\"><i class=\\\"icon ion-arrow-right-b\\\"></i></button>\\n</ion-header-bar><ion-content ng-cloak><div id=\\\"image\\\"><img ng-src=\\\"{{ ::form.photo}}\\\"><div class=\\\"title\\\">\\n{{ ::form.title }}</div></div><ul class=\\\"list\\\"><li class=\\\"padding\\\"><button ng-repeat=\\\"social in sociais\\\" \\nng-click=\\\"share(form, social)\\\" class=\\\"button button-block button-{{ social }}\\\"><i class=\\\"icon ion-social-{{ social }}\\\">\\n</i> {{ ::social | uppercase }}</button></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/component/ion-photo/view/photo.filter.carousel.html\",\"<div class=\\\"wide-as-needed\\\"><a ng-repeat=\\\"filter in filters\\\" ng-click=\\\"applyFilter(\\'image\\', filter)\\\"><div caman \\nimage=\\\"image\\\" name=\\\"filter\\\" filter=\\\"filter\\\" class=\\\"image\\\" loading=\\\"loading\\\" ng-class=\\\"{disabled: loading}\\\"></div>\\n<ion-spinner ng-if=\\\"loading\\\"></ion-spinner><p>{{ ::filter }}</p></a></div>\");\n$templateCache.put(\"app/component/ion-photo/view/photo.filter.html\",\"<div class=\\\"capture-photo\\\"><div caman filter=\\\"\\'normal\\'\\\" loading=\\\"loadingMaster\\\" class=\\\"image\\\" \\nng-class=\\\"{disabled: loadingMaster}\\\" name=\\\"\\'image\\'\\\" image=\\\"image\\\"></div><ion-spinner ng-show=\\\"loadingMaster\\\">\\n</ion-spinner></div><photo-filter-carousel apply=\\\"applyFilter\\\" image=\\\"image\\\"></photo-filter-carousel>\");}]);\n}());\n"],"sourceRoot":"/source/"}