{"version":3,"sources":["scripts/app.js"],"names":["MarkerClusterer","map","opt_markers","opt_options","this","extend","google","maps","OverlayView","map_","markers_","clusters_","sizes","styles_","ready_","options","gridSize_","minClusterSize_","maxZoom_","imagePath_","MARKER_CLUSTER_IMAGE_PATH_","imageExtension_","MARKER_CLUSTER_IMAGE_EXTENSION_","zoomOnClick_","undefined","averageCenter_","setupStyles_","setMap","prevZoom_","getZoom","that","event","addListener","zoom","resetViewport","redraw","length","addMarkers","Cluster","markerClusterer","markerClusterer_","getMap","getGridSize","getMinClusterSize","isAverageCenter","center_","bounds_","clusterIcon_","ClusterIcon","getStyles","cluster","styles","opt_padding","getMarkerClusterer","padding_","cluster_","div_","sums_","visible_","angular","module","openTermsDirective","restrict","link","scope","elem","attr","openModal","href","window","cordova","ThemeableBrowser","open","statusbar","color","toolbar","height","title","showPageTitle","backButtonCanClose","bind","directive","configLanguage","$translatePartialLoaderProvider","$translateProvider","AppConfig","tmhDynamicLocaleProvider","useLoader","urlTemplate","useSanitizeValueStrategy","useLocalStorage","localeLocationPattern","langvar","navigator","language","userlanguage","userlangvar","split","preferredLocale","searchLang","_","some","locales","code","filter","item","preferredLanguage","moment","locale","$inject","config","constant","path","configCompile","$compileProvider","debugInfoEnabled","startParse","$localStorage","$location","$rootScope","Parse","initialize","parse","appId","serverURL","server","currentUser","User","current","unit","mapType","type","console","log","runIonic","$ionicPlatform","$translate","$cordovaGlobalization","ConnectMonitor","ready","plugins","Keyboard","disableScroll","StatusBar","styleLightContent","registerBackButtonAction","preventDefault","lang","use","globalization","getPreferredLanguage","then","configIonic","$ionicConfigProvider","platform","ios","backButton","previousTitleText","icon","android","text","tabs","position","navBar","alignTitle","views","maxCache","configFacebook","$facebookProvider","setAppId","facebookAppId","setPermissions","runFacebook","LangVar","userLanguage","userLangVar","substring","toUpperCase","fbAsyncInit","FacebookUtils","init","version","xfbml","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","run","app","name","url","image","routes","home","login","statusBarColor","gaTrackingId","onesignal","translation","DAO","tables","columns","username","email","facebookimg","gender","img","facebook","qtdFollow","status","createdAt","attributes","user_id","followId","location","isLiked","likes","action","userAvatar","userName","gallery_id","key","value","$stateProvider","$urlRouterProvider","addPart","state","templateUrl","controller","controllerAs","abstract","template","$state","logOut","go","clear","tabHome","tabSearch","tabActivity","tabProfile","otherwise","prototype","obj1","obj2","object","property","apply","onAdd","setReady_","draw","size","i","push","width","fitMapToMarkers","marker","markers","getMarkers","bounds","LatLngBounds","getPosition","fitBounds","setStyles","isZoomOnClick","getTotalMarkers","setMaxZoom","maxZoom","getMaxZoom","calculator_","numStyles","index","count","dv","parseInt","Math","min","setCalculator","calculator","getCalculator","opt_nodraw","pushMarkerTo_","isAdded","repaint","addMarker","removeMarker_","indexOf","m","splice","removeMarker","removed","removeMarkers","r","createClusters_","getTotalClusters","setGridSize","setMinClusterSize","getExtendedBounds","projection","getProjection","tr","LatLng","getNorthEast","lat","lng","bl","getSouthWest","trPix","fromLatLngToDivPixel","x","y","blPix","ne","fromDivPixelToLatLng","sw","isMarkerInBounds_","contains","clearMarkers","opt_hide","remove","oldClusters","slice","setTimeout","distanceBetweenPoints_","p1","p2","R","dLat","PI","dLon","a","sin","cos","c","atan2","sqrt","addToClosestCluster_","distance","clusterToAddTo","center","getCenter","isMarkerInClusterBounds","mapBounds","getBounds","isMarkerAlreadyAdded","l","calculateBounds_","len","updateIcon","getSize","mz","hide","sums","setCenter","setSums","show","triggerClusterClick","trigger","pos","getPosFromLatLng_","style","cssText","createCss","innerHTML","panes","getPanes","overlayMouseTarget","appendChild","isDragging","addDomListener","latlng","iconAnchor_","width_","height_","top","left","display","onRemove","removeChild","text_","index_","useStyle","max","url_","textColor_","anchor_","textSize_","backgroundPosition_","backgroundPosition","txtColor","txtSize","join","hashtag","$filter","target","replacedText","targetAttr","isDefined","replacePattern1","replace","replacePattern2","words","input","isNaN","inputWords","signinModalDirective","$ionicModal","Loading","Toast","UserForm","signinModalLink","$scope","formFields","routeLogged","form","password","submitLogin","rForm","data","copy","$invalid","start","signIn","closeModal","end","resp","alert","fromTemplateUrl","animation","focusFirstInput","modal","$on","signupModalDirective","signupModalLink","register","submitRegister","$valid","signUp","error","buyDirective","$cordovaInAppBrowser","buyLink","closeButton","imagePressed","align","compareToDirective","targetModel","require","element","attrs","ctrl","compare","e1","val","e2","$watch","newValue","$setValidity","distanceModalDirective","distanceModalLink","storage","distances","onDistanceSelected","closeDistanceModal","emailValidatorDirective","emailValidatorLink","ngModel","$asyncValidators","modelValue","viewValue","validateEmail","facebookLoginDirective","$q","Facebook","Dialog","facebookLoginLink","facebookLogin","processFacebookLogin","fbAuthData","fbData","me","findByEmail","user","signInViaFacebook","get","deferred","defer","reject","instant","promise","updateWithFacebookData","getCurrentUser","tempUser","facebookStatus","userFacebook","focusMeDirective","$timeout","openKeyboard","focus","click","heartDirective","heartLink","addClass","ionLoading","loading","runLoading","$ionicLoading","showLoading","$broadcast","hideLoading","seconds","factory","PhotogramLoadingDirective","photogramFollowDirective","Photogram","modalFollow","getFollow","photoGridDirective","Gallery","$ionicPopup","Share","FeedbackModal","$ionicActionSheet","photoGridCtrl","isLoadingViewShown","isGalleriesViewShown","isErrorViewShown","isEmptyViewShown","showGalleries","showErrorView","showEmptyView","ensureMoreData","isMoreData","setGalleries","setCurrentPage","page","params","loadFeed","feed","objectId","unshift","onLoadMore","moreDataCanBeLoaded","showLoadingView","onReload","gallery","actionButtons","share","message","confirm","res","destroy","$emit","buttons","buttonDelete","actionSheet","titleText","cancelText","buttonClicked","profile","photoCommentDirective","$http","$ionicScrollDelegate","GalleryComment","GalleryForm","nocomments","galleryObj","openModalComment","formComment","submitComment","deleteComment","editComment","getComments","myIndexValue","searchPeople","term","peopleList","getFollowing","response","each","imageUrl","photo","_url","bio","people","when","getPeopleTextRaw","obj","onTap","e","update","comments","galleryId","dataForm","create","photoLikeDirective","_model","progress","liked","likeGallery","likesTotal","photoListDirective","photoListController","openComment","load","openLikers","profileModalEditDirective","logout","linkFacebook","facebookLink","submitUpdateProfile","profileModalDirective","profileModalLink","follow","loadingFollow","userObj","isFollow","followersTotal","modalProfile","changeTab","tab","list","grid","ionSearchDirective","getData","search","watchSearch","minLength","str","results","placeholder","$apply","source","settingsModalDirective","Auth","getLoggedUser","languages","sref","usernameValidatorDirective","usernameValidatorLink","validateUsername","$provide","PLURAL_CATEGORY","ZERO","ONE","TWO","FEW","MANY","OTHER","DATETIME_FORMATS","AMPMS","DAY","ERANAMES","ERAS","FIRSTDAYOFWEEK","MONTH","SHORTDAY","SHORTMONTH","STANDALONEMONTH","WEEKENDRANGE","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","NUMBER_FORMATS","CURRENCY_SYM","DECIMAL_SEP","GROUP_SEP","PATTERNS","gSize","lgSize","maxFrac","minFrac","minInt","negPre","negSuf","posPre","posSuf","pluralCat","n","opt_precision","pt_br","defineLocale","months","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","day","sameElse","relativeTime","future","past","mm","h","hh","dd","M","MM","yy","ordinalParse","ordinal","GalleryFormFactory","templateOptions","required","iconPlaceholder","label","toggleClass","formShare","UserFormFactory","valueProp","labelProp","ActionSheetFactory","Camera","$cordovaActionSheet","option","sourceType","getPicture","resolve","buttonLabels","addCancelButtonWithLabel","androidEnableCancelButton","androidTheme","actionsheet","ANDROID_THEMES","THEME_HOLO_LIGHT","btnIndex","cancel","setSessionToken","sessionToken","mSessionToken","ensureLoggedIn","become","recoverPassword","requestPasswordReset","success","resetPassword","logIn","CameraFactory","$cordovaCamera","PictureSourceType","CAMERA","PHOTOLIBRARY","quality","targetWidth","targetHeight","saveToPhotoAlbum","correctOrientation","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","fileInput","on","evt","tempImage","currentTarget","files","reader","FileReader","onload","result","readAsDataURL","toBase64Image","img_path","imageResizer","resizeImage","imageDataType","ImageResizer","IMAGE_DATA_TYPE_URL","resizeType","RESIZE_TYPE_FACTOR","format","RESIZE_TYPE_MIN_PIXEL","pixelDensity","storeImage","photoAlbum","service","ConnectMonitorFactory","$cordovaNetwork","watch","ionic","Platform","isWebView","onLine","isOnline","networkState","addEventListener","DAOFactory","$interval","database","_db","sqlitePlugin","openDatabase","createFromLocation","_promises","forEach","table","query","_query","_tables","all","getLastSync","column","lastSync","rows","insert","_columns","_values","bindings","transaction","executeSql","paginate","_table","_where","_join","_order","limit","_limit","_query1","total","TOTAL","fetchAll","output","DataUtilFactory","parseData","string","parts","Date","parseString","toLocaleDateString","getDate","inicio","year","getFullYear","month","getMonth","formatDate","milliseconds","getMonthName","meses","getFirstDay","getLastDay","DialogFactory","$cordovaDialogs","buttonsText","FacebookFactory","$facebook","$cordovaFacebook","getLoginStatus","api","fields","invite","showDialog","method","ui","friends","getTime","access_token","expiration_date","set","Boolean","save","ParseCloud","ParseObject","Object","getStatus","isApproved","Query","order","ascending","descending","date","startOf","endOf","greaterThanOrEqualTo","toDate","lessThanOrEqualTo","doesNotExist","equalTo","include","skip","find","defineProperty","GeoPoint","latitude","longitude","itemId","GalleryFactory","objPlace","address","geo","expiresAt","GeolocationFactory","getCurrentPosition","$cordovaGeolocation","geolocation","timeout","enableHighAccuracy","maximumAge","GoogleAnalyticsFactory","$cordovaGoogleAnalytics","trackingId","debugMode","startTrackerWithId","canTrack","warn","TAG","trackEvent","category","trackView","viewName","trackException","description","isFatal","InstallFactory","OneSignalFactory","OneSignal","setLogLevel","logLevel","visualLevel","googleProjectNumber","jsonData","JSON","stringify","enableInAppAlertNotification","ParseCloudFactory","Cloud","upload","file","ext","filename","File","PhotogramShareFactory","$window","socialsharing","shareWithOptions","subject","ToastFactory","$cordovaToast","okType","msg","UserFactory","$cordovaDevice","getFollowers","getLikers","device","getDevice","getCordova","model","getModel","getPlatform","uuid","getUUID","getVersion","userAgent","match","roleName","acl","ACL","setPublicReadAccess","setPublicWriteAccess","setACL","authData","expiration","setSeconds","getSeconds","authResponse","expiresIn","toISOString","facebookAuthData","userID","accessToken","fetch","userFetched","getPublicData","first","userData","Promise","setPhoto","parseFile","userId","findUsername","delete","ionLanguageDirective","modalLanguageLink","styleDefault","searchValue","selectLanguage","GeoServiceFactory","getLocation","posOptions","coords","err","findMe","getGoogleAddress","logErr","address_normal","formatted_address","address_components","imagem","numero","short_name","rua","long_name","bairro","cidade","estado","uf","pais","paisCode","cep","w","parseAddress","place","resume","geometry","addressType","types","componentForm","componentFormName","street","number","city","country","searchAddress","autocompleteService","getQueryPredictions","getDetails","placeId","detailsService","places","AutocompleteService","PlacesService","street_number","route","locality","sublocality","neighborhood","political","administrative_area_level_1","postal_code","ionLocationDirective","GeoService","ionLocationLink","suggestions","selectPlace","place_id","closeModalLocation","choosePlace","modalLocation","fromTemplate","loading1","FeedbackModalFactory","GalleryFeedback","GalleryFeedbackForm","submitFeedback","$new","photogramId","GalleryFeedbackFormFactory","feedbackDirective","PhotogramFeedback","PhotogramFeedbackForm","photogram","submit","GalleryCommentController","$stateParams","$ionicHistory","comment","canEdit","scrollBottom","goBack","formEdit","LoadingController","$cordovaSplashscreen","intro","localStorage","splashscreen","ProfileController","vm","galleries","empty","more","isMe","openFollowers","openFollowing","MainTabController","PhotoService","ActionSheet","PhotoFilter","ParseFile","postPhoto","modalPost","editFilter","modalFilter","closeAddress","close","base64","imageUploaded","AccountController","getFollower","loadingFollowers","loadingFollowing","loadingPhotos","ActivityController","GalleryActivity","openProfile","HomeController","SearchCtrl","onSearch","SearchMapController","Geolocation","removeGallerys","mapOptions","setPosition","mapTypeId","MapTypeId","ROADMAP","Map","myPosition","loadGallerys","errorMessage","markerOption","Animation","DROP","Size","scaledSize","origin","Point","anchor","Marker","imagePath","latlngbounds","setGallerys","imageThumb","maxRating","scopes","states","onSearchHere","onGalleryClicked","UserAvatarController","submitAvatar","userAvatarDirective","UserFollowerController","users","clearSearch","UserFollowingController","UserIntroController","UserLikerController","UserListController","UserMergeController","recoveryPassDirective","recovery","erro","button","$viewValue","isUndefined","forgot","UserRecoveryPassController","submitForgot","WalkthroughController","$ionicSlideBoxDelegate","currentPlatform","slideIndex","slideChanged","next","previous","slides","camanDirective","CamanJs","camanDirectiveLink","effect","ionCropDirective","$jrCrop","ionCropLink","getElem","fileUpload","crop","chooseText","canvas","toDataURL","cropSave","photoShareDirective","PhotogramSetting","photoShareLink","allowEdit","allowRotation","goHome","closeModalPost","submitPost","post","closePost","photoFilterCarouselDirective","filters","applyFilter","photoFilterDirective","CamanJsFactory","Caman","revert","render","resetEffect","reset","PhotoFilterFactory","submitCapture","dataUrl","PhotoServiceFactory","$cordovaCapture","capture","filterModal","buttonCancel","aspectRatio","popoverOptions","CameraPopoverOptions","cropModal","setting","shareModal","shareSocial","social","socials","sociais","openFilter","closeFilter","submitFilter","templateFilter","cropImage","getVideo","captureVideo","duration","mediaFiles","fullPath","jrCrop","VideoFactory","createFileEntry","fileURI","resolveLocalFileSystemURL","entry","copyFile","fail","fileEntry","substr","lastIndexOf","newName","makeid","dataDirectory","fileSystem2","copyTo","succ","onCopySuccess","nativeURL","PKVideoThumbnail","createThumbnail","prevSucc","prevImageSuccess","correctUrl","possible","charAt","floor","random","saveVideo","localURL","$templateCache","put"],"mappings":"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EAAQC,iBAAiBxQ,SAAW,SAAWyQ,EAAYC,GACvD,MAAGA,GACQ7V,EAAKwgB,iBAAiB3K,GADjC,QARR,OACItB,QAAS,UACTxY,SAAU,IACVC,KAAUukB,GAqBlBD,EAA2BxhB,SAAW,QA3BtClD,QAAQC,OAAO,WAAWqB,UAAU,oBAAqBojB,MAoB7D1kB,QAAQC,OAAO,eAAiB,WAAY,SAAU4kB,GACpD,GAAIC,IACFC,KAAM,OACNC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,KAAM,OACNC,MAAO,QAETP,GAASla,MAAM,WACb0a,kBACEC,OACE,KACA,MAEFC,KACE,UACA,gBACA,cACA,eACA,eACA,cACA,UAEFC,UACE,kBACA,iBAEFC,MACE,OACA,QAEFC,eAAkB,EAClBC,OACE,UACA,YACA,QACA,QACA,OACA,QACA,QACA,SACA,WACA,UACA,WACA,YAEFC,UACE,MACA,MACA,MACA,MACA,MACA,MACA,OAEFC,YACE,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAEFC,iBACE,UACA,YACA,QACA,QACA,OACA,QACA,QACA,SACA,WACA,UACA,WACA,YAEFC,cACE,EACA,GAEFC,SAAY,2BACZC,SAAY,qBACZC,OAAU,6BACVC,WAAc,oBACdC,WAAc,WACdC,QAAS,iBACTC,UAAa,WACbC,UAAa,SAEfC,gBACEC,aAAgB,KAChBC,YAAe,IACfC,UAAa,IACbC,WACEC,MAAS,EACTC,OAAU,EACVC,QAAW,EACXC,QAAW,EACXC,OAAU,EACVC,OAAU,IACVC,OAAU,GACVC,OAAU,GACVC,OAAU,KAEVR,MAAS,EACTC,OAAU,EACVC,QAAW,EACXC,QAAW,EACXC,OAAU,EACVC,OAAU,KACVC,OAAU,GACVC,OAAU,IACVC,OAAU,MAGdvf,GAAM,QACNwf,UAAa,SAAUC,EAAGC,GACxB,MAAID,IAAK,GAAU,GAALA,GAAe,GAALA,EACfzC,EAAgBE,IAElBF,EAAgBM,YAI7B,WACI,YAKA,IAAIqC,GAAQ/mB,OAAOsC,OAAO0kB,aAAa,MACnCC,OAAQ,2FAA2Frl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","file":"scripts/app-c773f1202d.js","sourcesContent":["(function () {\n    'use strict';\n    angular\n        .module('starter', [\n            'ionic',\n            'formlyIonic',\n            'ngMessages',\n            'ngCookies',\n            'ngStorage',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale', // angular-dynamic-locale\n            'angularMoment',\n            'ngFacebook',\n            'angular-cache',\n            'ngSanitize',\n            'mentio',\n            'ion-affix',\n            'jett.ionic.scroll.sista',\n            'ngCordova',\n            'ionic.components',\n            'app.main',\n        ]);\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('ionic.components', [\n            'ion-language',\n            'ion-location',\n            // 'ion-affix',\n            // 'ngCache',\n            'ion-photo'\n        ]);\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('href', openTermsDirective);\n\n    function openTermsDirective() {\n        return {\n            restrict: 'A',\n            link    : function (scope, elem, attr) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var href = attr.href;\n\n                    if (window.cordova) {\n                        // Keep in mind that you must add your own images to native resource.\n                        // Images below are for sample only. They are not imported by this plugin.\n                        window.cordova.ThemeableBrowser.open(href, '_blank', {\n                            statusbar         : {\n                                color: '#ffffffff'\n                            },\n                            toolbar           : {\n                                height: 44,\n                                color : '#f0f0f0ff'\n                            },\n                            title             : {\n                                color        : '#000',\n                                showPageTitle: true\n                            },\n                            backButtonCanClose: true\n                        })\n                        ;\n                    } else {\n                        window.open(href);\n                    }\n\n                    return false;\n                }\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main', [\n            'ionic',\n            'ngCordova',\n        ]);\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('ion-language', [\n            'ngCookies',\n            'pascalprecht.translate', // angular-translate\n            'tmh.dynamicLocale' // angular-dynamic-locale\n        ])\n        .config(configLanguage);\n\n    function configLanguage($translatePartialLoaderProvider, $translateProvider, AppConfig, tmhDynamicLocaleProvider) {\n\n        // angular-translate configuration\n        $translateProvider.useLoader('$translatePartialLoader', {\n            urlTemplate: '{part}/i18n/{lang}.json'\n        });\n        $translateProvider.useSanitizeValueStrategy(null);\n\n        // Translate Config\n        //$translateProvider.useMissingTranslationHandlerLog();\n        $translateProvider.useLocalStorage(); // saves selected language to localStorage\n        tmhDynamicLocaleProvider.localeLocationPattern('../bower_components/angular-i18n/angular-locale_{{locale}}.js');\n\n        var langvar     = navigator.language || navigator.userlanguage;\n        var userlangvar = langvar.split('-')[0];\n        var language    = AppConfig.preferredLocale;\n        var searchLang  = _.some(AppConfig.locales, {\n            code: userlangvar\n        });\n\n        if (searchLang) {\n            language = AppConfig.locales.filter(function (item) {\n                return language == item.code\n            })[0].code;\n        }\n        $translateProvider.preferredLanguage(language);\n        moment.locale(language);\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  angular\n    .module('ion-location', [\n      'ionic'\n    ]);\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('ion-photo', [\n            'ionic',\n            'ngCordova',\n            'jrCrop'\n        ])\n        .constant('config', {\n            path: 'app/component/ion-photo'\n        })\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('app.main');\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .run(startParse)\n        .run(runIonic)\n        .run(runFacebook)\n        .config(configCompile)\n        .config(configFacebook)\n        .config(configIonic);\n\n    function configCompile($compileProvider) {\n        $compileProvider.debugInfoEnabled(false);\n    }\n\n    function startParse(AppConfig, $localStorage, $location, $rootScope) {\n        Parse.initialize(AppConfig.parse.appId);\n        Parse.serverURL        = AppConfig.parse.server;\n        $rootScope.currentUser = Parse.User.current();\n\n        if (!$localStorage.unit) {\n            $localStorage.unit = AppConfig.map.unit;\n        }\n\n        if (!$localStorage.mapType) {\n            $localStorage.mapType = AppConfig.map.type;\n        }\n\n        console.log($rootScope.currentUser);\n        if (!$rootScope.currentUser) {\n            $location.path('/');\n        }\n    }\n\n    function runIonic($ionicPlatform, $localStorage, $translate, $cordovaGlobalization, ConnectMonitor, AppConfig, User) {\n\n        $ionicPlatform.ready(function () {\n\n            if (window.cordova && window.cordova.plugins.Keyboard) {\n                cordova.plugins.Keyboard.disableScroll(true);\n                window.StatusBar.styleLightContent();\n            }\n\n            // Remove back button android\n            $ionicPlatform.registerBackButtonAction(function (event) {\n                event.preventDefault();\n            }, 100);\n\n            if ($localStorage.lang) {\n                $translate.use($localStorage.lang);\n            } else {\n                if (typeof navigator.globalization !== 'undefined') {\n                    $cordovaGlobalization.getPreferredLanguage().then(function (language) {\n                        $translate.use((language.value).split('-')[0]);\n                    }, null);\n                }\n            }\n\n            //OneSignal.init(AppConfig.onesignal.id, AppConfig.onesignal.google);\n\n            // Enable to debug issues.\n            //if (window.plugins.OneSignal) {\n            //    window.plugins.OneSignal.setLogLevel({\n            //        logLevel   : 4,\n            //        visualLevel: 4\n            //    });\n            //\n            //    // Update with your OneSignal AppId and googleProjectNumber before running.\n            //    window.plugins.OneSignal.init(AppConfig.onesignal.id, {googleProjectNumber: AppConfig.onesignal.google}, function (jsonData) {\n            //        //alert(\"Notification received:\\n\" + JSON.stringify(jsonData));\n            //        console.log(jsonData);\n            //\n            //    });\n            //\n            //    window.plugins.OneSignal.enableInAppAlertNotification(true);\n            //\n            //}\n            //ConnectMonitor.watch();\n        });\n\n\n    }\n\n    function configIonic($ionicConfigProvider) {\n        $ionicConfigProvider.platform.ios.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        $ionicConfigProvider.platform.android.backButton.previousTitleText(' ').icon('ion-ios-arrow-left');\n        //$ionicConfigProvider.views.swipeBackEnabled (true);\n        $ionicConfigProvider.backButton.text(' ').icon('ion-ios-arrow-left');\n        //$ionicConfigProvider.backButton.previousTitleText (false).text ('Voltar').icon ('ion-ios-arrow-left');\n        //$ionicConfigProvider.views.transition ('platform');\n        $ionicConfigProvider.tabs.position('bottom');\n        $ionicConfigProvider.navBar.alignTitle('center');\n        $ionicConfigProvider.views.maxCache(1);\n    }\n\n    // Facebook\n    function configFacebook($facebookProvider, AppConfig) {\n        if (!window.cordova) {\n            console.log('Facebook Browser');\n            $facebookProvider.setAppId(AppConfig.facebookAppId);\n            $facebookProvider.setPermissions('id,name,email,user_likes,bio');\n        }\n    }\n\n    function runFacebook(AppConfig) {\n\n        if (!window.cordova) {\n            console.log('Facebook Browser');\n            var LangVar     = window.navigator.language || window.navigator.userLanguage;\n            var userLangVar = LangVar.substring(0, 2) + '_' + LangVar.substring(3, 5).toUpperCase();\n\n            window.fbAsyncInit = function () {\n                Parse.FacebookUtils.init({\n                    appId  : AppConfig.facebookAppId,\n                    version: 'v2.3',\n                    xfbml  : true\n                });\n            };\n\n            (function (d, s, id) {\n                var js, fjs = d.getElementsByTagName(s)[0];\n                if (d.getElementById(id)) {return;}\n                js     = d.createElement(s);\n                js.id  = id;\n                js.src = 'http://connect.facebook.net/' + userLangVar + '/sdk.js';\n                fjs.parentNode.insertBefore(js, fjs);\n            }(document, 'script', 'facebook-jssdk'));\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('ionic').constant('AppConfig', AppConfig());\n\n    function AppConfig() {\n        return {\n            path           : 'app/module/photogram',\n            app            : {\n                name : 'Photogram',\n                url  : 'http://photogramapp.com',\n                image: 'http://photogramapp.com/social-share.jpg',\n            },\n            routes         : {\n                home : 'tab.home',\n                login: 'user.intro'\n            },\n            statusBarColor : '#00796B',\n            gaTrackingId   : 'UA-69485876-2',\n            facebookAppId  : '1024016557617380',\n            parse          : {\n                appId : 'myAppId',\n                server: 'https://photogramapp.com/parse/',\n                //server: 'http://localhost:1337/parse/',\n            },\n            onesignal      : {\n                id    : '7b08c66d-d5a3-47b9-b091-b7f4a5bb7624',\n                google: 'AIzaSyCEBeAMSs4nrAC-2cvG6N6Q_KqJpnUrnh0'\n            },\n            map            : {\n                unit: 'mi',\n                type: 'normal',\n            },\n            locales        : [\n                {\n                    translation: 'portugues',\n                    code       : 'pt'\n                },\n                {\n                    translation: 'english',\n                    code       : 'en'\n                },\n                {\n                    translation: 'turkish',\n                    code       : 'tr'\n                },\n                {\n                    translation: 'persian',\n                    code       : 'fa'\n                },\n                {\n                    translation: 'german',\n                    code       : 'de'\n                }\n            ],\n            preferredLocale: 'en',\n            DAO            : {\n                name  : 'photogram_db',\n                tables: [\n                    {\n                        name   : 'User',\n                        columns: {\n                            id         : 'TEXT PRIMARY KEY',\n                            name       : 'TEXT',\n                            username   : 'TEXT',\n                            email      : 'TEXT',\n                            language   : 'TEXT',\n                            facebookimg: 'TEXT',\n                            gender     : 'TEXT',\n                            img        : 'TEXT',\n                            facebook   : 'INTEGER',\n                            qtdFollow  : 'INTEGER',\n                            status     : 'TEXT',\n                            createdAt  : 'INTEGER',\n                            attributes : 'TEXT'\n                        }\n                    },\n                    {\n                        name   : 'UserFollow',\n                        columns: {\n                            id      : 'TEXT PRIMARY KEY',\n                            user_id : 'TEXT',\n                            followId: 'TEXT'\n                        },\n                    },\n                    {\n                        name   : 'Gallery',\n                        columns: {\n                            id       : 'TEXT PRIMARY KEY',\n                            img      : 'TEXT',\n                            title    : 'TEXT',\n                            user_id  : 'TEXT',\n                            location : 'TEXT',\n                            isLiked  : 'BOOLEAN',\n                            likes    : 'INTEGER',\n                            createdAt: 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GalleryActivity',\n                        columns: {\n                            id        : 'TEXT PRIMARY KEY',\n                            action    : 'TEXT',\n                            img       : 'TEXT',\n                            userAvatar: 'TEXT',\n                            userName  : 'TEXT',\n                            user_id   : 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt : 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GalleryComment',\n                        columns: {\n                            id        : 'TEXT PRIMARY KEY',\n                            name      : 'TEXT',\n                            user_id   : 'TEXT',\n                            userName  : 'TEXT',\n                            gallery_id: 'TEXT',\n                            createdAt : 'INTEGER'\n                        }\n                    },\n                    {\n                        name   : 'GallerySetting',\n                        columns: {\n                            key  : 'TEXT',\n                            value: 'TEXT'\n                        }\n                    }\n                ]\n            }\n        };\n    }\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').config(routes);\n\n    function routes($stateProvider, $urlRouterProvider, $translatePartialLoaderProvider) {\n\n        // Translation\n        $translatePartialLoaderProvider.addPart('app/');\n\n        $stateProvider\n\n            .state('loading', {\n                url         : '/',\n                templateUrl : 'app/main/loading/loading.html',\n                controller  : 'LoadingCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('walkthrough', {\n                url         : '/walkthrough',\n                templateUrl : 'app/main/walkthrough/walkthrough.html',\n                controller  : 'WalkthroughCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user', {\n                url        : '/user',\n                abstract   : true,\n                templateUrl: 'app/main/user-layout/user-layout.html'\n            })\n\n            .state('user.avatar', {\n                url         : '/avatar',\n                templateUrl : 'app/main/user-avatar/user-avatar.html',\n                controller  : 'UserAvatarCtrl',\n                controllerAs: 'vm'\n            })\n\n            .state('user.intro', {\n                url        : '/intro',\n                templateUrl: 'app/main/user-intro/user-intro.html',\n                controller : 'UserIntroCtrl'\n            })\n\n            .state('user.merge', {\n                url         : '/merge',\n                controller  : 'UserMergeCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/user-merge/merge.html'\n            })\n\n            .state('logout', {\n                url         : '/logout',\n                template    : '<ion-view view-title=\"Logout\" cache-view=\"false\"><ion-content></ion-content></ion-view>',\n                controller  : function (User, $state) {\n                    User.logOut();\n                    $state.go('user.login', {clear: true});\n                },\n                controllerAs: 'vm'\n            })\n\n\n            .state('profile', {\n                url         : '/profile/:username',\n                templateUrl : 'app/main/profile/profile.html',\n                controllerAs: 'vm',\n            })\n\n\n            .state('tab', {\n                url         : '/tab',\n                abstract    : true,\n                controller  : 'MainTabCtrl',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/tab/main-tab.html'\n            })\n\n            .state('tab.home', {\n                url  : '/home',\n                views: {\n                    tabHome: {\n                        controller  : 'HomeCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-home/home.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfile', {\n                url  : '/home/:username',\n                views: {\n                    tabHome: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('galleryComments', {\n                url         : '/home/:galleryId/comments',\n                controller  : 'GalleryComment',\n                controllerAs: 'vm',\n                templateUrl : 'app/main/gallery-comment/gallery-comment.html'\n            })\n\n            .state('tab.homeGalleryLikers', {\n                url  : '/home/:galleryId/likers',\n                views: {\n                    tabHome: {\n                        controller  : 'UserLikersCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-likers/user-likers.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfileFollowers', {\n                url  : '/home/:username/followers',\n                views: {\n                    tabHome: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.homeProfileFollowing', {\n                url  : '/home/:username/follwing',\n                views: {\n                    tabHome: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.homeUserlist', {\n                url  : '/home/userlist',\n                views: {\n                    tabHome: {\n                        controller  : 'UserListCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-list/user-list.html'\n                    }\n                }\n            })\n\n            .state('tab.search', {\n                url  : '/search/:text',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search/search.html',\n                    }\n                }\n            })\n\n            .state('tab.map', {\n                url  : '/map',\n                views: {\n                    tabSearch: {\n                        controller  : 'SearchMapCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-search-map/searchMap.html',\n                    }\n                }\n            })\n\n            .state('tab.mapProfile', {\n                url  : '/map/:username',\n                views: {\n                    tabSearch: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('tab.mapProfileFollowers', {\n                url  : '/map/:username/followers',\n                views: {\n                    tabSearch: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.mapProfileFollowing', {\n                url  : '/map/:username/follwing',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.account', {\n                url  : '/account',\n                views: {\n                    tabProfile: {\n                        controller  : 'AccountCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-account/account.html'\n                    }\n                }\n            })\n\n            .state('tab.accountFollowers', {\n                url  : '/account/:username/followers',\n                views: {\n                    tabProfile: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.accountFollowing', {\n                url  : '/account/:username/follwing',\n                views: {\n                    tabProfile: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n            .state('tab.activity', {\n                url  : '/activity',\n                views: {\n                    tabActivity: {\n                        controller  : 'ActivityCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/tab-activity/activity.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfile', {\n                url  : '/activity/:username',\n                views: {\n                    tabActivity: {\n                        controller  : 'ProfileCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/profile/profile.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfileFollowers', {\n                url  : '/activity/:username/followers',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowerCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-followers/user-followers.html'\n                    }\n                }\n            })\n\n            .state('tab.activityProfileFollowing', {\n                url  : '/activity/:username/follwing',\n                views: {\n                    tabActivity: {\n                        controller  : 'UserFollowingCtrl',\n                        controllerAs: 'vm',\n                        templateUrl : 'app/main/user-following/user-following.html'\n                    }\n                }\n            })\n\n        ;\n\n        // Translation\n        //$translatePartialLoaderProvider.addPart('app/main');\n        $urlRouterProvider.otherwise('/');\n\n    }\n\n\n})();\n// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @externs_url https://raw.githubusercontent.com/google/closure-compiler/master/contrib/externs/maps/google_maps_api_v3.js\n// ==/ClosureCompiler==\n\n/**\n * @name MarkerClusterer for Google Maps v3\n * @version version 1.0\n * @author Luke Mahe\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of\n * markers.\n * <br/>\n * This is a v3 implementation of the\n * <a href=\"http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/\"\n * >v2 MarkerClusterer</a>.\n */\n\n/**\n * @license\n * Copyright 2010 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * A Marker Clusterer that clusters markers.\n *\n * @param {google.maps.Map} map The Google map to attach to.\n * @param {Array.<google.maps.Marker>=} opt_markers Optional markers to add to\n *   the cluster.\n * @param {Object=} opt_options support the following options:\n *     'gridSize': (number) The grid size of a cluster in pixels.\n *     'maxZoom': (number) The maximum zoom level that a marker can be part of a\n *                cluster.\n *     'zoomOnClick': (boolean) Whether the default behaviour of clicking on a\n *                    cluster is to zoom into it.\n *     'averageCenter': (boolean) Whether the center of each cluster should be\n *                      the average of all markers in the cluster.\n *     'minimumClusterSize': (number) The minimum number of markers to be in a\n *                           cluster before the markers are hidden and a count\n *                           is shown.\n *     'styles': (object) An object that has style properties:\n *       'url': (string) The image url.\n *       'height': (number) The image height.\n *       'width': (number) The image width.\n *       'anchor': (Array) The anchor position of the label text.\n *       'textColor': (string) The text color.\n *       'textSize': (number) The text size.\n *       'backgroundPosition': (string) The position of the backgound x, y.\n *       'iconAnchor': (Array) The anchor position of the icon x, y.\n * @constructor\n * @extends google.maps.OverlayView\n */\nfunction MarkerClusterer(map, opt_markers, opt_options) {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    this.extend(MarkerClusterer, google.maps.OverlayView);\n    this.map_ = map;\n\n    /**\n     * @type {Array.<google.maps.Marker>}\n     * @private\n     */\n    this.markers_ = [];\n\n    /**\n     *  @type {Array.<Cluster>}\n     */\n    this.clusters_ = [];\n\n    this.sizes = [53, 56, 66, 78, 90];\n\n    /**\n     * @private\n     */\n    this.styles_ = [];\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.ready_ = false;\n\n    var options = opt_options || {};\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.gridSize_ = options['gridSize'] || 60;\n\n    /**\n     * @private\n     */\n    this.minClusterSize_ = options['minimumClusterSize'] || 2;\n\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.maxZoom_ = options['maxZoom'] || null;\n\n    this.styles_ = options['styles'] || [];\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.imagePath_ = options['imagePath'] ||\n        this.MARKER_CLUSTER_IMAGE_PATH_;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.imageExtension_ = options['imageExtension'] ||\n        this.MARKER_CLUSTER_IMAGE_EXTENSION_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.zoomOnClick_ = true;\n\n    if (options['zoomOnClick'] != undefined) {\n        this.zoomOnClick_ = options['zoomOnClick'];\n    }\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.averageCenter_ = false;\n\n    if (options['averageCenter'] != undefined) {\n        this.averageCenter_ = options['averageCenter'];\n    }\n\n    this.setupStyles_();\n\n    this.setMap(map);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.prevZoom_ = this.map_.getZoom();\n\n    // Add the map event listeners\n    var that = this;\n    google.maps.event.addListener(this.map_, 'zoom_changed', function() {\n        var zoom = that.map_.getZoom();\n\n        if (that.prevZoom_ != zoom) {\n            that.prevZoom_ = zoom;\n            that.resetViewport();\n        }\n    });\n\n    google.maps.event.addListener(this.map_, 'idle', function() {\n        that.redraw();\n    });\n\n    // Finally, add the markers\n    if (opt_markers && opt_markers.length) {\n        this.addMarkers(opt_markers, false);\n    }\n}\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_ = '../images/m';\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_ = 'png';\n\n\n/**\n * Extends a objects prototype by anothers.\n *\n * @param {Object} obj1 The object to be extended.\n * @param {Object} obj2 The object to extend with.\n * @return {Object} The new extended object.\n * @ignore\n */\nMarkerClusterer.prototype.extend = function(obj1, obj2) {\n    return (function(object) {\n        for (var property in object.prototype) {\n            this.prototype[property] = object.prototype[property];\n        }\n        return this;\n    }).apply(obj1, [obj2]);\n};\n\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.onAdd = function() {\n    this.setReady_(true);\n};\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.draw = function() {};\n\n/**\n * Sets up the styles object.\n *\n * @private\n */\nMarkerClusterer.prototype.setupStyles_ = function() {\n    if (this.styles_.length) {\n        return;\n    }\n\n    for (var i = 0, size; size = this.sizes[i]; i++) {\n        this.styles_.push({\n            url: this.imagePath_ + (i + 1) + '.' + this.imageExtension_,\n            height: size,\n            width: size\n        });\n    }\n};\n\n/**\n *  Fit the map to the bounds of the markers in the clusterer.\n */\nMarkerClusterer.prototype.fitMapToMarkers = function() {\n    var markers = this.getMarkers();\n    var bounds = new google.maps.LatLngBounds();\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        bounds.extend(marker.getPosition());\n    }\n\n    this.map_.fitBounds(bounds);\n};\n\n\n/**\n *  Sets the styles.\n *\n *  @param {Object} styles The style to set.\n */\nMarkerClusterer.prototype.setStyles = function(styles) {\n    this.styles_ = styles;\n};\n\n\n/**\n *  Gets the styles.\n *\n *  @return {Object} The styles object.\n */\nMarkerClusterer.prototype.getStyles = function() {\n    return this.styles_;\n};\n\n\n/**\n * Whether zoom on click is set.\n *\n * @return {boolean} True if zoomOnClick_ is set.\n */\nMarkerClusterer.prototype.isZoomOnClick = function() {\n    return this.zoomOnClick_;\n};\n\n/**\n * Whether average center is set.\n *\n * @return {boolean} True if averageCenter_ is set.\n */\nMarkerClusterer.prototype.isAverageCenter = function() {\n    return this.averageCenter_;\n};\n\n\n/**\n *  Returns the array of markers in the clusterer.\n *\n *  @return {Array.<google.maps.Marker>} The markers.\n */\nMarkerClusterer.prototype.getMarkers = function() {\n    return this.markers_;\n};\n\n\n/**\n *  Returns the number of markers in the clusterer\n *\n *  @return {Number} The number of markers.\n */\nMarkerClusterer.prototype.getTotalMarkers = function() {\n    return this.markers_.length;\n};\n\n\n/**\n *  Sets the max zoom for the clusterer.\n *\n *  @param {number} maxZoom The max zoom level.\n */\nMarkerClusterer.prototype.setMaxZoom = function(maxZoom) {\n    this.maxZoom_ = maxZoom;\n};\n\n\n/**\n *  Gets the max zoom for the clusterer.\n *\n *  @return {number} The max zoom level.\n */\nMarkerClusterer.prototype.getMaxZoom = function() {\n    return this.maxZoom_;\n};\n\n\n/**\n *  The function for calculating the cluster icon image.\n *\n *  @param {Array.<google.maps.Marker>} markers The markers in the clusterer.\n *  @param {number} numStyles The number of styles available.\n *  @return {Object} A object properties: 'text' (string) and 'index' (number).\n *  @private\n */\nMarkerClusterer.prototype.calculator_ = function(markers, numStyles) {\n    var index = 0;\n    var count = markers.length;\n    var dv = count;\n    while (dv !== 0) {\n        dv = parseInt(dv / 10, 10);\n        index++;\n    }\n\n    index = Math.min(index, numStyles);\n    return {\n        text: count,\n        index: index\n    };\n};\n\n\n/**\n * Set the calculator function.\n *\n * @param {function(Array, number)} calculator The function to set as the\n *     calculator. The function should return a object properties:\n *     'text' (string) and 'index' (number).\n *\n */\nMarkerClusterer.prototype.setCalculator = function(calculator) {\n    this.calculator_ = calculator;\n};\n\n\n/**\n * Get the calculator function.\n *\n * @return {function(Array, number)} the calculator function.\n */\nMarkerClusterer.prototype.getCalculator = function() {\n    return this.calculator_;\n};\n\n\n/**\n * Add an array of markers to the clusterer.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarkers = function(markers, opt_nodraw) {\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        this.pushMarkerTo_(marker);\n    }\n    if (!opt_nodraw) {\n        this.redraw();\n    }\n};\n\n\n/**\n * Pushes a marker to the clusterer.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.pushMarkerTo_ = function(marker) {\n    marker.isAdded = false;\n    if (marker['draggable']) {\n        // If the marker is draggable add a listener so we update the clusters on\n        // the drag end.\n        var that = this;\n        google.maps.event.addListener(marker, 'dragend', function() {\n            marker.isAdded = false;\n            that.repaint();\n        });\n    }\n    this.markers_.push(marker);\n};\n\n\n/**\n * Adds a marker to the clusterer and redraws if needed.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarker = function(marker, opt_nodraw) {\n    this.pushMarkerTo_(marker);\n    if (!opt_nodraw) {\n        this.redraw();\n    }\n};\n\n\n/**\n * Removes a marker and returns true if removed, false if not\n *\n * @param {google.maps.Marker} marker The marker to remove\n * @return {boolean} Whether the marker was removed or not\n * @private\n */\nMarkerClusterer.prototype.removeMarker_ = function(marker) {\n    var index = -1;\n    if (this.markers_.indexOf) {\n        index = this.markers_.indexOf(marker);\n    } else {\n        for (var i = 0, m; m = this.markers_[i]; i++) {\n            if (m == marker) {\n                index = i;\n                break;\n            }\n        }\n    }\n\n    if (index == -1) {\n        // Marker is not in our list of markers.\n        return false;\n    }\n\n    marker.setMap(null);\n\n    this.markers_.splice(index, 1);\n\n    return true;\n};\n\n\n/**\n * Remove a marker from the cluster.\n *\n * @param {google.maps.Marker} marker The marker to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n * @return {boolean} True if the marker was removed.\n */\nMarkerClusterer.prototype.removeMarker = function(marker, opt_nodraw) {\n    var removed = this.removeMarker_(marker);\n\n    if (!opt_nodraw && removed) {\n        this.resetViewport();\n        this.redraw();\n        return true;\n    } else {\n        return false;\n    }\n};\n\n\n/**\n * Removes an array of markers from the cluster.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n */\nMarkerClusterer.prototype.removeMarkers = function(markers, opt_nodraw) {\n    var removed = false;\n\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        var r = this.removeMarker_(marker);\n        removed = removed || r;\n    }\n\n    if (!opt_nodraw && removed) {\n        this.resetViewport();\n        this.redraw();\n        return true;\n    }\n};\n\n\n/**\n * Sets the clusterer's ready state.\n *\n * @param {boolean} ready The state.\n * @private\n */\nMarkerClusterer.prototype.setReady_ = function(ready) {\n    if (!this.ready_) {\n        this.ready_ = ready;\n        this.createClusters_();\n    }\n};\n\n\n/**\n * Returns the number of clusters in the clusterer.\n *\n * @return {number} The number of clusters.\n */\nMarkerClusterer.prototype.getTotalClusters = function() {\n    return this.clusters_.length;\n};\n\n\n/**\n * Returns the google map that the clusterer is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nMarkerClusterer.prototype.getMap = function() {\n    return this.map_;\n};\n\n\n/**\n * Sets the google map that the clusterer is associated with.\n *\n * @param {google.maps.Map} map The map.\n */\nMarkerClusterer.prototype.setMap = function(map) {\n    this.map_ = map;\n};\n\n\n/**\n * Returns the size of the grid.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getGridSize = function() {\n    return this.gridSize_;\n};\n\n\n/**\n * Sets the size of the grid.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setGridSize = function(size) {\n    this.gridSize_ = size;\n};\n\n\n/**\n * Returns the min cluster size.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getMinClusterSize = function() {\n    return this.minClusterSize_;\n};\n\n/**\n * Sets the min cluster size.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setMinClusterSize = function(size) {\n    this.minClusterSize_ = size;\n};\n\n\n/**\n * Extends a bounds object by the grid size.\n *\n * @param {google.maps.LatLngBounds} bounds The bounds to extend.\n * @return {google.maps.LatLngBounds} The extended bounds.\n */\nMarkerClusterer.prototype.getExtendedBounds = function(bounds) {\n    var projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    var tr = new google.maps.LatLng(bounds.getNorthEast().lat(),\n        bounds.getNorthEast().lng());\n    var bl = new google.maps.LatLng(bounds.getSouthWest().lat(),\n        bounds.getSouthWest().lng());\n\n    // Convert the points to pixels and the extend out by the grid size.\n    var trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    var blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    var ne = projection.fromDivPixelToLatLng(trPix);\n    var sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n};\n\n\n/**\n * Determins if a marker is contained in a bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @param {google.maps.LatLngBounds} bounds The bounds to check against.\n * @return {boolean} True if the marker is in the bounds.\n * @private\n */\nMarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {\n    return bounds.contains(marker.getPosition());\n};\n\n\n/**\n * Clears all clusters and markers from the clusterer.\n */\nMarkerClusterer.prototype.clearMarkers = function() {\n    this.resetViewport(true);\n\n    // Set the markers a empty array.\n    this.markers_ = [];\n};\n\n\n/**\n * Clears all existing clusters and recreates them.\n * @param {boolean} opt_hide To also hide the marker.\n */\nMarkerClusterer.prototype.resetViewport = function(opt_hide) {\n    // Remove all the clusters\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n        cluster.remove();\n    }\n\n    // Reset the markers to not be added and to be invisible.\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n        marker.isAdded = false;\n        if (opt_hide) {\n            marker.setMap(null);\n        }\n    }\n\n    this.clusters_ = [];\n};\n\n/**\n *\n */\nMarkerClusterer.prototype.repaint = function() {\n    var oldClusters = this.clusters_.slice();\n    this.clusters_.length = 0;\n    this.resetViewport();\n    this.redraw();\n\n    // Remove the old clusters.\n    // Do it in a timeout so the other clusters have been drawn first.\n    window.setTimeout(function() {\n        for (var i = 0, cluster; cluster = oldClusters[i]; i++) {\n            cluster.remove();\n        }\n    }, 0);\n};\n\n\n/**\n * Redraws the clusters.\n */\nMarkerClusterer.prototype.redraw = function() {\n    this.createClusters_();\n};\n\n\n/**\n * Calculates the distance between two latlng locations in km.\n * @see http://www.movable-type.co.uk/scripts/latlong.html\n *\n * @param {google.maps.LatLng} p1 The first lat lng point.\n * @param {google.maps.LatLng} p2 The second lat lng point.\n * @return {number} The distance between the two points in km.\n * @private\n */\nMarkerClusterer.prototype.distanceBetweenPoints_ = function(p1, p2) {\n    if (!p1 || !p2) {\n        return 0;\n    }\n\n    var R = 6371; // Radius of the Earth in km\n    var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\n    var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var d = R * c;\n    return d;\n};\n\n\n/**\n * Add a marker to a cluster, or creates a new cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.addToClosestCluster_ = function(marker) {\n    var distance = 40000; // Some large number\n    var clusterToAddTo = null;\n    var pos = marker.getPosition();\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n        var center = cluster.getCenter();\n        if (center) {\n            var d = this.distanceBetweenPoints_(center, marker.getPosition());\n            if (d < distance) {\n                distance = d;\n                clusterToAddTo = cluster;\n            }\n        }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n        clusterToAddTo.addMarker(marker);\n    } else {\n        var cluster = new Cluster(this);\n        cluster.addMarker(marker);\n        this.clusters_.push(cluster);\n    }\n};\n\n\n/**\n * Creates the clusters.\n *\n * @private\n */\nMarkerClusterer.prototype.createClusters_ = function() {\n    if (!this.ready_) {\n        return;\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),\n        this.map_.getBounds().getNorthEast());\n    var bounds = this.getExtendedBounds(mapBounds);\n\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n        if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n            this.addToClosestCluster_(marker);\n        }\n    }\n};\n\n\n/**\n * A cluster that contains markers.\n *\n * @param {MarkerClusterer} markerClusterer The markerclusterer that this\n *     cluster is associated with.\n * @constructor\n * @ignore\n */\nfunction Cluster(markerClusterer) {\n    this.markerClusterer_ = markerClusterer;\n    this.map_ = markerClusterer.getMap();\n    this.gridSize_ = markerClusterer.getGridSize();\n    this.minClusterSize_ = markerClusterer.getMinClusterSize();\n    this.averageCenter_ = markerClusterer.isAverageCenter();\n    this.center_ = null;\n    this.markers_ = [];\n    this.bounds_ = null;\n    this.clusterIcon_ = new ClusterIcon(this, markerClusterer.getStyles(),\n        markerClusterer.getGridSize());\n}\n\n/**\n * Determins if a marker is already added to the cluster.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker is already added.\n */\nCluster.prototype.isMarkerAlreadyAdded = function(marker) {\n    if (this.markers_.indexOf) {\n        return this.markers_.indexOf(marker) != -1;\n    } else {\n        for (var i = 0, m; m = this.markers_[i]; i++) {\n            if (m == marker) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n\n\n/**\n * Add a marker the cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @return {boolean} True if the marker was added.\n */\nCluster.prototype.addMarker = function(marker) {\n    if (this.isMarkerAlreadyAdded(marker)) {\n        return false;\n    }\n\n    if (!this.center_) {\n        this.center_ = marker.getPosition();\n        this.calculateBounds_();\n    } else {\n        if (this.averageCenter_) {\n            var l = this.markers_.length + 1;\n            var lat = (this.center_.lat() * (l-1) + marker.getPosition().lat()) / l;\n            var lng = (this.center_.lng() * (l-1) + marker.getPosition().lng()) / l;\n            this.center_ = new google.maps.LatLng(lat, lng);\n            this.calculateBounds_();\n        }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    var len = this.markers_.length;\n    if (len < this.minClusterSize_ && marker.getMap() != this.map_) {\n        // Min cluster size not reached so show the marker.\n        marker.setMap(this.map_);\n    }\n\n    if (len == this.minClusterSize_) {\n        // Hide the markers that were showing.\n        for (var i = 0; i < len; i++) {\n            this.markers_[i].setMap(null);\n        }\n    }\n\n    if (len >= this.minClusterSize_) {\n        marker.setMap(null);\n    }\n\n    this.updateIcon();\n    return true;\n};\n\n\n/**\n * Returns the marker clusterer that the cluster is associated with.\n *\n * @return {MarkerClusterer} The associated marker clusterer.\n */\nCluster.prototype.getMarkerClusterer = function() {\n    return this.markerClusterer_;\n};\n\n\n/**\n * Returns the bounds of the cluster.\n *\n * @return {google.maps.LatLngBounds} the cluster bounds.\n */\nCluster.prototype.getBounds = function() {\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    var markers = this.getMarkers();\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        bounds.extend(marker.getPosition());\n    }\n    return bounds;\n};\n\n\n/**\n * Removes the cluster\n */\nCluster.prototype.remove = function() {\n    this.clusterIcon_.remove();\n    this.markers_.length = 0;\n    delete this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {number} The cluster center.\n */\nCluster.prototype.getSize = function() {\n    return this.markers_.length;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {Array.<google.maps.Marker>} The cluster center.\n */\nCluster.prototype.getMarkers = function() {\n    return this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {google.maps.LatLng} The cluster center.\n */\nCluster.prototype.getCenter = function() {\n    return this.center_;\n};\n\n\n/**\n * Calculated the extended bounds of the cluster with the grid.\n *\n * @private\n */\nCluster.prototype.calculateBounds_ = function() {\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n};\n\n\n/**\n * Determines if a marker lies in the clusters bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker lies in the bounds.\n */\nCluster.prototype.isMarkerInClusterBounds = function(marker) {\n    return this.bounds_.contains(marker.getPosition());\n};\n\n\n/**\n * Returns the map that the cluster is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nCluster.prototype.getMap = function() {\n    return this.map_;\n};\n\n\n/**\n * Updates the cluster icon\n */\nCluster.prototype.updateIcon = function() {\n    var zoom = this.map_.getZoom();\n    var mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz && zoom > mz) {\n        // The zoom is greater than our max zoom so show all the markers in cluster.\n        for (var i = 0, marker; marker = this.markers_[i]; i++) {\n            marker.setMap(this.map_);\n        }\n        return;\n    }\n\n    if (this.markers_.length < this.minClusterSize_) {\n        // Min cluster size not yet reached.\n        this.clusterIcon_.hide();\n        return;\n    }\n\n    var numStyles = this.markerClusterer_.getStyles().length;\n    var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.setSums(sums);\n    this.clusterIcon_.show();\n};\n\n\n/**\n * A cluster icon\n *\n * @param {Cluster} cluster The cluster to be associated with.\n * @param {Object} styles An object that has style properties:\n *     'url': (string) The image url.\n *     'height': (number) The image height.\n *     'width': (number) The image width.\n *     'anchor': (Array) The anchor position of the label text.\n *     'textColor': (string) The text color.\n *     'textSize': (number) The text size.\n *     'backgroundPosition: (string) The background postition x, y.\n * @param {number=} opt_padding Optional padding to apply to the cluster icon.\n * @constructor\n * @extends google.maps.OverlayView\n * @ignore\n */\nfunction ClusterIcon(cluster, styles, opt_padding) {\n    cluster.getMarkerClusterer().extend(ClusterIcon, google.maps.OverlayView);\n\n    this.styles_ = styles;\n    this.padding_ = opt_padding || 0;\n    this.cluster_ = cluster;\n    this.center_ = null;\n    this.map_ = cluster.getMap();\n    this.div_ = null;\n    this.sums_ = null;\n    this.visible_ = false;\n\n    this.setMap(this.map_);\n}\n\n\n/**\n * Triggers the clusterclick event and zoom's if the option is set.\n *\n * @param {google.maps.MouseEvent} event The event to propagate\n */\nClusterIcon.prototype.triggerClusterClick = function(event) {\n    var markerClusterer = this.cluster_.getMarkerClusterer();\n\n    // Trigger the clusterclick event.\n    google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_, event);\n\n    if (markerClusterer.isZoomOnClick()) {\n        // Zoom into the cluster.\n        this.map_.fitBounds(this.cluster_.getBounds());\n    }\n};\n\n\n/**\n * Adding the cluster icon to the dom.\n * @ignore\n */\nClusterIcon.prototype.onAdd = function() {\n    this.div_ = document.createElement('DIV');\n    if (this.visible_) {\n        var pos = this.getPosFromLatLng_(this.center_);\n        this.div_.style.cssText = this.createCss(pos);\n        this.div_.innerHTML = this.sums_.text;\n    }\n\n    var panes = this.getPanes();\n    panes.overlayMouseTarget.appendChild(this.div_);\n\n    var that = this;\n    var isDragging = false;\n    google.maps.event.addDomListener(this.div_, 'click', function(event) {\n        // Only perform click when not preceded by a drag\n        if (!isDragging) {\n            that.triggerClusterClick(event);\n        }\n    });\n    google.maps.event.addDomListener(this.div_, 'mousedown', function() {\n        isDragging = false;\n    });\n    google.maps.event.addDomListener(this.div_, 'mousemove', function() {\n        isDragging = true;\n    });\n};\n\n\n/**\n * Returns the position to place the div dending on the latlng.\n *\n * @param {google.maps.LatLng} latlng The position in latlng.\n * @return {google.maps.Point} The position in pixels.\n * @private\n */\nClusterIcon.prototype.getPosFromLatLng_ = function(latlng) {\n    var pos = this.getProjection().fromLatLngToDivPixel(latlng);\n\n    if (typeof this.iconAnchor_ === 'object' && this.iconAnchor_.length === 2) {\n        pos.x -= this.iconAnchor_[0];\n        pos.y -= this.iconAnchor_[1];\n    } else {\n        pos.x -= parseInt(this.width_ / 2, 10);\n        pos.y -= parseInt(this.height_ / 2, 10);\n    }\n    return pos;\n};\n\n\n/**\n * Draw the icon.\n * @ignore\n */\nClusterIcon.prototype.draw = function() {\n    if (this.visible_) {\n        var pos = this.getPosFromLatLng_(this.center_);\n        this.div_.style.top = pos.y + 'px';\n        this.div_.style.left = pos.x + 'px';\n    }\n};\n\n\n/**\n * Hide the icon.\n */\nClusterIcon.prototype.hide = function() {\n    if (this.div_) {\n        this.div_.style.display = 'none';\n    }\n    this.visible_ = false;\n};\n\n\n/**\n * Position and show the icon.\n */\nClusterIcon.prototype.show = function() {\n    if (this.div_) {\n        var pos = this.getPosFromLatLng_(this.center_);\n        this.div_.style.cssText = this.createCss(pos);\n        this.div_.style.display = '';\n    }\n    this.visible_ = true;\n};\n\n\n/**\n * Remove the icon from the map\n */\nClusterIcon.prototype.remove = function() {\n    this.setMap(null);\n};\n\n\n/**\n * Implementation of the onRemove interface.\n * @ignore\n */\nClusterIcon.prototype.onRemove = function() {\n    if (this.div_ && this.div_.parentNode) {\n        this.hide();\n        this.div_.parentNode.removeChild(this.div_);\n        this.div_ = null;\n    }\n};\n\n\n/**\n * Set the sums of the icon.\n *\n * @param {Object} sums The sums containing:\n *   'text': (string) The text to display in the icon.\n *   'index': (number) The style index of the icon.\n */\nClusterIcon.prototype.setSums = function(sums) {\n    this.sums_ = sums;\n    this.text_ = sums.text;\n    this.index_ = sums.index;\n    if (this.div_) {\n        this.div_.innerHTML = sums.text;\n    }\n\n    this.useStyle();\n};\n\n\n/**\n * Sets the icon to the the styles.\n */\nClusterIcon.prototype.useStyle = function() {\n    var index = Math.max(0, this.sums_.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    var style = this.styles_[index];\n    this.url_ = style['url'];\n    this.height_ = style['height'];\n    this.width_ = style['width'];\n    this.textColor_ = style['textColor'];\n    this.anchor_ = style['anchor'];\n    this.textSize_ = style['textSize'];\n    this.backgroundPosition_ = style['backgroundPosition'];\n    this.iconAnchor_ = style['iconAnchor'];\n};\n\n\n/**\n * Sets the center of the icon.\n *\n * @param {google.maps.LatLng} center The latlng to set as the center.\n */\nClusterIcon.prototype.setCenter = function(center) {\n    this.center_ = center;\n};\n\n\n/**\n * Create the css text based on the position of the icon.\n *\n * @param {google.maps.Point} pos The position.\n * @return {string} The css style text.\n */\nClusterIcon.prototype.createCss = function(pos) {\n    var style = [];\n    style.push('background-image:url(' + this.url_ + ');');\n    var backgroundPosition = this.backgroundPosition_ ? this.backgroundPosition_ : '0 0';\n    style.push('background-position:' + backgroundPosition + ';');\n\n    if (typeof this.anchor_ === 'object') {\n        if (typeof this.anchor_[0] === 'number' && this.anchor_[0] > 0 &&\n            this.anchor_[0] < this.height_) {\n            style.push('height:' + (this.height_ - this.anchor_[0]) +\n                'px; padding-top:' + this.anchor_[0] + 'px;');\n        } else if (typeof this.anchor_[0] === 'number' && this.anchor_[0] < 0 &&\n            -this.anchor_[0] < this.height_) {\n            style.push('height:' + this.height_ + 'px; line-height:' + (this.height_ + this.anchor_[0]) +\n                'px;');\n        } else {\n            style.push('height:' + this.height_ + 'px; line-height:' + this.height_ +\n                'px;');\n        }\n        if (typeof this.anchor_[1] === 'number' && this.anchor_[1] > 0 &&\n            this.anchor_[1] < this.width_) {\n            style.push('width:' + (this.width_ - this.anchor_[1]) +\n                'px; padding-left:' + this.anchor_[1] + 'px;');\n        } else {\n            style.push('width:' + this.width_ + 'px; text-align:center;');\n        }\n    } else {\n        style.push('height:' + this.height_ + 'px; line-height:' +\n            this.height_ + 'px; width:' + this.width_ + 'px; text-align:center;');\n    }\n\n    var txtColor = this.textColor_ ? this.textColor_ : 'black';\n    var txtSize = this.textSize_ ? this.textSize_ : 11;\n\n    style.push('cursor:pointer; top:' + pos.y + 'px; left:' +\n        pos.x + 'px; color:' + txtColor + '; position:absolute; font-size:' +\n        txtSize + 'px; font-family:Arial,sans-serif; font-weight:bold');\n    return style.join('');\n};\n\n\n// Export Symbols for Closure\n// If you are not going to compile with closure then you can remove the\n// code below.\nwindow['MarkerClusterer'] = MarkerClusterer;\nMarkerClusterer.prototype['addMarker'] = MarkerClusterer.prototype.addMarker;\nMarkerClusterer.prototype['addMarkers'] = MarkerClusterer.prototype.addMarkers;\nMarkerClusterer.prototype['clearMarkers'] =\n    MarkerClusterer.prototype.clearMarkers;\nMarkerClusterer.prototype['fitMapToMarkers'] =\n    MarkerClusterer.prototype.fitMapToMarkers;\nMarkerClusterer.prototype['getCalculator'] =\n    MarkerClusterer.prototype.getCalculator;\nMarkerClusterer.prototype['getGridSize'] =\n    MarkerClusterer.prototype.getGridSize;\nMarkerClusterer.prototype['getExtendedBounds'] =\n    MarkerClusterer.prototype.getExtendedBounds;\nMarkerClusterer.prototype['getMap'] = MarkerClusterer.prototype.getMap;\nMarkerClusterer.prototype['getMarkers'] = MarkerClusterer.prototype.getMarkers;\nMarkerClusterer.prototype['getMaxZoom'] = MarkerClusterer.prototype.getMaxZoom;\nMarkerClusterer.prototype['getStyles'] = MarkerClusterer.prototype.getStyles;\nMarkerClusterer.prototype['getTotalClusters'] =\n    MarkerClusterer.prototype.getTotalClusters;\nMarkerClusterer.prototype['getTotalMarkers'] =\n    MarkerClusterer.prototype.getTotalMarkers;\nMarkerClusterer.prototype['redraw'] = MarkerClusterer.prototype.redraw;\nMarkerClusterer.prototype['removeMarker'] =\n    MarkerClusterer.prototype.removeMarker;\nMarkerClusterer.prototype['removeMarkers'] =\n    MarkerClusterer.prototype.removeMarkers;\nMarkerClusterer.prototype['resetViewport'] =\n    MarkerClusterer.prototype.resetViewport;\nMarkerClusterer.prototype['repaint'] =\n    MarkerClusterer.prototype.repaint;\nMarkerClusterer.prototype['setCalculator'] =\n    MarkerClusterer.prototype.setCalculator;\nMarkerClusterer.prototype['setGridSize'] =\n    MarkerClusterer.prototype.setGridSize;\nMarkerClusterer.prototype['setMaxZoom'] =\n    MarkerClusterer.prototype.setMaxZoom;\nMarkerClusterer.prototype['onAdd'] = MarkerClusterer.prototype.onAdd;\nMarkerClusterer.prototype['draw'] = MarkerClusterer.prototype.draw;\n\nCluster.prototype['getCenter'] = Cluster.prototype.getCenter;\nCluster.prototype['getSize'] = Cluster.prototype.getSize;\nCluster.prototype['getMarkers'] = Cluster.prototype.getMarkers;\n\nClusterIcon.prototype['onAdd'] = ClusterIcon.prototype.onAdd;\nClusterIcon.prototype['draw'] = ClusterIcon.prototype.draw;\nClusterIcon.prototype['onRemove'] = ClusterIcon.prototype.onRemove;\n\n(function () {\n    'use strict';\n\n    angular.module('starter').filter('hashtag', hashtag);\n\n    function hashtag($filter) {\n        return function (text, target) {\n            if (!text) return text;\n\n            var replacedText = $filter('linky')(text, target);\n\n            var targetAttr = \"\";\n            if (angular.isDefined(target)) {\n                targetAttr = target;\n            }\n\n            // replace #hashtags and send them to twitter\n            var replacePattern1 = /(^|\\s)#(\\w*[a-zA-Z_]+\\w*)/gim;\n            replacedText        = text.replace(replacePattern1, '$1<a href=\"#/tab/search/%23$2\"' + targetAttr + '>#$2</a>');\n\n            // replace @mentions but keep them to our site\n            var replacePattern2 = /(^|\\s)\\@(\\w*[a-zA-Z_]+\\w*)/gim;\n            replacedText        = replacedText.replace(replacePattern2, '$1<a href=\"#/tab/home/$2\" >@$2</a>');\n\n            return replacedText;\n        };\n    }\n\n})();\n\n\n(function () {\n    'use strict';\n\n    angular.module('starter').filter('words', words);\n\n    function words() {\n\n        ////////////////\n\n        return function (input, words) {\n            if (isNaN(words)) {\n                return input;\n            }\n            if (words <= 0) {\n                return '';\n            }\n            if (input) {\n                var inputWords = input.split(/\\s+/);\n                if (inputWords.length > words) {\n                    input = inputWords.slice(0, words).join(' ') + '\\u2026';\n                }\n            }\n            return input;\n        };\n    }\n\n})();\n\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('signinModal', signinModalDirective);\n\n    function signinModalDirective($ionicModal, Loading, User, $state, Toast, UserForm, AppConfig, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : signinModalLink,\n        };\n\n        function signinModalLink($scope, elem, attr) {\n            elem.bind('click', function () {\n\n                $scope.formFields  = UserForm.login;\n                $scope.routeLogged = AppConfig.routes.home;\n\n                $scope.form = {\n                    username: '',\n                    password: ''\n                };\n\n                $scope.submitLogin = function (rForm, data) {\n                    var form = angular.copy(data);\n                    if (!rForm.$invalid) {\n                        Loading.start();\n                        User.signIn(form).then(function (data) {\n                            console.log(data);\n                            $rootScope.currentUser = data;\n                            $state.go($scope.routeLogged, {\n                                clear: true\n                            });\n                            $scope.closeModal();\n                            Loading.end();\n                        }).catch(function (resp) {\n                            Toast.alert({\n                                title: 'Error',\n                                text : 'Incorrect username or password'\n                            });\n                            Loading.end();\n                        });\n                    } else {\n                        return false;\n                    }\n                };\n\n                $ionicModal.fromTemplateUrl('app/directive/SigninModalDirective.html', {\n                    scope          : $scope,\n                    animation      : 'slide-in-up',\n                    focusFirstInput: true,\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('signupModal', signupModalDirective);\n\n    function signupModalDirective(UserForm, AppConfig, Loading, User, $state, Toast, $ionicModal, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : signupModalLink,\n        };\n\n        function signupModalLink($scope, elem, attr) {\n            elem.bind('click', function () {\n\n                $scope.formFields  = UserForm.register;\n                $scope.routeLogged = AppConfig.routes.home;\n\n                $scope.form = {\n                    username: '',\n                    email   : '',\n                    password: ''\n                };\n\n                $scope.submitRegister = function (rForm, data) {\n                    if (rForm.$valid) {\n                        Loading.start();\n                        var form = angular.copy(data);\n                        User.signUp(form).then(function (resp) {\n                            console.log(resp);\n\n                            // After register, login\n                            User.signIn({\n                                username: form.username,\n                                password: form.password\n                            }).then(function (data) {\n                                console.log(data);\n                                $rootScope.currentUser = Parse.User.current();\n                                $state.go('user.avatar', {\n                                    clear: true\n                                });\n                                Loading.end();\n                                $scope.closeModal();\n                            }).catch(function (resp) {\n                                console.log(resp);\n                                Toast.alert({\n                                    title: 'Alert',\n                                    text : resp.error\n                                });\n                                Loading.end();\n                            });\n                        }).catch(function (resp) {\n                            console.log(resp);\n                            Toast.alert({\n                                title: 'Alert',\n                                text : resp.error\n                            });\n                            Loading.end();\n                        });\n                    }\n\n\n                };\n\n                $ionicModal.fromTemplateUrl('app/directive/SignupModalDirective.html', {\n                    scope          : $scope,\n                    animation      : 'slide-in-up',\n                    focusFirstInput: true,\n                }).then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n\n                $scope.closeModal = function () {\n                    $scope.modal.hide();\n                };\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n            });\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .directive('buy', buyDirective);\n\n    function buyDirective($cordovaInAppBrowser) {\n        return {\n            restrict: 'A',\n            link: buyLink\n        };\n\n        function buyLink(scope, elem) {\n            elem.bind('click', function () {\n                var url     = 'https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S';\n\n                if(window.cordova ) {\n                    cordova\n                        .ThemeableBrowser\n                        .open(url, '_blank', {\n                            statusbar: {\n                                color: '#ffffffff'\n                            },\n                            toolbar: {\n                                height: 44,\n                                color: '#f0f0f0ff'\n                            },\n                            title: {\n                                color: '#333333',\n                                showPageTitle: true\n                            },\n                            closeButton: {\n                                image: 'close',\n                                imagePressed: 'close_pressed',\n                                align: 'left',\n                                event: 'closePressed'\n                            },\n                            backButtonCanClose: true\n                        });\n                } else {\n                    window.open(url,'_blank');\n                }\n            });\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('compareTo', compareToDirective);\n\n    function compareToDirective() {\n        return {\n            restrict: 'A',\n            scope   : {\n                targetModel: '=compareTo'\n            },\n            require : 'ngModel',\n            link    : function postLink(scope, element, attrs, ctrl) {\n\n                var compare = function () {\n\n                    var e1 = element.val();\n                    var e2 = scope.targetModel;\n\n                    if (e2 !== null) {\n                        return e1 === e2;\n                    }\n\n                    return false;\n                };\n\n                scope.$watch(compare, function (newValue) {\n                    ctrl.$setValidity('errorCompareTo', newValue);\n                });\n\n            }\n        };\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('distanceModal', distanceModalDirective);\n\n    function distanceModalDirective($localStorage, $ionicModal) {\n        return {\n            restrict: 'A',\n            link    : distanceModalLink\n        };\n\n        function distanceModalLink($scope, elem, attr) {\n\n            elem.bind('click', function () {\n                    $scope.storage   = $localStorage;\n                    $scope.distances = [\n                        {\n                            val : 0.20,\n                            text: 'perto'\n                        },\n                        {\n                            val : 0.60,\n                            text: 'longe'\n                        },\n                        {\n                            val : 1.00,\n                            text: '1 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 5.00,\n                            text: '5 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 10.00,\n                            text: '10 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 25.00,\n                            text: '25 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 50.00,\n                            text: '50 ' + $scope.storage.unit\n                        },\n                        {\n                            val : 100.00,\n                            text: '100 ' + $scope.storage.unit\n                        },\n                    ];\n\n                    $ionicModal.fromTemplateUrl('app/directive/distanceModal.html', {\n                        scope: $scope\n                    }).then(function (modal) {\n                        $scope.modal = modal;\n                        $scope.modal.show();\n\n                    });\n\n                    $scope.onDistanceSelected = function (distance) {\n                        console.log('Distance', distance);\n                    };\n\n                    $scope.closeDistanceModal = function () {\n                        $scope.modal.hide();\n                        $scope.modal.remove();\n                    };\n\n\n                }\n            );\n        }\n    }\n\n})\n();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('emailValidator', emailValidatorDirective);\n\n    function emailValidatorDirective(User) {\n        return {\n            require: 'ngModel',\n            link    : emailValidatorLink,\n        };\n\n        function emailValidatorLink(scope, elem, attr,ngModel) {\n            ngModel.$asyncValidators.email = function  (modelValue, viewValue) {\n                console.log(viewValue);\n                if(viewValue) {\n                    return User.validateEmail(viewValue);\n                }\n            }\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('facebookLogin', facebookLoginDirective);\n\n    function facebookLoginDirective(Loading, $state, $q, $translate, Facebook, Dialog, User, $rootScope, Toast) {\n        return {\n            restrict: 'E',\n            link    : facebookLoginLink,\n            template: '<button class=\"button button-block button-facebook\"><i class=\"icon ion-social-facebook\"></i> <span>{{ name || \\'loginWithFacebook\\'| translate}}</span> </button>',\n        };\n\n        function facebookLoginLink(scope, elem, attr) {\n\n            scope.facebookStatus = null;\n            Facebook.getCurrentUser().then(function (resp) {\n                console.log(resp);\n                scope.facebookStatus = resp;\n                return resp;\n            }).then(function (facebookStatus) {\n                if (facebookStatus.status === 'connected') {\n                    Facebook.me().then(function (userFacebook) {\n                        scope.name = userFacebook.name;\n                    });\n                }\n            }).catch(function () {\n                console.log('Not logged');\n            });\n\n            elem.bind('click', facebookLogin);\n\n            function facebookLogin() {\n                Loading.start();\n\n                Facebook.getCurrentUser().then(function (fbAuthData) {\n                    console.log(fbAuthData);\n\n                    if (fbAuthData.status === 'connected') {\n                        var fbData = null;\n                        return Facebook.me().then(function (data) {\n                            fbData = data;\n                            return User.findByEmail(data.email);\n                        }).then(function (user) {\n\n                            if (!user.id) {\n                                return User.signInViaFacebook(fbAuthData);\n                            } else if (user.get('authData')) {\n                                if (user.get('authData').facebook.id === fbData.id) {\n                                    return User.signInViaFacebook(fbAuthData);\n                                }\n                            } else {\n                                console.log(user);\n                                console.log(user.attributes);\n                                // merge\n                                $rootScope.tempUser = user;\n                                $state.go('user.merge', {\n                                    clear: true\n                                });\n                                Loading.end();\n                                //var deferred = $q.defer();\n                                //deferred.reject($translate.instant('emailFacebookTakenText'));\n                                //return deferred.promise;\n                            }\n                        });\n                        //           .then(function () {\n                        //               return User.updateWithFacebookData(fbData);\n                        //           }).then(function (user) {\n                        //    Toast.show($translate.instant('loggedInAsText') + ' ' + user.get('email'));\n                        //}, function (error) {\n                        //    Dialog.alert(error);\n                        //});\n\n                    }\n\n                    switch (fbAuthData.status) {\n                        case 'connected':\n                            // logado\n                            processFacebookLogin();\n                            //Loading.end();\n                            //$state.go(AppConfig.routes.home, {\n                            //    clear: true\n                            //});\n                            break;\n                        case 1:\n                            // novo user\n                            $state.go('user.avatar', {\n                                clear: true\n                            });\n                            break;\n                        case 2:\n                            // merge\n                            $state.go('user.merge', {\n                                clear: true\n                            });\n                            break;\n                    }\n                }).catch(function () {\n                    Loading.end();\n                });\n\n                function processFacebookLogin(fbAuthData) {\n\n                    Loading.start();\n\n                    var fbData = null;\n\n                    return Facebook.me().then(function (data) {\n                        fbData = data;\n                        return User.findByEmail(data.email);\n                    }).then(function (user) {\n                        if (!user.id) {\n                            return User.signInViaFacebook(fbAuthData);\n                        } else if (user.get('authData')) {\n                            if (user.get('authData').facebook.id === fbData.id) {\n                                return User.signInViaFacebook(fbAuthData);\n                            }\n                        } else {\n                            var deferred = $q.defer();\n                            deferred.reject($translate.instant('emailFacebookTakenText'));\n                            return deferred.promise;\n                        }\n                    }).then(function () {\n                        return User.updateWithFacebookData(fbData);\n                    }).then(function (user) {\n                        Toast.show($translate.instant('loggedInAsText') + ' ' + user.get('email'));\n                    }, function (error) {\n                        Dialog.alert(error);\n                    });\n                }\n\n            }\n\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('focusMe', focusMeDirective);\n\n    function focusMeDirective($timeout, $rootScope) {\n        return {\n            restrict: 'A',\n            link    : function (scope, element, attrs) {\n\n                $rootScope.$on('openKeyboard', openKeyboard);\n\n                openKeyboard();\n\n                function openKeyboard() {\n                    $timeout(function () {\n                        element[0].focus();\n                        element[0].click();\n                        if (window.cordova) {\n                            cordova.plugins.Keyboard.show();\n                        }\n                    }, 750);\n                }\n            }\n        };\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n angular\n    .module('starter')\n    .directive('heart', heartDirective);\n\n  function heartDirective() {\n    return {\n      restrict: 'A',\n      scope: {\n        item: '='\n      },\n      link: heartLink\n    };\n\n    function heartLink(scope, elem, attr) {\n      elem.bind('click', function () {\n        console.log(scope.item);\n        elem.addClass('happy');\n      });\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter')\n           .directive('ionLoading', ionLoading)\n           .run(runLoading)\n           .factory('Loading', Loading);\n\n    function ionLoading() {\n        return {\n            restrict: 'E',\n            scope   : {\n                icon   : '@',\n                loading: '='\n            },\n            template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n        };\n    }\n\n    function runLoading($rootScope, $ionicLoading) {\n        //Loading\n        $rootScope.$on('ionicLoading:true', function (text) {\n            $rootScope.loading = true;\n            $ionicLoading.show(text);\n        });\n        $rootScope.$on('ionicLoading:false', function () {\n            $rootScope.loading = false;\n            $ionicLoading.hide();\n        });\n    }\n\n    function Loading($rootScope, $timeout) {\n        var seconds = 0;\n\n        return {\n            start: showLoading,\n            end: hideLoading,\n        };\n\n\n        function showLoading(text) {\n            $rootScope.$broadcast('ionicLoading:true', text);\n        }\n\n        function hideLoading() {\n            $timeout(function () {\n                $rootScope.$broadcast('ionicLoading:false');\n            }, parseInt(seconds + '000'));\n        }\n    }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('loading', PhotogramLoadingDirective);\n\n  function PhotogramLoadingDirective() {\n    return {\n      restrict: 'E',\n      scope   : {\n        loading: '=',\n        icon   : '@'\n      },\n      template: '<div class=\"padding text-center loading\" ng-show=\"loading\"><ion-spinner icon=\"{{ icon }}\"></ion-spinner></div>'\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular\n    .module('starter')\n    .directive('photogramFollow', photogramFollowDirective);\n\n  function photogramFollowDirective($ionicModal, AppConfig, Photogram) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        user: '='\n      },\n      link: function (scope, elem, attr) {\n        elem.bind('click', openModal);\n        scope.closeModal = closeModal;\n\n        function openModal() {\n          $ionicModal.fromTemplateUrl(path + '/directive/follow/photogram.follow.modal.html', {\n            scope: scope\n          }).then(function (modal) {\n            scope.modalFollow = modal;\n            console.log('Open modal follow', scope.user);\n\n            Photogram\n              .getFollow(scope.user)\n              .then(function (resp) {\n                console.log(resp);\n                scope.data = resp;\n                scope.modalFollow.show();\n              });\n\n          });\n        }\n\n        function closeModal() {\n          scope.modalFollow.hide();\n          scope.modalFollow.remove();\n        }\n      }\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoGrid', photoGridDirective);\n\n    function photoGridDirective(Gallery, $rootScope, $ionicPopup, Share, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                username: '=',\n                user    : '=',\n                profile : '='\n            },\n            templateUrl: 'app/directive/photoGridDirective.html',\n            link       : photoGridCtrl\n        };\n\n        function photoGridCtrl($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 1;\n            $scope.data        = [];\n\n            if ($scope.username) {\n                $scope.params.username = $scope.username;\n            }\n\n            $scope.loading = true;\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n\n            var isMoreData = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n\n                Gallery.feed($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                    $scope.$broadcast('scroll.refreshComplete');\n                    $scope.loading = false;\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $scope.action = function (gallery) {\n\n                var buttons = [{\n                    text: '<i class=\"icon ion-share\"></i>' + ('Share')\n                }, {\n                    text: '<i class=\"icon ion-alert-circled\"></i>' + ('Report')\n                }];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user_id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + ('Delete your photo')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    titleText    : ('Photo'),\n                    cancelText   : ('Cancel'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            Share.share(message);\n                            break;\n                        case 1:\n                            FeedbackModal.modal(gallery);\n                            break;\n                        case 2:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : ('Delete photo'),\n                                    template: ('Are you sure?')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery).then(function () {\n                                            console.log('Photo deleted');\n                                            $scope.$emit('PhotogramHome:reload');\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoComment', photoCommentDirective);\n\n    function photoCommentDirective($ionicModal, $http, $q, $ionicScrollDelegate, Loading, $ionicPopup, User, Dialog, $rootScope, Gallery, GalleryComment, GalleryForm) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function ($scope, elem) {\n\n\n                elem.bind('click', openModalComment);\n\n                function init() {\n                    $scope.currentUser = Parse.User.current();\n                    $scope.nocomments  = false;\n                    $scope.loading     = false;\n                    $scope.form        = {\n                        gallery: $scope.ngModel.galleryObj,\n                        text   : ''\n                    };\n                }\n\n                function openModalComment() {\n                    console.log($scope.ngModel);\n\n                    init();\n\n                    $scope.loading       = true;\n                    $scope.formFields    = GalleryForm.formComment;\n                    $scope.submitComment = submitComment;\n                    $scope.deleteComment = deleteComment;\n                    $scope.editComment   = editComment;\n                    $scope.closeModal    = function () {\n                        $scope.modal.hide();\n                        $scope.modal.remove();\n                    };\n\n                    getComments();\n\n                    //Mentios\n                    // shows the use of dynamic values in mentio-id and mentio-for to link elements\n                    $scope.myIndexValue = \"5\";\n\n\n                    $scope.searchPeople = function (term) {\n                        var peopleList = [];\n                        return User.getFollowing().then(function (response) {\n                            _.each(response, function (item) {\n                                item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                                item.bio      = item.status;\n                                if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                                    peopleList.push(item);\n                                }\n                            });\n                            $scope.people = peopleList;\n                            console.log(peopleList);\n                            return $q.when(peopleList);\n                        });\n                    };\n\n                    $scope.getPeopleTextRaw = function (item) {\n                        return '@' + item.username;\n                    };\n\n\n                    //$scope.comments = $scope.ngModel.comments || [];\n                    //$timeout(function () {\n                    //    if ($scope.comments.length === 0) {\n                    //        $scope.nocomments = true;\n                    //    }\n                    //}, 500);\n\n\n                    $ionicModal.fromTemplateUrl('app/directive/photoCommentDirective.html', {\n                        scope          : $scope,\n                        focusFirstInput: true\n                    }).then(function (modal) {\n                        $scope.modal = modal;\n                        $scope.modal.show();\n\n                    });\n                }\n\n                function deleteComment(obj) {\n                    console.log(obj);\n                    Dialog.confirm(('Delete comment'), ('You are sure?')).then(function (resp) {\n                        console.log(resp);\n                        if (resp) {\n                            GalleryComment.destroy(obj).then(function (resp) {\n                                console.log(resp);\n                                getComments();\n                            });\n                        }\n                    });\n                }\n\n                function editComment(obj) {\n                    console.log(obj);\n                    // An elaborate, custom popup\n                    $scope.data = angular.copy(obj);\n                    $ionicPopup\n                        .show({\n                            template: '<input type=\"text\" ng-model=\"data.text\">',\n                            title   : ('Edit comment'),\n                            //subTitle: 'Please use normal things',\n                            scope   : scope,\n                            buttons : [{\n                                text: ('Cancel')\n                            }, {\n                                text : '<b>OK</b>',\n                                type : 'button-positive',\n                                onTap: function (e) {\n                                    console.log($scope.data);\n                                    if (!$scope.data.text) {\n                                        //don't allow the user to close unless he enters wifi password\n                                        e.preventDefault();\n                                    } else {\n                                        return $scope.data;\n                                    }\n                                }\n                            }]\n                        })\n                        .then(function (resp) {\n                            console.log(resp);\n                            if (resp) {\n                                GalleryComment.update(resp)\n                                              .then(function (resp) {\n                                                  console.log(resp);\n                                                  getComments();\n                                              });\n                            }\n                        });\n                }\n\n                function getComments() {\n                    $scope.loading = true;\n\n\n                    Gallery.comments({galleryId: $scope.ngModel.id}).then(function (resp) {\n                        $scope.comments         = resp;\n                        $scope.ngModel.comments = resp;\n                        $scope.loading          = false;\n\n                        //$timeout(function () {\n                        //    // Scroll to bottom\n                        //    $ionicScrollDelegate.scrollBottom();\n                        //}, 1);\n                    });\n                }\n\n                function submitComment(rForm, form) {\n                    if (rForm.$valid) {\n                        var dataForm = angular.copy(form);\n                        console.log(dataForm);\n                        Loading.start();\n                        GalleryComment.create(dataForm).then(function (resp) {\n                            console.log(resp);\n                            getComments();\n                            $rootScope.$emit('openKeyboard');\n                            Loading.end();\n                            $scope.closeModal();\n                        });\n                    }\n                }\n\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('photoLike', photoLikeDirective);\n\n    function photoLikeDirective(Gallery) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function (scope, elem) {\n                elem.bind('click', function () {\n                        var _model      = scope.ngModel;\n                        _model.progress = true;\n                        _model.liked    = !_model.liked;\n\n                        Gallery.likeGallery({galleryId: scope.ngModel.galleryObj.id}).then(function (resp) {\n                            console.log(resp);\n                            _model.likes    = resp.likes;\n                            _model.progress = false;\n                            console.log(_model, resp);\n                            if (resp.action === 'like') {\n                                scope.ngModel.isLiked = true;\n                                scope.ngModel.likesTotal += 1;\n                            }\n\n                            if (resp.action === 'unlike') {\n                                scope.ngModel.isLiked = false;\n                                scope.ngModel.likesTotal -= 1;\n                            }\n                        });\n                    }\n                );\n\n            }\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('photoList', photoListDirective);\n\n    function photoListDirective(Gallery, $rootScope, $ionicPopup, $translate, $state, Share, Toast, FeedbackModal, $ionicActionSheet) {\n\n        return {\n            restrict   : 'E',\n            scope      : {\n                username  : '=',\n                profile   : '=',\n                load      : '=',\n                openLikers: '=',\n            },\n            templateUrl: 'app/directive/photoListDirective.html',\n            link       : photoListController\n        };\n\n        function photoListController($scope, elem, attr) {\n            $scope.params      = {};\n            $scope.params.page = 0;\n            $scope.data        = [];\n\n            if ($scope.username) {\n                $scope.params.username = $scope.username;\n            }\n\n            $scope.loading = true;\n\n            $rootScope.$on('photoInclude', function (elem, item) {\n                if (item.objectId) {\n                    item.id = item.objectId;\n                }\n                $scope.data.unshift(item);\n            });\n\n            $scope.openComment = function (galleryId) {\n                $state.go('galleryComments', {galleryId: galleryId})\n            };\n\n            $scope.share = Share.open;\n\n\n            loadFeed();\n\n            var isLoadingViewShown   = false;\n            var isGalleriesViewShown = false;\n            var isErrorViewShown     = false;\n            var isEmptyViewShown     = false;\n            var isMoreData           = false;\n\n            function showLoading() {\n                isLoadingViewShown   = true;\n                isGalleriesViewShown = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showGalleries() {\n                isGalleriesViewShown = true;\n                isLoadingViewShown   = false;\n                isErrorViewShown     = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showErrorView() {\n                isErrorViewShown     = true;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n                isEmptyViewShown     = false;\n            }\n\n            function showEmptyView() {\n                isEmptyViewShown     = true;\n                isErrorViewShown     = false;\n                isGalleriesViewShown = false;\n                isLoadingViewShown   = false;\n            }\n\n\n            function ensureMoreData(length) {\n                isMoreData = false;\n                if (length > 0) {\n                    isMoreData = true;\n                }\n            }\n\n            function setGalleries(data) {\n                for (var i = 0; i < data.length; i++) {\n                    $scope.data.push(data[i]);\n                }\n            }\n\n            function setCurrentPage(page) {\n                $scope.params.page = page;\n            }\n\n            function loadFeed() {\n                Gallery.feed($scope.params).then(function (data) {\n                    ensureMoreData(data.length);\n                    setCurrentPage($scope.params.page + 1);\n                    setGalleries(data);\n\n                    if ($scope.data.length === 0) {\n                        showEmptyView();\n                    } else {\n                        showGalleries();\n                    }\n\n                    $scope.loading = false;\n                    $scope.$broadcast('scroll.infiniteScrollComplete');\n                    $scope.$broadcast('scroll.refreshComplete');\n\n                }).catch(function () {\n                    if ($scope.data.length === 0) {\n                        showErrorView();\n                    }\n                    isMoreData = false;\n                    $scope.$broadcast('scroll.refreshComplete');\n                });\n            }\n\n            $scope.onLoadMore = function () {\n                loadFeed();\n            };\n\n            $scope.moreDataCanBeLoaded = function () {\n                return isMoreData;\n            };\n\n            $scope.showLoadingView = function () {\n                return isLoadingViewShown;\n            };\n\n            $scope.showGalleries = function () {\n                return isGalleriesViewShown;\n            };\n\n            $scope.showErrorView = function () {\n                return isErrorViewShown;\n            };\n\n            $scope.showEmptyView = function () {\n                return isEmptyViewShown;\n            };\n\n            $scope.onReload = function () {\n                $scope.params.page = 0;\n                $scope.data        = [];\n                showLoading();\n                loadFeed();\n                $scope.$broadcast('scroll.refreshComplete');\n            };\n\n            $scope.action = function (gallery) {\n\n                var buttons = [{\n                    text: '<i class=\"icon ion-alert-circled\"></i>' + $translate.instant('reportText')\n                }];\n\n\n                console.log(gallery);\n\n                if (Parse.User.current().id === gallery.user.obj.id) {\n                    var buttonDelete = {\n                        text: '<i class=\"icon ion-trash-b\"></i>' + $translate.instant('deleteGallery')\n                    };\n                    buttons.push(buttonDelete);\n                }\n                var message = {\n                    text : gallery.title,\n                    image: gallery.img\n                };\n\n                var actionSheet = {\n                    buttons      : buttons,\n                    cancelText   : $translate.instant('cancelText'),\n                    buttonClicked: actionButtons\n                };\n\n\n                function actionButtons(index) {\n                    switch (index) {\n                        case 0:\n                            FeedbackModal.modal(gallery.galleryObj);\n                            break;\n                        case 1:\n\n                            $ionicPopup\n                                .confirm({\n                                    title   : $translate.instant('deleteGalleryConfirmText'),\n                                    template: $translate.instant('areSure')\n                                })\n                                .then(function (res) {\n                                    if (res) {\n                                        Gallery.destroy(gallery.galleryObj).then(function () {\n                                            console.log('Photo deleted');\n                                            Toast.alert({\n                                                title: 'Photo',\n                                                text : 'Photo deleted'\n                                            })\n                                            $scope.onReload();\n                                        });\n                                    }\n                                });\n\n\n                    }\n                    return true;\n                }\n\n                // Show the action sheet\n                $ionicActionSheet.show(actionSheet);\n            };\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('profileModalEdit', profileModalEditDirective);\n\n    function profileModalEditDirective($ionicModal, User, Loading, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                user: '='\n            },\n            template: '',\n            link    : function (scope, elem) {\n\n                scope.linkFacebook        = linkFacebook;\n                scope.logout              = logout;\n                scope.submitUpdateProfile = submitUpdateProfile;\n                scope.closeModal          = closeModal;\n\n                elem.bind('click', openModal);\n                function init() {\n                    var user   = Parse.User.current().attributes;\n                    scope.form = {\n                        name    : user.name,\n                        email   : user.email,\n                        status  : user.status,\n                        photo   : user.photo,\n                        username: user.username,\n                        gender  : user.gender,\n                        facebook: user.facebook\n                    };\n                    console.log(scope.form);\n                    scope.formFields = UserForm.profile;\n                }\n\n\n                function openModal() {\n\n                    init();\n                    $ionicModal.fromTemplateUrl('app/directive/profile-edit-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n\n                    // Cleanup the modal when we're done with it!\n                    scope.$on('$destroy', function () {\n                        scope.modal.remove();\n                    });\n\n                }\n\n                function logout() {\n                    $state.go('logout');\n                    scope.closeModal();\n                }\n\n                function linkFacebook() {\n                    User.facebookLink().then(function (resp) {\n                        console.log(resp);\n                    });\n                }\n\n                function submitUpdateProfile() {\n                    var dataForm = angular.copy(scope.form);\n                    Loading.start();\n                    User.update(dataForm).then(function (resp) {\n                        console.log(resp);\n                        scope.user = resp;\n                        Loading.end();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').directive('profileModal', profileModalDirective);\n\n    function profileModalDirective($ionicModal, User) {\n\n        return {\n            restrict: 'A',\n            scope   : {\n                username: '='\n            },\n            link    : profileModalLink\n        };\n\n        function profileModalLink(scope, elem) {\n            elem.bind('click', function () {\n\n                console.log(scope.username);\n\n                User.profile(scope.username).then(function (data) {\n                    console.log(data);\n                    scope.user = data;\n                    openModal();\n                });\n\n            });\n\n            function openModal() {\n\n                console.log(scope.user.attributes);\n\n                $ionicModal.fromTemplateUrl('app/directive/profile-modal.html', {\n                    scope: scope\n                }).then(function (modal) {\n                    scope.modalProfile  = modal;\n                    scope.loadingFollow = true;\n                    scope.changeTab     = changeTab;\n                    scope.follow        = follow;\n                    scope.closeModal    = closeModal;\n                    scope.modalProfile.show();\n\n                    changeTab('list');\n\n                    function follow() {\n\n                        scope.loadingFollow = true;\n                        var status;\n\n                        if (scope.user.follow) {\n                            status = false;\n                        } else {\n                            status = true;\n                        }\n\n                        User.follow(scope.user.userObj.id).then(function (resp) {\n                            console.log('Follow result', resp);\n                            scope.user.isFollow = (resp === 'follow') ? true : false;\n                            if (resp == 'follow') {\n                                scope.user.followersTotal += 1;\n                            }\n                            if (resp == 'unfollow') {\n                                scope.user.followersTotal -= 1;\n                            }\n                            scope.loadingFollow = false;\n                        });\n\n\n                    }\n\n                    function closeModal() {\n                        delete scope.data;\n                        scope.modalProfile.hide();\n                    }\n                });\n\n                // Cleanup the modal when we're done with it!\n                scope.$on('$destroy', function () {\n                    scope.modalProfile.remove();\n                });\n            }\n\n            function changeTab(tab) {\n                if (tab === 'list') {\n                    scope.tab = {\n                        list: true,\n                        grid: false\n                    };\n                } else {\n                    scope.tab = {\n                        list: false,\n                        grid: true\n                    };\n                }\n            }\n\n\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('starter')\n    .directive('ionSearch', ionSearchDirective);\n\n  function ionSearchDirective($timeout) {\n\n    return {\n      restrict   : 'E',\n      scope      : {\n        getData: '&source',\n        ngModel: '=?',\n        search : '=?filter'\n      },\n      templateUrl: 'app/module/photogram/directive/search/search-directive.html',\n      link       : function (scope, element, attrs) {\n        attrs.minLength = attrs.minLength || 0;\n        scope.placeholder = attrs.placeholder || '';\n        scope.clear = function () {\n          console.log('Limpar campo');\n          scope.input = '';\n          scope.$apply();\n        };\n\n        if (attrs.class) {\n          element.addClass(attrs.class);\n        }\n\n        if (attrs.source) {\n          scope.$watch('search.value', watchSearch);\n        }\n\n        function watchSearch(newValue) {\n          if (newValue.length > attrs.minLength) {\n            $timeout(function () {\n              scope\n                .getData({\n                  str: newValue\n                })\n                .then(function (results) {\n                  scope.ngModel = results;\n                });\n            }, 1000);\n          } else {\n            scope.ngModel = [];\n          }\n        }\n\n      }\n\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('starter')\n        .directive('settingsModal', settingsModalDirective);\n\n    function settingsModalDirective($ionicModal, $translate, AppConfig, $cordovaInAppBrowser, Share, Auth, User, UserForm, $state) {\n\n        return {\n            restrict: 'A',\n            template: '',\n            link    : function (scope, elem) {\n\n                elem.bind('click', openModal);\n                scope.closeModal     = closeModal;\n                scope.link           = link;\n                scope.share          = Share.share;\n\n                scope.logout = function  () {\n                    $state.go(AppConfig.routes.login);\n                    scope.closeModal();\n                };\n\n                function init() {\n                    scope.form       = Auth.getLoggedUser();\n                    scope.formFields = UserForm.profile;\n                    scope.languages  = AppConfig.locales;\n                    scope.language   = $translate.use();\n                }\n\n                function openModal() {\n\n                    init();\n                    $ionicModal.fromTemplateUrl('app/directive/settings-modal.html', {\n                        scope: scope\n                    }).then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n                    });\n                }\n\n                function link(sref) {\n                    $state.go(sref);\n                    scope.closeModal();\n                }\n\n                function submitUpdateProfile(form) {\n                    var dataForm = angular.copy(form);\n                    User.update(dataForm).then(function (resp) {\n                        console.log(resp);\n                        init();\n                        scope.closeModal();\n                    });\n                }\n\n                function closeModal() {\n                    scope.modal.hide();\n                    scope.modal.remove();\n                }\n\n            }\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').directive('usernameValidator', usernameValidatorDirective);\n\n    function usernameValidatorDirective(User) {\n        return {\n            require: 'ngModel',\n            restrict: 'A',\n            link    : usernameValidatorLink,\n        };\n\n        function usernameValidatorLink(scope, elem, attr, ngModel) {\n            ngModel.$asyncValidators.username = function  (modelValue, viewValue) {\n                if(viewValue) {\n                    return User.validateUsername(viewValue);\n                }\n            }\n        }\n    }\n\n})();\n'use strict';\nangular.module(\"ngLocale\", [], [\"$provide\", function ($provide) {\n  var PLURAL_CATEGORY = {\n    ZERO: \"zero\",\n    ONE: \"one\",\n    TWO: \"two\",\n    FEW: \"few\",\n    MANY: \"many\",\n    OTHER: \"other\"\n  };\n  $provide.value(\"$locale\", {\n    \"DATETIME_FORMATS\": {\n      \"AMPMS\": [\n        \"AM\",\n        \"PM\"\n      ],\n      \"DAY\": [\n        \"domingo\",\n        \"segunda-feira\",\n        \"ter\\u00e7a-feira\",\n        \"quarta-feira\",\n        \"quinta-feira\",\n        \"sexta-feira\",\n        \"s\\u00e1bado\"\n      ],\n      \"ERANAMES\": [\n        \"Antes de Cristo\",\n        \"Ano do Senhor\"\n      ],\n      \"ERAS\": [\n        \"a.C.\",\n        \"d.C.\"\n      ],\n      \"FIRSTDAYOFWEEK\": 6,\n      \"MONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"SHORTDAY\": [\n        \"dom\",\n        \"seg\",\n        \"ter\",\n        \"qua\",\n        \"qui\",\n        \"sex\",\n        \"s\\u00e1b\"\n      ],\n      \"SHORTMONTH\": [\n        \"jan\",\n        \"fev\",\n        \"mar\",\n        \"abr\",\n        \"mai\",\n        \"jun\",\n        \"jul\",\n        \"ago\",\n        \"set\",\n        \"out\",\n        \"nov\",\n        \"dez\"\n      ],\n      \"STANDALONEMONTH\": [\n        \"janeiro\",\n        \"fevereiro\",\n        \"mar\\u00e7o\",\n        \"abril\",\n        \"maio\",\n        \"junho\",\n        \"julho\",\n        \"agosto\",\n        \"setembro\",\n        \"outubro\",\n        \"novembro\",\n        \"dezembro\"\n      ],\n      \"WEEKENDRANGE\": [\n        5,\n        6\n      ],\n      \"fullDate\": \"EEEE, d 'de' MMMM 'de' y\",\n      \"longDate\": \"d 'de' MMMM 'de' y\",\n      \"medium\": \"d 'de' MMM 'de' y HH:mm:ss\",\n      \"mediumDate\": \"d 'de' MMM 'de' y\",\n      \"mediumTime\": \"HH:mm:ss\",\n      \"short\": \"dd/MM/yy HH:mm\",\n      \"shortDate\": \"dd/MM/yy\",\n      \"shortTime\": \"HH:mm\"\n    },\n    \"NUMBER_FORMATS\": {\n      \"CURRENCY_SYM\": \"R$\",\n      \"DECIMAL_SEP\": \",\",\n      \"GROUP_SEP\": \".\",\n      \"PATTERNS\": [{\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 3,\n        \"minFrac\": 0,\n        \"minInt\": 1,\n        \"negPre\": \"-\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\",\n        \"posSuf\": \"\"\n      }, {\n        \"gSize\": 3,\n        \"lgSize\": 3,\n        \"maxFrac\": 2,\n        \"minFrac\": 2,\n        \"minInt\": 1,\n        \"negPre\": \"-\\u00a4\",\n        \"negSuf\": \"\",\n        \"posPre\": \"\\u00a4\",\n        \"posSuf\": \"\"\n      }]\n    },\n    \"id\": \"pt-br\",\n    \"pluralCat\": function (n, opt_precision) {\n      if (n >= 0 && n <= 2 && n != 2) {\n        return PLURAL_CATEGORY.ONE;\n      }\n      return PLURAL_CATEGORY.OTHER;\n    }\n  });\n}]);\n(function () {\n    'use strict';\n    //! moment.js locale configuration\n//! locale : brazilian portuguese (pt-br)\n//! author : Caio Ribeiro Pereira : https://github.com/caio-ribeiro-pereira\n    \n    var pt_br = window.moment.defineLocale('pt', {\n        months: 'Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split(\n            '_'),\n        monthsShort: 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),\n        weekdays: 'Domingo_Segunda-Feira_Tera-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sbado'.split('_'),\n        weekdaysShort: 'Dom_Seg_Ter_Qua_Qui_Sex_Sb'.split('_'),\n        weekdaysMin: 'Dom_2_3_4_5_6_Sb'.split('_'),\n        longDateFormat: {\n            LT: 'HH:mm',\n            LTS: 'HH:mm:ss',\n            L: 'DD/MM/YYYY',\n            LL: 'D [de] MMMM [de] YYYY',\n            LLL: 'D [de] MMMM [de] YYYY [s] HH:mm',\n            LLLL: 'dddd, D [de] MMMM [de] YYYY [s] HH:mm'\n        },\n        calendar: {\n            sameDay: '[Hoje s] LT',\n            nextDay: '[Amanh s] LT',\n            nextWeek: 'dddd [s] LT',\n            lastDay: '[Ontem s] LT',\n            lastWeek: function () {\n                return (this.day() === 0 || this.day() === 6) ?\n                    '[ltimo] dddd [s] LT' : // Saturday + Sunday\n                    '[ltima] dddd [s] LT'; // Monday - Friday\n            },\n            sameElse: 'L'\n        },\n        relativeTime: {\n            future: 'em %s',\n            past: '%s atrs',\n            s: 'segs',\n            m: 'um minuto',\n            mm: '%d minutos',\n            h: 'uma hora',\n            hh: '%d horas',\n            d: 'um dia',\n            dd: '%d dias',\n            M: 'um ms',\n            MM: '%d meses',\n            y: 'um ano',\n            yy: '%d anos'\n        },\n        ordinalParse: /\\d{1,2}/,\n        ordinal: '%d'\n    });\n\n    return pt_br;\n})();\n(function () {\n  'use strict';\n  angular\n    .module('starter')\n    .factory('GalleryForm', GalleryFormFactory);\n\n  function GalleryFormFactory($translate) {\n\n    var form = [{\n      key: 'title',\n      type: 'input',\n      templateOptions: {\n        type: 'text',\n        placeholder: $translate.instant('PHOTOGRAM.FORM.TITLE'),\n        icon: 'icon-envelope',\n        required: true,\n        iconPlaceholder: true,\n        focus: true\n      }\n    }, {\n      key: 'geo',\n      type: 'toggle',\n      templateOptions: {\n        label: $translate.instant('PHOTOGRAM.FORM.GEOLOCATION'),\n        toggleClass: 'positive'\n      }\n    }];\n\n    var formComment = [{\n      key: 'text',\n      type: 'input',\n      templateOptions: {\n        placeholder: $translate.instant('addComment'),\n        type: 'text',\n        required: true,\n        focus: true\n          //icon           : 'icon-envelope',\n          //iconPlaceholder: true\n      }\n    }];\n\n    var formShare = [{\n      key: 'facebook',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Facebook',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'twitter',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Twitter',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'whatsapp',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Whatsapp',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'SMS',\n      type: 'toggle',\n      templateOptions: {\n        label: 'SMS',\n        toggleClass: 'positive'\n      }\n    }, {\n      key: 'email',\n      type: 'toggle',\n      templateOptions: {\n        label: 'Email',\n        toggleClass: 'positive'\n      }\n    }, ];\n    return {\n      form: form,\n      formComment: formComment,\n      formShare: formShare\n    };\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('UserForm', UserFormFactory);\n\n    function UserFormFactory($translate) {\n\n        return {\n            login   : login(),\n            register: register(),\n            profile : profile()\n        };\n\n        function login() {\n            return [{\n                type           : 'input',\n                key            : 'username',\n                templateOptions: {\n                    type           : 'text',\n                    placeholder    : $translate.instant('username'),\n                    icon           : 'icon-user',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }, {\n                type           : 'input',\n                key            : 'password',\n                templateOptions: {\n                    type           : 'password',\n                    placeholder    : $translate.instant('password'),\n                    icon           : 'icon-lock',\n                    required       : true,\n                    iconPlaceholder: true\n                }\n            }];\n        }\n\n        function register() {\n            return [\n                {\n                    type           : 'input',\n                    key            : 'username',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'email',\n                    templateOptions: {\n                        type           : 'email',\n                        placeholder    : $translate.instant('email'),\n                        icon           : 'icon-envelope',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    type           : 'input',\n                    key            : 'password',\n                    templateOptions: {\n                        type           : 'password',\n                        placeholder    : $translate.instant('password'),\n                        icon           : 'icon-lock',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }];\n        }\n\n        function profile() {\n            return [\n                {\n                    key            : 'username',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('username'),\n                        icon           : 'icon-ios-at',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                },\n                {\n                    key            : 'name',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('name'),\n                        icon           : 'icon-user',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    key            : 'status',\n                    type           : 'input',\n                    templateOptions: {\n                        type           : 'text',\n                        placeholder    : $translate.instant('status'),\n                        icon           : 'ion-quote',\n                        required       : true,\n                        iconPlaceholder: true\n                    }\n                }, {\n                    type           : 'select',\n                    key            : 'gender',\n                    templateOptions: {\n                        label          : $translate.instant('gender'),\n                        options        : [{\n                            'label': $translate.instant('man'),\n                            'id'   : 'male',\n                        }, {\n                            'label': $translate.instant('woman'),\n                            'id'   : 'female',\n                        }],\n                        valueProp      : 'id',\n                        labelProp      : 'label',\n                        //icon           : 'ion-ios-body-outline',\n                        //iconPlaceholder: true\n                    }\n                }];\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ActionSheet', ActionSheetFactory);\n\n    function ActionSheetFactory($ionicActionSheet, Camera, $cordovaActionSheet, $q) {\n\n        return {\n            show : show,\n            image: image\n        };\n\n        function image() {\n            var defer = $q.defer();\n            show({\n                title     : 'Choose an option',\n                cancelText: 'Cancel',\n                options   : [{text: 'Photo Library'}, {text: 'Photo'}]\n            }).then(function (option) {\n                var sourceType;\n                if (option === 1) {\n                    sourceType = 'photoLibrary';\n                }\n\n                if (option === 2) {\n                    sourceType = 'camera';\n                }\n                return Camera.getPicture({sourceType: sourceType});\n            }).then(defer.resolve).catch(defer.reject);\n\n            return defer.promise;\n        }\n\n        function show(params) {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                var options = {\n                    title                    : params.title,\n                    buttonLabels             : _.map(params.options, function (item) {return item.text}),\n                    addCancelButtonWithLabel : params.cancelText,\n                    androidEnableCancelButton: true,\n                    androidTheme             : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT\n                };\n\n                $cordovaActionSheet.show(options).then(function (btnIndex) {\n                    if (btnIndex !== 3) {\n                        defer.resolve(btnIndex);\n                    }\n                    defer.reject('cancel');\n                });\n\n            } else {\n                var actionSheet = $ionicActionSheet.show({\n                    buttons      : params.options,\n                    titleText    : params.title,\n                    cancelText   : params.cancelText,\n                    cancel       : function () {\n                        actionSheet();\n                    },\n                    buttonClicked: function (btnIndex) {\n                        actionSheet();\n                        if (btnIndex !== 3) {\n                            defer.resolve(btnIndex);\n                        }\n                        defer.reject('cancel');\n                    }\n                });\n\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Auth', function ($q) {\n\n        var mSessionToken = null;\n        return {\n            getLoggedUser  : getLoggedUser,\n            setSessionToken: setSessionToken,\n            ensureLoggedIn : ensureLoggedIn,\n            recoverPassword: recoverPassword,\n            resetPassword  : resetPassword,\n            logIn          : logIn,\n            logOut         : logOut\n        };\n\n        function getLoggedUser() {\n            return Parse.User.current();\n        }\n\n        function setSessionToken(sessionToken) {\n            mSessionToken = sessionToken;\n        }\n\n        function ensureLoggedIn() {\n            var defer = $q.defer();\n\n            if (mSessionToken === null) {\n                defer.reject('Session token invalid');\n                return defer.promise;\n            }\n\n            if (!Parse.User.current()) {\n                Parse.User.become(mSessionToken).then(defer.resolve, defer.reject);\n            } else {\n                defer.resolve(Parse.User.current());\n            }\n\n            return defer.promise;\n        }\n\n        function recoverPassword(email) {\n            var defer = $q.defer();\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function resetPassword(email) {\n\n            var defer = $q.defer();\n\n            Parse.User.requestPasswordReset(email, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logIn(obj) {\n            var defer = $q.defer();\n\n            Parse.User.logIn(obj.username, obj.password, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n\n            return defer.promise;\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            Parse.User.logOut().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Camera', CameraFactory);\n\n    function CameraFactory($cordovaCamera, $q) {\n\n        return {\n            getPicture   : getPicture,\n            resizeImage  : resizeImage,\n            toBase64Image: toBase64Image\n        };\n\n        function getPicture(params) {\n\n            var defer = $q.defer();\n            if (window.cordova) {\n                var sourceType = params.sourceType || Camera.PictureSourceType.CAMERA;\n                if (params.sourceType === 'photoLibrary') {\n                    sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n                }\n                if (params.sourceType === 'camera') {\n                    sourceType = Camera.PictureSourceType.CAMERA;\n                }\n\n                var options = {\n                    quality           : 70,\n                    targetWidth       : 800,\n                    targetHeight      : 800,\n                    saveToPhotoAlbum  : false,\n                    correctOrientation: true,\n                    sourceType        : sourceType,\n                    destinationType   : Camera.DestinationType.DATA_URL,\n                    encodingType      : Camera.EncodingType.JPEG,\n                };\n\n                $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n            } else {\n                console.log('Input File');\n                //defer.reject('Unsupported platform');\n\n                var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n                fileInput[0].click();\n                fileInput.on('change', function (evt) {\n                    var tempImage = evt.currentTarget.files[0];\n                    var reader    = new FileReader();\n                    reader.onload = function (evt) {\n                        defer.resolve(evt.target.result);\n                    };\n                    reader.readAsDataURL(tempImage);\n                });\n            }\n\n            return defer.promise;\n        }\n\n        //https://github.com/timkalinowski/PhoneGap-Image-Resizer\n        function toBase64Image(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject, img_path, width || 1, height || 1, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_FACTOR,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n        function resizeImage(img_path, width, height) {\n            var defer = $q.defer();\n            window.imageResizer.resizeImage(defer.resolve, defer.reject,  img_path, width || 640, height || 640, {\n                imageDataType: ImageResizer.IMAGE_DATA_TYPE_URL,\n                resizeType   : ImageResizer.RESIZE_TYPE_MIN_PIXEL,\n                pixelDensity : true,\n                storeImage   : false,\n                photoAlbum   : false,\n                format       : 'jpg'\n            });\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('ConnectMonitor', ConnectMonitorFactory);\n\n    function ConnectMonitorFactory($rootScope, $cordovaNetwork) {\n        \n        return {\n            watch: watch\n        };\n\n        function watch() {\n\n            if (ionic.Platform.isWebView()) {\n                $rootScope.onLine = $cordovaNetwork.isOnline();\n                $rootScope.$apply();\n\n\n                $rootScope.$on('$cordovaNetwork:online', function (event, networkState) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                });\n\n                $rootScope.$on('$cordovaNetwork:offline', function (event, networkState) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                });\n            } else {\n                $rootScope.onLine = navigator.onLine;\n                $rootScope.$apply();\n\n                window.addEventListener('online', function (e) {\n                    console.log('went online');\n                    $rootScope.onLine = true;\n                    $rootScope.$apply();\n                }, false);\n\n                window.addEventListener('offline', function (e) {\n                    console.log('went offline');\n                    $rootScope.onLine = false;\n                    $rootScope.$apply();\n                }, false);\n            }\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('DAO', DAOFactory);\n    function DAOFactory($interval, $q) {\n        var _db;\n        var _tables = [];\n\n        return {\n            init       : init,\n            insert     : insert,\n            query      : query,\n            getLastSync: getLastSync,\n            paginate   : paginate,\n            fetchAll   : fetchAll\n        };\n\n        function init(database) {\n\n            if (!_db) {\n                if (window.sqlitePlugin !== undefined) {\n                    _db = window.sqlitePlugin.openDatabase({\n                        name              : database.name,\n                        location          : 2,\n                        createFromLocation: 1\n                    });\n                } else {\n                    // For debugging in the browser\n                    _db = window.openDatabase(database.name, \"1.0\", \"Database\", 200000);\n                }\n            }\n\n            var _promises = [];\n            angular.forEach(database.tables, function (table) {\n                var columns = [];\n                angular.forEach(table.columns, function (type, name) {\n                    columns.push(name + ' ' + type);\n                });\n                query('DROP TABLE ' + table.name);\n                var _query = 'CREATE TABLE IF NOT EXISTS ' + table.name + ' (' + columns.join(',') + ')';\n                _promises.push(query(_query));\n                _tables.push(table);\n                // console.log(_query);\n                // console.log('Table ' + table.name + ' initialized');\n            });\n\n            return $q.all(_promises);\n        }\n\n        function getLastSync(table, column) {\n            var defer = $q.defer();\n            query(\"SELECT MAX(\" + column + \") as lastSync FROM \" + table)\n                .then(function (data) {\n                    var lastSync = data.rows.item[0].lastSync;\n                    defer.resolve(lastSync);\n                });\n            return defer.promise;\n        }\n\n        function insert(obj) {\n            var defer    = $q.defer();\n            var _columns = [];\n            var _values  = [];\n\n            angular.forEach(obj.columns, function (value, key) {\n                _columns.push(key);\n                if (typeof  value === 'number') {\n                    _values.push(value);\n                } else {\n                    _values.push(\"'\" + value + \"'\");\n                }\n            });\n\n            var _query = \"INSERT OR REPLACE INTO \" + obj.table + \" (\" + _columns.join(',') + \") VALUES (\" + _values.join(',') + \")\"\n            // console.info(_query);\n            query(_query).then(defer.resolve).catch(defer.reject);\n            return defer.promise;\n\n        }\n\n        function query(query, bindings) {\n            bindings  = typeof bindings !== 'undefined' ? bindings : [];\n            var defer = $q.defer();\n\n            _db.transaction(function (transaction) {\n                transaction.executeSql(query, bindings, function (transaction, result) {\n                    // console.log(result);\n                    var results = {\n                        rows: []\n                    };\n                    if (result && result.rows) {\n                        for (var i = 0; i < result.rows.length; i++) {\n                            results.rows.push(angular.copy(result.rows[i]));\n                        }\n                    }\n                    // console.log(results);\n                    defer.resolve(results);\n                }, function (transaction, error) {\n                    console.log(transaction, error);\n                    defer.reject(error);\n                });\n            });\n\n            return defer.promise;\n        }\n\n        function paginate(_table, columns, _where, _join, _order, limit, page) {\n            var defer = $q.defer();\n            if (page === undefined) page = -1;\n            var _columns = columns;\n            var _limit   = limit ? limit : 10;\n            var _query1  = \"SELECT SUM(id) as TOTAL FROM \" + _table + \"  \" + _where;\n            var _query   = \"SELECT \" + _columns + \" FROM \" + _table + \"  \" + _where + \" \" + _join + \" \" + _order + \" LIMIT \" + _limit + \" OFFSET \" + page;\n\n            console.log('query', _query1);\n            console.log('query', _query);\n\n            query(_query1).then(function (data) {\n                var result = {\n                    page : page,\n                    total: data.rows[0].TOTAL,\n                    rows : []\n                };\n\n                query(_query).then(function (data) {\n                    console.log(data);\n\n                    result.rows = data.rows;\n                    defer.resolve(result);\n                });\n            });\n            return defer.promise;\n        }\n\n        function fetchAll(result) {\n            var output = [];\n            for (var i = 0; i < result.rows.length; i++) {\n                output.push(result.rows.item(i));\n            }\n            return output;\n        }\n    }\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('starter')\n        .factory('DataUtil', DataUtilFactory);\n\n    function DataUtilFactory() {\n\n        return {\n            parseData: parseData,\n            parseString: parseString,\n            getDate: getDate,\n            formatDate: formatDate,\n            getMonthName: getMonthName,\n            getFirstDay: getFirstDay,\n            getLastDay: getLastDay\n        };\n\n        function parseData(string) {\n            var parts = string.split('-');\n            return new Date(parts[0], parts[1] - 1, parts[2]);\n        }\n\n        function parseString(data) {\n            return new Date(data).toLocaleDateString();\n        }\n\n\n        function getDate() {\n            var data   = new Date();\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function formatDate(milliseconds) {\n            var data   = new Date(milliseconds);\n            var inicio = \"00\";\n            var year   = data.getFullYear();\n            var month  = (inicio + (data.getMonth() + 1)).slice(-inicio.length);\n            var day    = (inicio + (data.getDate())).slice(-inicio.length);\n            return year + '-' + month + '-' + day;\n        }\n\n        function getMonthName(data) {\n            var meses = ['Janeiro', 'Feveiro', 'Maro', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\n            return meses[data.getMonth()];\n        }\n\n        function getFirstDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth();\n            return new Date(year, month, 1);\n        }\n\n        function getLastDay(data) {\n            var year  = data.getFullYear();\n            var month = data.getMonth() + 1;\n            return new Date(year, month, 0);\n        }\n\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').service('Dialog', DialogFactory);\n\n    function DialogFactory($cordovaDialogs, $ionicPopup, $q) {\n\n        return {\n            alert  : alert,\n            confirm: confirm\n        };\n\n        function alert(message, title) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.alert(message, title).then(defer.resolve);\n            } else {\n                $ionicPopup.alert({\n                    title   : title,\n                    template: message\n                });\n            }\n            return defer.promise;\n        }\n\n        function confirm(message, title, buttonsText) {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaDialogs.confirm(message, title, buttonsText).then(function (result) {\n                    if (result === 2) {\n                        defer.resolve(true);\n                    }\n                    defer.reject(true);\n                });\n\n            } else {\n                $ionicPopup.confirm({\n                    title   : title,\n                    template: message\n                }).then(function (res) {\n                    if (res) {\n                        defer.resolve(true);\n                    } else {\n                        defer.reject(true);\n                    }\n                });\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').service('Facebook', FacebookFactory);\n\n    function FacebookFactory($q, $facebook, $cordovaFacebook) {\n\n        var facebook = window.cordova ? $cordovaFacebook : $facebook;\n\n        return {\n            getCurrentUser: getCurrentUser,\n            logIn         : logIn,\n            logOut        : logOut,\n            me            : me,\n            invite        : invite,\n            friends       : friends,\n            api           : api,\n            link          : link\n        };\n\n        function getCurrentUser() {\n            var defer = $q.defer();\n            facebook.getLoginStatus().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function logIn() {\n            var defer = $q.defer();\n            if (window.cordova) {\n                $cordovaFacebook.login(['public_profile', 'email']).then(defer.resolve, defer.reject);\n\n            } else {\n                Parse.FacebookUtils.logIn(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n            }\n            return defer.promise;\n        }\n\n        function logOut() {\n            var defer = $q.defer();\n            $cordovaFacebook.logout().then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function me() {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                $cordovaFacebook.api('me?fields=name,first_name,last_name,gender,email', ['public_profile'])\n                                .then(defer.resolve, defer.reject);\n\n            } else {\n                facebook.api('/me', {fields: 'name, first_name, last_name, gender, email'})\n                        .then(function (response) {\n                            if (!response || response.error) {\n                                defer.reject(response.error);\n                            } else {\n                                defer.resolve(response);\n                            }\n                        });\n            }\n\n            return defer.promise;\n        }\n\n        function invite() {\n            var defer = $q.defer();\n            if (window.cordova) {\n                facebook.showDialog({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            } else {\n                facebook.ui({\n                    method : 'apprequests',\n                    message: 'Venha para o nosso clube!'\n                }).then(defer.resolve, defer.reject);\n            }\n            return defer.promise;\n        }\n\n\n        function friends() {\n            var defer = $q.defer();\n            facebook.api('me/friends').then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function api(api) {\n            var defer = $q.defer();\n            facebook.api(api).then(defer.resolve, defer.reject);\n            return defer.promise;\n        }\n\n        function link(user) {\n            var defer = $q.defer();\n            if (user) {\n                facebook.login(['email']).then(function (response) {\n                    console.log('facebook login', response);\n                    //Pega o Status do Login\n                    var data = new Date(new Date().getTime() + response['authResponse']['expiresIn'] * 1000);\n\n                    console.log(user, response, data);\n\n                    Parse.FacebookUtils.link(user, {\n                        id             : response['authResponse']['userID'],\n                        access_token   : response['authResponse']['accessToken'],\n                        expiration_date: data\n                    }, {\n                        success: function (user) {\n                            // Funo caso tenha logado tanto no face quanto no Parse\n                            console.log('User', user);\n                            user.set('facebook', response['authResponse']['userID']);\n                            user.set('facebookimg', 'https://graph.facebook.com/' + response['authResponse']['userID'] + '/picture?width=250&height=250');\n                            user.set('facebook_complete', Boolean(true));\n                            user.save().then(defer.resolve);\n                        }\n                    });\n                }, defer.resolve);\n            } else {\n                defer.reject('not logged');\n            }\n\n            return defer.promise;\n        }\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryActivity', function ($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryActivity', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            feed   : function (params) {\n                return ParseCloud.run('feedActivity', params);\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n                // Order Table\n                if (params.order) {\n                    if (params.order.indexOf('-') < -1) {\n                        query.ascending(params.order);\n                    } else {\n                        query.descending(params.order.replace('-'));\n                    }\n                }\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n\n                }\n\n                query.include('gallery')\n                query.include('user')\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'fromUser', {\n            get: function () {\n                return this.get('fromUser');\n            },\n            set: function (value) {\n                this.set('fromUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'toUser', {\n            get: function () {\n                return this.get('toUser');\n            },\n            set: function (value) {\n                this.set('toUser', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'gallery', {\n            get: function () {\n                return this.get('gallery');\n            },\n            set: function (value) {\n                this.set('gallery', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('GalleryComment', function ($q, moment) {\n\n        var ParseObject = Parse.Object.extend('GalleryComment', {\n            getStatus: function () {\n                if (this.isApproved) {\n                    return 'Approved';\n                } else if (this.isApproved === false) {\n                    return 'Rejected';\n                } else {\n                    return 'Pending';\n                }\n            }\n        }, {\n            get        : function (itemId) {\n                var defer = $q.defer();\n                new Parse.Query(this)\n                    .get(itemId, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                return defer.promise;\n            },\n            create : function (item) {\n                var defer = $q.defer();\n                new ParseObject().save(item, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            update : function (item) {\n                var defer = $q.defer();\n                item.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy: function (item) {\n                var defer = $q.defer();\n                item.destroy({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            all    : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                // Order Table\n\n                query.include('user');\n                query.ascending('createdAt');\n                query.equalTo('gallery', params.gallery);\n                query.limit(params.limit);\n                query.skip((params.page * params.limit) - params.limit);\n                query.find({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            count  : function (params) {\n                var defer = $q.defer();\n                var query = new Parse.Query(this);\n\n                if (params.filter != '') {\n                    query.contains('words', params.filter);\n                }\n\n\n                if (params.date && params.date !== null) {\n                    var start = moment(params.date).startOf('day');\n                    var end   = moment(params.date).endOf('day');\n                    query.greaterThanOrEqualTo('createdAt', start.toDate());\n                    query.lessThanOrEqualTo('createdAt', end.toDate());\n                }\n\n                if (params.status && params.status !== null) {\n\n                    if (params.status === 'pending') {\n                        query.doesNotExist('isApproved');\n                    } else if (params.status === 'rejected') {\n                        query.equalTo('isApproved', false);\n                    } else if (params.status === 'approved') {\n                        query.equalTo('isApproved', true);\n                    }\n                }\n\n                query.count({\n                    success: function (count) {\n                        defer.resolve(count);\n                    },\n                    error  : function (error) {\n                        defer.reject(error);\n                    }\n                });\n\n                return defer.promise;\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'text', {\n            get: function () {\n                return this.get('text');\n            },\n            set: function (value) {\n                this.set('text', value);\n            }\n        });\n\n        return ParseObject;\n\n    });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Gallery', GalleryFactory);\n\n    function GalleryFactory($q, ParseCloud, moment) {\n\n        var ParseObject = Parse.Object.extend('Gallery', {\n                getStatus: function () {\n                    if (this.isApproved) {\n                        return 'Approved';\n                    } else if (this.isApproved === false) {\n                        return 'Rejected';\n                    } else {\n                        return 'Pending';\n                    }\n                }\n            },\n            {\n                create     : function (item) {\n                    var defer    = $q.defer();\n                    var objPlace = new ParseObject();\n\n                    if (item.address.geo) {\n                        item.location = new Parse.GeoPoint(item.address.geo);\n                    }\n\n                    objPlace.save(item, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                update     : function (item) {\n                    var defer = $q.defer();\n                    item.save(null, {\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                destroy    : function (item) {\n                    var defer = $q.defer();\n                    item.destroy({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n                    return defer.promise;\n                },\n                comments   : function (params) {\n                    return ParseCloud.run('commentGallery', params);\n                },\n                feed       : function (params) {\n                    return ParseCloud.run('feedGallery', params);\n                },\n                follow     : function (params) {\n                    console.log('Follow', params);\n                    return ParseCloud.run('followUser', params);\n                },\n                likeGallery: function (params) {\n                    console.log(params);\n                    return ParseCloud.run('likeGallery', {galleryId: params.galleryId});\n                },\n                get        : function (galleryId) {\n                    var defer = $q.defer();\n                    new Parse.Query(this)\n\n                        .get(galleryId, {\n                            success: defer.resolve,\n                            error  : defer.reject\n                        });\n\n                    return defer.promise;\n                },\n                all        : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    //if (params.filter != '') {\n                    //    query.contains('words', params.filter);\n                    //}\n\n                    // Order Table\n                    if (params.order) {\n                        if (params.order.indexOf('-') < -1) {\n                            query.ascending(params.order);\n                        } else {\n                            query.descending(params.order.replace('-'));\n                        }\n                    }\n\n                    // Status\n                    if (params.status && params.status !== null) {\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    // Limit by page\n                    query.limit(params.limit);\n\n                    // Paginate\n                    query.skip((params.page * params.limit) - params.limit);\n                    query.find({\n                        success: defer.resolve,\n                        error  : defer.reject\n                    });\n\n                    return defer.promise;\n                },\n                count      : function (params) {\n                    var defer = $q.defer();\n                    var query = new Parse.Query(this);\n\n                    if (params.filter != '') {\n                        query.contains('words', params.filter);\n                    }\n\n                    if (params.date && params.date !== null) {\n                        var start = moment(params.date).startOf('day');\n                        var end   = moment(params.date).endOf('day');\n                        query.greaterThanOrEqualTo('createdAt', start.toDate());\n                        query.lessThanOrEqualTo('createdAt', end.toDate());\n                    }\n\n                    if (params.status && params.status !== null) {\n\n                        if (params.status === 'pending') {\n                            query.doesNotExist('isApproved');\n                        } else if (params.status === 'rejected') {\n                            query.equalTo('isApproved', false);\n                        } else if (params.status === 'approved') {\n                            query.equalTo('isApproved', true);\n                        }\n                    }\n\n                    query.count({\n                        success: function (count) {\n                            defer.resolve(count);\n                        },\n                        error  : function (error) {\n                            defer.reject(error);\n                        }\n                    });\n\n                    return defer.promise;\n                }\n            });\n\n        Object.defineProperty(ParseObject.prototype, 'likesTotal', {\n            get: function () {\n                return this.get('likesTotal');\n            },\n            set: function (value) {\n                this.set('likesTotal', value);\n            }\n        });\n        Object.defineProperty(ParseObject.prototype, 'user', {\n            get: function () {\n                return this.get('user');\n            },\n            set: function (value) {\n                this.set('user', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'title', {\n            get: function () {\n                return this.get('title');\n            },\n            set: function (value) {\n                this.set('title', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'hashtags', {\n            get: function () {\n                return this.get('hashtags');\n            },\n            set: function (value) {\n                this.set('hashtags', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'words', {\n            get: function () {\n                return this.get('words');\n            },\n            set: function (value) {\n                this.set('words', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'location', {\n            get: function () {\n                return this.get('location');\n            },\n            set: function (val) {\n                this.set('location', new Parse.GeoPoint({\n                    latitude : val.latitude,\n                    longitude: val.longitude\n                }));\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'address', {\n            get: function () {\n                return this.get('address');\n            },\n            set: function (value) {\n                this.set('address', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'image', {\n            get: function () {\n                return this.get('image');\n            },\n            set: function (value) {\n                this.set('image', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'icon', {\n            get: function () {\n                return this.get('icon');\n            },\n            set: function (value) {\n                this.set('icon', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'imageThumb', {\n            get: function () {\n                return this.get('imageThumb');\n            },\n            set: function (value) {\n                this.set('imageThumb', value);\n            }\n        });\n\n\n        Object.defineProperty(ParseObject.prototype, 'isApproved', {\n            get: function () {\n                return this.get('isApproved');\n            },\n            set: function (value) {\n                this.set('isApproved', value);\n            }\n        });\n\n        Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n            get: function () {\n                return this.get('expiresAt');\n            },\n            set: function (value) {\n                this.set('expiresAt', value);\n            }\n        });\n\n        return ParseObject;\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GalleryFeedback', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GalleryFeedback', {\n      getStatus: function () {\n        if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n        item.user    = Parse.User.current();\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n\n        }\n\n        query.include('gallery')\n        query.include('User')\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('words', params.filter);\n        }\n\n        if (params.date && params.date !== null) {\n          var start = moment(params.date).startOf('day');\n          var end   = moment(params.date).endOf('day');\n          query.greaterThanOrEqualTo('createdAt', start.toDate());\n          query.lessThanOrEqualTo('createdAt', end.toDate());\n        }\n\n        // Order Table\n        if (params.order) {\n          if (params.order.indexOf('-') < -1) {\n            query.ascending(params.order);\n          } else {\n            query.descending(params.order.replace('-'));\n          }\n        }\n\n        if (params.status && params.status !== null) {\n\n          if (params.status === 'pending') {\n            query.doesNotExist('isApproved');\n          } else if (params.status === 'rejected') {\n            query.equalTo('isApproved', false);\n          } else if (params.status === 'approved') {\n            query.equalTo('isApproved', true);\n          }\n        }\n\n        query.count({\n          success: function (count) {\n            defer.resolve(count);\n          },\n          error  : function (error) {\n            defer.reject(error);\n          }\n        });\n\n        return defer.promise;\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'user', {\n      get: function () {\n        return this.get('user');\n      },\n      set: function (value) {\n        this.set('user', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'subject', {\n      get: function () {\n        return this.get('subject');\n      },\n      set: function (value) {\n        this.set('subject', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'title', {\n      get: function () {\n        return this.get('title');\n      },\n      set: function (value) {\n        this.set('title', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'hashtags', {\n      get: function () {\n        return this.get('hashtags');\n      },\n      set: function (value) {\n        this.set('hashtags', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'words', {\n      get: function () {\n        return this.get('words');\n      },\n      set: function (value) {\n        this.set('words', value);\n      }\n    });\n\n\n    Object.defineProperty(ParseObject.prototype, 'isApproved', {\n      get: function () {\n        return this.get('isApproved');\n      },\n      set: function (value) {\n        this.set('isApproved', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'expiresAt', {\n      get: function () {\n        return this.get('expiresAt');\n      },\n      set: function (value) {\n        this.set('expiresAt', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('GallerySetting', function ($q, moment) {\n\n    var ParseObject = Parse.Object.extend('GallerySetting', {\n      getStatus: function () {\n        if (moment().toDate() >= this.expiresAt) {\n          return 'Expired';\n        }\n        else if (this.isApproved) {\n          return 'Approved';\n        } else if (this.isApproved === false) {\n          return 'Rejected';\n        } else {\n          return 'Pending';\n        }\n      }\n    }, {\n      create : function (item) {\n        var defer    = $q.defer();\n        var objPlace = new ParseObject();\n\n        objPlace.save(item, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      update : function (item) {\n        var defer = $q.defer();\n        item.save(null, {\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      destroy: function (item) {\n        var defer = $q.defer();\n        item.destroy({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n        return defer.promise;\n      },\n      all    : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        if (params.filter != '') {\n          query.contains('canonical', params.filter);\n        }\n\n        query.descending('createdAt');\n        query.limit(params.limit);\n        query.skip((params.page * params.limit) - params.limit);\n        query.find({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      },\n      count  : function (params) {\n        var defer = $q.defer();\n        var query = new Parse.Query(this);\n\n        query.count({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n\n        return defer.promise;\n      }\n\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'key', {\n      get: function () {\n        return this.get('key');\n      },\n      set: function (value) {\n        this.set('key', value);\n      }\n    });\n\n    Object.defineProperty(ParseObject.prototype, 'value', {\n      get: function () {\n        return this.get('value');\n      },\n      set: function (value) {\n        this.set('value', value);\n      }\n    });\n\n    return ParseObject;\n\n  });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Geolocation', GeolocationFactory);\n\n    function GeolocationFactory($ionicPlatform, $q) {\n        return {\n            getCurrentPosition: getCurrentPosition\n        };\n\n        function getCurrentPosition($cordovaGeolocation) {\n            var defer = $q.defer();\n\n            $ionicPlatform.ready(function () {\n                var options = {\n                    maximumAge        : 3000,\n                    timeout           : 1000,\n                    enableHighAccuracy: true\n                };\n\n                var options = {timeout: 10000, enableHighAccuracy: true};\n\n                if (navigator.geolocation) {\n                    navigator.geolocation.getCurrentPosition(\n                        function(position) {\n                            // Get current cordinates.\n                            console.log(position);\n                            defer.resolve(position);\n                        },\n                        function(error) {\n                            defer.reject(error);\n                        },\n                        {timeout: 30000, enableHighAccuracy: true, maximumAge: 75000}\n                    );\n                }\n                \n                //$cordovaGeolocation.getCurrentPosition(options).then(defer.resolve).catch(defer.reject);\n\n                //navigator.geolocation.getCurrentPosition(\n                //    defer.resolve,\n                //    defer.reject,\n                //    options);\n            });\n\n            return defer.promise;\n        }\n    }\n\n})();\n(function () {\n  'use strict';\n  angular.module('starter').factory('GoogleAnalytics', GoogleAnalyticsFactory);\n\n  function GoogleAnalyticsFactory($cordovaGoogleAnalytics) {\n    var TAG      = 'AnalyticsService';\n    var canTrack = false;\n    return {\n      init          : init,\n      trackView     : trackView,\n      trackEvent    : trackEvent,\n      trackException: trackException\n    };\n\n    function init(trackingId) {\n      if (trackingId !== null && trackingId !== '' && window.cordova) {\n        $cordovaGoogleAnalytics.debugMode();\n        $cordovaGoogleAnalytics.startTrackerWithId(trackingId);\n        canTrack = true;\n      } else {\n        console.warn('[' + TAG + ']: Invalid Tracker ID or not using emulator');\n      }\n    }\n\n    function trackEvent(category, action, label) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackEvent(category, action, label);\n      }\n    }\n\n    function trackView(viewName) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackView(viewName);\n      }\n    }\n\n    function trackException(description, isFatal) {\n      if (canTrack) {\n        $cordovaGoogleAnalytics.trackException(description, isFatal)\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Install', InstallFactory);\n\n    function InstallFactory(ParseCloud) {\n        return {\n            start : start,\n            status: status,\n        };\n\n        function start(data) {\n            return ParseCloud.run('install', data);\n        }\n\n        function status(data) {\n            return ParseCloud.run('status', data);\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('OneSignal', OneSignalFactory);\n\n    function OneSignalFactory($q) {\n\n        return {\n            init: init\n        };\n\n        function init(id, google) {\n            var defer = $q.defer();\n\n            if (window.cordova.OneSignal) {\n                // Enable to debug issues.\n                window.plugins.OneSignal.setLogLevel({\n                    logLevel   : 4,\n                    visualLevel: 4\n                });\n\n                // Update with your OneSignal AppId and googleProjectNumber before running.\n                window.plugins.OneSignal.init(id, {googleProjectNumber: google}, function (jsonData) {\n                     alert(\"Notification received:\\n\" + JSON.stringify(jsonData));\n\n                });\n\n                window.plugins.OneSignal.enableInAppAlertNotification(true);\n            } else {\n                defer.reject('OneSignal plugin istalled');\n            }\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('ParseCloud', ParseCloudFactory);\n\n    function ParseCloudFactory($q) {\n        return {\n            run: run\n        };\n\n        function run(action, data) {\n            var defer = $q.defer();\n            Parse.Cloud.run(action, data, {\n                success: defer.resolve,\n                error  : defer.reject\n            });\n            return defer.promise;\n        }\n    }\n\n})();\n\n(function () {\n  'use strict';\n  angular.module('starter').factory('ParseFile', function ($q) {\n    return {\n      upload: upload\n    };\n\n    function upload(file, ext) {\n      var defer = $q.defer();\n      var filename = 'file.jpg';\n\n      if (ext) {\n        filename.replace('.jpg', ext);\n      }\n      \n      new Parse.File(filename, file)\n        .save({\n          success: defer.resolve,\n          error  : defer.reject\n        });\n      return defer.promise;\n    }\n  });\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('Share', PhotogramShareFactory);\n\n    function PhotogramShareFactory(AppConfig, $q, $translate, $window) {\n\n        var options = {\n            title  : $translate.instant('Join me from ') + AppConfig.app.name + '!',\n            subject: $translate.instant(\"I'm at \") + AppConfig.app.name + '!. ' + (\n                'Install the application and follow me!') + ' ' + AppConfig.app.url,\n            image  : AppConfig.app.image,\n            link   : AppConfig.app.url\n        };\n\n        return {\n            open: open\n        };\n\n        function open(image, title) {\n            var defer = $q.defer();\n\n            if (image) {\n                options.image = image;\n            }\n\n            if (title) {\n                options.title = title;\n            }\n\n            $window.plugins.socialsharing.shareWithOptions(options, defer.success, defer.reject);\n\n            return defer.promise;\n        }\n\n    }\n})();\n\n(function () {\n  'use strict';\n\n  angular.module('starter').factory('Toast', ToastFactory);\n\n  function ToastFactory($cordovaToast, $ionicPopup) {\n\n    return {\n      alert  : alert,\n      confirm: confirm\n    };\n\n    function alert(params) {\n      if (window.cordova) {\n        $cordovaToast.show(params.text, 'short', 'bottom');\n      } else {\n        $ionicPopup.alert({\n          title   : params.title,\n          template: params.text,\n          okType  : 'button button-clear button-assertive',\n        });\n      }\n    }\n\n    function confirm(title, msg) {\n      return $ionicPopup.confirm({\n        title   : title,\n        template: msg\n      });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').factory('User', UserFactory);\n\n    function UserFactory($q, $cordovaDevice, ParseCloud) {\n\n        var User = Parse.User.extend({}, {\n            profile               : function (username) {\n                return ParseCloud.run('profile', {username: username})\n            },\n            list                  : function (params) {\n                return ParseCloud.run('listUsers',params)\n            },\n            getFollowers          : function (username) {\n                return ParseCloud.run('getFollowers', {username: username})\n            },\n            getLikers             : function (galleryId) {\n                return ParseCloud.run('getLikers', {galleryId: galleryId})\n            },\n            getFollowing          : function (username) {\n                return ParseCloud.run('getFollowing', {username: username})\n            },\n            signIn                : function (obj) {\n                var defer = $q.defer();\n\n                Parse.User.logIn(obj.username, obj.password, {\n                    success: function (currentUser) {\n\n                        // device\n                        var device;\n                        if (window.cordova) {\n                            device = {\n                                device  : $cordovaDevice.getDevice(),\n                                cordova : $cordovaDevice.getCordova(),\n                                model   : $cordovaDevice.getModel(),\n                                platform: $cordovaDevice.getPlatform(),\n                                uuid    : $cordovaDevice.getUUID(),\n                                version : $cordovaDevice.getVersion()\n                            };\n                        } else {\n                            device = {\n                                device  : {device: window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[0]},\n                                cordova : '',\n                                model   : window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[0],\n                                platform: window.navigator.platform,\n                                uuid    : '',\n                                version : window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\\/([0-9]+)\\./)[1]\n                            };\n                        }\n\n                        console.log(currentUser);\n                        console.log(device);\n\n                        User.update(device).then(function () {\n                            defer.resolve(currentUser);\n                        }).catch(defer.reject)\n\n                        console.log('updateUser', device);\n                        //user.save(defer.resolve, defer.reject);\n                    },\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            signUp                : function (data) {\n                var defer = $q.defer();\n                var user  = new Parse.User()\n                    .set({'name': data.name})\n                    .set({'username': data.username})\n                    .set({'email': data.email})\n                    .set({'password': data.password})\n                    .set({'roleName': 'User'});\n\n                var acl = new Parse.ACL();\n                acl.setPublicReadAccess(false);\n                acl.setPublicWriteAccess(false);\n                user.setACL(acl);\n                user.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n\n                return defer.promise;\n            },\n            signInViaFacebook     : function (authData) {\n                var defer      = $q.defer();\n                var expiration = new Date();\n                expiration.setSeconds(expiration.getSeconds() + authData.authResponse.expiresIn);\n                expiration = expiration.toISOString();\n\n                var facebookAuthData = {\n                    'id'             : authData.authResponse.userID,\n                    'access_token'   : authData.authResponse.accessToken,\n                    'expiration_date': expiration\n                };\n                Parse.FacebookUtils.logIn(facebookAuthData, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            logOut                : function () {\n                var defer = $q.defer();\n                Parse.User.logOut().then(defer.resolve, defer.reject);\n                return defer.promise;\n            },\n            findByEmail           : function (email) {\n                return ParseCloud.run('findUserByEmail', {email: email});\n            },\n            updateWithFacebookData: function (data) {\n                var defer = $q.defer();\n                ParseCloud.run('saveFacebookPicture', {}).then(function () {\n                    var user = Parse.User.current();\n                    user.set({'email': data.email});\n                    user.set({'username': data.email});\n                    user.set({'name': data.name});\n                    user.setACL(new Parse.ACL(user));\n                    user.save(null, {\n                        success: function () {\n                            user.fetch().then(function (userFetched) {\n                                defer.resolve(userFetched);\n                            }, function (error) {\n                                defer.reject(error);\n                            });\n                        }\n                    });\n                }).catch(defer.reject);\n                return defer.promise;\n            },\n            getPublicData         : function (user) {\n                console.log(user);\n                var defer = $q.defer();\n                new Parse.Query('UserData').equalTo('user', user).first().then(function (userData) {\n                    if (userData) {\n                        defer.resolve(userData);\n                    } else {\n                        defer.reject(Parse.Promise.error({\n                            code   : 1,\n                            message: 'User Data not found'\n                        }));\n                    }\n                }, defer.reject);\n                return defer.promise;\n            },\n            recoverPassword       : function (email) {\n                var defer = $q.defer();\n                Parse.User.requestPasswordReset(email, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            destroy               : function () {\n                var defer = $q.defer();\n                Parse.User.current().destroy().then(defer.resolve, defer.reject);\n                return defer.promise;\n            },\n            setPhoto              : function (parseFile) {\n                var defer = $q.defer();\n                var user  = Parse.User.current();\n                user.set({'photo': parseFile});\n                user.save(null, {\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            follow                : function (userId) {\n                return ParseCloud.run('followUser', {userId: userId});\n            },\n            all                   : function (params) {\n                return ParseCloud.run('getUsers', params);\n            },\n            validateUsername      : function (input) {\n                return ParseCloud.run('validateUsername', {username: input});\n            },\n            validateEmail         : function (input) {\n                return ParseCloud.run('validateEmail', {email: input});\n            },\n            findUsername          : function (username) {\n                var defer = $q.defer();\n                new Parse.Query(this).equalTo('username', username).first({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            update                : function (params) {\n                var defer = $q.defer();\n                var user  = Parse.User.current();\n                angular.forEach(params, function (value, key) {\n                    user.set(key, value);\n                });\n                user.save({\n                    success: defer.resolve,\n                    error  : defer.reject\n                });\n                return defer.promise;\n            },\n            delete                : function (data) {\n                return ParseCloud.run('destroyUser', data);\n            },\n            fetch                 : function () {\n                var defer = $q.defer();\n                if (Parse.User.current()) {\n                    Parse.User.current().fetch().then(defer.resolve, defer.reject);\n                } else {\n                    defer.reject();\n                }\n                return defer.promise;\n            }\n\n        });\n\n        Object.defineProperty(User.prototype, 'name', {\n            get: function () {\n                return this.get('name');\n            },\n            set: function (val) {\n                this.set('name', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'username', {\n            get: function () {\n                return this.get('username');\n            },\n            set: function (val) {\n                this.set('username', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'status', {\n            get: function () {\n                return this.get('status');\n            },\n            set: function (val) {\n                this.set('status', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'gender', {\n            get: function () {\n                return this.get('gender');\n            },\n            set: function (val) {\n                this.set('gender', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'email', {\n            get: function () {\n                return this.get('email');\n            },\n            set: function (val) {\n                this.set('email', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photo', {\n            get: function () {\n                return this.get('photo');\n            },\n            set: function (val) {\n                this.set('photo', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'photoThumb', {\n            get: function () {\n                return this.get('photoThumb');\n            },\n            set: function (val) {\n                this.set('photoThumb', val);\n            }\n        });\n\n        Object.defineProperty(User.prototype, 'roleName', {\n            get: function () {\n                return this.get('roleName');\n            },\n            set: function (val) {\n                this.set('roleName', val);\n            }\n        });\n\n        return User;\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    /**\n     * @ngdoc directive\n     * @name modalLanguage\n     *\n     * @description\n     * _Please update the description and restriction._\n     *\n     * @restrict A\n     * */\n\n    var path = 'app/component/ion-language';\n\n    angular\n        .module('ion-language')\n        .directive('ionLanguage', ionLanguageDirective);\n\n    function ionLanguageDirective(AppConfig, $translate, $timeout, Loading, $ionicModal) {\n        return {\n            restrict: 'E',\n            link: modalLanguageLink,\n            templateUrl: path + '/ion-language.html'\n        };\n\n        function modalLanguageLink(scope, elem, attr) {\n\n\n            scope.languages = AppConfig.locales;\n            scope.language  = scope.languages.filter(function (item) {\n                return item.code === $translate.use()\n            })[0];\n\n            console.log(scope.language);\n\n            elem.bind('click', openModal);\n\n            function openModal() {\n\n                window.StatusBar.styleDefault();\n\n                scope.closeModal = function () {\n                    scope.modal.hide();\n                    // scope.modal.remove();\n                    window.StatusBar.styleLightContent();\n                };\n\n\n                scope.searchValue = '';\n\n                scope.selectLanguage = function (language) {\n                    console.log(language);\n                    $translate.use(language.code);\n                    moment.locale(language.code);\n                    scope.language = language;\n                    Loading.start();\n                    scope.closeModal();\n                    $timeout(function () {\n                        Loading.end();\n                    }, 1000);\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/modal-language.html', {\n                        scope: scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        scope.modal = modal;\n                        scope.modal.show();\n\n                    });\n            }\n        }\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n\n    angular\n        .module('ion-location')\n        .factory('GeoService', GeoServiceFactory);\n\n    function GeoServiceFactory($http, $window, $cordovaGeolocation, $ionicPopup, $timeout, $q) {\n\n        /**\n         'street_address', //indicates a precise street address.\n         'route', //indicates a named route (such as \"US 101\").\n         'intersection', //indicates a major intersection, usually of two major roads.\n         'political', //indicates a political entity. Usually, this type indicates a polygon of some civil administration.\n         'country', //indicates the national political entity, and is typically the highest order type returned by the Geocoder.\n         'administrative_area_level_1', //indicates a first-order civil entity below the country level. Within the United States, these administrative levels are states. Not all nations exhibit these administrative levels.\n         'administrative_area_level_2', //indicates a second-order civil entity below the country level. Within the United States, these administrative levels are counties. Not all nations exhibit these administrative levels.\n         'administrative_area_level_3', //indicates a third-order civil entity below the country level. This type indicates a minor civil division. Not all nations exhibit these administrative levels.\n         'colloquial_area', //indicates a commonly-used alternative name for the entity.\n         'locality', //indicates an incorporated city or town political entity.\n         'sublocality', //indicates an first-order civil entity below a locality\n         'neighborhood', //indicates a named neighborhood\n         'premise', //indicates a named location, usually a building or collection of buildings with a common name\n         'subpremise', //indicates a first-order entity below a named location, usually a singular building within a collection of buildings with a common name\n         'postal_code', //indicates a postal code as used to address postal mail within the country.\n         'natural_feature', //indicates a prominent natural feature.\n         'airport', //indicates an airport.\n         'park', //indicates a named park.\n         'point_of_interest', //indicates a named point of interest. Typically, these \"POI\"s are prominent local entities that don't easily fit in another category such as \"Empire State Building\" or \"Statue of Liberty.\"\n\n         //In addition to the above, address components may exhibit the following types:\n\n         'post_box', //indicates a specific postal box.\n         'street_number', //indicates the precise street number.\n         'floor indicates', //the floor of a building address.\n         'room indicates'; //the room of a building address.'\n         */\n        var options             = {\n            types: ['geocode']\n        };\n        var autocompleteService = new $window.google.maps.places.AutocompleteService();\n        var detailsService      = new $window.google.maps.places.PlacesService($window.document.createElement('input'),\n            options);\n        var componentForm       = {\n            street_number              : 'long_name',\n            //number\n            route                      : 'long_name',\n            //street\n            locality                   : 'long_name',\n            // district\n            sublocality                : 'long_name',\n            // district\n            neighborhood               : 'long_name',\n            //state\n            political                  : 'long_name',\n            //state\n            administrative_area_level_1: 'long_name',\n            //state\n            country                    : 'long_name',\n            //country\n            postal_code                : 'long_name' //zipcode\n        };\n        var componentFormName   = {\n            street_number              : 'number',\n            //number\n            route                      : 'street',\n            //street\n            locality                   : 'city',\n            // district\n            administrative_area_level_1: 'state',\n            //state\n            country                    : 'country',\n            //country\n            postal_code                : 'zipcode',\n            //zipcode\n            neighborhood               : 'district' //zipcode\n        };\n\n        var data = {\n            coords: {},\n            src   : ''\n        };\n\n\n        return {\n            src          : src,\n            getDetails   : getDetails,\n            searchAddress: searchAddress,\n            parseAddress : parseAddress,\n            findMe       : findMe\n        };\n\n        function getLocation() {\n            // Pega a Localizao da Pessoa\n            var defer = $q.defer();\n\n            if (data.location) {\n                $timeout(function () {\n                    defer.resolve(data.location);\n                }, 1000);\n            } else {\n                var posOptions = {\n                    timeout           : 10000,\n                    enableHighAccuracy: false\n                };\n                $cordovaGeolocation.getCurrentPosition(posOptions).then(function (position) {\n                    // console.log('Fez a requisio', position);\n                    data.location = {\n                        latitude : position.coords.latitude,\n                        longitude: position.coords.longitude\n                    };\n                    defer.resolve(data.location);\n                }, function (err) {\n                    // error\n                    // console.log('Error na geolocalizao', err);\n                    $ionicPopup.alert({\n                        title   : 'Geo Error',\n                        template: err.message\n                    });\n                    defer.reject(err);\n                });\n            }\n\n\n            return defer.promise;\n        }\n\n\n        function findMe() {\n            var defer = $q.defer();\n\n            getLocation().then(function (pos) {\n                console.log(pos);\n                getGoogleAddress(pos.latitude, pos.longitude).success(function (resp) {\n                    resp.geolocation = pos;\n                    console.log(resp);\n                    defer.resolve(resp);\n                }).error(logErr);\n            });\n            return defer.promise;\n        }\n\n\n        function logErr(error) {\n            console.log(error);\n        }\n\n        function getGoogleAddress(lat, lng) {\n            return $http.get('http://maps.google.com/maps/api/geocode/json?latlng=' + lat + ',' + lng + '&sensor=true')\n                        .success(function (data) {\n                            data.address_normal = data.results[0].formatted_address;\n                            data.address        = address(data.results[0].address_components);\n                            data.src            = imagem(lat, lng, 18, 500, 300);\n                        });\n        }\n\n        function address(data) {\n            if (!data) {\n                return false;\n            } else {\n                return {\n                    numero  : data[0].short_name,\n                    rua     : data[1].long_name,\n                    bairro  : data[2].short_name,\n                    cidade  : data[3].short_name,\n                    estado  : data[5].long_name,\n                    uf      : data[5].short_name,\n                    pais    : data[6].long_name,\n                    paisCode: data[6].short_name,\n                    cep     : data[7].short_name\n                };\n            }\n\n        }\n\n        function imagem(lat, lng, zoom, w, h) {\n            return 'http://maps.google.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom + '&size=' +\n                w + 'x' + h + '&maptype=roadmap&sensor=true';\n        }\n\n        function parseAddress(place) {\n            var defer = $q.defer();\n            console.log('parseAddress', place);\n            if(!place) {\n                defer.reject('not place')\n            }\n            var address = {\n                resume: '',\n                geo   : {\n                    latitude : place.geometry.location.lat(),\n                    longitude: place.geometry.location.lng()\n                }\n            };\n            var image   = src(address.geo.latitude, address.geo.longitude, 16, 900, 200);\n\n            for (var i = 0; i < place.address_components.length; i++) {\n                var addressType = place.address_components[i].types[0];\n                if (componentForm[addressType]) {\n                    var val                                 = place.address_components[i][componentForm[addressType]];\n                    address[componentFormName[addressType]] = val;\n                }\n            }\n            address.name   = place.name;\n            address.street = address.street + ', ' + address.number;\n            address.image  = image;\n            address.resume = address.street + ' - ' + address.city + ', ' + address.state + ', ' + address.country;\n            defer.resolve(address);\n\n            return defer.promise;\n        }\n\n        function searchAddress(input) {\n            var deferred = $q.defer();\n            autocompleteService.getQueryPredictions({\n                input: input\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function getDetails(placeId) {\n            var deferred = $q.defer();\n            detailsService.getDetails({\n                placeId: placeId\n            }, function (result) {\n                deferred.resolve(result);\n            });\n            return deferred.promise;\n        }\n\n        function src(lat, lng, zoom, w, h) {\n            console.log('src latitude', lat, lng, zoom, w, h);\n\n            var link = 'http://maps.googleapis.com/maps/api/staticmap?center=' + lat + ',' + lng + '&zoom=' + zoom +\n                '&scale=1&size=' + w + 'x' + h +\n                '&maptype=roadmap&format=jpg&visual_refresh=true&markers=size:small%7Ccolor:0xff2600%7Clabel:0%7C' + lat +\n                ',' + lng + '&sensor=true';\n            console.log(link);\n            return link;\n        }\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-location').directive('ionLocation', ionLocationDirective);\n\n    function ionLocationDirective($ionicModal, GeoService) {\n        return {\n            restrict: 'A',\n            scope   : {\n                location: '=ngModel'\n            },\n            link    : ionLocationLink\n        };\n\n        function ionLocationLink($scope, element) {\n\n\n            element.bind('click', function () {\n                function init() {\n                    $scope.search             = {};\n                    $scope.search.suggestions = [];\n                    $scope.search.query       = '';\n                }\n\n\n                function selectPlace(place_id) {\n                    GeoService.getDetails(place_id).then(function (location) {\n                        GeoService.parseAddress(location).then(function (address) {\n                            console.log(address);\n                            $scope.location = address;\n                            $scope.closeModalLocation();\n                        })\n                    });\n                }\n\n                init();\n\n                $scope.findMe = function () {\n                    $scope.loading = true;\n                    GeoService.findMe().then(function (location) {\n                        GeoService.searchAddress(location.address_normal).then(function (result) {\n                            console.log(result);\n                            $scope.search.suggestions = result;\n                            $scope.loading            = false;\n                        });\n                    });\n                };\n\n                $scope.findMe();\n\n                $scope.choosePlace = function (place) {\n                    selectPlace(place.place_id);\n                }\n\n                $scope.modalLocation = $ionicModal.fromTemplate('<ion-modal-view>' +\n                    '<ion-header-bar class=\"bar bar-light item-input-inset\">' +\n                    '<ion-spinner ng-if=\"loading\"></ion-spinner>' +\n                    '<button class=\"button button-clear button-icon ion-navigate\" ng-click=\"findMe()\" ng-hide=\"loading\"></button>' +\n                    '<label class=\"item-input-wrapper\">' +\n                    '<input type=\"search\" ng-model=\"search.query\" ng-model-options=\"{ debounce: 1500 }\" placeholder=\"{{ \\'searchText\\' | translate }}\"></label>' +\n                    '<button class=\"button button-clear\" ng-click=\"closeModalLocation()\" translate=\"cancel\"></button>' +\n                    '</ion-header-bar>' +\n                    '<ion-content padding=\"false\">' +\n                    '<ion-list>' +\n                    '<div class=\"center padding\" ng-if=\"loading1\"><ion-spinner ></ion-spinner></div>' +\n                    '<ion-item ng-repeat=\"suggestion in search.suggestions\" ng-click=\"choosePlace(suggestion)\" ng-bind=\"suggestion.description\"></ion-item>' +\n                    '<ion-item class=\"item-divider\"><img src=\"https://developers.google.com/maps/documentation/places/images/powered-by-google-on-white.png\"alt=\"\"/></ion-item>' +\n                    '</ion-list>' +\n                    '</ion-content>' +\n                    '</ion-modal-view>', {\n                        scope          : $scope,\n                        focusFirstInput: true\n                    }\n                );\n\n                $scope.modalLocation.show();\n\n                $scope.closeModalLocation = function () {\n                    $scope.modalLocation.hide();\n                    $scope.modalLocation.remove();\n                };\n\n                $scope.$watch('search.query', function (newValue) {\n                    if (newValue) {\n                        $scope.loading1           = true;\n                        $scope.search.suggestions = [];\n                        GeoService.searchAddress(newValue).then(function (result) {\n                            console.log(result);\n                            $scope.search.suggestions = result;\n                            $scope.loading1           = false;\n                        });\n                    }\n                });\n\n\n            });\n\n        }\n    }\n})();\n\n(function () {\n\n    angular.module('app.main').factory('FeedbackModal', FeedbackModalFactory);\n\n    function FeedbackModalFactory($q, AppConfig, GalleryFeedback, $rootScope, GalleryFeedbackForm, $ionicModal, Toast) {\n        var path = AppConfig.path;\n\n        return {\n            modal: modal\n        };\n        function modal(gallery) {\n            var $scope            = $rootScope.$new();\n            $scope.formFields     = GalleryFeedbackForm.form;\n            $scope.submitFeedback = submitFeedback;\n            $scope.closeModal     = closeModal;\n            $scope.form           = {\n                photogramId: gallery.id,\n                subject    : 'complaint'\n            };\n\n            function submitFeedback() {\n                var dataForm = angular.copy($scope.form);\n                GalleryFeedback.create(dataForm).then(function (resp) {\n                    closeModal();\n                });\n            }\n\n\n            function closeModal() {\n                $scope.modal.hide();\n                $scope.modal.remove();\n                delete $scope.modal;\n            }\n\n            $ionicModal\n                .fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                })\n                .then(function (modal) {\n                    $scope.modal = modal;\n                    $scope.modal.show();\n                });\n        }\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular\n        .module('app.main')\n        .factory('GalleryFeedbackForm', GalleryFeedbackFormFactory);\n\n    function GalleryFeedbackFormFactory($translate) {\n\n        var form = [{\n            key: 'title',\n            type: 'input',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('FEEDBACK.TITLE'),\n                required: true\n            }\n        }, {\n            key: 'subject',\n            type: 'select',\n            templateOptions: {\n                label: $translate.instant('FEEDBACK.SUBJECT'),\n                options: [{\n                    'label': $translate.instant('FEEDBACK.COMPLAINT'),\n                    'id': 'complaint',\n                }, {\n                    'label': $translate.instant('FEEDBACK.BUG'),\n                    'id': 'bug',\n                }, {\n                    'label': $translate.instant('FEEDBACK.SUGGESTION'),\n                    'id': 'suggestion',\n                }],\n                valueProp: 'id',\n                labelProp: 'label',\n                icon: 'icon-list',\n                iconPlaceholder: true\n            }\n        }, {\n            key: 'status',\n            type: 'textarea',\n            templateOptions: {\n                type: 'text',\n                placeholder: $translate.instant('FEEDBACK.MESSAGE'),\n                icon: 'ion-quote',\n                required: true,\n                iconPlaceholder: true\n            }\n        }];\n\n        return {\n            form: form\n        };\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n  \n  angular.module('app.main').directive('feedback', feedbackDirective);\n\n  function feedbackDirective($ionicModal, AppConfig, PhotogramFeedback, PhotogramFeedbackForm, $state) {\n\n    var path = AppConfig.path;\n\n    return {\n      restrict: 'A',\n      scope: {\n        photogram: '@'\n      },\n      template: '',\n      link: function (scope, elem, attr) {\n\n        scope.link = link;\n        scope.submitFeedback = submitFeedback;\n        scope.closeModal = closeModal;\n        elem.bind('click', openModal);\n\n        function init() {\n          scope.form = {\n            photogramId: scope.photogram\n          };\n          scope.formFields = PhotogramFeedbackForm.form;\n        }\n\n        function openModal() {\n\n          init();\n          $ionicModal.fromTemplateUrl('app/main/feedback/feedback-modal.html', {\n              scope: scope,\n              focusFirstInput: true\n            })\n            .then(function (modal) {\n              scope.modal = modal;\n              scope.modal.show();\n            });\n        }\n\n        function link(sref) {\n          $state.go(sref)\n          scope.closeModal();\n        }\n\n        function submitFeedback() {\n          var dataForm = angular.copy(scope.form);\n          PhotogramFeedback\n            .submit(dataForm)\n            .then(function (resp) {\n              console.log(resp);\n              init();\n              scope.closeModal();\n            });\n        }\n\n\n        function closeModal() {\n          scope.modal.hide();\n          scope.modal.remove();\n        }\n\n      }\n    };\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('starter').controller('GalleryComment', GalleryCommentController);\n\n    function GalleryCommentController($scope, $stateParams, $q, $ionicScrollDelegate, $ionicHistory, Loading, $ionicPopup, User, Dialog, $timeout, Gallery, GalleryComment, GalleryForm) {\n\n        $scope.currentUser = Parse.User.current();\n        $scope.loading     = true;\n        $scope.formFields  = GalleryForm.formComment;\n\n        function init() {\n            $scope.nocomments = false;\n            Gallery.get($stateParams.galleryId).then(function (gallery) {\n                $scope.form = {\n                    gallery: gallery,\n                    text   : ''\n                };\n            });\n        }\n\n        $scope.backButton = function () {\n            $ionicHistory.goBack();\n        };\n\n        getComments();\n        init();\n\n        //Mentios\n        // shows the use of dynamic values in mentio-id and mentio-for to link elements\n        $scope.myIndexValue = \"5\";\n\n        $scope.searchPeople = function (term) {\n            var peopleList = [];\n            return User.getFollowing().then(function (response) {\n                _.each(response, function (item) {\n                    item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                    item.bio      = item.status;\n\n                    if (item.name) {\n                        if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                            peopleList.push(item);\n                        }\n                    } else {\n                        item.name = 'Not name';\n                        peopleList.push(item);\n                    }\n                });\n                $scope.people = peopleList;\n                console.log(peopleList);\n                return $q.when(peopleList);\n            });\n        };\n\n        $scope.getPeopleTextRaw = function (item) {\n            return '@' + item.username;\n        };\n\n\n        $scope.deleteComment = function (item, index) {\n            console.log(item);\n            Dialog.confirm(('Delete comment'), ('You are sure?')).then(function (resp) {\n                if (resp) {\n                    GalleryComment.get(item.id).then(function (comment) {\n                        GalleryComment.destroy(comment).then(function (resp) {\n                            $scope.comments.splice(index, 1);\n                        });\n                    })\n                }\n            });\n        }\n\n        $scope.editComment = function (obj, index) {\n            console.log(obj);\n            // An elaborate, custom popup\n            $scope.formEdit = {\n                id  : obj.id,\n                text: obj.text\n            };\n\n            $ionicPopup\n                .show({\n                    template: '<input type=\"text\" ng-model=\"formEdit.text\">',\n                    title   : ('Edit comment'),\n                    //subTitle: 'Please use normal things',\n                    scope   : $scope,\n                    buttons : [{\n                        text: ('Cancel')\n                    }, {\n                        text : '<b>OK</b>',\n                        type : 'button-positive',\n                        onTap: function (e) {\n                            console.log($scope.formEdit);\n                            if (!$scope.formEdit.text) {\n                                //don't allow the user to close unless he enters wifi password\n                                e.preventDefault();\n                            } else {\n                                return $scope.formEdit;\n                            }\n                        }\n                    }]\n                })\n                .then(function (resp) {\n                    console.log(resp);\n                    if (resp) {\n                        GalleryComment.get(obj.id).then(function (comment) {\n                            comment.text                = resp.text;\n                            $scope.comments[index].text = resp.text;\n                            comment.save();\n                        });\n                    }\n                });\n        }\n\n        function getComments() {\n            $scope.loading = true;\n            Gallery.comments({galleryId: $stateParams.galleryId}).then(function (resp) {\n                $scope.comments = [];\n\n                resp.map(function (comment) {\n                    console.log(comment);\n                    comment.canEdit = (comment.user.obj.id === $scope.currentUser.id) ? true : false;\n                    $scope.comments.push(comment);\n                });\n\n                $scope.loading = false;\n                $ionicScrollDelegate.scrollBottom();\n            });\n        }\n\n        $scope.submitComment = function (rForm, form) {\n            if (rForm.$valid) {\n                var dataForm   = angular.copy(form);\n                $scope.loading = true;\n                GalleryComment.create(dataForm).then(function (resp) {\n                    getComments();\n                    $scope.form.text = '';\n                });\n            }\n        }\n\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('LoadingCtrl', LoadingController);\n\n    function LoadingController($scope, $rootScope, $ionicPlatform, $cordovaSplashscreen, AppConfig, $state) {\n        var user  = $rootScope.currentUser;\n        var intro = window.localStorage['walkthrough'];\n\n        if (intro !== 'true') {\n            $state.go('walkthrough', {clear: true});\n        } else {\n            if (user) {\n                console.log(user);\n                if (user.name) {\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                } else {\n                    $state.go('user.avatar', {\n                        clear: true\n                    });\n                }\n            } else {\n                $state.go(AppConfig.routes.login, {\n                    clear: true\n                });\n            }\n        }\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                }\n            });\n        });\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('ProfileCtrl', ProfileController);\n\n    function ProfileController(User, $state, $stateParams) {\n        var vm       = this;\n        vm.changeTab = changeTab;\n\n        vm.loading = true;\n        User.profile($stateParams.username).then(function (data) {\n            console.log(data);\n            console.log(Parse.User.current());\n            vm.isMe    = Parse.User.current().id === data.id ? true : false;\n            vm.user    = data;\n            vm.loading = false;\n        });\n\n        vm.openFollowers = function () {\n            console.log($state, $stateParams);\n            switch ($state.current.name) {\n                case 'tab.homeProfile':\n                    $state.go('tab.homeProfileFollowers', {username: $stateParams.username});\n                    break;\n                case 'tab.activityProfile':\n                    $state.go('tab.activityProfileFollowers', {username: $stateParams.username});\n                    break;\n            }\n        };\n\n        vm.openFollowing = function () {\n            console.log($state, $stateParams);\n            switch ($state.current.name) {\n                case 'tab.homeProfile':\n                    $state.go('tab.homeProfileFollowing', {username: $stateParams.username});\n                    break;\n                case 'tab.activityProfile':\n                    $state.go('tab.activityProfileFollowing', {username: $stateParams.username});\n                    break;\n            }\n        };\n\n        vm.follow = function () {\n\n            vm.loadingFollow = true;\n\n\n            User.follow(vm.user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                vm.user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    vm.user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    vm.user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n\n        init();\n        changeTab('grid');\n\n        function changeTab(tab) {\n            if (tab === 'list') {\n                vm.tab = {\n                    list: true,\n                    grid: false\n                };\n            } else {\n                vm.tab = {\n                    list: false,\n                    grid: true\n                };\n            }\n        }\n\n        function init() {\n            vm.data  = {\n                total    : false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('MainTabCtrl', MainTabController);\n\n    function MainTabController($localStorage, $scope, PhotoService, User, $cordovaSplashscreen, $ionicPlatform, ActionSheet, $q, Gallery, PhotoFilter, ParseFile, $ionicModal, Loading, Toast) {\n        var vm = this;\n        var tempImage;\n\n        $scope.storage = $localStorage;\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                    window.StatusBar.styleDefault();\n                }\n            });\n        });\n\n        vm.postPhoto = function () {\n            //ActionSheet.image().then(function (image) {\n            //    tempImage = image;\n            //    //return PhotoFilter.load(image);\n            //    return PhotoService.crop(image);\n            //    //return image;\n            //})\n            PhotoService.open().then(modalPost).then(function (form) {\n                //console.log('Cadastra na Galeria', form);\n                Loading.start();\n                ParseFile.upload({base64: form.image}).then(function (imageUploaded) {\n                    form.image = imageUploaded;\n                    Gallery.create(form).then(function (item) {\n                        $scope.$emit('photoInclude', item);\n                        Loading.end();\n                    });\n                });\n            });\n\n\n            function modalPost(image) {\n                var defer    = $q.defer();\n                $scope.image = image;\n                $scope.form  = {\n                    title: ''\n                };\n\n                $scope.editFilter = function () {\n                    PhotoFilter.load(tempImage).then(function (image) {\n                        $scope.image = image;\n                    });\n                };\n\n                //Mentios\n                // shows the use of dynamic values in mentio-id and mentio-for to link elements\n                $scope.searchPeople = function (term) {\n                    var peopleList = [];\n                    return User.getFollowers().then(function (response) {\n                        _.each(response, function (item) {\n                            item.imageUrl = item.photo ? item.photo._url : 'img/user.png';\n                            item.bio      = item.status;\n                            if (item.name.toUpperCase().indexOf(term.toUpperCase()) >= 0) {\n                                peopleList.push(item);\n                            }\n                        });\n                        $scope.people = peopleList;\n                        //console.log(peopleList);\n                        return $q.when(peopleList);\n                    });\n                };\n\n                $scope.getPeopleTextRaw = function (item) {\n                    return '@' + item.username;\n                };\n\n                $ionicModal.fromTemplateUrl('app/main/share/share-modal.html', {\n                    scope          : $scope,\n                    focusFirstInput: true\n                }).then(function (modal) {\n                    $scope.modalFilter = modal;\n                    $scope.modalFilter.show();\n                });\n\n\n                $scope.form.address = {};\n                $scope.closeAddress = function () {\n                    $scope.form.address = {};\n                };\n\n                $scope.close = function () {\n                    $scope.modalFilter.hide();\n                };\n\n                // Cleanup the modal when we're done with it!\n                $scope.$on('$destroy', function () {\n                    $scope.modal.remove();\n                });\n\n                $scope.submit = function () {\n                    var form   = angular.copy($scope.form);\n                    form.image = $scope.image;\n                    tempImage  = '';\n                    $scope.close();\n                    defer.resolve(form);\n                };\n\n                return defer.promise;\n            }\n        };\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('AccountCtrl', AccountController);\n\n    function AccountController(User, $state, $rootScope) {\n        var vm       = this;\n        vm.changeTab = changeTab;\n\n        vm.user  = $rootScope.currentUser;\n        vm.photo = $rootScope.currentUser.attributes.photo;\n\n        vm.loading = true;\n        User.getPublicData(Parse.User.current()).then(function (user) {\n            console.log('Profile', user.attributes);\n            vm.user    = user;\n            vm.loading = false;\n        });\n\n        vm.openFollowers = function () {\n            $state.go('tab.accountFollowers', {username: $rootScope.currentUser.attributes.username});\n        };\n\n        vm.openFollowing = function () {\n            $state.go('tab.accountFollowing', {username: $rootScope.currentUser.attributes.username});\n        };\n\n        init();\n        changeTab('grid');\n\n        function changeTab(tab) {\n            if (tab === 'list') {\n                vm.tab = {\n                    list: true,\n                    grid: false\n                };\n            } else {\n                vm.tab = {\n                    list: false,\n                    grid: true\n                };\n            }\n        }\n\n        function init() {\n            vm.data  = {\n                total    : false,\n                galleries: []\n            };\n            vm.page  = 0;\n            vm.empty = false;\n            vm.more  = false;\n            getFollower();\n        }\n\n        function getFollower() {\n            vm.loadingFollowers = true;\n            vm.loadingFollowing = true;\n            vm.loadingPhotos    = true;\n        }\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('ActivityCtrl', ActivityController);\n\n    function ActivityController($scope, $state, GalleryActivity) {\n        var vm          = this;\n        vm.params       = {};\n        vm.params.page  = 1;\n        vm.params.limit = 30;\n        vm.data         = [];\n\n        vm.openProfile = function (username) {\n            $state.go('tab.activityProfile', {username: username})\n        };\n\n        $scope.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                vm.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            vm.params.page = page;\n        }\n\n        function loadFeed() {\n\n            GalleryActivity.feed(vm.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage(vm.params.page + 1);\n                setGalleries(data);\n\n                if (vm.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n                $scope.$broadcast('scroll.refreshComplete');\n                $scope.loading = false;\n\n            }).catch(function () {\n                if (vm.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        vm.onLoadMore = function () {\n            loadFeed();\n        };\n\n        vm.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        vm.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        vm.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        vm.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        vm.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        vm.onReload = function () {\n            vm.params.page = 0;\n            vm.data        = [];\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n    }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('HomeCtrl', HomeController);\n\n    function HomeController($state) {\n        var vm = this;\n\n        vm.openProfile = function (username) {\n            $state.go('tab.homeProfile', {username: username})\n        };\n\n        vm.openLikers = function (galleryId) {\n            $state.go('tab.homeGalleryLikers', {galleryId: galleryId})\n        };\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular\n        .module('app.main')\n        .controller('SearchCtrl', SearchCtrl);\n\n    function SearchCtrl($scope, $filter, $ionicLoading, $state) {\n\n\n        $scope.onSearch = function () {\n\n            if ($scope.params.search !== '') {\n                $scope.params.page   = 0;\n                $scope.places        = [];\n                $scope.params.search = $filter('lowercase')($scope.params.search);\n            }\n        };\n\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('app.main').controller('SearchMapCtrl', SearchMapController);\n\n    function SearchMapController($scope, $state, $localStorage, Toast, Gallery, Geolocation, Dialog) {\n\n        var markers      = [];\n        var latlngbounds = new google.maps.LatLngBounds();\n        $scope.maxRating = 5;\n        $scope.storage   = $localStorage;\n        $scope.galleries = [];\n        $scope.params    = {\n            location: null,\n            distance: 100.00,\n            page    : 1,\n            limit   : 10\n        };\n        $scope.loading   = true;\n        $scope.map\n\n        function init() {\n            $scope.galleries = [];\n            removeGallerys();\n            removeMarkers();\n\n            var position   = {\n                latitude : -18.8800397,\n                longitude: -47.05878999999999\n            };\n            var mapOptions = {\n                center   : setPosition(position),\n                zoom     : 15,\n                mapTypeId: google.maps.MapTypeId.ROADMAP\n            };\n\n            $scope.map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);\n        }\n\n        $scope.$on('$ionicView.enter', function (scopes, states) {\n            if(!$scope.map) {\n                init();\n                myPosition();\n            }\n        });\n\n\n        function myPosition() {\n            Geolocation.getCurrentPosition().then(function (position) {\n\n                console.log(position);\n\n                $scope.params.location = {\n                    latitude : position.coords.latitude,\n                    longitude: position.coords.longitude\n                };\n\n                var marker = {\n                    position: setPosition($scope.params.location),\n                    title   : 'I am here',\n                    id      : 0\n                }\n\n                addMarker(marker);\n\n                // Set center locale\n                $scope.map.setCenter(setPosition($scope.params.location));\n\n                loadGallerys();\n            }, function (error) {\n                $scope.params.location = null;\n\n                var errorMessage;\n                if (error.code === 1 || error.code === 3) {\n                    errorMessage = 'errorGpsDisabledText';\n                } else {\n                    errorMessage = 'errorLocationMissingText';\n                }\n                Dialog.alert(errorMessage);\n\n            });\n        }\n\n        function setPosition(location) {\n            if (location) {\n                return new google.maps.LatLng(location.latitude, location.longitude);\n            }\n        }\n\n        function addMarker(item) {\n\n\n            var markerOption = {\n                id       : item.id,\n                map      : $scope.map,\n                position : item.position,\n                title    : item.title,\n                animation: google.maps.Animation.DROP\n            };\n\n            if (item.icon) {\n                var size          = 40;\n                markerOption.icon = {\n                    url       : item.icon,\n                    size      : new google.maps.Size(size, size),\n                    scaledSize: new google.maps.Size(size, size),\n                    origin    : new google.maps.Point(0, 0),\n                    anchor    : new google.maps.Point(size / 4, size / 4),\n                };\n            }\n\n            // Varivel que define as opes do marcador\n            var marker = new google.maps.Marker(markerOption);\n\n            // Procedimento que mostra a Info Window atravs de um click no marcador\n            google.maps.event.addListener(marker, 'click', function () {\n                // Open Profile\n                if(item.username) {\n                    $state.go('tab.mapProfile', {username: item.username})\n                }\n\n            });\n\n            markers.push(marker);\n\n            new MarkerClusterer($scope.map, markers, {\n                imagePath: '../img/m'\n            });\n\n            latlngbounds.extend(item.position);\n            $scope.map.fitBounds(latlngbounds);\n        }\n\n        function setGallerys(galleries) {\n            $scope.galleries = galleries;\n            galleries.map(function (item) {\n\n                if (item.location) {\n                    var marker = {\n                        map     : $scope.map,\n                        id      : item.id,\n                        position: setPosition(item.location),\n                        title   : item.title,\n                        image   : item.image.url(),\n                        icon    : item.imageThumb.url(),\n                        username: item.attributes.user.attributes.username\n                    };\n\n                    addMarker(marker)\n                }\n            });\n\n\n        }\n\n        function loadGallerys() {\n            $scope.loading = true;\n            Gallery.all($scope.params).then(function (galleries) {\n\n                if (galleries.length > 0) {\n                    setGallerys(galleries);\n                } else {\n                    Dialog.alert('galleriesNotFoundText');\n                }\n\n                $scope.loading = false;\n\n            }, function () {\n                Toast.show('errorText');\n            });\n        }\n\n        function removeGallerys() {\n            $scope.galleries = [];\n        }\n\n        function removeMarkers() {\n            markers.map(function (item) {\n                item.setMap(null);\n            });\n            markers = [];\n        };\n\n        $scope.onSearchHere = function () {\n            $scope.params.location.latitude  = $scope.map.getCenter().lat();\n            $scope.params.location.longitude = $scope.map.getCenter().lng();\n            removeGallerys();\n            removeMarkers();\n            loadGallerys();\n        }\n\n        $scope.onGalleryClicked = function (item) {\n            console.log(item);\n        };\n    }\n\n})();\n(function () {\n    'use strict';\n    /**\n     * @ngdoc controller\n     * @name UserAvatarCtrl\n     *\n     * @description\n     * _Please update the description and dependencies._\n     *\n     * @requires $scope\n     * */\n    angular\n        .module('app.main')\n        .controller('UserAvatarCtrl', UserAvatarController);\n\n    function UserAvatarController(User, Auth, AppConfig, $rootScope, $state, Toast, UserForm) {\n        var vm          = this;\n        vm.submitAvatar = submitAvatar;\n        init();\n\n        vm.photo = Parse.User.current().attributes.photo;\n\n        function init() {\n            var user      = Auth.getLoggedUser();\n            vm.form       = {\n                name    : user.name,\n                email   : user.email,\n                status  : user.status,\n                gender  : user.gender,\n                img     : user.img,\n                username: user.username\n            };\n            vm.formFields = UserForm.profile;\n            console.log(vm.form);\n            console.log(vm.formFields);\n        }\n\n        function submitAvatar() {\n            console.log(vm.rForm);\n\n            if (vm.rForm.$valid) {\n                var dataForm = angular.copy(vm.form);\n                console.log(dataForm);\n\n                User.update(dataForm).then(function (resp) {\n                    console.log(resp);\n                    $rootScope.currentUser = Parse.User.current();\n                    $state.go(AppConfig.routes.home, {\n                        clear: true\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Fill out the fields in red')\n                });\n            }\n\n        }\n\n    }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').directive('userAvatar', userAvatarDirective);\n\n    function userAvatarDirective(ActionSheet, $rootScope, ParseFile, User) {\n        return {\n            restrict: 'A',\n            scope   : {\n                ngModel: '='\n            },\n            link    : function ($scope, elem) {\n\n                elem.bind('click', openModal);\n\n                function openModal() {\n                    var tempImage;\n                    var user        = $scope.ngModel;\n                    var currentUser = $rootScope.currentUser;\n\n                    console.log(user);\n                    console.log(currentUser);\n\n                    if (user.id != currentUser.id) {\n                        return false;\n                    }\n\n                    ActionSheet.image().then(function (image) {\n                        tempImage = image;\n                        //return PhotoFilter.load(image);\n                        return image;\n                    }).then(function (form) {\n                        $scope.loading = true;\n                        ParseFile.upload({base64: form}).then(function (imageUploaded) {\n                            User.setPhoto(imageUploaded).then(function (user) {\n                                console.log(user);\n                                $scope.ngModel = user.attributes.photo;\n                                console.log(user.attributes.photo);\n                                $scope.loading = false;\n                            });\n                        });\n                    });\n                }\n\n            }\n        };\n    }\n\n})();\n\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserFollowerCtrl', UserFollowerController);\n\n    function UserFollowerController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n        User.getFollowers($stateParams.username).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserFollowingCtrl', UserFollowingController);\n\n    function UserFollowingController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n        User.getFollowing($stateParams.username).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserIntroCtrl', UserIntroController);\n\n    function UserIntroController($scope, $ionicPlatform, $cordovaSplashscreen) {\n        var vm = this;\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                    window.StatusBar.styleLightContent();\n                }\n            });\n        });\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserLikersCtrl', UserLikerController);\n\n    function UserLikerController(User, $scope, $stateParams, $state) {\n        var vm     = this;\n        vm.loading = true;\n\n        User.getLikers($stateParams.galleryId).then(function (data) {\n            console.log(data);\n            vm.users   = data;\n            vm.loading = false;\n        });\n\n        $scope.clearSearch = function () {\n            $scope.searchValue = '';\n        }\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            vm.loadingFollow = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                vm.loadingFollow = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n    angular.module('starter').controller('UserListCtrl', UserListController);\n\n    function UserListController(User, $scope, $state) {\n        var vm          = this;\n        vm.params       = {};\n        vm.params.page  = 1;\n        vm.params.limit = 30;\n        vm.data         = [];\n\n        vm.loading = true;\n\n        loadFeed();\n\n        var isLoadingViewShown   = false;\n        var isGalleriesViewShown = false;\n        var isErrorViewShown     = false;\n        var isEmptyViewShown     = false;\n\n        var isMoreData = false;\n\n        function showLoading() {\n            isLoadingViewShown   = true;\n            isGalleriesViewShown = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showGalleries() {\n            isGalleriesViewShown = true;\n            isLoadingViewShown   = false;\n            isErrorViewShown     = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showErrorView() {\n            isErrorViewShown     = true;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n            isEmptyViewShown     = false;\n        }\n\n        function showEmptyView() {\n            isEmptyViewShown     = true;\n            isErrorViewShown     = false;\n            isGalleriesViewShown = false;\n            isLoadingViewShown   = false;\n        }\n\n\n        function ensureMoreData(length) {\n            isMoreData = false;\n            if (length > 0) {\n                isMoreData = true;\n            }\n        }\n\n        function setGalleries(data) {\n            for (var i = 0; i < data.length; i++) {\n                vm.data.push(data[i]);\n            }\n        }\n\n        function setCurrentPage(page) {\n            vm.params.page = page;\n        }\n\n        function loadFeed() {\n\n            User.list(vm.params).then(function (data) {\n                ensureMoreData(data.length);\n                setCurrentPage(vm.params.page + 1);\n                setGalleries(data);\n\n                if (vm.data.length === 0) {\n                    showEmptyView();\n                } else {\n                    showGalleries();\n                }\n\n                $scope.$broadcast('scroll.infiniteScrollComplete');\n                $scope.$broadcast('scroll.refreshComplete');\n                vm.loading = false;\n\n            }).catch(function () {\n                if (vm.data.length === 0) {\n                    showErrorView();\n                }\n                isMoreData = false;\n                $scope.$broadcast('scroll.refreshComplete');\n            });\n        }\n\n        vm.onLoadMore = function () {\n            loadFeed();\n        };\n\n        vm.moreDataCanBeLoaded = function () {\n            return isMoreData;\n        };\n\n        vm.showLoadingView = function () {\n            return isLoadingViewShown;\n        };\n\n        vm.showGalleries = function () {\n            return isGalleriesViewShown;\n        };\n\n        vm.showErrorView = function () {\n            return isErrorViewShown;\n        };\n\n        vm.showEmptyView = function () {\n            return isEmptyViewShown;\n        };\n\n        vm.onReload = function () {\n            vm.params.page = 0;\n            vm.data        = [];\n            showLoading();\n            loadFeed();\n            $scope.$broadcast('scroll.refreshComplete');\n        };\n\n        vm.openProfile = function (user) {\n            console.log('user', user);\n            $state.go('tab.homeProfile', {username: user.username})\n        };\n\n\n        vm.follow = function (user) {\n\n            user.loading = true;\n            User.follow(user.userObj.id).then(function (resp) {\n                console.log('Follow result', resp);\n                user.isFollow = (resp === 'follow') ? true : false;\n                if (resp == 'follow') {\n                    user.followersTotal += 1;\n                }\n                if (resp == 'unfollow') {\n                    user.followersTotal -= 1;\n                }\n                user.loading = false;\n            });\n\n\n        }\n    }\n\n})();\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('UserMergeCtrl', UserMergeController);\n\n    function UserMergeController(Auth, $rootScope, AppConfig, Facebook, $state, Toast, UserForm) {\n        var vm        = this;\n        vm.formFields = UserForm.register;\n\n        init();\n        function init() {\n            if ($rootScope.tempUser) {\n                vm.form = {\n                    email   : $rootScope.tempUser.attributes.email,\n                    username: $rootScope.tempUser.attributes.username,\n                    password: ''\n                };\n            } else {\n                $state.go('user.intro', {clear: true});\n            }\n        }\n\n        vm.submit = function (rForm, form) {\n\n            console.log(rForm);\n            console.table(form);\n            if (vm.form.password !== '') {\n                console.log(form);\n                Auth.logIn(form).then(function (user) {\n                    console.log(user);\n                    $rootScope.currentUser = user;\n                    if (Auth.getLoggedUser()) {\n                        Facebook.link(Parse.User.current()).then(function (resp) {\n                            console.log(resp);\n                            $state.go(AppConfig.routes.home, {\n                                clear: true\n                            });\n                        }).catch(function (resp) {\n                            console.log(resp);\n                            Toast.alert({\n                                title: 'Ops',\n                                text : resp.message\n                            });\n                        });\n                    }\n\n\n                }).catch(function (resp) {\n                    Toast.alert({\n                        title: 'Ops',\n                        text : resp.message\n                    });\n                });\n            } else {\n                Toast.alert({\n                    title: ('Invalid form'),\n                    text : ('Please enter your email')\n                });\n            }\n\n        };\n\n    }\n\n\n})();\n\n(function () {\n  'use strict';\n\n  /**\n   * @ngdoc directive\n   * @name recoveryPass\n   *\n   * @description\n   * _Please update the description and restriction._\n   *\n   * @restrict E\n   * */\n\n  angular\n    .module('app.main')\n    .directive('recoveryPass', recoveryPassDirective);\n\n  function recoveryPassDirective(User, $ionicPopup, Loading, Toast) {\n    return {\n      restrict: 'A',\n      scope: {\n        login: '@',\n        register: '@',\n      },\n      link: function ($scope, elem) {\n\n        elem.bind('click', openModal);\n\n        function openModal() {\n\n          $scope.form = {\n            recovery: ''\n          };\n\n          $scope.erro = '';\n\n          $scope.text = {\n            button: (''),\n            input: ('Email')\n          };\n\n          $ionicPopup\n            .show({\n              scope: $scope,\n              template: '<div class=\"popup-recovery\"><form name=\"form.recovery\" form-manager><label class=\"item item-input\"><i class=\"icon ion-email placeholder-icon\"></i><input type=\"email\" ng-model=\"email\" id=\"email\" name=\"email\" placeholder=\"{{ text.input }}\" required ng-maxlength=\"80\"></label><span class=\"error-msg\">{{erro}}</span></form></div>',\n              title: ('A new password will be sent to your e-mail address'),\n              buttons: [{\n                text: ('Cancel'),\n                type: 'button-calm'\n              }, {\n                text: ('Send'),\n                type: 'button-positive',\n                onTap: function (e) {\n                  if ($scope.form.recovery.$valid) {\n                    return $scope.form.recovery.email.$viewValue;\n                  } else {\n                    //no permite o usurio fechar at ele digitar o email\n                    e.preventDefault();\n                    $scope.erro = ('Invalid Email');\n                  }\n                }\n              }]\n            })\n            .then(function (res) {\n              if (!angular.isUndefined(res)) {\n                var email = res;\n\n                console.log(res);\n\n                Loading.start();\n\n                User\n                  .forgot(email)\n                  .then(function (resp) {\n                    console.log(resp);\n                    Toast.alert({\n                      login: ('Forgot your password'),\n                      text: ('Access your accout mail')\n                    });\n                    Loading.end();\n                  })\n                  .catch(function (resp) {\n                    Toast.alert({\n                      login: 'Ops',\n                      text: resp\n                    });\n                    Loading.end();\n                  });\n              }\n            });\n\n        }\n      }\n    };\n  }\n\n\n})();\n\n(function () {\n  'use strict';\n  /**\n   * @ngdoc controller\n   * @name UserRecoveryPassCtrl\n   *\n   * @description\n   * _Please update the description and dependencies._\n   *\n   * @requires $scope\n   * */\n  angular\n    .module('app.main')\n    .controller('UserRecoveryPassCtrl', UserRecoveryPassController);\n\n  function UserRecoveryPassController(User, Toast) {\n    var vm = this;\n    vm.form = {};\n    vm.submitForgot = submitForgot;\n\n    function submitForgot() {\n      User\n        .forgot(vm.form)\n        .then(function (resp) {\n          console.log(resp);\n        })\n        .catch(function (resp) {\n          Toast.alert('Ops', resp);\n        });\n    }\n  }\n\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('app.main').controller('WalkthroughCtrl', WalkthroughController);\n\n    function WalkthroughController($ionicSlideBoxDelegate, $scope, $ionicPlatform, $cordovaSplashscreen) {\n        var vm              = this;\n        var currentPlatform = window.ionic.Platform.platform();\n        vm.slideIndex       = 0;\n\n        vm.slideChanged = function (index) {\n            vm.slideIndex = index;\n        };\n        vm.next         = function () {\n            $ionicSlideBoxDelegate.next();\n        };\n        vm.previous     = function () {\n            $ionicSlideBoxDelegate.previous();\n        };\n\n        if (currentPlatform) {\n            vm.device = (currentPlatform === 'android') ? 'android' : 'iphone';\n        } else {\n            vm.device = 'android';\n        }\n\n        vm.slides                          = [{\n            text: 'STEP1',\n            img : 'img/intro1.jpg'\n        }, {\n            text: 'STEP2',\n            img : 'img/intro2.jpg'\n        }, {\n            text: 'STEP3',\n            img : 'img/intro3.jpg'\n        }, {\n            text: 'STEP4',\n            img : 'img/intro4.jpg'\n        }, {\n            text: 'STEP5',\n            img : 'img/intro5.jpg'\n        }\n        ];\n        window.localStorage['walkthrough'] = true;\n\n        $scope.$on('$ionicView.loaded', function () {\n            $ionicPlatform.ready(function () {\n                if (navigator && navigator.splashscreen) {\n                    $cordovaSplashscreen.hide();\n                    window.StatusBar.styleLightContent()\n                }\n            });\n        });\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('caman', camanDirective);\n\n  function camanDirective(CamanJs, $timeout) {\n    return {\n      restrict: 'A',\n      scope: {\n        name: '=',\n        image: '=',\n        filter: '=',\n        loading: '='\n      },\n      template: '<img ng-src=\"{{ image }}\" id=\"{{ name }}\">',\n      link: camanDirectiveLink\n    };\n\n    function camanDirectiveLink($scope) {\n      $scope.loading = true;\n      $timeout(function () {\n        CamanJs\n          .effect($scope.name, $scope.filter)\n          .then(function () {\n            $scope.loading = false;\n          });\n      }, 500);\n    }\n  }\n})();\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('ionCrop', ionCropDirective);\n\n  function ionCropDirective($jrCrop, $translate, $ionicActionSheet) {\n\n    return {\n      restrict: 'A',\n      scope: {\n        ngModel: '=',\n        option: '=',\n        cropSave: '&'\n      },\n      template: '<div><input type=\"file\" id=\"browseBtn\" image=\"image\" accept=\"image/*\" style=\"display: none\"/></div>',\n      link: ionCropLink\n    };\n\n    function ionCropLink($scope, element) {\n\n      // Triggered on a button click, or some other target\n      $scope.action = action;\n      element.bind('click', getElem);\n      $scope.crop = crop;\n      angular.element(document.getElementById('browseBtn'))\n        .on('change', fileUpload);\n\n\n      function getElem() {\n        document.getElementById('browseBtn')\n          .click();\n      }\n\n      function action() {\n\n        // Show the action sheet\n        $ionicActionSheet.show({\n          buttons: [{\n            text: '<i class=\"icon ion-camera\"></i>' + ('Photo Camera')\n          }, {\n            text: '<i class=\"icon ion-images\"></i> ' + ('Photo Album')\n          }],\n          //destructiveText:  ('Delete'),\n          titleText: ('Change Image'),\n          cancelText: ('Cancel'),\n          cancel: function () {\n            // add cancel code..\n          },\n          buttonClicked: function (index) {\n\n            if (index === 0) {\n              console.log('Photo Camera');\n            }\n            // Photo Album\n            if (index === 1) {\n              document.getElementById('browseBtn')\n                .click();\n            }\n            return true;\n          }\n        });\n\n      }\n\n      function fileUpload(e) {\n\n        var file = e.target.files[0];\n        var reader = new FileReader();\n        reader.readAsDataURL(file);\n\n        reader.onload = function (event) {\n          var image = event.target.result;\n          $scope.crop(image);\n        };\n\n        // Clear input file\n        angular.element(document.getElementById('browseBtn')).val('');\n\n      }\n\n      function crop(image) {\n\n        console.log($scope.option);\n\n        $jrCrop\n          .crop({\n            url: image,\n            width: $scope.option ? $scope.option.width : 200,\n            height: $scope.option ? $scope.option.height : 200,\n            cancelText: ('Cancel'),\n            chooseText: ('Save')\n          })\n          .then(function (canvas) {\n            var image = canvas.toDataURL();\n            //            var name = $scope.option ? $scope.option.name : 'thumb';\n            //            var filename = ($scope.option ? $scope.option.name : '') + '_' + name + window.Number(new window.Date() + '.jpg';\n\n            //var file = base64ToBlob(image.replace('data:image/png;base64,', ''), 'image/jpeg');\n            //            file.name = filename;\n\n            //upload(file);\n\n            console.log(image);\n            $scope.ngModel = image;\n\n\n          });\n\n      }\n    }\n  }\n\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').directive('photoShare', photoShareDirective);\n\n    function photoShareDirective($state, AppConfig, $rootScope, $ionicModal, Loading, PhotogramSetting, PhotoService) {\n        return {\n            restrict: 'A',\n            link: photoShareLink,\n            template: ''\n        };\n\n        function photoShareLink($scope, elem, attr) {\n            var path = AppConfig.path;\n\n            elem.bind('click', open);\n\n            function open() {\n                console.log('Open share');\n                var option = {\n                    crop: PhotogramSetting.get('imageCrop'),\n                    allowEdit: PhotogramSetting.get('imageEdit'),\n                    filter: true,\n                    //filter: PhotogramSetting.get('imageFilter'),\n                    allowRotation: PhotogramSetting.get('imageRotation'),\n                    quality: PhotogramSetting.get('imageQuality'),\n                    correctOrientation: PhotogramSetting.get('imageEdit'),\n                    targetWidth: PhotogramSetting.get('imageWidth'),\n                    targetHeight: PhotogramSetting.get('imageHeight'),\n                    saveToPhotoAlbum: PhotogramSetting.get('imageSaveAlbum')\n                };\n                console.log(option);\n\n                PhotoService\n                    .open(option)\n                    .then(modalPost)\n                    .catch(goHome);\n            }\n\n\n            function goHome() {\n                console.warn('Deu erro');\n                $state.go('photogram.home');\n            }\n\n            function modalPost(image) {\n                $scope.closePost  = closeModalPost;\n                $scope.submitPost = submitPost;\n                $scope.form       = {\n                    title: '',\n                    location: '',\n                    photo: image,\n                    geo: false\n                };\n\n                $ionicModal\n                    .fromTemplateUrl(path + '/module/share/photogram.post.modal.html', {\n                        scope: $scope,\n                        focusFirstInput: true\n                    })\n                    .then(function (modal) {\n                        $scope.form.photo = image;\n                        $scope.modalPost  = modal;\n                        $scope.modalPost.show();\n                    });\n\n                function closeModalPost() {\n                    $scope.modalPost.hide();\n                    $scope.modalPost.remove();\n                    Loading.end();\n                }\n\n                function submitPost(resp) {\n                    var form = angular.copy(resp);\n                    console.log(form);\n                    Loading.start();\n                    Photogram\n                        .post(form)\n                        .then(function () {\n                            closeModalPost();\n                            $rootScope.$emit('filterModal:close');\n                            $rootScope.$emit('PhotogramHome:reload');\n                        });\n                }\n            }\n        }\n\n    }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('photoFilterCarousel', photoFilterCarouselDirective);\n\n  function photoFilterCarouselDirective(CamanJs, config) {\n    return {\n      restrict: 'E',\n      scope: {\n        image: '=',\n        apply: '='\n      },\n      templateUrl: config.path + '/view/photo.filter.carousel.html',\n      link: function ($scope) {\n        $scope.filters = CamanJs.filters;\n        $scope.applyFilter = $scope.apply;\n      }\n    };\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .directive('photoFilter', photoFilterDirective);\n\n  function photoFilterDirective(config, CamanJs) {\n    return {\n      restrict: 'E',\n      scope: {\n        image: '='\n      },\n      templateUrl: config.path + '/view/photo.filter.html',\n      link: function ($scope, elem) {\n        $scope.applyFilter = function (elem, effect) {\n          $scope.loading = true;\n          if (effect) {\n            CamanJs\n              .effect(elem, effect, true)\n              .then(function (resp) {\n                $scope.loading = false;\n              });\n          }\n        };\n      }\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n\n  angular\n    .module('ion-photo')\n    .factory('CamanJs', CamanJsFactory);\n\n  function CamanJsFactory($q) {\n    var Caman = window.Caman;\n    var filters = [\n      'normal',\n      'vintage',\n      'lomo',\n      'clarity',\n      'sinCity',\n      'sunrise',\n      'crossProcess',\n      'orangePeel',\n      'love',\n      'grungy',\n      'jarques',\n      'pinhole',\n      'oldBoot',\n      'glowingSun',\n      'hazyDays',\n      'herMajesty',\n      'nostalgia',\n      'hemingway',\n      'concentrate'\n    ];\n\n    return {\n      filters: filters,\n      effect: filter,\n      reset: resetEffect\n    };\n\n    function filter(elem, effect, status) {\n      var defer = $q.defer();\n      var image = window.document.getElementById(elem);\n\n      if (image) {\n        Caman(image, function () {\n          if (effect === 'normal') {\n            this.revert();\n            this.render(function () {\n              defer.resolve(effect);\n            });\n          }\n\n          if (effect in this) {\n            this[effect]();\n\n            if (status) {\n              this.revert();\n            }\n            this.render(function () {\n              defer.resolve(effect);\n            });\n          }\n\n        });\n      } else {\n        defer.reject();\n      }\n      return defer.promise;\n    }\n\n    function resetEffect(elem) {\n\n      var defer = $q.defer();\n      var image = window.document.getElementById(elem);\n\n      Caman(image, function () {\n        this.revert();\n        defer.resolve(true);\n      });\n\n      return defer.promise;\n    }\n  }\n})();\n(function () {\n    'use strict';\n    angular.module('ion-photo').factory('PhotoFilter', PhotoFilterFactory);\n\n    function PhotoFilterFactory($rootScope, $q, $ionicModal) {\n\n        return {\n            load: modalFilter\n        };\n\n        function modalFilter(image) {\n            var defer    = $q.defer();\n            var template = '<ion-modal-view class=\"modal-capture\"><ion-header-bar class=\"bar-light\"><button class=\"button button-clear button-icon ion-ios-close-empty\" ng-click=\"close()\"></button><div class=\"title text-left\">{{ \\'ION-PHOTO.FILTERS\\' | translate }}</div><button class=\"button button-clear\" ng-click=\"submitCapture()\">{{ \\'ION-PHOTO.NEXT\\' | translate }}</button></ion-header-bar><ion-content scroll=\"false\"><photo-filter image=\"form.photo\"></photo-filter></ion-content></ion-modal-view>';\n            var scope    = $rootScope.$new(true);\n\n            scope.form = {\n                photo: image\n            };\n\n            scope.modal = $ionicModal.fromTemplate(template, {\n                scope: scope\n            });\n\n            scope.modal.show();\n\n\n            scope.submitCapture = function () {\n                var canvas  = window.document.getElementById('image');\n                var dataUrl = canvas.toDataURL();\n                scope.close();\n                defer.resolve(dataUrl);\n            };\n\n            scope.close = function () {\n                scope.modal.hide();\n            };\n\n            // Cleanup the modal when we're done with it!\n            scope.$on('$destroy', function () {\n                scope.modal.remove();\n            });\n\n\n            return defer.promise;\n\n        }\n\n    }\n})();\n\n(function () {\n    'use strict';\n\n    angular.module('ion-photo').factory('PhotoService', PhotoServiceFactory);\n\n    function PhotoServiceFactory($ionicActionSheet, $translate, AppConfig, Share,$cordovaActionSheet, $jrCrop, $rootScope, $ionicModal, $cordovaCamera, $cordovaCapture, $q) {\n\n        // Default Setting\n        var tempImage;\n        var cordova = window.cordova;\n        var setting = {\n            jrCrop            : true,\n            quality           : 90,\n            allowEdit         : false,\n            filter            : true,\n            correctOrientation: true,\n            targetWidth       : 300,\n            targetHeight      : 300,\n            saveToPhotoAlbum  : false,\n            allowRotation     : false,\n            aspectRatio       : 0\n        };\n\n        return {\n            open  : openModal,\n            crop  : cropModal,\n            filter: filterModal,\n            share : shareModal,\n        };\n\n        function openModal(option) {\n            var defer       = $q.defer();\n            var options     = {\n                quality           : 80,\n                aspectRatio       : 0,\n                allowRotation     : false,\n                allowEdit         : true,\n                correctOrientation: true,\n                targetWidth       : 640,\n                targetHeight      : 640,\n                saveToPhotoAlbum  : true,\n                destinationType   : window.cordova ? Camera.DestinationType.DATA_URL : null,\n                encodingType      : window.cordova ? Camera.EncodingType.JPEG : null,\n                popoverOptions    : window.cordova ? CameraPopoverOptions : null,\n            };\n            var buttons     = [{\n                text: '<i class=\"icon ion-ios-camera\"></i>' + $translate.instant('captureLibrary')\n            }, {\n                text: '<i class=\"icon ion-images\"></i>' + $translate.instant('capturePhoto')\n            },\n                // {text: '<i class=\"icon ion-ios-videocam\"></i>' + $translate.instant('ION-PHOTO.VIDEO')}\n            ];\n            var actionSheet = $ionicActionSheet.show({\n                buttons      : buttons,\n                titleText    : $translate.instant('submit'),\n                cancelText   : $translate.instant('cancel'),\n                cancel       : buttonCancel,\n                buttonClicked: buttonClicked\n            });\n\n            function buttonClicked(index) {\n                console.log(index);\n                actionSheet();\n                capture(index, options)\n                    .then(filterModal)\n                    .then(function (resp) {\n                        console.log('Final rest');\n                        defer.resolve(resp);\n                    })\n                    .catch(buttonCancel);\n            }\n\n\n            function buttonCancel(resp) {\n                actionSheet(resp);\n            }\n\n            return defer.promise;\n        }\n\n        function cropModal(image) {\n            var defer = $q.defer();\n\n            $jrCrop.crop({\n                url          : image,\n                aspectRatio  : setting.aspectRatio ? setting.aspectRatio : false,\n                allowRotation: setting.allowRotation ? setting.allowRotation : false,\n                width        : setting.width ? setting.width : setting.targetWidth,\n                height       : setting.height ? setting.height : setting.targetHeight,\n                cancelText   : $translate.instant('cancel'),\n                chooseText   : $translate.instant('submit')\n            }).then(function (canvas) {\n                defer.resolve(canvas.toDataURL());\n            }).catch(defer.reject);\n\n            return defer.promise;\n        }\n\n        function shareModal(image) {\n            var template =\n                    '<ion-modal-view class=\"modal-share\"> <ion-header-bar class=\"bar-dark\"> <div class=\"title\">{{ \\'submit\\' | translate }}</div> <button class=\"button button-positive\" ng-click=\"modal.hide()\"> <i class=\"icon ion-arrow-right-b\"></i> </button> </ion-header-bar> <ion-content ng-cloak> <div id=\"image\"> <img ng-src=\"{{form.photo}}\"> <div class=\"title\">{{ form.title }}</div></div> <ul class=\"list\"> <li class=\"padding\"> <button ng-repeat=\"social in sociais\" ng-click=\"share(form, social)\"class=\"button button-block button-{{ social }}\"><i class=\"icon ion-social-{{ social }}\"></i>{{ social | uppercase }} </button> </li> </ul> </ion-content> </ion-modal-view>';\n\n            if (image === undefined) return false;\n            var scope   = $rootScope.$new(true);\n            var socials = [\n                'facebook',\n                'instagram',\n                'whatsapp',\n                'twitter'\n            ];\n            //image = image.attributes;\n\n            scope.sociais = socials;\n            scope.share   = shareSocial;\n            scope.form    = {\n                title: '',\n                photo: image\n            };\n\n            scope.modal = $ionicModal.fromTemplate(template, {\n                scope: scope\n            });\n            scope.modal.show();\n\n\n            function shareSocial(social, form) {\n                console.log('share', social, form);\n                Share.share(social, {\n                    text : form.title,\n                    image: form.photo,\n                    link : AppConfig.app.url\n                });\n            }\n\n\n        }\n\n        function filterModal(image) {\n            var defer = $q.defer();\n\n            function openFilter(image) {\n                var templateFilter = '<ion-modal-view class=\"modal-capture\"><ion-header-bar class=\"bar-light\"><button class=\"button button-clear button-icon ion-ios-arrow-thin-left\" ng-click=\"cropImage()\"></button><div class=\"title\">{{ \\'ION-PHOTO.FILTERS\\' | translate }}</div><button class=\"button button-icon \" ng-click=\"submitFilter()\"><i class=\"icon ion-ios-arrow-thin-right\"></i></button></ion-header-bar><ion-content><photo-filter image=\"form.photo\"></photo-filter></ion-content></ion-modal-view>';\n                var scope          = $rootScope.$new(true);\n                scope.closeFilter  = closeFilter;\n                scope.submitFilter = submitFilter;\n                tempImage          = image;\n                scope.form         = {\n                    photo: image\n                };\n\n                scope.modalFilter = $ionicModal.fromTemplate(templateFilter, {\n                    scope: scope\n                });\n\n                scope.cropImage = function () {\n                    scope.modalFilter.remove();\n                    cropModal(tempImage)\n                        .then(openFilter);\n                };\n\n                scope.modalFilter.show();\n\n                function closeFilter() {\n                    defer.reject();\n                    scope.modalFilter.hide();\n                }\n\n                function submitFilter() {\n                    var canvas  = window.document.getElementById('image');\n                    var dataUrl = canvas.toDataURL();\n                    scope.modalFilter.remove();\n                    defer.resolve(dataUrl);\n                }\n\n            }\n\n            openFilter(image);\n\n            return defer.promise;\n        }\n\n\n        function capture(type, options) {\n            var defer = $q.defer();\n\n            // CAMERA\n            if (type === 0) {\n                getPicture(0);\n            }\n\n            // GALLERY\n            if (type === 1) {\n                getPicture(1);\n            }\n\n            // Video\n            if (type === 2) {\n                getVideo();\n            }\n\n            function getPicture(method) {\n                if (method === 0 && cordova) options.sourceType = Camera.PictureSourceType.CAMERA;\n                if (method === 1 && cordova) options.sourceType = Camera.PictureSourceType.PHOTOLIBRARY;\n\n                if (cordova) {\n                    $cordovaCamera.getPicture(options).then(defer.resolve, defer.reject);\n                } else {\n                    var fileInput = angular.element('<input type=\"file\" accept=\"image/x-png, image/gif, image/jpeg\" max-size=\"2048\" />');\n                    fileInput[0].click();\n                    fileInput.on('change', function (evt) {\n                        tempImage     = evt.currentTarget.files[0];\n                        var reader    = new FileReader();\n                        reader.onload = function (evt) {\n                            defer.resolve(evt.target.result);\n                        };\n                        reader.readAsDataURL(tempImage);\n                    });\n                }\n            }\n\n            function getVideo() {\n                $cordovaCapture.captureVideo({\n                    limit   : 1,\n                    duration: 5\n                }).then(function (mediaFiles) {\n                    tempImage = mediaFiles[0].fullPath;\n                    defer.resolve(tempImage);\n                }, defer.reject);\n            }\n\n\n            return defer.promise;\n        }\n\n        function show(params) {\n\n            var defer = $q.defer();\n\n            if (window.cordova) {\n\n                var options = {\n                    title                    : params.title,\n                    buttonLabels             : _.map(params.options, function (item) {return item.text}),\n                    addCancelButtonWithLabel : params.cancelText,\n                    androidEnableCancelButton: true,\n                    androidTheme             : window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT\n                };\n\n                $cordovaActionSheet.show(options).then(function (btnIndex) {\n                    if (btnIndex !== 3) {\n                        defer.resolve(btnIndex);\n                    }\n                    defer.reject('cancel');\n                });\n\n            } else {\n                var actionSheet = $ionicActionSheet.show({\n                    buttons      : params.options,\n                    titleText    : params.title,\n                    cancelText   : params.cancelText,\n                    cancel       : function () {\n                        actionSheet();\n                    },\n                    buttonClicked: function (btnIndex) {\n                        actionSheet();\n                        if (btnIndex !== 3) {\n                            defer.resolve(btnIndex);\n                        }\n                        defer.reject('cancel');\n                    }\n                });\n\n            }\n            return defer.promise;\n        }\n\n\n\n    }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('ion-photo')\n    .factory('Video', VideoFactory);\n\n  function VideoFactory($window, $q) {\n    var deferred = $q.defer();\n    //https://devdactic.com/capture-and-store-videos-ionic/\n    // Resolve the URL to the local file\n    // Start the copy process\n    function createFileEntry(fileURI) {\n      $window.resolveLocalFileSystemURL(fileURI, function (entry) {\n        return copyFile(entry);\n      }, fail);\n    }\n\n    // Create a unique name for the videofile\n    // Copy the recorded video to the app dir\n    function copyFile(fileEntry) {\n      var name = fileEntry.fullPath.substr(fileEntry.fullPath.lastIndexOf('/') + 1);\n      var newName = makeid() + name;\n\n      $window.resolveLocalFileSystemURL(cordova.file.dataDirectory, function (fileSystem2) {\n          fileEntry.copyTo(fileSystem2, newName, function (succ) {\n            return onCopySuccess(succ);\n          }, fail);\n        },\n        fail\n      );\n    }\n\n    // Called on successful copy process\n    // Creates a thumbnail from the movie\n    // The name is the moviename but with .png instead of .mov\n    function onCopySuccess(entry) {\n      var name = entry.nativeURL.slice(0, -4);\n      $window.PKVideoThumbnail.createThumbnail(entry.nativeURL, name + '.png', function (prevSucc) {\n        return prevImageSuccess(prevSucc);\n      }, fail);\n    }\n\n    // Called on thumbnail creation success\n    // Generates the currect URL to the local moviefile\n    // Finally resolves the promies and returns the name\n    function prevImageSuccess(succ) {\n      var correctUrl = succ.slice(0, -4);\n      correctUrl += '.MOV';\n      deferred.resolve(correctUrl);\n    }\n\n    // Called when anything fails\n    // Rejects the promise with an Error\n    function fail(error) {\n      console.log('FAIL: ' + error.code);\n      deferred.reject('ERROR');\n    }\n\n    // Function to make a unique filename\n    function makeid() {\n      var text = '';\n      var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      for (var i = 0; i < 5; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n      }\n      return text;\n    }\n\n    // The object and functions returned from the Service\n    return {\n      // This is the initial function we call from our controller\n      // Gets the videoData and calls the first service function\n      // with the local URL of the video and returns the promise\n      saveVideo: function (data) {\n        createFileEntry(data[0].localURL);\n        return promise;\n      }\n    };\n  }\n\n})();\n\n;(function() {\n\"use strict\";\n\nangular.module(\"ionic\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/directive/SigninModalDirective.html\",\"<ion-modal-view id=\\\"user-layout\\\" class=\\\"modal-auth bg-animate\\\" cache-view=\\\"false\\\"><ion-header-bar><h1 class=\\\"title\\\" \\ntranslate=\\\"signin\\\"></h1><a ng-click=\\\"closeModal()\\\" class=\\\"button button-icon icon ion-ios-close-empty\\\"></a>\\n</ion-header-bar><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step2\\\"><formly-form model=\\\"form\\\" \\nfields=\\\"formFields\\\" form=\\\"rForm\\\"><button class=\\\"button button-block button-outline button-light\\\" type=\\\"button\\\" \\nng-disabled=\\\"rForm.$invalid\\\" ng-click=\\\"submitLogin(rForm, form)\\\" translate=\\\"signin\\\"></button></formly-form><span \\nclass=\\\"term\\\">{{::\\'termAccept\\' | translate}} <a href=\\\"http://photogramapp.com\\\">{{::\\'terms\\' | translate}}</a></span>\\n</div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/SignupModalDirective.html\",\"<ion-modal-view id=\\\"user-layout\\\" class=\\\"modal-auth bg-animate\\\" cache-view=\\\"false\\\"><ion-header-bar><h1 class=\\\"title\\\" \\ntranslate=\\\"register\\\"></h1><a ng-click=\\\"closeModal()\\\" class=\\\"button button-icon icon ion-ios-close-empty\\\"></a>\\n</ion-header-bar><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"step2\\\"><form name=\\\"myForm\\\" \\nnovalidate=\\\"novalidate\\\" ng-submit=\\\"submitRegister(myForm, form)\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-envelope placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"email\\\" name=\\\"email\\\" \\nng-model=\\\"form.email\\\" email-validator ng-model-options=\\\"{debounce: 1000}\\\" placeholder=\\\"user@example.com\\\"></label><div \\nng-if=\\\"myForm.email.$dirty\\\"><div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div ng-message=\\\"required\\\" \\ntranslate=\\\"emailRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"emailInUse\\\"></div></div><div \\nng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" translate=\\\"checkingEmail\\\"></div>\\n</div></div><label class=\\\"item item-input\\\"><i class=\\\"icon icon-user placeholder-icon\\\"></i> <input required=\\\"required\\\" \\ntype=\\\"text\\\" name=\\\"username\\\" ng-model=\\\"form.username\\\" username-validator ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" \\nng-model-options=\\\"{debounce: 1000}\\\" ng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" placeholder=\\\"Your login\\\"></label><div \\nng-if=\\\"myForm.username.$dirty\\\"><div ng-messages=\\\"myForm.email.$error\\\" class=\\\"validation-error\\\"><div \\nng-message=\\\"required\\\" translate=\\\"usernameRequired\\\"></div><div ng-message=\\\"email\\\" translate=\\\"usernameInUse\\\"></div></div>\\n<div ng-messages=\\\"myForm.email.$pending\\\" class=\\\"validation-pending\\\"><div ng-message=\\\"email\\\" \\ntranslate=\\\"checkingUsername\\\"></div></div></div><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-lock placeholder-icon\\\"></i> <input required type=\\\"password\\\" name=\\\"password\\\" ng-model=\\\"form.password\\\" \\nplaceholder=\\\"Password\\\"></label><button class=\\\"button button-block button-outline button-light\\\" type=\\\"submit\\\" \\ntranslate=\\\"submit\\\"></button></form><span class=\\\"term\\\">{{::\\'termAccept\\' | translate}} <a href=\\\"http://photogramapp.com\\\">\\n{{::\\'terms\\' | translate}}</a></span></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/distanceModal.html\",\"<ion-modal-view><ion-header-bar class=\\\"bar-light\\\"><div class=\\\"buttons\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-close-empty\\\" ng-click=\\\"closeDistanceModal()\\\"></button></div><div \\nclass=\\\"title\\\">{{ \\\"chooseDistanceText\\\" | translate }}</div></ion-header-bar><ion-content><ion-list><ion-item \\nclass=\\\"item item-icon-right\\\" ng-repeat=\\\"distance in distances\\\" ng-click=\\\"onDistanceSelected(distance.val)\\\" bindonce><h2\\n bo-bind=\\\"distance.text\\\"></h2><i class=\\\"icon ion-checkmark\\\" ng-show=\\\"params.distance === distance.val\\\"></i></ion-item>\\n</ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/follow.modal.html\",\"<ion-modal-view class=\\\"modal-profile photogram-profile\\\"><ion-header-bar class=\\\"bar-positive\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\nFollow Users</div></ion-header-bar><ion-content><div class=\\\"list\\\"><div class=\\\"item item-avatar item-button-right\\\" \\nng-repeat=\\\"item in data\\\"><img ng-src=\\\"{{ ::item.src }}\\\"><h2>{{ ::item.name }}</h2><p>{{ ::item.status }}</p><button \\nclass=\\\"button\\\" ng-click=\\\"item.follow = !item.follow\\\" ng-class=\\\"item.follow ? \\'button-positive\\' : \\'button-stable\\'\\\"><i \\nclass=\\\"icon\\\" ng-class=\\\"item.follow? \\'ion-thumbsup\\' : \\'ion-plus\\'\\\"></i></button></div></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/likeDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-dark\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ ::\\'Likes\\' | translate }} ({{ ::likes.length }})</div></ion-header-bar><ion-content><div class=\\\"list step1\\\"><div \\nng-repeat=\\\"item in likes\\\" class=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ ::item.user.img }}\\\"><h2>\\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div><p>{{ ::item.created | amTimeAgo }}</p><button \\nclass=\\\"button button-positive button-outline\\\"><i class=\\\"icon ion-ios-plus-empty\\\"></i> {{ ::\\'Follow\\' }}</button></div>\\n</div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/photoCommentDirective.html\",\"<ion-modal-view class=\\\"modal-comment\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n<span translate=\\\"commentPhotoText\\\"></span>({{ comments.length }})</div></ion-header-bar><ion-content><div \\nclass=\\\"padding center\\\" ng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><ion-list class=\\\"list\\\" \\nng-show=\\\"comments.length\\\" can-swipe=\\\"true\\\"><ion-item ng-repeat=\\\"item in comments | orderBy:createdAt\\\" \\nclass=\\\"item item-avatar\\\"><img ng-src=\\\"{{ ::item.user.photo._url || \\'./img/user.png\\'}}\\\"><div class=\\\"row\\\"><h2>\\n{{ ::item.user.name }}</h2></div><div class=\\\"row\\\"><div class=\\\"text\\\">{{ ::item.text }}</div></div><div class=\\\"row\\\"><p>\\n{{ ::item.createdAt | amTimeAgo }}</p></div><div ng-if=\\\"item.user.id === currentUser.id\\\"><ion-option-button \\nclass=\\\"button-info\\\" ng-click=\\\"editComment(item)\\\" translate=\\\"edit\\\">Edit</ion-option-button><ion-option-button \\nclass=\\\"button-assertive\\\" ng-click=\\\"deleteComment(item)\\\" translate=\\\"remove\\\">Remove</ion-option-button></div></ion-item>\\n</ion-list><div class=\\\"center-ico\\\" ng-if=\\\"nocomments\\\"><i class=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 \\ntranslate=\\\"noComments\\\"></h1></div></ion-content><form name=\\\"rForm\\\" ng-submit=\\\"submitComment(rForm, form)\\\" novalidate>\\n<ion-footer-bar class=\\\"bar-stable item-input-inset message-footer\\\" keyboard-attach><label class=\\\"item-input-wrapper\\\"><i\\n class=\\\"icon ion-ios-compose-outline placeholder-icon\\\"></i><textarea mentio mentio-trigger-char=\\\"\\'@\\'\\\" \\nmentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" mentio-search=\\\"searchPeople(term)\\\" \\nmentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" ng-model=\\\"form.text\\\" \\nplaceholder=\\\"Send a comment...\\\" required minlength=\\\"1\\\" maxlength=\\\"1500\\\">\\n                </textarea></label><div \\nclass=\\\"footer-btn-wrap\\\"><button class=\\\"button button-positive button-outline\\\" type=\\\"submit\\\" \\nng-disabled=\\\"!form.text || form.text === \\'\\'\\\">Publish</button></div></ion-footer-bar></form></ion-modal-view>\");\n$templateCache.put(\"app/directive/photoGridDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" on-refresh=\\\"onReload()\\\"></ion-refresher>\\n<div class=\\\"row animated fadeIn\\\" ng-if=\\\"$index % 3 === 0\\\" ng-repeat=\\\"image in data\\\"><div \\nclass=\\\"col col-33 item-animate1\\\" ng-if=\\\"$index < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal \\nuser=\\\"data[$index].user.obj\\\" ng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 1 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 1].user.obj\\\" \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 1].imageThumb._url}}\\\" width=\\\"100%\\\"></div><div class=\\\"col col-33 item-animate1\\\" \\nng-if=\\\"$index + 2 < data.length\\\"><img ng-if=\\\"profile\\\" profile-modal user=\\\"data[$index + 2].user.obj\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"> <img ng-if=\\\"!profile\\\" \\nng-src=\\\"{{ ::data[$index + 2].imageThumb._url}}\\\" width=\\\"100%\\\"></div></div><ion-infinite-scroll \\non-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/photoListDirective.html\",\"<div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" on-refresh=\\\"onReload()\\\"></ion-refresher>\\n<div class=\\\"list card\\\" ng-repeat=\\\"gallery in data | orderBy:createdAt:true\\\" ng-if=\\\"showGalleries()\\\"><div \\nclass=\\\"item item-avatar\\\" ng-click=\\\"load(gallery.user.username)\\\" ion-affix data-affix-within-parent-with-class=\\\"card\\\">\\n<img ng-if=\\\"profile\\\" ng-src=\\\"{{ ::gallery.user.photo._url}}\\\"> <img \\nng-src=\\\"{{ ::gallery.user.photo._url || \\'img/user.png\\'}}\\\"><h2>{{ ::gallery.user.name}}</h2><p>\\n{{ ::gallery.user.status}}</p><span>{{ ::gallery.createdAt | amTimeAgo}}</span></div><div class=\\\"item item-body\\\" \\non-double-tap=\\\"like(gallery.id)\\\" ng-model=\\\"gallery\\\"><div class=\\\"icon ion-ios-heart heart\\\" \\nng-class=\\\"gallery.isLiked ? \\'happy\\' : \\'broken\\' \\\"></div><i class=\\\"icon\\\" ng-if=\\\"like\\\"></i> <img \\nng-src=\\\"{{ gallery.image._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></div><div class=\\\"item item-buttons\\\"><div class=\\\"row\\\"><div \\nclass=\\\"col col-75\\\"><ion-spinner ng-show=\\\"gallery.progress\\\"></ion-spinner><button photo-like ng-model=\\\"gallery\\\" \\nng-if=\\\"!gallery.progress\\\" ng-class=\\\"gallery.isLiked ? \\'ion-ios-heart\\' : \\'ion-ios-heart-outline\\' \\\" \\nclass=\\\"button-clear button-icon button-heart\\\"></button> <button ng-click=\\\"openComment(gallery.id)\\\" ng-model=\\\"gallery\\\" \\nclass=\\\"button-clear button-icon ion-ios-chatbubble-outline\\\"></button> <button \\nng-click=\\\"share(gallery.image._url, gallery.title)\\\" photogram=\\\"{{ :: gallery.id }}\\\" \\nclass=\\\"button-clear button-icon ion-android-share\\\"></button></div><div class=\\\"col text-right\\\"><button \\nng-click=\\\"action(gallery)\\\" photogram=\\\"{{ :: gallery.id }}\\\" class=\\\"button-clear button-icon ion-android-more-vertical\\\">\\n</button></div></div></div><div class=\\\"padding\\\"><span class=\\\"likes\\\" ng-click=\\\"openLikers(gallery.id)\\\"><i \\nclass=\\\"icon ion-ios-heart\\\"></i> <span ng-if=\\\"!gallery.progress\\\">{{ gallery.likesTotal }}</span> <span \\ntranslate=\\\"likesText\\\"></span></span><div class=\\\"list-comments\\\"><div class=\\\"comment-item\\\"><span profile-modal \\nusername=\\\"gallery.user.username\\\" class=\\\"username\\\">{{ :: gallery.user.name }}</span> <span class=\\\"comment\\\" \\nng-bind-html=\\\"gallery.title | hashtag \\\"></span></div><div class=\\\"comment-item\\\" \\nng-repeat=\\\"item in gallery.comments |limitTo:3 | orderBy:createdAt:true \\\"><span class=\\\"username\\\" profile-modal \\nusername=\\\"gallery.user.username\\\">{{ :: item.user.name }}</span> <span class=\\\"comment\\\" \\nng-bind-html=\\\"item.text | hashtag\\\"></span></div><a class=\\\"comment-item\\\" photo-comment ng-model=\\\"gallery\\\" \\nng-if=\\\"gallery.commentsTotal>3\\\" translate=\\\"seeAllCommentText\\\"></a></div><button \\nclass=\\\"button button-block button-clear button-comment\\\" photo-comment ng-model=\\\"gallery\\\"><span translate=\\\"addComment\\\">\\n</span></button></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" ng-if=\\\"moreDataCanBeLoaded()\\\" spinner \\ndistance=\\\"1%\\\"></ion-infinite-scroll>\");\n$templateCache.put(\"app/directive/profile-edit-modal.html\",\"<ion-modal-view class=\\\"profile-edit\\\"><ion-header-bar class=\\\"bar-light\\\"><button class=\\\"button button-clear\\\" \\nng-click=\\\"closeModal()\\\" translate=\\\"cancel\\\"></button><div class=\\\"title\\\">{{ ::\\'editProfile\\' | translate }}</div><button \\nclass=\\\"button button-clear\\\" ng-click=\\\"submitUpdateProfile(rForm, form)\\\" translate=\\\"submit\\\"></button></ion-header-bar>\\n<ion-content class=\\\"view-avatar\\\"><div class=\\\"step2\\\"><form name=\\\"rForm\\\" novalidate><img class=\\\"avatar\\\" user-avatar \\nng-src=\\\"{{ form.photo._url || \\'img/user.png\\' }}\\\"><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-clipboard placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"name\\\" \\nng-model=\\\"form.name\\\" placeholder=\\\"{{\\'name\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-pound placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"username\\\" \\nng-model=\\\"form.username\\\" ng-minlength=\\\"4\\\" ng-maxlength=\\\"12\\\" ng-pattern=\\\"/^[a-zA-Z\\'. -]+$/\\\" \\nplaceholder=\\\"{{\\'username\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-earth placeholder-icon\\\"></i> <input type=\\\"url\\\" name=\\\"website\\\" ng-model=\\\"form.website\\\" \\nplaceholder=\\\"{{\\'site\\' | translate}}\\\"></label><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon ion-information-circled placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"text\\\" name=\\\"status\\\" \\nng-model=\\\"form.status\\\" placeholder=\\\"{{\\'status\\' | translate}}\\\"></label><ion-item class=\\\"item-divider\\\" \\ntranslate=\\\"privateInformation\\\"></ion-item><label class=\\\"item item-input\\\"><i \\nclass=\\\"icon icon-envelope placeholder-icon\\\"></i> <input type=\\\"email\\\" name=\\\"email\\\" ng-model=\\\"form.email\\\" \\ndisabled=\\\"disabled\\\" ng-model-options=\\\"{debounce: 1000}\\\" placeholder=\\\"user@example.com\\\"></label><label \\nclass=\\\"item item-input\\\"><i class=\\\"icon ion-iphone placeholder-icon\\\"></i> <input required=\\\"required\\\" type=\\\"tel\\\" \\nname=\\\"phone\\\" ng-model=\\\"form.phone\\\" placeholder=\\\"{{\\'phone\\' | translate }}\\\"></label></form></div><div \\nclass=\\\"padding step3\\\"><button ng-click=\\\"linkFacebook()\\\" ng-disabled=\\\"form.facebook\\\" \\nclass=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\"></i> <span translate=\\\"facebookLink\\\">\\n</span></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/directive/profile-modal.html\",\"<ion-modal-view id=\\\"account-view\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\">\\n{{ user.name }}</div></ion-header-bar><ion-content overflow-scroll=\\\"true\\\"><div class=\\\"profile-top\\\"><div class=\\\"row\\\">\\n<div class=\\\"col-25\\\"><img class=\\\"avatar\\\" ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\"></div><div \\nclass=\\\"col col-statics\\\"><div class=\\\"row\\\"><div class=\\\"row\\\"><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ ::user.galleriesTotal || 0}}</span><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\"><span class=\\\"text-center\\\">\\n{{ user.followersTotal || 0}}</span><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\"><span \\nclass=\\\"text-center\\\">{{ ::user.followingsTotal || 0}}</span><h3 translate=\\\"followingText\\\"></h3></div></div></div><div \\nclass=\\\"row col-edit\\\"><div class=\\\"col\\\"><photogram-loading loading=\\\"loadingFollow\\\"></photogram-loading><button \\nng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-follow\\': !user.isFollow}\\\" ng-click=\\\"follow()\\\" class=\\\"button\\\"><span\\n ng-show=\\\"!user.isFollow\\\" translate>Follow</span> <span ng-show=\\\"user.isFollow\\\" translate>Following</span></button>\\n</div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">{{ user.name }}</span><p class=\\\"user-status\\\">\\n{{ user.status }}</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button \\nclass=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{active: tab.grid}\\\" ng-click=\\\"changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: tab.list}\\\" ng-click=\\\"changeTab(\\'list\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recent\\\"></div><div class=\\\"tab\\\" ng-if=\\\"tab.list\\\"></div><div class=\\\"tab\\\" ng-if=\\\"tab.grid\\\"></div></ion-content>\\n</ion-modal-view>\");\n$templateCache.put(\"app/directive/search-directive.html\",\"<label class=\\\"item item-input\\\"><i class=\\\"icon ion-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"input\\\" \\nplaceholder=\\\"{{\\'SEARCH.FORM.INPUT\\' | translate }}\\\"> <button class=\\\"button button-icon\\\" ng-if=\\\"input.length\\\" \\nng-click=\\\"clearSearch()\\\"><i class=\\\"icon ion-close\\\"></i></button></label>\");\n$templateCache.put(\"app/directive/settings-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"settingTitle\\\"></div></ion-header-bar><ion-content class=\\\"animated fadeIn\\\"><div class=\\\"list\\\"><ion-language>\\n</ion-language><ion-toggle class=\\\"toggle-positive\\\" ng-model=\\\"form.push\\\"><h3><small translate=\\\"notificationText\\\">\\n</small></h3><p ng-if=\\\"form.push\\\" translate=\\\"on\\\"></p><p ng-if=\\\"!form.push\\\" translate=\\\"off\\\"></p></ion-toggle><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S\\\"><h3>\\n<small translate=\\\"buy\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3><small translate=\\\"help\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item class=\\\"item-icon-right\\\" href=\\\"http://photogramapp.com\\\"><h3>\\n<small translate=\\\"terms\\\"></small></h3><i class=\\\"icon ion-ios-arrow-right\\\"></i></ion-item><ion-item \\nclass=\\\"item-icon-right\\\" ng-click=\\\"show();\\\"><h3><small translate=\\\"report\\\"></small></h3><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></ion-item></div><div class=\\\"padding\\\"><button ng-click=\\\"logout()\\\" \\nclass=\\\"button button-block button-positive\\\" translate=\\\"logout\\\"></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/mentio/people-mentions.html\",\"<ul class=\\\"list-group user-search\\\"><li mentio-menu-item=\\\"person\\\" ng-repeat=\\\"person in items\\\" class=\\\"list-group-item\\\">\\n<img ng-src=\\\"{{person.imageUrl}}\\\" class=\\\"user-photo\\\"><div class=\\\"description\\\"><span class=\\\"text-primary\\\" \\nng-bind-html=\\\"person.username | mentioHighlight:typedTerm:\\'menu-highlighted\\' | unsafe\\\"></span> <em class=\\\"text-muted\\\" \\nng-bind=\\\"person.status | words:5\\\"></em></div></li></ul>\");\n$templateCache.put(\"app/mentio/photo-mentions.html\",\"<ul class=\\\"list-group product-search demo-scrollable-menu\\\"><li mentio-menu-item=\\\"product\\\" ng-repeat=\\\"product in items\\\" \\nclass=\\\"list-group-item clearfix\\\"><div class=\\\"row\\\"><div class=\\\"col-xs-2 text-center\\\"><img ng-src=\\\"{{product.imageUrl}}\\\" \\nclass=\\\"product-photo\\\"></div><div class=\\\"col-xs-10\\\"><h4 class=\\\"list-group-item-heading\\\">{{product.title | words:5}}</h4>\\n<p class=\\\"list-group-item-text\\\">{{product.description | words:7}}</p></div></div></li></ul>\");\n$templateCache.put(\"app/component/ion-language/ion-language.html\",\"<button class=\\\"button button-block button-clear button-light button-language\\\">{{language.translation | translate}} <i \\nclass=\\\"icon ion-chevron-down\\\"></i></button>\");\n$templateCache.put(\"app/component/ion-language/modal-language.html\",\"<ion-modal-view><ion-header-bar><h1 class=\\\"title\\\" translate=\\\"selectLanguageText\\\"></h1><a ng-click=\\\"closeModal()\\\" \\nclass=\\\"button button-icon icon ion-close\\\"></a></ion-header-bar><div \\nclass=\\\"bar bar-subheader item-input-inset bar-stable\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" placeholder=\\\"{{\\'searchText\\' | translate}}\\\" \\nng-model=\\\"searchValue\\\"></label><button type=\\\"button\\\" class=\\\"button button-clear\\\" ng-show=\\\"searchValue.length\\\" \\nng-click=\\\"searchValue=\\'\\'\\\">Clear</button></div><ion-content class=\\\"has-subheader has-header\\\"><ion-list><ion-item \\nclass=\\\"item\\\" ng-click=\\\"selectLanguage(item)\\\" ng-repeat=\\\"item in languages | filter:searchValue\\\" \\nng-bind-html=\\\"item.translation | translate\\\"></ion-item></ion-list></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/account-friend-list/account-friend-list.html\",\"<ion-view><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/feedback/feedback-modal.html\",\"<ion-modal-view class=\\\"modal-profile\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closeModal()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"FEEDBACK.TITLE\\\"></div></ion-header-bar><ion-content><formly-form model=\\\"form\\\" form=\\\"rForm\\\" \\nfields=\\\"formFields\\\"></formly-form><div class=\\\"padding\\\"><button class=\\\"button button-block button-positive\\\" \\nng-click=\\\"submitFeedback()\\\"><span translate=\\\"BUTTON.SEND\\\"></span></button></div></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/gallery-comment/gallery-comment.html\",\"<ion-view class=\\\"modal-comment\\\" view-title=\\\"Comments\\\" cache-view=\\\"false\\\"><ion-nav-bar class=\\\"bar-light\\\"><ion-nav-title>\\n<div class=\\\"title\\\"><span translate=\\\"commentPhotoText\\\"></span>({{ comments.length }})</div></ion-nav-title>\\n<ion-nav-buttons side=\\\"left\\\"><button class=\\\"button button-icon button-clear ion-ios-arrow-left\\\" \\nng-click=\\\"$ionicGoBack()\\\"></button></ion-nav-buttons></ion-nav-bar><ion-content><div class=\\\"padding center\\\" \\nng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><ion-list class=\\\"list\\\" ng-if=\\\"!loading\\\" can-swipe=\\\"true\\\"><ion-item \\nng-repeat=\\\"item in comments \\\" class=\\\"item item-avatar\\\"><img ng-src=\\\"{{ ::item.user.photo._url || \\'./img/user.png\\'}}\\\">\\n<div class=\\\"row\\\"><h2>{{ ::item.user.name }}</h2></div><div class=\\\"row\\\"><div class=\\\"text\\\">{{ ::item.text }}</div></div>\\n<div class=\\\"row\\\"><p>{{ ::item.createdAt | amTimeAgo }}</p></div><div ng-if=\\\"item.canEdit\\\"><ion-option-button \\nclass=\\\"button-info\\\" ng-click=\\\"editComment(item, $index)\\\" translate=\\\"edit\\\">Edit</ion-option-button><ion-option-button \\nclass=\\\"button-assertive\\\" ng-click=\\\"deleteComment(item, $index)\\\" translate=\\\"remove\\\">Remove</ion-option-button></div>\\n</ion-item></ion-list><div class=\\\"center-ico\\\" ng-if=\\\"nocomments\\\"><i class=\\\"icon ion-ios-chatbubble-outline\\\"></i><h1 \\ntranslate=\\\"noComments\\\"></h1></div></ion-content><form name=\\\"rForm\\\" ng-submit=\\\"submitComment(rForm, form)\\\" novalidate>\\n<ion-footer-bar ng-hide=\\\"loading\\\" class=\\\"bar-stable item-input-inset message-footer\\\" keyboard-attach><label \\nclass=\\\"item-input-wrapper\\\"><i class=\\\"icon ion-ios-compose-outline placeholder-icon\\\"></i><textarea mentio \\nmentio-trigger-char=\\\"\\'@\\'\\\" mentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" \\nmentio-search=\\\"searchPeople(term)\\\" mentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" \\nng-model=\\\"form.text\\\" focus-me id=\\\"textComment\\\" placeholder=\\\"Send a comment...\\\" required minlength=\\\"1\\\" maxlength=\\\"1500\\\">\\n                </textarea></label><div class=\\\"footer-btn-wrap\\\"><button class=\\\"button button-positive button-outline\\\" \\ntype=\\\"submit\\\" ng-disabled=\\\"!form.text || form.text === \\'\\'\\\">Publish</button></div></ion-footer-bar></form></ion-view>\");\n$templateCache.put(\"app/main/loading/loading.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content></ion-content></ion-view>\");\n$templateCache.put(\"app/main/profile/profile.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-bar class=\\\"bar bar-light\\\"><ion-nav-back-button>\\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span>{{ vm.user.name }}</span></ion-nav-title><ion-content \\nscroll-sista=\\\"header-tabs\\\" class=\\\"animated fadeIn\\\"><div class=\\\"profile-top\\\"><div class=\\\"row\\\"><div class=\\\"col-25\\\"><img \\nclass=\\\"avatar\\\" user-avatar ng-model=\\\"vm.user\\\" ng-src=\\\"{{ vm.user.photo._url || \\'img/user.png\\' }}\\\"></div><div \\nclass=\\\"col col-statics\\\"><div class=\\\"row\\\"><div class=\\\"col\\\"><span class=\\\"text-center\\\">{{ vm.user.galleriesTotal || 0}}\\n</span><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\" ng-click=\\\"vm.openFollowers()\\\"><span class=\\\"text-center\\\">\\n{{ vm.user.followersTotal || 0}}</span><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\" \\nng-click=\\\"vm.openFollowing()\\\"><span class=\\\"text-center\\\">{{ vm.user.followingsTotal || 0}}</span><h3 \\ntranslate=\\\"followingText\\\"></h3></div></div><div class=\\\"row col-edit\\\"><div class=\\\"col center\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"col\\\" ng-if=\\\"vm.isMe && !vm.loading\\\"><button profile-modal-edit \\nuser=\\\"vm.user\\\" class=\\\"button\\\"><div translate=\\\"editProfile\\\"></div></button></div><div class=\\\"col\\\" \\nng-if=\\\"!vm.isMe && !vm.loading\\\"><button \\nng-class=\\\"{\\'button-unfollow\\': vm.user.isFollow, \\'button-follow\\': !vm.user.isFollow}\\\" ng-click=\\\"vm.follow()\\\" \\nclass=\\\"button\\\"><span ng-show=\\\"!vm.user.isFollow\\\" translate>Follow</span> <span ng-show=\\\"vm.user.isFollow\\\" translate>\\nFollowing</span></button></div></div></div></div><div class=\\\"padding\\\"><span class=\\\"user-username\\\">{{ vm.user.name }}\\n</span><p class=\\\"user-status\\\">{{ vm.user.status }}</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button\\n class=\\\"button button-icon icon ion-grid\\\" ng-class=\\\"{active: vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> \\n<button class=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\">\\n</button> <button class=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"center padding\\\" \\nng-if=\\\"vm.loading\\\"><ion-spinner></ion-spinner></div><div ng-if=\\\"!vm.loading\\\"><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recentText\\\">Recent</div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.list\\\"><photo-list username=\\\"vm.user.username\\\">\\n</photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.grid\\\"><photo-grid username=\\\"vm.user.username\\\"></photo-grid></div>\\n</div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/share/post-modal.html\",\"<ion-modal-view class=\\\"modal-post\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-arrow-thin-left\\\" ng-click=\\\"closePost()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"SHARE.TITLE\\\"></div><button class=\\\"button button-positive\\\" ng-click=\\\"submitPost(form)\\\"><i \\nclass=\\\"icon ion-arrow-right-b\\\"></i></button></ion-header-bar><ion-content><div id=\\\"image\\\"><img ng-src=\\\"{{image}}\\\">\\n</div><ul class=\\\"list\\\"><li class=\\\"item\\\"><textarea ng-model=\\\"form.title\\\" \\nplaceholder=\\\"{{ \\'SHARE.FORM.LEGEND\\' | translate }}\\\"></textarea></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/share/share-modal.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-light\\\"><button \\nclass=\\\"button button-clear button-icon ion-ios-close-empty\\\" ng-click=\\\"close()\\\"></button><div class=\\\"title\\\" \\ntranslate=\\\"shareGalleryText\\\"></div></ion-header-bar><ion-content><div class=\\\"list\\\"><div \\nclass=\\\"item item-thumbnail-left\\\"><img ng-src=\\\"{{image}}\\\" ng-click=\\\"editFilter()\\\"><textarea mentio \\nmentio-trigger-char=\\\"\\'@\\'\\\" mentio-items=\\\"people\\\" mentio-template-url=\\\"app/mentio/people-mentions.html\\\" \\nmentio-search=\\\"searchPeople(term)\\\" mentio-select=\\\"getPeopleTextRaw(item)\\\" mentio-id=\\\"\\'theTextArea\\'\\\" ng-trim=\\\"false\\\" \\ntype=\\\"text\\\" ng-model=\\\"form.title\\\" placeholder=\\\"{{ \\'description\\'|translate }}\\\"></textarea></div></div><div class=\\\"list\\\">\\n<a class=\\\"item item-icon-left\\\" ion-location ng-model=\\\"form.address\\\" ng-if=\\\"!form.address.resume\\\"><i \\nclass=\\\"icon ion-ios-location\\\"></i> <span translate=\\\"addLocale\\\"></span> </a><a \\nclass=\\\"item item-icon-left item-button-right\\\" ng-if=\\\"form.address.resume\\\"><i class=\\\"icon ion-ios-location\\\"></i><h2>\\n{{form.address.name || form.address.resume}}</h2><p>{{form.address.resume}}</p><button class=\\\"button button-icon\\\" \\nng-click=\\\"closeAddress()\\\"><i class=\\\"icon ion-ios-close\\\"></i></button></a></div><div class=\\\"padding\\\"><button \\nclass=\\\"button button-block button-positive\\\" type=\\\"button\\\" ng-click=\\\"submit(form)\\\" translate=\\\"submit\\\"></button></div>\\n</ion-content></ion-modal-view>\");\n$templateCache.put(\"app/main/tab/main-tab.html\",\"<ion-view><ion-nav-bar class=\\\"bar bar-light\\\"><ion-nav-back-button></ion-nav-back-button></ion-nav-bar><ion-tabs \\nclass=\\\"tabs-light tabs-photogram\\\"><ion-tab title=\\\"{{ \\'PHOTOGRAM.TITLE.HOME\\' | translate }}\\\" icon-on=\\\"ion-ios-home\\\" \\nicon-off=\\\"ion-ios-home-outline\\\" ui-sref=\\\"tab.home\\\"><ion-nav-view name=\\\"tabHome\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SEARCH\\' | translate }}\\\" icon-on=\\\"ion-ios-world\\\" icon-off=\\\"ion-ios-world-outline\\\" \\nui-sref=\\\"tab.search\\\"><ion-nav-view name=\\\"tabSearch\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.SHARE\\' | translate }}\\\" icon-on=\\\"ion-ios-camera\\\" icon-off=\\\"ion-ios-camera-outline\\\" \\nng-click=\\\"vm.postPhoto()\\\"><ion-nav-view name=\\\"tabCapture\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.ACTIVITY\\' | translate }}\\\" icon-on=\\\"ion-ios-heart\\\" icon-off=\\\"ion-ios-heart-outline\\\" \\nui-sref=\\\"tab.activity\\\"><ion-nav-view name=\\\"tabActivity\\\"></ion-nav-view></ion-tab><ion-tab \\ntitle=\\\"{{ \\'PHOTOGRAM.TITLE.PROFILE\\' | translate }}\\\" icon-on=\\\"ion-ios-person\\\" icon-off=\\\"ion-ios-person-outline\\\" \\nui-sref=\\\"tab.account\\\"><ion-nav-view name=\\\"tabProfile\\\"></ion-nav-view></ion-tab></ion-tabs></ion-view>\");\n$templateCache.put(\"app/main/tab-account/account.html\",\"<ion-view cache-view=\\\"false\\\" id=\\\"account-view\\\"><ion-nav-title><span>{{ vm.user.attributes.name }}</span>\\n</ion-nav-title><ion-nav-buttons side=\\\"right\\\"><button settings-modal class=\\\"button button-icon icon ion-gear-a\\\">\\n</button></ion-nav-buttons><ion-content scroll-sista=\\\"header-tabs\\\" class=\\\"animated fadeIn\\\"><div class=\\\"profile-top\\\">\\n<div class=\\\"row\\\"><div class=\\\"col-25\\\"><img class=\\\"avatar\\\" user-avatar ng-model=\\\"currentUser\\\" \\nng-src=\\\"{{ currentUser.photo.url() || \\'img/user.png\\' }}\\\"></div><div class=\\\"col col-statics\\\"><div class=\\\"row\\\"><div \\nclass=\\\"col\\\"><span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">{{ vm.user.attributes.galleriesTotal || 0}}</span>\\n<ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner><h3 translate=\\\"postsText\\\"></h3></div><div class=\\\"col\\\" \\nng-click=\\\"vm.openFollowers()\\\"><span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">{{ vm.user.attributes.followersTotal || 0}}\\n</span><ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner><h3 translate=\\\"followersText\\\"></h3></div><div class=\\\"col\\\" \\nng-click=\\\"vm.openFollowing()\\\"><span ng-if=\\\"!vm.loading\\\" class=\\\"text-center\\\">\\n{{ vm.user.attributes.followingsTotal || 0}}</span><ion-spinner ng-if=\\\"vm.loading\\\"></ion-spinner><h3 \\ntranslate=\\\"followingText\\\"></h3></div></div><div class=\\\"row col-edit\\\"><div class=\\\"col\\\"><button profile-modal-edit \\nuser=\\\"vm.user\\\" class=\\\"button\\\"><div translate=\\\"editProfile\\\"></div></button></div></div></div></div><div class=\\\"padding\\\">\\n<span class=\\\"user-username\\\">{{ vm.user.attributes.name }}</span><p class=\\\"user-status\\\">{{ vm.user.attributes.status }}\\n</p></div></div><div class=\\\"item bar\\\"><div class=\\\"button-bar\\\"><button class=\\\"button button-icon icon ion-grid\\\" \\nng-class=\\\"{active: vm.tab.grid}\\\" ng-click=\\\"vm.changeTab(\\'grid\\')\\\"></button> <button \\nclass=\\\"button button-icon icon ion-drag\\\" ng-class=\\\"{active: vm.tab.list}\\\" ng-click=\\\"vm.changeTab(\\'list\\')\\\"></button> \\n<button class=\\\"button button-icon icon ion-ios-location\\\"></button></div></div><div class=\\\"item item-divider\\\" \\ntranslate=\\\"recentText\\\">Recent</div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.list && !vm.loading\\\"><photo-list \\nusername=\\\"vm.user.attributes.username\\\"></photo-list></div><div class=\\\"tab\\\" ng-if=\\\"vm.tab.grid && !vm.loading\\\">\\n<photo-grid username=\\\"currentUser.username\\\"></photo-grid></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-activity/activity.html\",\"<ion-view class=\\\"list-activity\\\"><ion-nav-title><span translate=\\\"activities\\\"></span></ion-nav-title><ion-content \\nscroll-sista=\\\"\\\"><div class=\\\"center padding\\\" ng-if=\\\"loading\\\"><ion-spinner></ion-spinner></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"vm.showErrorView()\\\"><div class=\\\"error\\\"><i \\nclass=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button \\nclass=\\\"button button-positive\\\" ng-click=\\\"vm.onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"vm.showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i>\\n<p>{{ \\\"activityNotFoundText\\\" | translate }}</p></div></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" \\non-refresh=\\\"onReload()\\\"></ion-refresher><div class=\\\"list\\\"><div class=\\\"item item-avatar item-animate1\\\" \\nng-repeat=\\\"item in vm.data\\\"><img ng-src=\\\"{{ item.user.photo._url  || \\'./img/user.png\\'}}\\\"><h2 \\nng-click=\\\"vm.openProfile(item.user.username)\\\">{{ item.user.name}}</h2><div class=\\\"text\\\">{{ item.action | translate }}\\n</div><p>{{ item.createdAt | amTimeAgo }}</p><div class=\\\"img-right\\\" ng-if=\\\"item.item.gallery\\\"><img \\nng-src=\\\"{{ item.item.gallery.attributes.imageThumb._url}}\\\"></div><div class=\\\"item-button-right\\\" \\nng-if=\\\"!item.item.gallery\\\"><button class=\\\"button button-positive button-outline icon\\\" \\nng-class=\\\"{\\'ion-ios-person-outline\\': item.user.isFollow, \\'ion-ios-personadd-outline\\': !item.user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"></button></div></div></div><ion-infinite-scroll on-infinite=\\\"onLoadMore()\\\" \\nng-if=\\\"vm.moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-home/home.html\",\"<ion-view class=\\\"view-home\\\"><ion-nav-buttons side=\\\"left\\\"><button \\nclass=\\\"button button-icon icon ion-ios-personadd-outline\\\" ui-sref=\\\"tab.homeUserlist\\\"></button></ion-nav-buttons>\\n<ion-nav-title><span class=\\\"icon2-logo\\\"></span></ion-nav-title><ion-content><photo-list profile=\\\"true\\\" \\nload=\\\"vm.openProfile\\\" open-likers=\\\"vm.openLikers\\\"></photo-list></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-search/search.html\",\"<ion-view><ion-nav-title><span>{{ \\'searchText\\' | translate }}</span></ion-nav-title><ion-nav-buttons side=\\\"right\\\">\\n<button class=\\\"button button-icon ion-ios-location\\\" ui-sref=\\\"tab.map\\\"></button></ion-nav-buttons><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"search\\\" ng-model=\\\"params.search\\\" ng-change=\\\"onSearch()\\\" \\nng-model-options=\\\"{debounce:1000}\\\" style=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\">\\n</label><button class=\\\"button button-clear\\\" ng-if=\\\"search.length\\\" ng-click=\\\"clearSearch()\\\">\\n{{ \\\"cancelText\\\" | translate }}</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><photo-grid user=\\\"\\\">\\n</photo-grid></ion-content></ion-view>\");\n$templateCache.put(\"app/main/tab-search-map/searchMap.html\",\"<ion-view id=\\\"view-map\\\"><ion-nav-title>{{ \\'mapTitle\\' | translate }}</ion-nav-title><ion-content scroll=\\\"false\\\"><div \\nid=\\\"map_canvas\\\" data-tap-disabled=\\\"true\\\"></div></ion-content><ion-footer-bar><div class=\\\"row\\\" ng-if=\\\"loading\\\"><div \\nclass=\\\"col\\\"><div class=\\\"center\\\"><ion-spinner></ion-spinner></div></div></div><button ng-if=\\\"!loading\\\" \\nclass=\\\"button button-positive button-block button-outline\\\" ng-click=\\\"onSearchHere()\\\">{{ \\'searchInHere\\' | translate }}\\n</button></ion-footer-bar></ion-view>\");\n$templateCache.put(\"app/main/user-avatar/user-avatar.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content class=\\\"padding view-avatar\\\"><div class=\\\"row step1\\\"><div \\nclass=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar ng-model=\\\"vm.user\\\" ng-src=\\\"{{ vm.user._url || \\'img/user.png\\' }}\\\"></div>\\n</div><div class=\\\"step2\\\"><form><label class=\\\"item item-input\\\"><i class=\\\"icon icon-envelope placeholder-icon\\\"></i> \\n<input type=\\\"email\\\" name=\\\"email\\\" ng-model=\\\"vm.form.email\\\" disabled=\\\"disabled\\\"></label></form><formly-form \\nmodel=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"vm.rForm\\\"></formly-form></div><div class=\\\"step3\\\"><button \\nng-click=\\\"vm.submitAvatar()\\\" class=\\\"button button-block button-positive\\\" translate=\\\"submit\\\"></button></div>\\n</ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-followers/user-followers.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"followersText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-following/user-following.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"followingText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-intro/user-intro.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><div class=\\\"bar bar-header\\\"><ion-language>\\n</ion-language></div><ion-content class=\\\"padding\\\" scroll=\\\"false\\\"><div class=\\\"center\\\"><div class=\\\"step1\\\"><div \\nclass=\\\"logo\\\"><span class=\\\"icon2-logo\\\"></span></div><p>{{::\\'userIntroText\\' | translate}}</p><facebook-login>\\n</facebook-login></div></div></ion-content><ion-footer-bar><div class=\\\"row\\\"><div class=\\\"col\\\"><button \\nclass=\\\"button button-block button-light button-outline\\\" translate=\\\"signin\\\" signin-modal></button></div><div \\nclass=\\\"col\\\"><button class=\\\"button button-block button-light button-outline\\\" translate=\\\"register\\\" signup-modal></button>\\n</div></div></ion-footer-bar></ion-view>\");\n$templateCache.put(\"app/main/user-layout/user-layout.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\"><ion-content padding=\\\"false\\\"><ion-nav-view></ion-nav-view></ion-content>\\n</ion-view>\");\n$templateCache.put(\"app/main/user-likers/user-likers.html\",\"<ion-view id=\\\"user-list\\\"><ion-nav-title><span translate=\\\"likersText\\\"></span></ion-nav-title><ion-header-bar \\nclass=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\">\\n<ion-spinner></ion-spinner></div><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.users | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" \\nng-click=\\\"vm.follow(user)\\\"><div ng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>\\nUnfollow</div></button> </a><span class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img \\nng-src=\\\"{{ gallery.imageThumb._url}}\\\" id=\\\"{{ ::gallery.id}}\\\"></span></span></div></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-list/user-list.html\",\"<ion-view id=\\\"user-list\\\" cache-view=\\\"false\\\"><ion-nav-title><span translate=\\\"findPeople\\\"></span></ion-nav-title>\\n<ion-header-bar class=\\\"bar bar-subheader item-input-inset\\\"><label class=\\\"item-input-wrapper\\\"><i \\nclass=\\\"icon ion-ios-search placeholder-icon\\\"></i> <input type=\\\"text\\\" ng-model=\\\"searchValue\\\" \\nstyle=\\\"text-transform:lowercase\\\" placeholder=\\\"{{ \\'searchText\\' | translate }}\\\"></label><button \\nclass=\\\"button button-positive button-clear\\\" ng-if=\\\"searchValue.length>1\\\" ng-click=\\\"clearSearch()\\\" translate=\\\"cancel\\\">\\n</button></ion-header-bar><ion-content class=\\\"has-subheader\\\"><div class=\\\"center padding\\\" ng-if=\\\"showErrorView()\\\"><div \\nclass=\\\"error\\\"><i class=\\\"icon icon-large ion-ios-cloud-download-outline\\\"></i><p>{{ \\\"errorText\\\" | translate }}</p><button\\n class=\\\"button button-primary\\\" ng-click=\\\"onReload()\\\">{{ \\\"tryAgainText\\\" | translate }}</button></div></div><div \\nclass=\\\"center padding\\\" ng-if=\\\"showEmptyView()\\\"><div class=\\\"error\\\"><i class=\\\"icon icon-large ion-android-alert\\\"></i><p>\\n{{ \\\"galleriesNotFoundText\\\" | translate }}</p></div></div><div class=\\\"center padding\\\" ng-if=\\\"vm.loading\\\"><ion-spinner>\\n</ion-spinner></div><ion-refresher pulling-text=\\\"{{\\'loadingText\\'| translate}}\\\" on-refresh=\\\"vm.onReload()\\\">\\n</ion-refresher><div class=\\\"list\\\"><div ng-repeat=\\\"user in vm.data | filter:searchValue\\\"><a \\nclass=\\\"item item-avatar item-button-right\\\"><img ng-src=\\\"{{ user.photo._url || \\'img/user.png\\'}}\\\" \\nng-click=\\\"vm.openProfile(user)\\\"><h2 ng-click=\\\"vm.openProfile(user)\\\">{{user.username}}</h2><p>{{user.status}}</p><button\\n class=\\\"button button-positive\\\" ng-disabled=\\\"user.loading\\\" \\nng-class=\\\"{\\'button-unfollow\\': user.isFollow, \\'button-outline\\': !user.isFollow}\\\" ng-click=\\\"vm.follow(user)\\\"><div \\nng-show=\\\"!user.isFollow\\\" translate>Follow</div><div ng-show=\\\"user.isFollow\\\" translate>Unfollow</div></button> </a><span\\n class=\\\"row\\\"><span class=\\\"col\\\" ng-repeat=\\\"gallery in user.galleries\\\"><img ng-src=\\\"{{ gallery.imageThumb._url}}\\\" \\nid=\\\"{{ ::gallery.id}}\\\"></span></span></div></div><ion-infinite-scroll on-infinite=\\\"vm.onLoadMore()\\\" \\nng-if=\\\"vm.moreDataCanBeLoaded()\\\" spinner distance=\\\"1%\\\"></ion-infinite-scroll></ion-content></ion-view>\");\n$templateCache.put(\"app/main/user-merge/merge.html\",\"<ion-view id=\\\"user-layout\\\" class=\\\"bg-animate\\\" cache-view=\\\"false\\\"><ion-content class=\\\"view-avatar padding\\\"><div \\nclass=\\\"row step1\\\"><div class=\\\"col\\\"><img class=\\\"avatar\\\" user-avatar \\nng-src=\\\"{{ tempUser.attributes.photo._url || \\'./img/user.png\\' }}\\\"></div></div><div class=\\\"step2\\\"><formly-form \\nmodel=\\\"vm.form\\\" fields=\\\"vm.formFields\\\" form=\\\"rForm\\\"><input type=\\\"hidden\\\" ng-model=\\\"vm.form.facebookimg\\\"></formly-form>\\n</div><div class=\\\"padding step3\\\"><button ng-click=\\\"vm.submit(rForm, vm.form)\\\" \\nclass=\\\"button button-block button-facebook\\\"><i class=\\\"icon ion-social-facebook\\\"></i> <span translate=\\\"mergeAccount\\\">\\n</span></button></div></ion-content></ion-view>\");\n$templateCache.put(\"app/main/walkthrough/walkthrough.html\",\"<ion-view class=\\\"view-intro bg-animate\\\" can-swipe-back=\\\"false\\\"><ion-content scroll=\\\"false\\\"><div class=\\\"intro-slider\\\">\\n<ion-slide-box active-slide=\\\"slideIndex\\\" show-pager=\\\"true\\\" on-slide-changed=\\\"vm.slideChanged($index)\\\"><ion-slide \\nng-repeat=\\\"item in vm.slides track by $index\\\"><div class=\\\"content\\\" ng-if=\\\"$index == vm.slideIndex\\\"><span class=\\\"top\\\">\\n<h2>{{ item.text | translate }}</h2></span><div class=\\\"phone {{ vm.device }}\\\"><img ng-src=\\\"{{ item.img }}\\\"></div></div>\\n</ion-slide><ion-slide><div class=\\\"content\\\" ng-if=\\\"vm.slides.length == vm.slideIndex\\\"><div class=\\\"last\\\"><div \\nclass=\\\"logo2 step1\\\"><img src=\\\"img/icon.png\\\"> <span class=\\\"icon2-logo\\\"></span></div><button \\nclass=\\\"button button-block button-clear step2\\\" ui-sref=\\\"user.intro\\\" translate=\\\"signin\\\"></button></div></div>\\n</ion-slide></ion-slide-box></div><button class=\\\"button button-positive button-fab left\\\" ng-if=\\\"vm.slideIndex\\\" \\nng-click=\\\"vm.previous()\\\"><i class=\\\"icon ion-ios-arrow-left\\\"></i></button> <button \\nclass=\\\"button button-positive button-fab right\\\" ng-hide=\\\"vm.slideIndex === vm.slides.length\\\" ng-click=\\\"vm.next()\\\"><i \\nclass=\\\"icon ion-ios-arrow-right\\\"></i></button></ion-content></ion-view>\");\n$templateCache.put(\"app/component/ion-photo/view/modal.share.photo.html\",\"<ion-modal-view class=\\\"modal-share\\\"><ion-header-bar class=\\\"bar-dark\\\"><div class=\\\"title\\\">{{ ::\\'Share\\' | translate }}\\n</div><button class=\\\"button button-positive\\\" ng-click=\\\"modal.hide()\\\"><i class=\\\"icon ion-arrow-right-b\\\"></i></button>\\n</ion-header-bar><ion-content ng-cloak><div id=\\\"image\\\"><img ng-src=\\\"{{ ::form.photo}}\\\"><div class=\\\"title\\\">\\n{{ ::form.title }}</div></div><ul class=\\\"list\\\"><li class=\\\"padding\\\"><button ng-repeat=\\\"social in sociais\\\" \\nng-click=\\\"share(form, social)\\\" class=\\\"button button-block button-{{ social }}\\\"><i class=\\\"icon ion-social-{{ social }}\\\">\\n</i> {{ ::social | uppercase }}</button></li></ul></ion-content></ion-modal-view>\");\n$templateCache.put(\"app/component/ion-photo/view/photo.filter.carousel.html\",\"<div class=\\\"wide-as-needed\\\"><a ng-repeat=\\\"filter in filters\\\" ng-click=\\\"applyFilter(\\'image\\', filter)\\\"><div caman \\nimage=\\\"image\\\" name=\\\"filter\\\" filter=\\\"filter\\\" class=\\\"image\\\" loading=\\\"loading\\\" ng-class=\\\"{disabled: loading}\\\"></div>\\n<ion-spinner ng-if=\\\"loading\\\"></ion-spinner><p>{{ ::filter }}</p></a></div>\");\n$templateCache.put(\"app/component/ion-photo/view/photo.filter.html\",\"<div class=\\\"capture-photo\\\"><div caman filter=\\\"\\'normal\\'\\\" loading=\\\"loadingMaster\\\" class=\\\"image\\\" \\nng-class=\\\"{disabled: loadingMaster}\\\" name=\\\"\\'image\\'\\\" image=\\\"image\\\"></div><ion-spinner ng-show=\\\"loadingMaster\\\">\\n</ion-spinner></div><photo-filter-carousel apply=\\\"applyFilter\\\" image=\\\"image\\\"></photo-filter-carousel>\");}]);\n}());\n"],"sourceRoot":"/source/"}