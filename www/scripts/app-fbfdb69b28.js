function MarkerClusterer(e,t,n){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var o=n||{};this.gridSize_=o.gridSize||60,this.minClusterSize_=o.minimumClusterSize||2,this.maxZoom_=o.maxZoom||null,this.styles_=o.styles||[],this.imagePath_=o.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=o.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=o.zoomOnClick&&(this.zoomOnClick_=o.zoomOnClick),this.averageCenter_=!1,void 0!=o.averageCenter&&(this.averageCenter_=o.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var r=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=r.map_.getZoom();r.prevZoom_!=e&&(r.prevZoom_=e,r.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){r.redraw()}),t&&t.length&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,n){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=n||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}!function(){"use strict";angular.module("starter",["ionic","ngMessages","ngCookies","ngStorage","pascalprecht.translate","tmh.dynamicLocale","angularMoment","ngFacebook","angular-cache","ngSanitize","mentio","ion-affix","jett.ionic.scroll.sista","ngCordova","ionic.components","app.main"])}(),function(){"use strict";angular.module("ionic.components",["ion-language","ion-location","ion-slideshow","ionic-cache-src","ion-photo"])}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,t,n){function o(){var e=n.href;return window.cordova?window.cordova.ThemeableBrowser.open(e,"_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#000",showPageTitle:!0},backButtonCanClose:!0}):window.open(e),!1}t.bind("click",o)}}}angular.module("starter").directive("href",e)}(),function(){"use strict";angular.module("app.main",["ionic","ngCordova"])}(),function(){"use strict";function e(e,t,n,o){t.useLoader("$translatePartialLoader",{urlTemplate:"{part}/i18n/{lang}.json"}),t.useSanitizeValueStrategy(null),t.useLocalStorage(),o.localeLocationPattern("../bower_components/angular-i18n/angular-locale_{{locale}}.js");var r=navigator.language||navigator.userlanguage,i=r.split("-")[0],a=n.preferredLocale,s=_.some(n.locales,{code:i});s&&(a=n.locales.filter(function(e){return a==e.code})[0].code),t.preferredLanguage(a),moment.locale(a)}e.$inject=["$translatePartialLoaderProvider","$translateProvider","AppConfig","tmhDynamicLocaleProvider"],angular.module("ion-language",["ngCookies","pascalprecht.translate","tmh.dynamicLocale"]).config(e)}(),function(){"use strict";angular.module("ion-location",["ionic"])}(),function(){"use strict";angular.module("ion-photo",["ionic","ngCordova","jrCrop"]).constant("config",{path:"app/component/ion-photo"})}(),function(){"use strict";angular.module("ion-slideshow",[]).directive("ionSlideshow",["$ionicModal",function(e){function t(t,n,o){n.bind("click",function(){t.allImages=t.ngModel,t.activeSlide=t.index,console.log(t.index),e.fromTemplateUrl("app/component/ion-slideshow/image-popover.html",{scope:t}).then(function(e){t.modal=e,t.modal.show()}),t.closeModal=function(){t.modal.hide(),t.modal.remove()}})}return{restrict:"A",scope:{ngModel:"=",index:"="},link:t}}])}(),function(){"use strict";angular.module("app.main")}(),function(){"use strict";function e(e){e.debugInfoEnabled(!1)}function t(e,t,n,o,r){Parse.initialize(e.parse.appId),Parse.serverURL=e.parse.server,n.unit||(n.unit=e.map.unit),n.mapType||(n.mapType=e.map.type),r.currentUser=Parse.User.current(),console.log(r.currentUser),r.currentUser||o.path("/")}function n(e,t,n,o,r,i,a,s,l,c){t.theme=l.theme,e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.disableScroll(!0),window.StatusBar.styleLightContent()),n.lang?o.use(n.lang):"undefined"!=typeof navigator.globalization&&r.getPreferredLanguage().then(function(e){o.use(e.value.split("-")[0])},null),navigator&&navigator.splashscreen&&i.hide();var e=Parse.User.current();e&&a.init(),console.log(o.use())})}function o(e){e.platform.ios.backButton.previousTitleText(" ").icon("ion-ios-arrow-left"),e.platform.android.backButton.previousTitleText(" ").icon("ion-ios-arrow-left"),e.views.swipeBackEnabled(!1),e.backButton.text(" ").icon("ion-ios-arrow-left"),e.tabs.position("bottom"),e.navBar.alignTitle("center"),e.views.maxCache(1)}function r(e,t){window.cordova||(e.setAppId(t.facebookAppId),e.setPermissions("id,name,email,user_likes,bio"))}function i(){if(!window.cordova){console.log("Facebook Browser");var e=window.navigator.language||window.navigator.userLanguage,t=e.substring(0,2)+"_"+e.substring(3,5).toUpperCase();!function(e,n,o){var r,i=e.getElementsByTagName(n)[0];e.getElementById(o)||(r=e.createElement(n),r.id=o,r.src="http://connect.facebook.net/"+t+"/sdk.js",i.parentNode.insertBefore(r,i))}(document,"script","facebook-jssdk")}}t.$inject=["AppConfig","$ionicPlatform","$localStorage","$location","$rootScope"],n.$inject=["$ionicPlatform","$rootScope","$localStorage","$translate","$cordovaGlobalization","$cordovaSplashscreen","ParsePush","ConnectMonitor","AppConfig","User"],e.$inject=["$compileProvider"],r.$inject=["$facebookProvider","AppConfig"],o.$inject=["$ionicConfigProvider"],angular.module("starter").run(t).run(n).run(i).config(e).config(r).config(o)}(),function(){"use strict";function e(){return{path:"app/module/photogram",app:{name:"Photogram",url:"http://photogramapp.com",image:"http://photogramapp.com/social-share.jpg"},routes:{home:"tab.home",login:"intro"},theme:"positive",gaTrackingId:"UA-69485876-2",facebookAppId:"1024016557617380",parse:{appId:"myAppId",server:"https://photogram.codevibe.io/parse/"},map:{unit:"mi",type:"normal"},locales:[{translation:"portugues",code:"pt"},{translation:"english",code:"en"},{translation:"turkish",code:"tr"},{translation:"persian",code:"fa"},{translation:"german",code:"de"}],preferredLocale:"en",DAO:{name:"photogram_db",tables:[{name:"User",columns:{id:"TEXT PRIMARY KEY",name:"TEXT",username:"TEXT",email:"TEXT",language:"TEXT",facebookimg:"TEXT",gender:"TEXT",img:"TEXT",facebook:"INTEGER",qtdFollow:"INTEGER",status:"TEXT",createdAt:"INTEGER",attributes:"TEXT"}},{name:"UserFollow",columns:{id:"TEXT PRIMARY KEY",user_id:"TEXT",followId:"TEXT"}},{name:"Gallery",columns:{id:"TEXT PRIMARY KEY",img:"TEXT",title:"TEXT",user_id:"TEXT",location:"TEXT",isLiked:"BOOLEAN",likes:"INTEGER",createdAt:"INTEGER"}},{name:"GalleryActivity",columns:{id:"TEXT PRIMARY KEY",action:"TEXT",img:"TEXT",userAvatar:"TEXT",userName:"TEXT",user_id:"TEXT",gallery_id:"TEXT",createdAt:"INTEGER"}},{name:"GalleryComment",columns:{id:"TEXT PRIMARY KEY",name:"TEXT",user_id:"TEXT",userName:"TEXT",gallery_id:"TEXT",createdAt:"INTEGER"}},{name:"GallerySetting",columns:{key:"TEXT",value:"TEXT"}}]}}}angular.module("ionic").constant("AppConfig",e())}(),function(){"use strict";function e(e,t,n){n.addPart("app"),e.state("loading",{url:"/",templateUrl:"app/main/loading/loading.html",controller:"LoadingCtrl",controllerAs:"vm"}).state("intro",{url:"/intro",templateUrl:"app/main/user-intro/user-intro.html",controller:"UserIntroCtrl",controllerAs:"vm"}).state("user.intro",{url:"/intro",templateUrl:"app/main/user-intro/user-intro.html",controller:"UserIntroCtrl"}).state("user",{url:"/user","abstract":!0,templateUrl:"app/main/user-layout/user-layout.html"}).state("user.avatar",{url:"/avatar",templateUrl:"app/main/user-avatar/user-avatar.html",controller:"UserAvatarCtrl",controllerAs:"vm"}).state("user.merge",{url:"/merge",controller:"UserMergeCtrl",controllerAs:"vm",templateUrl:"app/main/user-merge/merge.html"}).state("logout",{url:"/logout",template:'<ion-view view-title="Logout" cache-view="false"><ion-content></ion-content></ion-view>',controller:["User","$localStorage","AppConfig","$state",function(e,t,n,o){delete window.localStorage["Parse/"+n.parse.appId+"/currentUser"],delete window.localStorage["Parse/"+n.parse.appId+"/installationId"],t.$reset({}),o.go("intro",{clear:!0})}],controllerAs:"vm"}).state("profile",{url:"/profile/:username",templateUrl:"app/main/profile/profile.html",controllerAs:"vm"}).state("tab",{url:"/tab","abstract":!0,controller:"MainTabCtrl",controllerAs:"vm",templateUrl:"app/main/tab/main-tab.html"}).state("tab.home",{url:"/home",views:{tabHome:{controller:"HomeCtrl",controllerAs:"vm",templateUrl:"app/main/tab-home/home.html"}}}).state("tab.homeProfile",{url:"/home/:username",views:{tabHome:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("galleryComments",{url:"/home/:galleryId/comments",controller:"GalleryComment",controllerAs:"vm",templateUrl:"app/main/gallery-comment/gallery-comment.html"}).state("tab.homeGalleryLikers",{url:"/home/:galleryId/likers",views:{tabHome:{controller:"UserLikersCtrl",controllerAs:"vm",templateUrl:"app/main/user-likers/user-likers.html"}}}).state("tab.homeProfileFollowers",{url:"/home/:username/followers",views:{tabHome:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.homeProfileFollowing",{url:"/home/:username/follwing",views:{tabHome:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}).state("tab.homeUserlist",{url:"/home/userlist",views:{tabHome:{controller:"UserListCtrl",controllerAs:"vm",templateUrl:"app/main/user-list/user-list.html"}}}).state("tab.search",{url:"/search/:text",views:{tabSearch:{controller:"SearchCtrl",controllerAs:"vm",templateUrl:"app/main/tab-search/search.html"}}}).state("tab.searchProfile",{url:"/search/:username",views:{tabSearch:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("tab.searchProfileFollowers",{url:"/search/:username/followers",views:{tabSearch:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.map",{url:"/map",views:{tabSearch:{controller:"SearchMapCtrl",controllerAs:"vm",templateUrl:"app/main/tab-search-map/searchMap.html"}}}).state("tab.mapProfile",{url:"/map/:username",views:{tabSearch:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("tab.mapProfileFollowers",{url:"/map/:username/followers",views:{tabSearch:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.mapProfileFollowing",{url:"/map/:username/follwing",views:{tabActivity:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}).state("tab.account",{url:"/account",views:{tabProfile:{controller:"AccountCtrl",controllerAs:"vm",templateUrl:"app/main/tab-account/account.html"}}}).state("tab.accountFollowers",{url:"/account/:username/followers",views:{tabProfile:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.accountFollowing",{url:"/account/:username/follwing",views:{tabProfile:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}).state("tab.activity",{url:"/activity",views:{tabActivity:{controller:"ActivityCtrl",controllerAs:"vm",templateUrl:"app/main/tab-activity/activity.html"}}}).state("tab.activityProfile",{url:"/activity/:username",views:{tabActivity:{controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"app/main/profile/profile.html"}}}).state("tab.activityProfileFollowers",{url:"/activity/:username/followers",views:{tabActivity:{controller:"UserFollowerCtrl",controllerAs:"vm",templateUrl:"app/main/user-followers/user-followers.html"}}}).state("tab.activityProfileFollowing",{url:"/activity/:username/follwing",views:{tabActivity:{controller:"UserFollowingCtrl",controllerAs:"vm",templateUrl:"app/main/user-following/user-following.html"}}}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider","$translatePartialLoaderProvider"],angular.module("starter").config(e)}(),MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),n=new google.maps.LatLngBounds,o=0;e=t[o];o++)n.extend(e.getPosition());this.map_.fitBounds(n)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){for(var n=0,o=e.length,r=o;0!==r;)r=parseInt(r/10,10),n++;return n=Math.min(n,t),{text:o,index:n}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){for(var n,o=0;n=e[o];o++)this.pushMarkerTo_(n);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var n,o=0;n=this.markers_[o];o++)if(n==e){t=o;break}return-1==t?!1:(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n?(this.resetViewport(),this.redraw(),!0):!1},MarkerClusterer.prototype.removeMarkers=function(e,t){for(var n,o=!1,r=0;n=e[r];r++){var i=this.removeMarker_(n);o=o||i}return!t&&o?(this.resetViewport(),this.redraw(),!0):void 0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),o=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),r=t.fromLatLngToDivPixel(n);r.x+=this.gridSize_,r.y-=this.gridSize_;var i=t.fromLatLngToDivPixel(o);i.x-=this.gridSize_,i.y+=this.gridSize_;var a=t.fromDivPixelToLatLng(r),s=t.fromDivPixelToLatLng(i);return e.extend(a),e.extend(s),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t,n=0;t=this.clusters_[n];n++)t.remove();for(var o,n=0;o=this.markers_[n];n++)o.isAdded=!1,e&&o.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,n=0;t=e[n];n++)t.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var n=6371,o=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),a=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),s=n*a;return s},MarkerClusterer.prototype.addToClosestCluster_=function(e){for(var t,n=4e4,o=null,r=(e.getPosition(),0);t=this.clusters_[r];r++){var i=t.getCenter();if(i){var a=this.distanceBetweenPoints_(i,e.getPosition());n>a&&(n=a,o=t)}}if(o&&o.isMarkerInClusterBounds(e))o.addMarker(e);else{var t=new Cluster(this);t.addMarker(e),this.clusters_.push(t)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),n=this.getExtendedBounds(t),o=0;e=this.markers_[o];o++)!e.isAdded&&this.isMarkerInBounds_(e,n)&&this.addToClosestCluster_(e)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,n=0;t=this.markers_[n];n++)if(t==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,n=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,o=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(n,o),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var r=this.markers_.length;if(r<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),r==this.minClusterSize_)for(var i=0;r>i;i++)this.markers_[i].setMap(null);return r>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers(),o=0;e=n[o];o++)t.extend(e.getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var n,o=0;n=this.markers_[o];o++)n.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var r=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,r);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(e){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_,e),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}var t=this.getPanes();t.overlayMouseTarget.appendChild(this.div_);var n=this,o=!1;google.maps.event.addDomListener(this.div_,"click",function(e){o||n.triggerClusterClick(e)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){o=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){o=!0})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(t.x-=this.iconAnchor_[0],t.y-=this.iconAnchor_[1]):(t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10)),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition,this.iconAnchor_=t.iconAnchor},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");");var n=this.backgroundPosition_?this.backgroundPosition_:"0 0";t.push("background-position:"+n+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?t.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var o=this.textColor_?this.textColor_:"black",r=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+o+"; position:absolute; font-size:"+r+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},window.MarkerClusterer=MarkerClusterer,MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker,MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers,MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers,MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers,MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator,MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize,MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds,MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap,MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers,MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom,MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles,MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters,MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers,MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw,MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker,MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers,MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport,MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint,MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator,MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize,MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom,MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd,MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw,Cluster.prototype.getCenter=Cluster.prototype.getCenter,Cluster.prototype.getSize=Cluster.prototype.getSize,Cluster.prototype.getMarkers=Cluster.prototype.getMarkers,ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd,ClusterIcon.prototype.draw=ClusterIcon.prototype.draw,ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove,function(){"use strict";function e(e){return function(t,n){if(!t)return t;var o=e("linky")(t,n),r="";angular.isDefined(n)&&(r=n);var i=/(^|\s)#(\w*[a-zA-Z_]+\w*)/gim;o=t.replace(i,'$1<a href="#/tab/search/%23$2"'+r+">#$2</a>");var a=/(^|\s)\@(\w*[a-zA-Z_]+\w*)/gim;return o=o.replace(a,'$1<a href="#/tab/home/$2" >@$2</a>')}}e.$inject=["$filter"],angular.module("starter").filter("hashtag",e)}(),function(){"use strict";function e(){return function(e,t){if(isNaN(t))return e;if(0>=t)return"";if(e){var n=e.split(/\s+/);n.length>t&&(e=n.slice(0,t).join(" ")+"â€¦")}return e}}angular.module("starter").filter("words",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l){function c(c,u,d){u.bind("click",function(){c.routeLogged=s.routes.home,c.form={username:"",password:""},c.submitLogin=function(e,a){var s=angular.copy(a);return e.$valid?(t.start(),void n.signIn(s).then(function(e){console.log(e),l.currentUser=e,r.go(c.routeLogged,{clear:!0}),c.closeModal(),t.end()})["catch"](function(e){i.alert({title:"Error",text:o.instant("incorrectEmail")}),t.end()})):!1},c.forgotPass=function(){c.data={},a.show({template:'<input type="email" ng-model="data.email">',title:o.instant("recoveryPass"),subTitle:o.instant("fillEmail"),scope:c,buttons:[{text:o.instant("cancel")},{text:"<b >"+o.instant("submit")+"</b>",type:"button-positive",onTap:function(e){c.data.email?(t.start(),n.recoverPassword(c.data.email).then(function(e){i.alert({title:"Alert",text:o.instant("recoverySuccess")}),t.end()})):e.preventDefault()}}]})},e.fromTemplateUrl("app/directive/SigninModalDirective.html",{scope:c,animation:"slide-in-up",focusFirstInput:!0}).then(function(e){c.modal=e,c.modal.show()}),c.closeModal=function(){c.modal.hide()},c.$on("$destroy",function(){c.modal.remove()})})}return{restrict:"A",link:c}}e.$inject=["$ionicModal","Loading","User","$translate","$state","Toast","$ionicPopup","AppConfig","$rootScope"],angular.module("starter").directive("signinModal",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a){function s(s,l,c){l.bind("click",function(){s.routeLogged=e.routes.home,s.form={username:"",email:"",password:""},s.submitRegister=function(e,i){if(e.$valid){t.start();var l=angular.copy(i);n.signUp(l).then(function(e){console.log(e),n.signIn({username:l.username,password:l.password}).then(function(e){console.log(e),a.currentUser=Parse.User.current(),o.go("user.avatar",{clear:!0}),t.end(),s.closeModal()})["catch"](function(e){console.log(e),r.alert({title:"Alert",text:e.error}),t.end()})})["catch"](function(e){console.log(e),r.alert({title:"Alert",text:e.error}),t.end()})}},i.fromTemplateUrl("app/directive/SignupModalDirective.html",{scope:s,animation:"slide-in-up",focusFirstInput:!0}).then(function(e){s.modal=e,s.modal.show()}),s.closeModal=function(){s.modal.hide()},s.$on("$destroy",function(){s.modal.remove()})})}return{restrict:"A",link:s}}e.$inject=["AppConfig","Loading","User","$state","Toast","$ionicModal","$rootScope"],angular.module("starter").directive("signupModal",e)}(),function(){"use strict";function e(e,t){function n(n,o,r){function i(){n.loading||(n.loading=!0,e.list(n.params).then(function(e){n.canEdit&&(_.some(n.data,{create:!0})||n.data.push({create:!0})),e.length>0?(n.params.page++,e.map(function(e){n.data.push(e)})):(0===n.data.length&&(n.showEmptyView=!0),n.moreDataCanBeLoaded=!1),n.loading=!1,t.$broadcast("scroll.infiniteScrollComplete"),t.$broadcast("scroll.refreshComplete")})["catch"](function(){0===n.data.length&&(n.showErrorView=!0),n.$broadcast("scroll.refreshComplete")}))}function a(){n.params={},n.params.page=1,n.data=[],n.moreDataCanBeLoaded=!0,n.loading=!1}n.canEdit=n.username===Parse.User.current().username?!0:!1,a(),n.username&&(n.params.username=n.username),t.$on("photoInclude",function(e,t){t.objectId&&(t.id=t.objectId),n.data.unshift(t)}),t.$on("gallery:search",function(e,t){console.log(e,t),n.params.search=t.text,n.onReload()}),t.$on("albumGrid:reload",function(e,t){a(),n.onReload()}),i(),n.onLoadMore=function(){i()},n.onReload=function(){a(),i(),n.$broadcast("scroll.refreshComplete")}}return{restrict:"E",scope:{username:"=",user:"=",profile:"=",onReload:"="},templateUrl:"app/directive/albumGridDirective.html",link:n}}e.$inject=["GalleryAlbum","$rootScope"],angular.module("starter").directive("albumGrid",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u,d){function p(p,m,f){m.bind("click",function(){function m(){p.loading=!0,t.getAlbum({id:p.album}).then(function(e){console.log(e),p.title=e.album.attributes.title,p.data=e.photos,p.loading=!1})}return p.theme=e.theme,p.canEdit=p.edit,p.album?(u.fromTemplateUrl("app/directive/albumPhotoGridDirective.html",{scope:p}).then(function(e){p.modal=e,p.modal.show()}),p.closeAlbumPhotoGridModal=function(){p.modal.hide()},p.$on("$destroy",function(){p.modal.remove()}),m(),p.openPopover=function(e){d.fromTemplateUrl("app/directive/albumPhotoGridPopover.html",{scope:p}).then(function(t){p.popover=t,p.popover.show(e)})},p.closePopover=function(){p.popover.hide()},p.uploadPhoto=function(){p.closePopover(),i.open().then(i.modalPost).then(function(e){a.start(),s.upload({base64:e.image}).then(function(n){e.image=n,t.create(e).then(function(e){p.$emit("albumGrid:reload",e),m(),a.end()})})}),p.closePopover()},p.editAlbum=function(){p.closePopover(),p.form={title:"",description:""},u.fromTemplateUrl("app/directive/galleryNewAlbumModalDirective.html",{scope:p,focusFirstInput:!0}).then(function(e){p.modalAlbum=e,a.start(),n.get(p.album).then(function(e){p.form=e,p.modalAlbum.show(),a.end()})}),p.createAlbum=function(e,t){console.log(e,t),e.$valid&&p.form.save().then(function(e){console.log(e),p.closeAlbumPhotoGridModal(),p.closeModal(),r.$emit("albumGrid:reload",!0)})},p.closeModal=function(){p.modalAlbum.hide()}},void(p.deleteAlbum=function(){p.closePopover(),o.confirm({title:l.instant("deleteAlbum"),message:l.instant("areSure?")}).then(function(e){console.log(e),e&&(a.start(),n.get(p.album).then(function(e){n.destroy(e).then(function(e){console.log(e),p.closeAlbumPhotoGridModal(),a.end(),c.alert({title:l.instant("album"),text:l.instant("removedSuccess")}),r.$emit("albumGrid:reload",!0)})}))})})):!1})}return{restrict:"A",scope:{album:"=",edit:"="},link:p}}e.$inject=["AppConfig","Gallery","GalleryAlbum","Dialog","$rootScope","PhotoService","Loading","ParseFile","$translate","Toast","$ionicModal","$ionicPopover"],
angular.module("starter").directive("albumPhotoGrid",e)}(),function(){"use strict";function e(e){function t(e,t){t.bind("click",function(){var e="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=FAW4JZS7KJM5S";window.cordova?cordova.ThemeableBrowser.open(e,"_blank",{statusbar:{color:"#ffffffff"},toolbar:{height:44,color:"#f0f0f0ff"},title:{color:"#333333",showPageTitle:!0},closeButton:{image:"close",imagePressed:"close_pressed",align:"left",event:"closePressed"},backButtonCanClose:!0}):window.open(e,"_blank")})}return{restrict:"A",link:t}}e.$inject=["$cordovaInAppBrowser"],angular.module("starter").directive("buy",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{targetModel:"=compareTo"},require:"ngModel",link:function(e,t,n,o){var r=function(){var n=t.val(),o=e.targetModel;return null!==o?n===o:!1};e.$watch(r,function(e){o.$setValidity("errorCompareTo",e)})}}}angular.module("starter").directive("compareTo",e)}(),function(){"use strict";function e(e,t){function n(n,o,r){o.bind("click",function(){n.storage=e,n.distances=[{val:.2,text:"perto"},{val:.6,text:"longe"},{val:1,text:"1 "+n.storage.unit},{val:5,text:"5 "+n.storage.unit},{val:10,text:"10 "+n.storage.unit},{val:25,text:"25 "+n.storage.unit},{val:50,text:"50 "+n.storage.unit},{val:100,text:"100 "+n.storage.unit}],t.fromTemplateUrl("app/directive/distanceModal.html",{scope:n}).then(function(e){n.modal=e,n.modal.show()}),n.onDistanceSelected=function(e){console.log("Distance",e)},n.closeDistanceModal=function(){n.modal.hide(),n.modal.remove()}})}return{restrict:"A",link:n}}e.$inject=["$localStorage","$ionicModal"],angular.module("starter").directive("distanceModal",e)}(),function(){"use strict";function e(e){function t(t,n,o,r){r.$asyncValidators.email=function(t,n){return console.log(n),n?e.validateEmail(n):void 0}}return{require:"ngModel",link:t}}e.$inject=["User"],angular.module("starter").directive("emailValidator",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u){function d(t,n,d){function p(){console.log("Facebook login"),t.loading=!0,a.logIn().then(function(n){if(console.log(n),e.start(),"connected"===n.status){var d=null;return a.me().then(function(e){return d=e,l.findByEmail(e.email)}).then(function(e){if(!e.id)return l.signInViaFacebook(n);if(e.get("authData")){if(e.get("authData").facebook.id===d.id)return l.signInViaFacebook(n)}else c.tempUser=e,o.go("user.merge",{clear:!0})}).then(function(){return l.updateWithFacebookData(d)}).then(function(t){t?(c.currentUser=t,o.go(i.routes.home,{clear:!0}),console.log(t,t.attributes),c.$broadcast("onUserLogged"),e.end(),u.alert({text:r.instant("loggedInAsText")+" "+t.get("email")})):console.log("Error ")},function(n){s.alert(n),e.end(),t.loading=!1})}})["catch"](function(n){console.log("err",n),e.end(),t.loading=!1})}t.facebookStatus=null,n.bind("click",p)}return{restrict:"E",link:d,template:'<button class="button button-block button-facebook"><i class="icon ion-social-facebook"></i> <ion-spinner ng-if="loading"></ion-spinner> <span ng-if="!loading">{{ me.name || \'loginWithFacebook\'| translate}}</span> </button>'}}e.$inject=["Loading","$q","$ionicPlatform","$state","$translate","AppConfig","Facebook","Dialog","User","$rootScope","Toast"],angular.module("starter").directive("facebookLogin",e)}(),function(){"use strict";function e(e,t){return{restrict:"A",link:function(n,o,r){function i(){e(function(){o[0].focus(),o[0].click(),window.cordova&&cordova.plugins.Keyboard.show()},750)}t.$on("openKeyboard",i),i()}}}e.$inject=["$timeout","$rootScope"],angular.module("starter").directive("focusMe",e)}(),function(){"use strict";function e(e,t,n,o,r){function i(i,a,s){function l(){function a(){i.loading||(i.loading=!0,o.list(i.params).then(function(e){console.log(e),e.length>0?(i.params.page++,e.map(function(e){i.data.push(e)})):(0===i.data.length&&(i.showEmptyView=!0),i.moreDataCanBeLoaded=!1),i.loading=!1,r.$broadcast("scroll.infiniteScrollComplete"),r.$broadcast("scroll.refreshComplete")})["catch"](function(e){0===i.data.length&&(i.showErrorView=!0),i.$broadcast("scroll.refreshComplete")}))}function s(){i.params={},i.params.page=1,i.data=[],i.moreDataCanBeLoaded=!0,i.loading=!1,i.canEdit&&i.data.push({create:!0})}var l=n.defer();return i.loading=!0,i.theme=t.theme,s(),a(),i.onLoadMore=function(){a()},i.onReload=function(){s(),a(),i.$broadcast("scroll.refreshComplete")},e.fromTemplateUrl("app/directive/galleryAlbumModalDirective.html",{scope:i,focusFirstInput:!0}).then(function(e){i.modal=e,i.modal.show()}),r.$on("selectAlbum",function(e,t){console.log("selectAlbum",e),console.log("selectAlbum",t),i.ngModel=t,i.closeModal()}),i.closeModal=function(){i.modal.hide()},i.$on("$destroy",function(){i.modal.remove()}),i.selectAlbum=function(e){i.ngModel=e,i.closeModal()},l.promise}a.bind("click",l)}return{restrict:"A",link:i,scope:{ngModel:"="}}}e.$inject=["$ionicModal","AppConfig","$q","GalleryAlbum","$rootScope"],angular.module("starter").directive("galleryAlbumModal",e)}(),function(){"use strict";function e(e,t,n,o){function r(r,i,a){function s(){var i=t.defer();return r.form={title:"",description:""},e.fromTemplateUrl("app/directive/galleryNewAlbumModalDirective.html",{scope:r,focusFirstInput:!0}).then(function(e){r.modal=e,r.modal.show()}),r.createAlbum=function(e,t){console.log(e,t),e.$valid&&o.create(angular.copy(t)).then(function(e){console.log("album created",e),r.ngModel=e,r.closeModal(),n.$emit("selectAlbum",e),n.$emit("albumGrid:reload",e)})},r.closeModal=function(){r.modal.hide()},r.$on("$destroy",function(){r.modal.remove()}),r.selectAlbum=function(e){r.ngModel=e,r.closeModal()},i.promise}i.bind("click",s)}return{restrict:"A",link:r,scope:{ngModel:"="}}}e.$inject=["$ionicModal","$q","$rootScope","GalleryAlbum"],angular.module("starter").directive("galleryNewAlbumModal",e)}(),function(){"use strict";function e(){function e(e,t,n){t.bind("click",function(){console.log(e.item),t.addClass("happy")})}return{restrict:"A",scope:{item:"="},link:e}}angular.module("starter").directive("heart",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{icon:"@",loading:"="},template:'<div class="padding text-center loading" ng-show="loading"><ion-spinner icon="{{ icon }}"></ion-spinner></div>'}}function t(e,t){e.$on("ionicLoading:true",function(n){e.loading=!0,t.show(n)}),e.$on("ionicLoading:false",function(){e.loading=!1,t.hide()})}function n(e,t,n){function o(n){window.cordova?t.showSimple():e.$broadcast("ionicLoading:true",n)}function r(){n(function(){window.cordova?t.hide():e.$broadcast("ionicLoading:false")},parseInt(i+"000"))}var i=0;return{start:o,end:r}}t.$inject=["$rootScope","$ionicLoading"],n.$inject=["$rootScope","$cordovaProgress","$timeout"],angular.module("starter").directive("ionLoading",e).run(t).factory("Loading",n)}(),function(){"use strict";function e(){return{restrict:"E",scope:{loading:"=",icon:"@"},template:'<div class="padding text-center loading" ng-show="loading"><ion-spinner icon="{{ icon }}"></ion-spinner></div>'}}angular.module("starter").directive("loading",e)}(),function(){"use strict";function e(e,t,n,o,r,i){function a(e,a,s){function l(){e.galleries=[],f(),h();var t={latitude:-18.8800397,longitude:-47.05878999999999},n={center:u(t),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};e.map=new google.maps.Map(document.getElementById("map_canvas"),n)}function c(){r.getCurrentPosition().then(function(t){console.log(t),e.params.location={latitude:t.coords.latitude,longitude:t.coords.longitude};var n={position:u(e.params.location),title:"I am here",id:0};d(n),e.map.setCenter(u(e.params.location)),m()},function(t){e.params.location=null;var n;n=1===t.code||3===t.code?"errorGpsDisabledText":"errorLocationMissingText",i.alert(n)})}function u(e){return e?new google.maps.LatLng(e.latitude,e.longitude):void 0}function d(t){var n={id:t.id,map:e.map,position:t.position,title:t.title,animation:google.maps.Animation.DROP};if(t.icon){var o=40;n.icon={url:t.icon,size:new google.maps.Size(o,o),scaledSize:new google.maps.Size(o,o),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(o/4,o/4)}}var r=new google.maps.Marker(n);google.maps.event.addListener(r,"click",function(){console.log(t.username)}),g.push(r),new MarkerClusterer(e.map,g,{imagePath:"../img/m"}),v.extend(t.position),e.map.fitBounds(v)}function p(t){e.galleries=t,t.map(function(t){if(t.location){var n={map:e.map,id:t.id,position:u(t.location),title:t.title,image:t.image.url(),icon:t.imageThumb.url()};d(n)}})}function m(){e.loading=!0,o.feed(e.params).then(function(t){t.length>0?p(t):i.alert("galleriesNotFoundText"),e.loading=!1},function(){n.show("errorText")})}function f(){e.galleries=[]}function h(){g.map(function(e){e.setMap(null)}),g=[]}var g=[],v=new google.maps.LatLngBounds;e.maxRating=5,e.storage=t,e.galleries=[],e.params={location:null,distance:100,page:1,limit:10,username:e.username},e.loading=!0,e.map,l(),c(),e.onSearchHere=function(){e.params.location.latitude=e.map.getCenter().lat(),e.params.location.longitude=e.map.getCenter().lng(),f(),h(),m()},e.onGalleryClicked=function(e){console.log(e)}}return{restrict:"E",link:a,scope:{username:"=",load:"=",onReload:"="},templateUrl:"app/directive/mapPhotoUserDirective.html"}}e.$inject=["$state","$localStorage","Toast","Gallery","Geolocation","Dialog"],angular.module("starter").directive("mapPhotoUser",e)}(),function(){"use strict";function e(e,t,n){var o=t.path;return{restrict:"A",scope:{user:"="},link:function(t,r,i){function a(){e.fromTemplateUrl(o+"/directive/follow/photogram.follow.modal.html",{scope:t}).then(function(e){t.modalFollow=e,console.log("Open modal follow",t.user),n.getFollow(t.user).then(function(e){console.log(e),t.data=e,t.modalFollow.show()})})}function s(){t.modalFollow.hide(),t.modalFollow.remove()}r.bind("click",a),t.closeModal=s}}}e.$inject=["$ionicModal","AppConfig","Photogram"],angular.module("starter").directive("photogramFollow",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u){return{restrict:"A",scope:{ngModel:"="},link:function(d,p){function m(){d.currentUser=Parse.User.current(),d.nocomments=!1,d.loading=!1,d.form={gallery:d.ngModel.galleryObj,text:""}}function f(){console.log(d.ngModel),m(),d.loading=!0,d.submitComment=b,d.deleteComment=h,d.editComment=g,d.closeModal=function(){d.modal.hide(),d.modal.remove()},v(),d.myIndexValue="5",d.searchPeople=function(e){var t=[];return a.getFollowing().then(function(o){return _.each(o,function(n){n.imageUrl=n.photo?n.photo._url:"img/user.png",n.bio=n.status,n.name.toUpperCase().indexOf(e.toUpperCase())>=0&&t.push(n)}),d.people=t,console.log(t),n.when(t)})},d.getPeopleTextRaw=function(e){return"@"+e.username},e.fromTemplateUrl("app/directive/photoCommentDirective.html",{scope:d,focusFirstInput:!0}).then(function(e){d.modal=e,d.modal.show()})}function h(e){console.log(e),s.confirm("Delete comment","You are sure?").then(function(t){console.log(t),t&&u.destroy(e).then(function(e){console.log(e),v()})})}function g(e){console.log(e),d.data=angular.copy(e),i.show({template:'<input type="text" ng-model="data.text">',title:"Edit comment",scope:scope,buttons:[{text:"Cancel"},{text:"<b>OK</b>",type:"button-positive",onTap:function(e){return console.log(d.data),d.data.text?d.data:void e.preventDefault()}}]}).then(function(e){console.log(e),e&&u.update(e).then(function(e){console.log(e),v()})})}function v(){d.loading=!0,c.comments({galleryId:d.ngModel.id}).then(function(e){d.comments=e,d.ngModel.comments=e,d.loading=!1,t(function(){o.scrollBottom()},1)})}function b(e,t){if(e.$valid){var n=angular.copy(t);console.log(n),r.start(),u.create(n).then(function(e){console.log(e),v(),l.$emit("openKeyboard"),r.end(),d.closeModal()})}}p.bind("click",f)}}}e.$inject=["$ionicModal","$timeout","$q","$ionicScrollDelegate","Loading","$ionicPopup","User","Dialog","$rootScope","Gallery","GalleryComment"],angular.module("starter").directive("photoComment",e)}(),function(){"use strict";function e(e,t,n,o,r,i){function a(a,s,l){function c(){a.loading||(a.loading=!0,e.feed(a.params).then(function(e){console.log(e),e.length>0?(a.params.page++,e.map(function(e){a.data.push(e)})):(0===a.data.length&&(a.showEmptyView=!0),a.moreDataCanBeLoaded=!1),a.loading=!1,t.$broadcast("scroll.infiniteScrollComplete"),t.$broadcast("scroll.refreshComplete")})["catch"](function(){0===a.data.length&&(a.showErrorView=!0),a.$broadcast("scroll.refreshComplete")}))}function u(){a.params={},a.params.page=1,a.data=[],a.loading=!1,a.moreDataCanBeLoaded=!0,a.showEmptyView=!1,a.showErrorView=!1,a.canEdit&&a.data.push({create:!0})}u(),a.username&&(a.params.username=a.username),t.$on("photoInclude",function(e,t){t.objectId&&(t.id=t.objectId),a.data.unshift(t)}),t.$on("gallery:search",function(e,t){console.log(e,t),a.params.search=t.text,a.onReload()}),c(),a.onLoadMore=function(){c()},a.onReload=function(){u(),c(),a.$broadcast("scroll.refreshComplete")},a.action=function(t){function s(i){switch(i){case 0:o.share(u);break;case 1:r.modal(t);break;case 2:n.confirm({title:"Delete photo",template:"Are you sure?"}).then(function(n){n&&e.destroy(t).then(function(){console.log("Photo deleted"),a.$emit("PhotogramHome:reload")})})}return!0}var l=[{text:'<i class="icon ion-share"></i>Share'},{text:'<i class="icon ion-alert-circled"></i>Report'}];if(console.log(t),Parse.User.current().id===t.user_id){var c={text:'<i class="icon ion-trash-b"></i>Delete your photo'};l.push(c)}var u={text:t.title,image:t.img},d={buttons:l,titleText:"Photo",cancelText:"Cancel",buttonClicked:s};i.show(d)}}return{restrict:"E",scope:{username:"=",user:"=",profile:"=",onReload:"="},templateUrl:"app/directive/photoGridDirective.html",link:a}}e.$inject=["Gallery","$rootScope","$ionicPopup","Share","FeedbackModal","$ionicActionSheet"],angular.module("starter").directive("photoGrid",e)}(),function(){"use strict";function e(e){return{restrict:"A",scope:{ngModel:"="},link:function(t,n){n.bind("click",function(){var n=t.ngModel;n.progress=!0,n.liked=!n.liked,e.likeGallery({galleryId:t.ngModel.id}).then(function(e){console.log(e),n.likes=e.likes,n.progress=!1,console.log(n,e),"like"===e.action&&(t.ngModel.isLiked=!0,t.ngModel.likesTotal+=1),"unlike"===e.action&&(t.ngModel.isLiked=!1,t.ngModel.likesTotal-=1)})})}}}e.$inject=["Gallery"],angular.module("starter").directive("photoLike",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c){function u(u,d,p){function m(){u.loading||(u.loading=!0,e.feed(u.params).then(function(e){e.length>0?(u.params.page++,e.map(function(e){e.album?e.canEdit=h.id===e.album.attributes.user.id?!0:!1:e.canEdit=!1,u.data.push(e)})):(0===u.data.length&&(u.showEmptyView=!0),u.moreDataCanBeLoaded=!1),u.loading=!1,t.$broadcast("scroll.infiniteScrollComplete"),t.$broadcast("scroll.refreshComplete")})["catch"](function(e){0===u.data.length&&(u.showErrorView=!0),u.$broadcast("scroll.refreshComplete")}))}function f(){u.params.page=1,u.data=[],u.loading=!1,u.moreDataCanBeLoaded=!0,u.showEmptyView=!1,u.showErrorView=!1,u.canEdit&&u.data.push({create:!0})}u.params={},f();var h=Parse.User.current();u.username&&(u.params.username=u.username),u.id&&(u.params.id=u.id),t.$on("photoInclude",function(e,t){t.objectId&&(t.id=t.objectId),u.data.unshift(t)}),u.openComment=function(e){i.go("galleryComments",{galleryId:e})},u.share=function(e){console.log(e),a.postImage(e)},m(),u.onLoadMore=function(){m()},u.onReload=function(){f(),m(),u.$broadcast("scroll.refreshComplete")},t.$on("onUserLogged",u.onReload),u.action=function(t){function i(i){switch(i){case 0:l.modal(t.id);break;case 1:o.confirm({title:r.instant("deleteGalleryConfirmText"),template:r.instant("areSure")}).then(function(o){o&&(n.start(),e.get(t.id).then(function(t){t?e.destroy(t).then(function(){console.log("Photo deleted"),s.alert({title:"Photo",text:"Photo deleted"}),u.onReload(),n.end()}):(u.onReload(),n.end())})["catch"](function(){u.onReload(),n.end()}))})}return!0}var a=[{text:'<i class="icon ion-alert-circled"></i>'+r.instant("reportText")}];if(console.log(t),Parse.User.current().id===t.user.obj.id){var d={text:'<i class="icon ion-trash-b"></i>'+r.instant("deleteGallery")};a.push(d)}var p=({text:t.title,image:t.img},{buttons:a,cancelText:r.instant("cancelText"),buttonClicked:i});c.show(p)}}return{restrict:"E",scope:{username:"=",profile:"=",load:"=",openLikers:"=",onReload:"=",id:"="},templateUrl:"app/directive/photoListDirective.html",link:u}}e.$inject=["Gallery","$rootScope","Loading","$ionicPopup","$translate","$state","Facebook","Toast","FeedbackModal","$ionicActionSheet"],angular.module("starter").directive("photoList",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a){return{restrict:"A",scope:{user:"="},template:"",link:function(s,l){function c(){s.theme=t.theme;var e=Parse.User.current().attributes;s.form={name:e.name,email:e.email,status:e.status,photo:e.photo,username:e.username,gender:e.gender,facebook:e.facebook}}function u(){s.linkFacebook=p,s.logout=d,s.submitUpdateProfile=m,s.closeModal=f,s.currentUser=t.currentUser,c(),e.fromTemplateUrl("app/directive/profile-edit-modal.html",{scope:s}).then(function(e){s.modal=e,s.modal.show()}),s.$on("$destroy",function(){s.modal.remove()})}function d(){delete window.localStorage["Parse/myAppId/currentUser"],delete window.localStorage["Parse/myAppId/installationId"],o.$reset({}),a.go("user.intro",{clear:!0}),s.closeModal()}function p(){r.facebookLink().then(function(e){console.log(e)})}function m(){var e=angular.copy(s.form);i.start();var o=Parse.User.current().username;o!=e.username&&(n.unsubscribe(o),n.subscribe(o)),r.update(e).then(function(e){s.user=e,t.currentUser=e,i.end(),s.closeModal()})}function f(){s.modal.hide()}l.bind("click",u)}}}e.$inject=["$ionicModal","$rootScope","ParsePush","$localStorage","User","Loading","$state"],angular.module("starter").directive("profileModalEdit",e)}(),function(){"use strict";function e(e,t){function n(n,o){function r(){console.log(n.user.attributes),e.fromTemplateUrl("app/directive/profile-modal.html",{scope:n}).then(function(e){function o(){n.loadingFollow=!0;var e;e=n.user.follow?!1:!0,t.follow(n.user.userObj.id).then(function(e){console.log("Follow result",e),n.user.isFollow="follow"===e?!0:!1,"follow"==e&&(n.user.followersTotal+=1),"unfollow"==e&&(n.user.followersTotal-=1),n.loadingFollow=!1})}function r(){delete n.data,n.modalProfile.hide()}n.modalProfile=e,n.loadingFollow=!0,n.changeTab=i,n.follow=o,n.closeModal=r,n.modalProfile.show(),i("list")}),n.$on("$destroy",function(){n.modalProfile.remove()})}function i(e){"list"===e?n.tab={list:!0,grid:!1}:n.tab={list:!1,grid:!0}}o.bind("click",function(){console.log(n.username),t.profile(n.username).then(function(e){console.log(e),n.user=e,r()})})}return{restrict:"A",scope:{username:"="},link:n}}e.$inject=["$ionicModal","User"],angular.module("starter").directive("profileModal",e)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{getData:"&source",ngModel:"=?",search:"=?filter"},templateUrl:"app/module/photogram/directive/search/search-directive.html",link:function(t,n,o){function r(n){n.length>o.minLength?e(function(){t.getData({str:n}).then(function(e){t.ngModel=e})},1e3):t.ngModel=[]}o.minLength=o.minLength||0,t.placeholder=o.placeholder||"",t.clear=function(){console.log("Limpar campo"),t.input="",t.$apply()},o["class"]&&n.addClass(o["class"]),o.source&&t.$watch("search.value",r)}}}e.$inject=["$timeout"],angular.module("starter").directive("ionSearch",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s){return{restrict:"A",template:"",link:function(o,a){function l(){o.form=i.getLoggedUser(),o.languages=n.locales,o.language=t.use()}function c(){l(),e.fromTemplateUrl("app/directive/settings-modal.html",{scope:o}).then(function(e){o.modalSetting=e,o.modalSetting.show()}),o.closeSettingModal=function(){o.modalSetting.hide(),o.modalSetting.remove()},o.link=function(e){s.go(e),o.closeModal()}}a.bind("click",c),o.share=r.share,o.logout=function(){s.go(n.routes.login),o.closeSettingModal()}}}}e.$inject=["$ionicModal","$translate","AppConfig","$cordovaInAppBrowser","Share","Auth","User","$state"],angular.module("starter").directive("settingsModal",e)}(),function(){"use strict";function e(e){function t(t,n,o,r){r.$asyncValidators.username=function(t,n){return n?e.validateUsername(n):void 0}}return{require:"ngModel",restrict:"A",link:t}}e.$inject=["User"],angular.module("starter").directive("usernameValidator",e)}(),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.io=e()}}(function(){var e;return function t(e,n,o){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return r(n?n:t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){function o(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o=r(e),i=o.source,c=o.id,u=o.path,d=l[c]&&u in l[c].nsps,p=t.forceNew||t["force new connection"]||!1===t.multiplex||d;return p?(s("ignoring socket cache for %s",i),n=a(i,t)):(l[c]||(s("new io instance for %s",i),l[c]=a(i,t)),n=l[c]),n.socket(o.path)}var r=e("./url"),i=e("socket.io-parser"),a=e("./manager"),s=e("debug")("socket.io-client");t.exports=n=o;var l=n.managers={};n.protocol=i.protocol,n.connect=o,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":2,"./socket":4,"./url":5,debug:14,"socket.io-parser":40}],2:[function(e,t,n){function o(e,t){return this instanceof o?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new o(e,t)}var r=e("engine.io-client"),i=e("./socket"),a=e("component-emitter"),s=e("socket.io-parser"),l=e("./on"),c=e("component-bind"),u=e("debug")("socket.io-client:manager"),d=e("indexof"),p=e("backo2"),m=Object.prototype.hasOwnProperty;t.exports=o,o.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)m.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},o.prototype.updateSocketIds=function(){for(var e in this.nsps)m.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},a(o.prototype),o.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},o.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},o.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},o.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},o.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},o.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},o.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},o.prototype.open=o.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=l(t,"open",function(){n.onopen(),e&&e()}),i=l(t,"error",function(t){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var o=new Error("Connection error");o.data=t,e(o)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var s=setTimeout(function(){u("connect attempt timed out after %d",a),o.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(o),this.subs.push(i),this},o.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",c(this,"ondata"))),this.subs.push(l(e,"ping",c(this,"onping"))),this.subs.push(l(e,"pong",c(this,"onpong"))),this.subs.push(l(e,"error",c(this,"onerror"))),this.subs.push(l(e,"close",c(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",c(this,"ondecoded")))},o.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},o.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},o.prototype.ondata=function(e){this.decoder.add(e)},o.prototype.ondecoded=function(e){this.emit("packet",e)},o.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},o.prototype.socket=function(e){function t(){~d(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[e];if(!n){n=new i(this,e),this.nsps[e]=n;var o=this;n.on("connecting",t),n.on("connect",function(){n.id=o.engine.id}),this.autoConnect&&t()}return n},o.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},o.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var o=0;o<n.length;o++)t.engine.write(n[o],e.options);t.encoding=!1,t.processPacketQueue()}))},o.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},o.prototype.cleanup=function(){u("cleanup");for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},o.prototype.close=o.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},o.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},o.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},o.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":3,"./socket":4,backo2:8,"component-bind":11,"component-emitter":12,debug:14,"engine.io-client":16,indexof:32,"socket.io-parser":40}],3:[function(e,t,n){function o(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=o},{}],4:[function(e,t,n){function o(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var r=e("socket.io-parser"),i=e("component-emitter"),a=e("to-array"),s=e("./on"),l=e("component-bind"),c=e("debug")("socket.io-client:socket"),u=e("has-binary");t.exports=n=o;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=i.prototype.emit;i(o.prototype),o.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",l(this,"onopen")),s(e,"packet",l(this,"onpacket")),s(e,"close",l(this,"onclose"))]}},o.prototype.open=o.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},o.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},o.prototype.emit=function(e){if(d.hasOwnProperty(e))return p.apply(this,arguments),this;var t=a(arguments),n=r.EVENT;u(t)&&(n=r.BINARY_EVENT);var o={type:n,data:t};return o.options={},o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},o.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},o.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},o.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},o.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},o.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},o.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=a(arguments);c("sending ack %j",o);var i=u(o)?r.BINARY_ACK:r.ACK;t.packet({type:i,id:e,data:o})}}},o.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},o.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},o.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},o.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},o.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},o.prototype.close=o.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},o.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":3,"component-bind":11,"component-emitter":12,debug:14,"has-binary":30,"socket.io-parser":40,"to-array":43}],5:[function(e,t,n){(function(n){
function o(e,t){var o=e,t=t||n.location;null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),o=r(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var a=-1!==o.host.indexOf(":"),s=a?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+s+":"+o.port,o.href=o.protocol+"://"+s+(t&&t.port==o.port?"":":"+o.port),o}var r=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{debug:14,parseuri:38}],6:[function(e,t,n){function o(e,t,n){function o(e,r){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=n):0!==o.count||i||t(null,r)}var i=!1;return n=n||r,o.count=e,0===e?t():o}function r(){}t.exports=o},{}],7:[function(e,t,n){t.exports=function(e,t,n){var o=e.byteLength;if(t=t||0,n=n||o,e.slice)return e.slice(t,n);if(0>t&&(t+=o),0>n&&(n+=o),n>o&&(n=o),t>=o||t>=n||0===o)return new ArrayBuffer(0);for(var r=new Uint8Array(e),i=new Uint8Array(n-t),a=t,s=0;n>a;a++,s++)i[s]=r[a];return i.buffer}},{}],8:[function(e,t,n){function o(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=o,o.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},o.prototype.reset=function(){this.attempts=0},o.prototype.setMin=function(e){this.ms=e},o.prototype.setMax=function(e){this.max=e},o.prototype.setJitter=function(e){this.jitter=e}},{}],9:[function(e,t,n){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),o=0;o<e.length;o++)t[e.charCodeAt(o)]=o;n.encode=function(t){var n,o=new Uint8Array(t),r=o.length,i="";for(n=0;r>n;n+=3)i+=e[o[n]>>2],i+=e[(3&o[n])<<4|o[n+1]>>4],i+=e[(15&o[n+1])<<2|o[n+2]>>6],i+=e[63&o[n+2]];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i},n.decode=function(e){var n,o,r,i,a,s=.75*e.length,l=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var u=new ArrayBuffer(s),d=new Uint8Array(u);for(n=0;l>n;n+=4)o=t[e.charCodeAt(n)],r=t[e.charCodeAt(n+1)],i=t[e.charCodeAt(n+2)],a=t[e.charCodeAt(n+3)],d[c++]=o<<2|r>>4,d[c++]=(15&r)<<4|i>>2,d[c++]=(3&i)<<6|63&a;return u}}()},{}],10:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var o=n.buffer;if(n.byteLength!==o.byteLength){var r=new Uint8Array(n.byteLength);r.set(new Uint8Array(o,n.byteOffset,n.byteLength)),o=r.buffer}e[t]=o}}}function o(e,t){t=t||{};var o=new i;n(e);for(var r=0;r<e.length;r++)o.append(e[r]);return t.type?o.getBlob(t.type):o.getBlob()}function r(e,t){return n(e),new Blob(e,t||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,a=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),s=a&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),l=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return a?s?e.Blob:r:l?o:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],11:[function(e,t,n){var o=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=o.call(arguments,2);return function(){return t.apply(e,n.concat(o.call(arguments)))}}},{}],12:[function(e,t,n){function o(e){return e?r(e):void 0}function r(e){for(var t in o.prototype)e[t]=o.prototype[t];return e}t.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o,r=0;r<n.length;r++)if(o=n[r],o===t||o.fn===t){n.splice(r,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var o=0,r=n.length;r>o;++o)n[o].apply(this,t)}return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],13:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],14:[function(e,t,n){function o(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var o="color: "+this.color;e=[e[0],o,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,o),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function s(){var e;try{e=n.storage.debug}catch(t){}return e}function l(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=i,n.formatArgs=r,n.save=a,n.load=s,n.useColors=o,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(s())},{"./debug":15}],15:[function(e,t,n){function o(){return n.colors[u++%n.colors.length]}function r(e){function t(){}function r(){var e=r,t=+new Date,i=t-(c||t);e.diff=i,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=o());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,o){if("%%"===t)return t;s++;var r=n.formatters[o];if("function"==typeof r){var i=a[s];t=r.call(e,i),a.splice(s,1),s--}return t}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(e,a));var l=r.log||n.log||console.log.bind(console);l.apply(e,a)}t.enabled=!1,r.enabled=!0;var i=n.enabled(e)?r:t;return i.namespace=e,i}function i(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),o=t.length,r=0;o>r;r++)t[r]&&(e=t[r].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function a(){n.enable("")}function s(e){var t,o;for(t=0,o=n.skips.length;o>t;t++)if(n.skips[t].test(e))return!1;for(t=0,o=n.names.length;o>t;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=r,n.coerce=l,n.disable=a,n.enable=i,n.enabled=s,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c,u=0},{ms:35}],16:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":17}],17:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":18,"engine.io-parser":27}],18:[function(e,t,n){(function(n){function o(e,t){if(!(this instanceof o))return new o(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate?t.perMessageDeflate||{}:!1,!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?!0:t.rejectUnauthorized;var r="object"==typeof n&&n;r.global===r&&t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),this.open()}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var i=e("./transports"),a=e("component-emitter"),s=e("debug")("engine.io-client:socket"),l=e("indexof"),c=e("engine.io-parser"),u=e("parseuri"),d=e("parsejson"),p=e("parseqs");t.exports=o,o.priorWebsocketSuccess=!1,a(o.prototype),o.protocol=c.protocol,o.Socket=o,o.Transport=e("./transport"),o.transports=e("./transports"),o.parser=e("engine.io-parser"),o.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=r(this.query);t.EIO=c.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new i[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return n},o.prototype.open=function(){var e;if(this.rememberUpgrade&&o.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},o.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},o.prototype.probe=function(e){function t(){if(p.onlyBinaryUpgrades){var t=!this.supportsBinary&&p.transport.supportsBinary;d=d||t}d||(s('probe transport "%s" opened',e),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(t){if(!d)if("pong"==t.type&&"probe"==t.data){if(s('probe transport "%s" pong',e),p.upgrading=!0,p.emit("upgrading",u),!u)return;o.priorWebsocketSuccess="websocket"==u.name,s('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){d||"closed"!=p.readyState&&(s("changing transport and sending upgrade packet"),c(),p.setTransport(u),u.send([{type:"upgrade"}]),p.emit("upgrade",u),u=null,p.upgrading=!1,p.flush())})}else{s('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=u.name,p.emit("upgradeError",n)}}))}function n(){d||(d=!0,c(),u.close(),u=null)}function r(t){var o=new Error("probe error: "+t);o.transport=u.name,n(),s('probe transport "%s" failed because of error: %s',e,t),p.emit("upgradeError",o)}function i(){r("transport closed")}function a(){r("socket closed")}function l(e){u&&e.name!=u.name&&(s('"%s" works - aborting "%s"',e.name,u.name),n())}function c(){u.removeListener("open",t),u.removeListener("error",r),u.removeListener("close",i),p.removeListener("close",a),p.removeListener("upgrading",l)}s('probing transport "%s"',e);var u=this.createTransport(e,{probe:1}),d=!1,p=this;o.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",r),u.once("close",i),this.once("close",a),this.once("upgrading",l),u.open()},o.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",o.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},o.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},o.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},o.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},o.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},o.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},o.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},o.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},o.prototype.write=o.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},o.prototype.sendPacket=function(e,t,n,o){if("function"==typeof t&&(o=t,t=void 0),"function"==typeof n&&(o=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){n=n||{},n.compress=!1!==n.compress;var r={type:e,data:t,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),o&&this.once("flush",o),this.flush()}},o.prototype.close=function(){function e(){o.onClose("forced close"),s("socket closing - telling transport to close"),o.transport.close()}function t(){o.removeListener("upgrade",t),o.removeListener("upgradeError",t),e()}function n(){o.once("upgrade",t),o.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var o=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},o.prototype.onError=function(e){s("socket error %j",e),o.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},o.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),n.writeBuffer=[],n.prevBufferLen=0}},o.prototype.filterUpgrades=function(e){for(var t=[],n=0,o=e.length;o>n;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./transport":19,"./transports":20,"component-emitter":26,debug:14,"engine.io-parser":27,indexof:32,parsejson:36,parseqs:37,parseuri:38}],19:[function(e,t,n){function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}var r=e("engine.io-parser"),i=e("component-emitter");t.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":26,"engine.io-parser":27}],20:[function(e,t,n){(function(t){function o(e){var n,o=!1,s=!1,l=!1!==e.jsonp;if(t.location){var c="https:"==location.protocol,u=location.port;u||(u=c?443:80),o=e.hostname!=location.hostname||u!=e.port,s=e.secure!=c}if(e.xdomain=o,e.xscheme=s,n=new r(e),"open"in n&&!e.forceJSONP)return new i(e);if(!l)throw new Error("JSONP disabled");return new a(e)}var r=e("xmlhttprequest-ssl"),i=e("./polling-xhr"),a=e("./polling-jsonp"),s=e("./websocket");n.polling=o,n.websocket=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling-jsonp":21,"./polling-xhr":22,"./websocket":24,"xmlhttprequest-ssl":25}],21:[function(e,t,n){(function(n){function o(){}function r(e){i.call(this,e),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var t=this;s.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=o)},!1)}var i=e("./polling"),a=e("component-inherit");t.exports=r;var s,l=/\n/g,c=/\\n/g;a(r,i),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},r.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t;var o="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);o&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype.doWrite=function(e,t){function n(){o(),t()}function o(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';i=document.createElement(t)}catch(e){i=document.createElement("iframe"),i.name=r.iframeId,i.src="javascript:0"}i.id=r.iframeId,r.form.appendChild(i),r.iframe=i}var r=this;if(!this.form){var i,a=document.createElement("form"),s=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=u,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),o(),e=e.replace(c,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(d){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":23,"component-inherit":13}],22:[function(e,t,n){(function(n){function o(){}function r(e){if(l.call(this,e),n.location){var t="https:"==location.protocol,o=location.port;o||(o=t?443:80),this.xd=e.hostname!=n.location.hostname||o!=e.port,this.xs=e.secure!=t}else this.extraHeaders=e.extraHeaders}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function a(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var s=e("xmlhttprequest-ssl"),l=e("./polling"),c=e("component-emitter"),u=e("component-inherit"),d=e("debug")("engine.io-client:polling-xhr");t.exports=r,t.exports.Request=i,u(r,l),r.prototype.supportsBinary=!0,r.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new i(e)},r.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,o=this.request({method:"POST",data:e,isBinary:n}),r=this;o.on("success",t),o.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=o},r.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},c(i.prototype),i.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new s(e),o=this;try{d("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}}catch(a){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){o.onLoad()},t.onerror=function(){o.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?o.onLoad():setTimeout(function(){o.onError(t.status)},0))},d("xhr data %s",this.data),t.send(this.data)}catch(a){return void setTimeout(function(){o.onError(a)},0)}n.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},i.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=o:this.xhr.onreadystatechange=o,e)try{this.xhr.abort()}catch(t){}n.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(n){for(var o=new Uint8Array(this.xhr.response),r=[],i=0,a=o.length;a>i;i++)r.push(o[i]);e=String.fromCharCode.apply(null,r)}else e=this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},i.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},n.document&&(i.requestsCount=0,i.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":23,"component-emitter":26,"component-inherit":13,debug:14,"xmlhttprequest-ssl":25}],23:[function(e,t,n){function o(e){var t=e&&e.forceBase64;(!u||t)&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),i=e("parseqs"),a=e("engine.io-parser"),s=e("component-inherit"),l=e("yeast"),c=e("debug")("engine.io-client:polling");t.exports=o;var u=function(){var t=e("xmlhttprequest-ssl"),n=new t({xdomain:!1});return null!=n.responseType}();s(o,r),o.prototype.name="polling",o.prototype.doOpen=function(){this.poll()},o.prototype.pause=function(e){function t(){c("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(c("we are currently polling - waiting to pause"),o++,this.once("pollComplete",function(){c("pre-pause polling complete"),--o||t()})),this.writable||(c("we are currently writing - waiting to pause"),o++,this.once("drain",function(){c("pre-pause writing complete"),--o||t()}))}else t()},o.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},o.prototype.onData=function(e){var t=this;c("polling got data %s",e);var n=function(e,n,o){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};a.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},o.prototype.doClose=function(){function e(){c("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(c("transport open - closing"),e()):(c("transport not open - deferring close"),this.once("open",e))},o.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},o.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e);var o=-1!==this.hostname.indexOf(":");return t+"://"+(o?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:37,"xmlhttprequest-ssl":25,yeast:45}],24:[function(e,t,n){(function(n){function o(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,r.call(this,e)}var r=e("../transport"),i=e("engine.io-parser"),a=e("parseqs"),s=e("component-inherit"),l=e("yeast"),c=e("debug")("engine.io-client:websocket"),u=n.WebSocket||n.MozWebSocket,d=u;if(!d&&"undefined"==typeof window)try{d=e("ws")}catch(p){}t.exports=o,s(o,r),o.prototype.name="websocket",o.prototype.supportsBinary=!0,o.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.ws=u?new d(e):new d(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},o.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(o.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),o.prototype.write=function(e){function t(){o.emit("flush"),setTimeout(function(){o.writable=!0,o.emit("drain")},0)}var o=this;this.writable=!1;for(var r=e.length,a=0,s=r;s>a;a++)!function(e){i.encodePacket(e,o.supportsBinary,function(i){if(!u){var a={};if(e.options&&(a.compress=e.options.compress),o.perMessageDeflate){var s="string"==typeof i?n.Buffer.byteLength(i):i.length;s<o.perMessageDeflate.threshold&&(a.compress=!1)}}try{u?o.ws.send(i):o.ws.send(i,a)}catch(l){c("websocket closed before onclose event")}--r||t()})}(e[a])},o.prototype.onClose=function(){r.prototype.onClose.call(this)},o.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},o.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),e=a.encode(e),e.length&&(e="?"+e);var o=-1!==this.hostname.indexOf(":");return t+"://"+(o?"["+this.hostname+"]":this.hostname)+n+this.path+e},o.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===o.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"../transport":19,"component-inherit":13,debug:14,"engine.io-parser":27,parseqs:37,ws:void 0,yeast:45}],25:[function(e,t,n){var o=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||o))return new XMLHttpRequest}catch(i){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(i){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}},{"has-cors":31}],26:[function(e,t,n){function o(e){return e?r(e):void 0}function r(e){
for(var t in o.prototype)e[t]=o.prototype[t];return e}t.exports=o,o.prototype.on=o.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},o.prototype.once=function(e,t){function n(){o.off(e,n),t.apply(this,arguments)}var o=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o,r=0;r<n.length;r++)if(o=n[r],o===t||o.fn===t){n.splice(r,1);break}return this},o.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var o=0,r=n.length;r>o;++o)n[o].apply(this,t)}return this},o.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},o.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],27:[function(e,t,n){(function(t){function o(e,t){var o="b"+n.packets[e.type]+e.data.data;return t(o)}function r(e,t,o){if(!t)return n.encodeBase64Packet(e,o);var r=e.data,i=new Uint8Array(r),a=new Uint8Array(1+r.byteLength);a[0]=v[e.type];for(var s=0;s<i.length;s++)a[s+1]=i[s];return o(a.buffer)}function i(e,t,o){if(!t)return n.encodeBase64Packet(e,o);var r=new FileReader;return r.onload=function(){e.data=r.result,n.encodePacket(e,t,!0,o)},r.readAsArrayBuffer(e.data)}function a(e,t,o){if(!t)return n.encodeBase64Packet(e,o);if(g)return i(e,t,o);var r=new Uint8Array(1);r[0]=v[e.type];var a=new w([r.buffer,e.data]);return o(a)}function s(e,t,n){for(var o=new Array(e.length),r=p(e.length,n),i=function(e,n,r){t(n,function(t,n){o[e]=n,r(t,o)})},a=0;a<e.length;a++)i(a,e[a],r)}var l=e("./keys"),c=e("has-binary"),u=e("arraybuffer.slice"),d=e("base64-arraybuffer"),p=e("after"),m=e("utf8"),f=navigator.userAgent.match(/Android/i),h=/PhantomJS/i.test(navigator.userAgent),g=f||h;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=l(v),y={type:"error",data:"parser error"},w=e("blob");n.encodePacket=function(e,n,i,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof i&&(s=i,i=null);var l=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&l instanceof ArrayBuffer)return r(e,n,s);if(w&&l instanceof t.Blob)return a(e,n,s);if(l&&l.base64)return o(e,s);var c=v[e.type];return void 0!==e.data&&(c+=i?m.encode(String(e.data)):String(e.data)),s(""+c)},n.encodeBase64Packet=function(e,o){var r="b"+n.packets[e.type];if(w&&e.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];o(r+e)},i.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(s){for(var l=new Uint8Array(e.data),c=new Array(l.length),u=0;u<l.length;u++)c[u]=l[u];a=String.fromCharCode.apply(null,c)}return r+=t.btoa(a),o(r)},n.decodePacket=function(e,t,o){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(o)try{e=m.decode(e)}catch(r){return y}var i=e.charAt(0);return Number(i)==i&&b[i]?e.length>1?{type:b[i],data:e.substring(1)}:{type:b[i]}:y}var a=new Uint8Array(e),i=a[0],s=u(e,1);return w&&"blob"===t&&(s=new w([s])),{type:b[i],data:s}},n.decodeBase64Packet=function(e,n){var o=b[e.charAt(0)];if(!t.ArrayBuffer)return{type:o,data:{base64:!0,data:e.substr(1)}};var r=d.decode(e.substr(1));return"blob"===n&&w&&(r=new w([r])),{type:o,data:r}},n.encodePayload=function(e,t,o){function r(e){return e.length+":"+e}function i(e,o){n.encodePacket(e,a?t:!1,!0,function(e){o(null,r(e))})}"function"==typeof t&&(o=t,t=null);var a=c(e);return t&&a?w&&!g?n.encodePayloadAsBlob(e,o):n.encodePayloadAsArrayBuffer(e,o):e.length?void s(e,i,function(e,t){return o(t.join(""))}):o("0:")},n.decodePayload=function(e,t,o){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,o);"function"==typeof t&&(o=t,t=null);var r;if(""==e)return o(y,0,1);for(var i,a,s="",l=0,c=e.length;c>l;l++){var u=e.charAt(l);if(":"!=u)s+=u;else{if(""==s||s!=(i=Number(s)))return o(y,0,1);if(a=e.substr(l+1,i),s!=a.length)return o(y,0,1);if(a.length){if(r=n.decodePacket(a,t,!0),y.type==r.type&&y.data==r.data)return o(y,0,1);var d=o(r,l+i,c);if(!1===d)return}l+=i,s=""}}return""!=s?o(y,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function o(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void s(e,o,function(e,n){var o=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),r=new Uint8Array(o),i=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var o=new Uint8Array(e.length),a=0;a<e.length;a++)o[a]=e.charCodeAt(a);n=o.buffer}t?r[i++]=0:r[i++]=1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)r[i++]=parseInt(s[a]);r[i++]=255;for(var o=new Uint8Array(n),a=0;a<o.length;a++)r[i++]=o[a]}),t(r.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function o(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var o=new Uint8Array(e.length),r=0;r<e.length;r++)o[r]=e.charCodeAt(r);e=o.buffer,n[0]=0}for(var i=e instanceof ArrayBuffer?e.byteLength:e.size,a=i.toString(),s=new Uint8Array(a.length+1),r=0;r<a.length;r++)s[r]=parseInt(a[r]);if(s[a.length]=255,w){var l=new w([n.buffer,s.buffer,e]);t(null,l)}})}s(e,o,function(e,n){return t(new w(n))})},n.decodePayloadAsBinary=function(e,t,o){"function"==typeof t&&(o=t,t=null);for(var r=e,i=[],a=!1;r.byteLength>0;){for(var s=new Uint8Array(r),l=0===s[0],c="",d=1;255!=s[d];d++){if(c.length>310){a=!0;break}c+=s[d]}if(a)return o(y,0,1);r=u(r,2+c.length),c=parseInt(c);var p=u(r,0,c);if(l)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(m){var f=new Uint8Array(p);p="";for(var d=0;d<f.length;d++)p+=String.fromCharCode(f[d])}i.push(p),r=u(r,c)}var h=i.length;i.forEach(function(e,r){o(n.decodePacket(e,t,!0),r,h)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./keys":28,after:6,"arraybuffer.slice":7,"base64-arraybuffer":9,blob:10,"has-binary":29,utf8:44}],28:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var o in e)n.call(e,o)&&t.push(o);return t}},{}],29:[function(e,t,n){(function(n){function o(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(r(e)){for(var o=0;o<e.length;o++)if(t(e[o]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0}return!1}return t(e)}var r=e("isarray");t.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:33}],30:[function(e,t,n){(function(n){function o(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(r(e)){for(var o=0;o<e.length;o++)if(t(e[o]))return!0}else if(e&&"object"==typeof e){e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON());for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return!0}return!1}return t(e)}var r=e("isarray");t.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:33}],31:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(o){t.exports=!1}},{}],32:[function(e,t,n){var o=[].indexOf;t.exports=function(e,t){if(o)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],33:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],34:[function(t,n,o){(function(t){(function(){function r(e,t){function n(e){if(n[e]!==g)return n[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=t.stringify,u="function"==typeof l&&y;if(u){(a=function(){return 1}).toJSON=a;try{u="0"===l(0)&&"0"===l(new o)&&'""'==l(new i)&&l(b)===g&&l(g)===g&&l()===g&&"1"===l(a)&&"[1]"==l([a])&&"[null]"==l([g])&&"null"==l(null)&&"[null,null,null]"==l([g,b,null])&&l({a:[a,!0,!1,null,"\x00\b\n\f\r	"]})==s&&"1"===l(null,a)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new c(-1))}catch(d){u=!1}}r=u}if("json-parse"==e){var p=t.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){a=p(s);var m=5==a.a.length&&1===a.a[0];if(m){try{m=!p('"	"')}catch(d){}if(m)try{m=1!==p("01")}catch(d){}if(m)try{m=1!==p("1.")}catch(d){}}}}catch(d){m=!1}r=m}}return n[e]=!!r}e||(e=l.Object()),t||(t=l.Object());var o=e.Number||l.Number,i=e.String||l.String,s=e.Object||l.Object,c=e.Date||l.Date,u=e.SyntaxError||l.SyntaxError,d=e.TypeError||l.TypeError,p=e.Math||l.Math,m=e.JSON||l.JSON;"object"==typeof m&&m&&(t.stringify=m.stringify,t.parse=m.parse);var f,h,g,v=s.prototype,b=v.toString,y=new c(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(w){}if(!n("json")){var k="[object Function]",x="[object Date]",C="[object Number]",P="[object String]",A="[object Array]",T="[object Boolean]",_=n("bug-string-char-index");if(!y)var M=p.floor,$=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(e,t){return $[t]+365*(e-1970)+M((e-1969+(t=+(t>1)))/4)-M((e-1901+t)/100)+M((e-1601+t)/400)};if((f=v.hasOwnProperty)||(f=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=b?f=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,f=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,f.call(this,e)}),h=function(e,t){var n,o,r,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n;for(r in o)f.call(o,r)&&i++;return n=o=null,i?h=2==i?function(e,t){var n,o={},r=b.call(e)==k;for(n in e)r&&"prototype"==n||f.call(o,n)||!(o[n]=1)||!f.call(e,n)||t(n)}:function(e,t){var n,o,r=b.call(e)==k;for(n in e)r&&"prototype"==n||!f.call(e,n)||(o="constructor"===n)||t(n);(o||f.call(e,n="constructor"))&&t(n)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],h=function(e,t){var n,r,i=b.call(e)==k,s=!i&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||f;for(n in e)i&&"prototype"==n||!s.call(e,n)||t(n);for(r=o.length;n=o[--r];s.call(e,n)&&t(n));}),h(e,t)},!n("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},j="000000",L=function(e,t){return(j+(t||0)).slice(-e)},U="\\u00",F=function(e){for(var t='"',n=0,o=e.length,r=!_||o>10,i=r&&(_?e.split(""):e);o>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=E[a];break;default:if(32>a){t+=U+L(2,a.toString(16));break}t+=r?i[n]:e.charAt(n)}}return t+'"'},O=function(e,t,n,o,r,i,a){var s,l,c,u,p,m,v,y,w,k,_,$,E,j,U,I;try{s=t[e]}catch(R){}if("object"==typeof s&&s)if(l=b.call(s),l!=x||f.call(s,"toJSON"))"function"==typeof s.toJSON&&(l!=C&&l!=P&&l!=A||f.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&1/0>s){if(S){for(p=M(s/864e5),c=M(p/365.2425)+1970-1;S(c+1,0)<=p;c++);for(u=M((p-S(c,0))/30.42);S(c,u+1)<=p;u++);p=1+p-S(c,u),m=(s%864e5+864e5)%864e5,v=M(m/36e5)%24,y=M(m/6e4)%60,w=M(m/1e3)%60,k=m%1e3}else c=s.getUTCFullYear(),u=s.getUTCMonth(),p=s.getUTCDate(),v=s.getUTCHours(),y=s.getUTCMinutes(),w=s.getUTCSeconds(),k=s.getUTCMilliseconds();s=(0>=c||c>=1e4?(0>c?"-":"+")+L(6,0>c?-c:c):L(4,c))+"-"+L(2,u+1)+"-"+L(2,p)+"T"+L(2,v)+":"+L(2,y)+":"+L(2,w)+"."+L(3,k)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if(l=b.call(s),l==T)return""+s;if(l==C)return s>-1/0&&1/0>s?""+s:"null";if(l==P)return F(""+s);if("object"==typeof s){for(j=a.length;j--;)if(a[j]===s)throw d();if(a.push(s),_=[],U=i,i+=r,l==A){for(E=0,j=s.length;j>E;E++)$=O(E,s,n,o,r,i,a),_.push($===g?"null":$);I=_.length?r?"[\n"+i+_.join(",\n"+i)+"\n"+U+"]":"["+_.join(",")+"]":"[]"}else h(o||s,function(e){var t=O(e,s,n,o,r,i,a);t!==g&&_.push(F(e)+":"+(r?" ":"")+t)}),I=_.length?r?"{\n"+i+_.join(",\n"+i)+"\n"+U+"}":"{"+_.join(",")+"}":"{}";return a.pop(),I}};t.stringify=function(e,t,n){var o,r,i,s;if(a[typeof t]&&t)if((s=b.call(t))==k)r=t;else if(s==A){i={};for(var l,c=0,u=t.length;u>c;l=t[c++],s=b.call(l),(s==P||s==C)&&(i[l]=1));}if(n)if((s=b.call(n))==C){if((n-=n%1)>0)for(o="",n>10&&(n=10);o.length<n;o+=" ");}else s==P&&(o=n.length<=10?n:n.slice(0,10));return O("",(l={},l[""]=e,l),r,i,o,"",[])}}if(!n("json-parse")){var I,R,D=i.fromCharCode,B={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},q=function(){throw I=R=null,u()},N=function(){for(var e,t,n,o,r,i=R,a=i.length;a>I;)switch(r=i.charCodeAt(I)){case 9:case 10:case 13:case 32:I++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=_?i.charAt(I):i[I],I++,e;case 34:for(e="@",I++;a>I;)if(r=i.charCodeAt(I),32>r)q();else if(92==r)switch(r=i.charCodeAt(++I)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=B[r],I++;break;case 117:for(t=++I,n=I+4;n>I;I++)r=i.charCodeAt(I),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||q();e+=D("0x"+i.slice(t,I));break;default:q()}else{if(34==r)break;for(r=i.charCodeAt(I),t=I;r>=32&&92!=r&&34!=r;)r=i.charCodeAt(++I);e+=i.slice(t,I)}if(34==i.charCodeAt(I))return I++,e;q();default:if(t=I,45==r&&(o=!0,r=i.charCodeAt(++I)),r>=48&&57>=r){for(48==r&&(r=i.charCodeAt(I+1),r>=48&&57>=r)&&q(),o=!1;a>I&&(r=i.charCodeAt(I),r>=48&&57>=r);I++);if(46==i.charCodeAt(I)){for(n=++I;a>n&&(r=i.charCodeAt(n),r>=48&&57>=r);n++);n==I&&q(),I=n}if(r=i.charCodeAt(I),101==r||69==r){for(r=i.charCodeAt(++I),(43==r||45==r)&&I++,n=I;a>n&&(r=i.charCodeAt(n),r>=48&&57>=r);n++);n==I&&q(),I=n}return+i.slice(t,I)}if(o&&q(),"true"==i.slice(I,I+4))return I+=4,!0;if("false"==i.slice(I,I+5))return I+=5,!1;if("null"==i.slice(I,I+4))return I+=4,null;q()}return"$"},z=function(e){var t,n;if("$"==e&&q(),"string"==typeof e){if("@"==(_?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=N(),"]"!=e;n||(n=!0))n&&(","==e?(e=N(),"]"==e&&q()):q()),","==e&&q(),t.push(z(e));return t}if("{"==e){for(t={};e=N(),"}"!=e;n||(n=!0))n&&(","==e?(e=N(),"}"==e&&q()):q()),(","==e||"string"!=typeof e||"@"!=(_?e.charAt(0):e[0])||":"!=N())&&q(),t[e.slice(1)]=z(N());return t}q()}return e},G=function(e,t,n){var o=H(e,t,n);o===g?delete e[t]:e[t]=o},H=function(e,t,n){var o,r=e[t];if("object"==typeof r&&r)if(b.call(r)==A)for(o=r.length;o--;)G(r,o,n);else h(r,function(e){G(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,o;return I=0,R=""+e,n=z(N()),"$"!=N()&&q(),I=R=null,t&&b.call(t)==k?H((o={},o[""]=n,o),"",t):n}}}return t.runInContext=r,t}var i="function"==typeof e&&e.amd,a={"function":!0,object:!0},s=a[typeof o]&&o&&!o.nodeType&&o,l=a[typeof window]&&window||this,c=s&&a[typeof n]&&n&&!n.nodeType&&"object"==typeof t&&t;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(l=c),s&&!i)r(l,s);else{var u=l.JSON,d=l.JSON3,p=!1,m=r(l,l.JSON3={noConflict:function(){return p||(p=!0,l.JSON=u,l.JSON3=d,u=d=null),m}});l.JSON={parse:m.parse,stringify:m.stringify}}i&&e(function(){return m})}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],35:[function(e,t,n){function o(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),o=(t[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return n*d;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*l;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=l?Math.round(e/l)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return a(e,u,"day")||a(e,c,"hour")||a(e,l,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,l=60*s,c=60*l,u=24*c,d=365.25*u;t.exports=function(e,t){return t=t||{},"string"==typeof e?o(e):t["long"]?i(e):r(e)}},{}],36:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(o,"@").replace(r,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],37:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),o=0,r=n.length;r>o;o++){var i=n[o].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},{}],38:[function(e,t,n){var o=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));for(var a=o.exec(e||""),s={},l=14;l--;)s[r[l]]=a[l]||"";return-1!=n&&-1!=i&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],39:[function(e,t,n){(function(t){var o=e("isarray"),r=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(r(e)){var i={_placeholder:!0,num:n.length};return n.push(e),i}if(o(e)){for(var a=new Array(e.length),s=0;s<e.length;s++)a[s]=t(e[s]);return a}if("object"==typeof e&&!(e instanceof Date)){var a={};for(var l in e)a[l]=t(e[l]);return a}return e}var n=[],i=e.data,a=e;return a.data=t(i),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var r=t[e.num];return r}if(o(e)){for(var i=0;i<e.length;i++)e[i]=n(e[i]);return e}if(e&&"object"==typeof e){for(var a in e)e[a]=n(e[a]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function i(e,l,c){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var u=new FileReader;u.onload=function(){c?c[l]=this.result:s=this.result,--a||n(s)},u.readAsArrayBuffer(e)}else if(o(e))for(var d=0;d<e.length;d++)i(e[d],d,e);else if(e&&"object"==typeof e&&!r(e))for(var p in e)i(e[p],p,e)}var a=0,s=e;i(s),a||n(s)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./is-buffer":41,isarray:33}],40:[function(e,t,n){function o(){}function r(e){var t="",o=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(o=!0,t+=e.nsp),null!=e.id&&(o&&(t+=",",o=!1),t+=e.id),null!=e.data&&(o&&(t+=","),t+=d.stringify(e.data)),u("encoded %j as %s",e,t),t}function i(e,t){function n(e){var n=m.deconstructPacket(e),o=r(n.packet),i=n.buffers;i.unshift(o),t(i)}m.removeBlobs(e,n)}function a(){this.reconstructor=null}function s(e){var t={},o=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return c();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var r="";"-"!=e.charAt(++o)&&(r+=e.charAt(o),o!=e.length););if(r!=Number(r)||"-"!=e.charAt(o))throw new Error("Illegal attachments");t.attachments=Number(r)}if("/"==e.charAt(o+1))for(t.nsp="";++o;){var i=e.charAt(o);if(","==i)break;if(t.nsp+=i,o==e.length)break}else t.nsp="/";var a=e.charAt(o+1);if(""!==a&&Number(a)==a){for(t.id="";++o;){var i=e.charAt(o);if(null==i||Number(i)!=i){--o;break}if(t.id+=e.charAt(o),o==e.length)break}t.id=Number(t.id)}if(e.charAt(++o))try{t.data=d.parse(e.substr(o))}catch(s){return c()}return u("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:n.ERROR,data:"parser error"}}var u=e("debug")("socket.io-parser"),d=e("json3"),p=(e("isarray"),e("component-emitter")),m=e("./binary"),f=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=o,n.Decoder=a,o.prototype.encode=function(e,t){if(u("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)i(e,t);else{var o=r(e);t([o])}},p(a.prototype),a.prototype.add=function(e){var t;if("string"==typeof e)t=s(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new l(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!f(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=m.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":39,"./is-buffer":41,"component-emitter":42,debug:14,isarray:33,json3:34}],41:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],42:[function(e,t,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],43:[function(e,t,n){function o(e,t){var n=[];t=t||0;for(var o=t||0;o<e.length;o++)n[o-t]=e[o];return n}t.exports=o},{}],44:[function(t,n,o){(function(t){!function(r){function i(e){for(var t,n,o=[],r=0,i=e.length;i>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&i>r?(n=e.charCodeAt(r++),56320==(64512&n)?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),r--)):o.push(t);return o}function a(e){for(var t,n=e.length,o=-1,r="";++o<n;)t=e[o],t>65535&&(t-=65536,r+=w(t>>>10&1023|55296),t=56320|1023&t),r+=w(t);return r}function s(e){if(e>=55296&&57343>=e)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function l(e,t){return w(e>>t&63|128)}function c(e){if(0==(4294967168&e))return w(e);var t="";return 0==(4294965248&e)?t=w(e>>6&31|192):0==(4294901760&e)?(s(e),t=w(e>>12&15|224),t+=l(e,6)):0==(4292870144&e)&&(t=w(e>>18&7|240),t+=l(e,12),t+=l(e,6)),t+=w(63&e|128)}function u(e){for(var t,n=i(e),o=n.length,r=-1,a="";++r<o;)t=n[r],a+=c(t);return a}function d(){if(y>=b)throw Error("Invalid byte index");var e=255&v[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(){var e,t,n,o,r;if(y>b)throw Error("Invalid byte index");if(y==b)return!1;if(e=255&v[y],y++,0==(128&e))return e;if(192==(224&e)){var t=d();if(r=(31&e)<<6|t,r>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=d(),n=d(),r=(15&e)<<12|t<<6|n,r>=2048)return s(r),r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=d(),n=d(),o=d(),r=(15&e)<<18|t<<12|n<<6|o,r>=65536&&1114111>=r))return r;throw Error("Invalid UTF-8 detected")}function m(e){v=i(e),b=v.length,y=0;for(var t,n=[];(t=p())!==!1;)n.push(t);return a(n)}var f="object"==typeof o&&o,h="object"==typeof n&&n&&n.exports==f&&n,g="object"==typeof t&&t;(g.global===g||g.window===g)&&(r=g);var v,b,y,w=String.fromCharCode,k={version:"2.0.0",encode:u,decode:m};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return k});else if(f&&!f.nodeType)if(h)h.exports=k;else{var x={},C=x.hasOwnProperty;for(var P in k)C.call(k,P)&&(f[P]=k[P])}else r.utf8=k}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],45:[function(e,t,n){"use strict";function o(e){var t="";do t=s[e%l]+t,e=Math.floor(e/l);while(e>0);return t}function r(e){var t=0;for(d=0;d<e.length;d++)t=t*l+c[e.charAt(d)];return t}function i(){var e=o(+new Date);return e!==a?(u=0,a=e):e+"."+o(u++)}for(var a,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),l=64,c={},u=0,d=0;l>d;d++)c[s[d]]=d;i.encode=o,i.decode=r,t.exports=i},{}]},{},[1])(1)}),angular.module("ngLocale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["domingo","segunda-feira","terÃ§a-feira","quarta-feira","quinta-feira","sexta-feira","sÃ¡bado"],ERANAMES:["Antes de Cristo","Ano do Senhor"],ERAS:["a.C.","d.C."],FIRSTDAYOFWEEK:6,MONTH:["janeiro","fevereiro","marÃ§o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],SHORTDAY:["dom","seg","ter","qua","qui","sex","sÃ¡b"],SHORTMONTH:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],STANDALONEMONTH:["janeiro","fevereiro","marÃ§o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d 'de' MMM 'de' y HH:mm:ss",mediumDate:"d 'de' MMM 'de' y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"R$",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"pt-br",pluralCat:function(e,n){return e>=0&&2>=e&&2!=e?t.ONE:t.OTHER}})}]),function(){"use strict";var e=window.moment.defineLocale("pt",{months:"Janeiro_Fevereiro_MarÃ§o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_TerÃ§a-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_SÃ¡bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_SÃ¡b".split("_"),weekdaysMin:"Dom_2Âª_3Âª_4Âª_5Âª_6Âª_SÃ¡b".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [Ã s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [Ã s] HH:mm"},calendar:{sameDay:"[Hoje Ã s] LT",nextDay:"[AmanhÃ£ Ã s] LT",nextWeek:"dddd [Ã s] LT",lastDay:"[Ontem Ã s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Ãšltimo] dddd [Ã s] LT":"[Ãšltima] dddd [Ã s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrÃ¡s",s:"segs",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mÃªs",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}Âº/,ordinal:"%dÂº"});return e}(),function(){"use strict";function e(e,t,n,o){function r(){var e=o.defer();return i({title:"Choose an option",cancelText:"Cancel",options:[{text:"Photo Library"},{text:"Photo"}]}).then(function(e){var n;return 1===e&&(n="photoLibrary"),2===e&&(n="camera"),t.getPicture({sourceType:n})}).then(e.resolve)["catch"](e.reject),e.promise}function i(t){var r=o.defer();if(window.cordova){var i={title:t.title,buttonLabels:_.map(t.options,function(e){return e.text}),addCancelButtonWithLabel:t.cancelText,androidEnableCancelButton:!0,androidTheme:window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT};n.show(i).then(function(e){3!==e&&r.resolve(e),r.reject("cancel")})}else var a=e.show({buttons:t.options,titleText:t.title,cancelText:t.cancelText,cancel:function(){a()},buttonClicked:function(e){a(),3!==e&&r.resolve(e),r.reject("cancel")}});return r.promise}return{show:i,image:r}}e.$inject=["$ionicActionSheet","Camera","$cordovaActionSheet","$q"],angular.module("starter").factory("ActionSheet",e)}(),function(){"use strict";angular.module("starter").factory("Auth",["$q",function(e){function t(){return Parse.User.current()}function n(e){l=e}function o(){var t=e.defer();return null===l?(t.reject("Session token invalid"),t.promise):(Parse.User.current()?t.resolve(Parse.User.current()):Parse.User.become(l).then(t.resolve,t.reject),t.promise)}function r(t){var n=e.defer();return Parse.User.requestPasswordReset(t,{success:n.resolve,error:n.reject}),n.promise}function i(t){var n=e.defer();return Parse.User.requestPasswordReset(t,{success:n.resolve,error:n.reject}),n.promise}function a(t){var n=e.defer();return Parse.User.logIn(t.username,t.password,{success:n.resolve,error:n.reject}),n.promise}function s(){var t=e.defer();return Parse.User.logOut().then(t.resolve,t.reject),t.promise}var l=null;return{getLoggedUser:t,setSessionToken:n,ensureLoggedIn:o,recoverPassword:r,resetPassword:i,logIn:a,logOut:s}}])}(),function(){"use strict";function e(e,t){function n(n){var o=t.defer();if(window.cordova){var r=n.sourceType||Camera.PictureSourceType.CAMERA;"photoLibrary"===n.sourceType&&(r=Camera.PictureSourceType.PHOTOLIBRARY),"camera"===n.sourceType&&(r=Camera.PictureSourceType.CAMERA);var i={quality:70,targetWidth:800,targetHeight:800,saveToPhotoAlbum:!1,correctOrientation:!0,sourceType:r,destinationType:Camera.DestinationType.DATA_URL,encodingType:Camera.EncodingType.JPEG};e.getPicture(i).then(o.resolve,o.reject)}else{console.log("Input File");var a=angular.element('<input type="file" accept="image/x-png, image/gif, image/jpeg" max-size="2048" />');a[0].click(),a.on("change",function(e){var t=e.currentTarget.files[0],n=new FileReader;n.onload=function(e){o.resolve(e.target.result)},n.readAsDataURL(t)})}return o.promise}function o(e,n,o){var r=t.defer();return window.imageResizer.resizeImage(r.resolve,r.reject,e,n||1,o||1,{imageDataType:ImageResizer.IMAGE_DATA_TYPE_URL,resizeType:ImageResizer.RESIZE_TYPE_FACTOR,format:"jpg"}),r.promise}function r(e,n,o){var r=t.defer();return window.imageResizer.resizeImage(r.resolve,r.reject,e,n||640,o||640,{imageDataType:ImageResizer.IMAGE_DATA_TYPE_URL,resizeType:ImageResizer.RESIZE_TYPE_MIN_PIXEL,pixelDensity:!0,storeImage:!1,photoAlbum:!1,format:"jpg"}),r.promise}return{getPicture:n,resizeImage:r,toBase64Image:o}}e.$inject=["$cordovaCamera","$q"],angular.module("starter").service("Camera",e)}(),function(){"use strict";function e(e,t){function n(){ionic.Platform.isWebView()?(e.onLine=t.isOnline(),e.$apply(),e.$on("$cordovaNetwork:online",function(t,n){console.log("went online"),e.onLine=!0,e.$apply()}),e.$on("$cordovaNetwork:offline",function(t,n){console.log("went offline"),e.onLine=!1,e.$apply()})):(e.onLine=navigator.onLine,e.$apply(),window.addEventListener("online",function(t){console.log("went online"),e.onLine=!0,e.$apply()},!1),window.addEventListener("offline",function(t){console.log("went offline"),e.onLine=!1,e.$apply();
},!1))}return{watch:n}}e.$inject=["$rootScope","$cordovaNetwork"],angular.module("starter").factory("ConnectMonitor",e)}(),function(){"use strict";function e(e,t){function n(e){l||(l=void 0!==window.sqlitePlugin?window.sqlitePlugin.openDatabase({name:e.name,location:2,createFromLocation:1}):window.openDatabase(e.name,"1.0","Database",2e5));var n=[];return angular.forEach(e.tables,function(e){var t=[];angular.forEach(e.columns,function(e,n){t.push(n+" "+e)}),i("DROP TABLE "+e.name);var o="CREATE TABLE IF NOT EXISTS "+e.name+" ("+t.join(",")+")";n.push(i(o)),c.push(e)}),t.all(n)}function o(e,n){var o=t.defer();return i("SELECT MAX("+n+") as lastSync FROM "+e).then(function(e){var t=e.rows.item[0].lastSync;o.resolve(t)}),o.promise}function r(e){var n=t.defer(),o=[],r=[];angular.forEach(e.columns,function(e,t){o.push(t),"number"==typeof e?r.push(e):r.push("'"+e+"'")});var a="INSERT OR REPLACE INTO "+e.table+" ("+o.join(",")+") VALUES ("+r.join(",")+")";return i(a).then(n.resolve)["catch"](n.reject),n.promise}function i(e,n){n="undefined"!=typeof n?n:[];var o=t.defer();return l.transaction(function(t){t.executeSql(e,n,function(e,t){var n={rows:[]};if(t&&t.rows)for(var r=0;r<t.rows.length;r++)n.rows.push(angular.copy(t.rows[r]));o.resolve(n)},function(e,t){console.log(e,t),o.reject(t)})}),o.promise}function a(e,n,o,r,a,s,l){var c=t.defer();void 0===l&&(l=-1);var u=n,d=s?s:10,p="SELECT SUM(id) as TOTAL FROM "+e+"  "+o,m="SELECT "+u+" FROM "+e+"  "+o+" "+r+" "+a+" LIMIT "+d+" OFFSET "+l;return console.log("query",p),console.log("query",m),i(p).then(function(e){var t={page:l,total:e.rows[0].TOTAL,rows:[]};i(m).then(function(e){console.log(e),t.rows=e.rows,c.resolve(t)})}),c.promise}function s(e){for(var t=[],n=0;n<e.rows.length;n++)t.push(e.rows.item(n));return t}var l,c=[];return{init:n,insert:r,query:i,getLastSync:o,paginate:a,fetchAll:s}}e.$inject=["$interval","$q"],angular.module("starter").factory("DAO",e)}(),function(){"use strict";function e(){function e(e){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])}function t(e){return new Date(e).toLocaleDateString()}function n(){var e=new Date,t="00",n=e.getFullYear(),o=(t+(e.getMonth()+1)).slice(-t.length),r=(t+e.getDate()).slice(-t.length);return n+"-"+o+"-"+r}function o(e){var t=new Date(e),n="00",o=t.getFullYear(),r=(n+(t.getMonth()+1)).slice(-n.length),i=(n+t.getDate()).slice(-n.length);return o+"-"+r+"-"+i}function r(e){var t=["Janeiro","Feveiro","MarÃ§o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return t[e.getMonth()]}function i(e){var t=e.getFullYear(),n=e.getMonth();return new Date(t,n,1)}function a(e){var t=e.getFullYear(),n=e.getMonth()+1;return new Date(t,n,0)}return{parseData:e,parseString:t,getDate:n,formatDate:o,getMonthName:r,getFirstDay:i,getLastDay:a}}angular.module("starter").factory("DataUtil",e)}(),function(){"use strict";function e(e,t,n){function o(o,r){var i=n.defer();return window.cordova?e.alert(o,r).then(i.resolve):t.alert({title:r,template:o}),i.promise}function r(o){var r=n.defer();return window.cordova?e.confirm(o.message,o.title,o.buttonsText).then(function(e){console.log(e),1===e&&r.resolve(!0),r.reject(!0)}):t.confirm({title:o.title,template:o.message}).then(function(e){e?r.resolve(!0):r.reject(!0)}),r.promise}return{alert:o,confirm:r}}e.$inject=["$cordovaDialogs","$ionicPopup","$q"],angular.module("starter").service("Dialog",e)}(),function(){"use strict";function e(e,t,n){function o(){return f.getLoginStatus()}function r(){return console.log("facebook login",f),f.login(["public_profile","email"])}function i(){var t=e.defer();return n.logout().then(t.resolve,t.reject),t.promise}function a(t){var n=e.defer(),o={method:"feed",name:t.title,link:"https://photogram.codevibe.io/",picture:t.image._url,caption:t.title,description:t.title,message:""};return console.log(o),f.ui(o,n.resolve),n.promise}function s(t){var n=e.defer();return f.api("/me/feed","post",{message:t.title,link:t.image._url,picture:t.image._url,published:!0},n.resolve),n.promise}function l(){var t=e.defer();return f.api("/me/friends",t.resolve),t.promise}function c(){var t=e.defer();return window.cordova?n.api("me?fields=name,first_name,last_name,gender,email",["public_profile"]).then(t.resolve,t.reject):f.api("/me",{fields:"name, first_name, last_name, gender, email"}).then(function(e){!e||e.error?t.reject(e.error):t.resolve(e)}),t.promise}function u(){var t=e.defer();return window.cordova?f.showDialog({method:"apprequests",message:"Venha para o nosso clube!"}).then(t.resolve,t.reject):f.ui({method:"apprequests",message:"Venha para o nosso clube!"}).then(t.resolve,t.reject),t.promise}function d(){var t=e.defer();return f.api("me/friends").then(t.resolve,t.reject),t.promise}function p(t){var n=e.defer();return f.api(t).then(n.resolve,n.reject),n.promise}function m(t){var n=e.defer();return t?f.login(["email"]).then(function(e){console.log("facebook login",e),console.log(t,e,data),Parse.FacebookUtils.link(t,{id:String(e.authResponse.userID),access_token:e.authResponse.accessToken,expiration_date:((new Date).getTime()+1e3).toString()},{success:function(t){console.log("User",t),t.set("facebook",e.authResponse.userID),t.set("facebookimg","https://graph.facebook.com/"+e.authResponse.userID+"/picture?width=250&height=250"),t.set("facebook_complete",Boolean(!0)),t.save().then(n.resolve)}})},n.resolve):n.reject("not logged"),n.promise}var f=window.cordova?n:t;return{logIn:r,logOut:i,me:c,invite:u,friends:d,api:p,getCurrentUser:o,getFriends:l,postImage:a,postImage1:s,link:m}}e.$inject=["$q","$facebook","$cordovaFacebook"],angular.module("starter").service("Facebook",e)}(),function(){"use strict";angular.module("starter").factory("GalleryActivity",["$q","ParseCloud","moment",function(e,t,n){var o=Parse.Object.extend("GalleryActivity",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},feed:function(e){return t.run("feedActivity",e)},all:function(t){var o=e.defer(),r=new Parse.Query(this);if(""!=t.filter&&r.contains("words",t.filter),t.order&&(t.order.indexOf("-")<-1?r.ascending(t.order):r.descending(t.order.replace("-"))),t.date&&null!==t.date){var i=n(t.date).startOf("day"),a=n(t.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return t.status&&null!==t.status&&("pending"===t.status?r.doesNotExist("isApproved"):"rejected"===t.status?r.equalTo("isApproved",!1):"approved"===t.status&&r.equalTo("isApproved",!0)),r.include("gallery"),r.include("user"),r.limit(t.limit),r.skip(t.page*t.limit-t.limit),r.find({success:o.resolve,error:o.reject}),o.promise},count:function(t){var o=e.defer(),r=new Parse.Query(this);if(""!=t.filter&&r.contains("words",t.filter),t.date&&null!==t.date){var i=n(t.date).startOf("day"),a=n(t.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return t.status&&null!==t.status&&("pending"===t.status?r.doesNotExist("isApproved"):"rejected"===t.status?r.equalTo("isApproved",!1):"approved"===t.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){o.resolve(e)},error:function(e){o.reject(e)}}),o.promise}});return Object.defineProperty(o.prototype,"fromUser",{get:function(){return this.get("fromUser")},set:function(e){this.set("fromUser",e)}}),Object.defineProperty(o.prototype,"toUser",{get:function(){return this.get("toUser")},set:function(e){this.set("toUser",e)}}),Object.defineProperty(o.prototype,"gallery",{get:function(){return this.get("gallery")},set:function(e){this.set("gallery",e)}}),Object.defineProperty(o.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(o.prototype,"hashtags",{get:function(){return this.get("hashtags")},set:function(e){this.set("hashtags",e)}}),Object.defineProperty(o.prototype,"words",{get:function(){return this.get("words")},set:function(e){this.set("words",e)}}),Object.defineProperty(o.prototype,"address",{get:function(){return this.get("address")},set:function(e){this.set("address",e)}}),Object.defineProperty(o.prototype,"image",{get:function(){return this.get("image")},set:function(e){this.set("image",e)}}),Object.defineProperty(o.prototype,"imageThumb",{get:function(){return this.get("imageThumb")},set:function(e){this.set("imageThumb",e)}}),Object.defineProperty(o.prototype,"location",{get:function(){return this.get("location")},set:function(e){this.set("location",new Parse.GeoPoint({latitude:e.latitude,longitude:e.longitude}))}}),Object.defineProperty(o.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(o.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),o}])}(),function(){"use strict";function e(e,t,n){var o=Parse.Object.extend("GalleryAlbum",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var n=e.defer(),r=new o;return r.save(t,{success:n.resolve,error:n.reject}),n.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},photos:function(e){return t.run("photoAlbum",e)},list:function(e){return t.run("listAlbum",e)},get:function(t){var n=e.defer();return new Parse.Query(this).get(t,{success:n.resolve,error:n.reject}),n.promise}});return Object.defineProperty(o.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(o.prototype,"qtyPhotos",{get:function(){return this.get("qtyPhotos")},set:function(e){this.set("qtyPhotos",e)}}),Object.defineProperty(o.prototype,"image",{get:function(){return this.get("image")},set:function(e){this.set("image",e)}}),Object.defineProperty(o.prototype,"imageThumb",{get:function(){return this.get("imageThumb")},set:function(e){this.set("imageThumb",e)}}),Object.defineProperty(o.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(o.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),o}e.$inject=["$q","ParseCloud","moment"],angular.module("starter").factory("GalleryAlbum",e)}(),function(){"use strict";angular.module("starter").factory("GalleryComment",["$q","moment",function(e,t){var n=Parse.Object.extend("GalleryComment",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{get:function(t){var n=e.defer();return new Parse.Query(this).get(t,{success:n.resolve,error:n.reject}),n.promise},create:function(t){var o=e.defer();return(new n).save(t,{success:o.resolve,error:o.reject}),o.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},all:function(t){var n=e.defer(),o=new Parse.Query(this);return o.include("user"),o.ascending("createdAt"),o.equalTo("gallery",t.gallery),o.limit(t.limit),o.skip(t.page*t.limit-t.limit),o.find({success:n.resolve,error:n.reject}),n.promise},count:function(n){var o=e.defer(),r=new Parse.Query(this);if(""!=n.filter&&r.contains("words",n.filter),n.date&&null!==n.date){var i=t(n.date).startOf("day"),a=t(n.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return n.status&&null!==n.status&&("pending"===n.status?r.doesNotExist("isApproved"):"rejected"===n.status?r.equalTo("isApproved",!1):"approved"===n.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){o.resolve(e)},error:function(e){o.reject(e)}}),o.promise}});return Object.defineProperty(n.prototype,"user",{get:function(){return this.get("user")},set:function(e){this.set("user",e)}}),Object.defineProperty(n.prototype,"text",{get:function(){return this.get("text")},set:function(e){this.set("text",e)}}),n}])}(),function(){"use strict";function e(e,t,n){var o=Parse.Object.extend("Gallery",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var n=e.defer(),r=new o;return t.address.geo&&(t.location=new Parse.GeoPoint(t.address.geo)),r.save(t,{success:n.resolve,error:n.reject}),n.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},comments:function(e){return t.run("commentGallery",e)},getAlbum:function(e){return t.run("getAlbum",e)},feed:function(e){return console.log("feedGallery",e),t.run("feedGallery",e)},search:function(e){return console.log(e),t.run("searchGallery",e)},follow:function(e){return console.log("Follow",e),t.run("followUser",e)},likeGallery:function(e){return console.log(e),t.run("likeGallery",{galleryId:e.galleryId})},get:function(t){var n=e.defer();return new Parse.Query(this).get(t,{success:n.resolve,error:n.reject}),n.promise},all:function(t){var n=e.defer(),o=new Parse.Query(this);return t.order&&(t.order.indexOf("-")<-1?o.ascending(t.order):o.descending(t.order.replace("-"))),t.status&&null!==t.status&&("pending"===t.status?o.doesNotExist("isApproved"):"rejected"===t.status?o.equalTo("isApproved",!1):"approved"===t.status&&o.equalTo("isApproved",!0)),o.limit(t.limit),o.skip(t.page*t.limit-t.limit),o.find({success:n.resolve,error:n.reject}),n.promise},count:function(t){var o=e.defer(),r=new Parse.Query(this);if(""!=t.filter&&r.contains("words",t.filter),t.date&&null!==t.date){var i=n(t.date).startOf("day"),a=n(t.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return t.status&&null!==t.status&&("pending"===t.status?r.doesNotExist("isApproved"):"rejected"===t.status?r.equalTo("isApproved",!1):"approved"===t.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){o.resolve(e)},error:function(e){o.reject(e)}}),o.promise}});return Object.defineProperty(o.prototype,"likesTotal",{get:function(){return this.get("likesTotal")},set:function(e){this.set("likesTotal",e)}}),Object.defineProperty(o.prototype,"user",{get:function(){return this.get("user")},set:function(e){this.set("user",e)}}),Object.defineProperty(o.prototype,"title",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(o.prototype,"hashtags",{get:function(){return this.get("hashtags")},set:function(e){this.set("hashtags",e)}}),Object.defineProperty(o.prototype,"words",{get:function(){return this.get("words")},set:function(e){this.set("words",e)}}),Object.defineProperty(o.prototype,"location",{get:function(){return this.get("location")},set:function(e){this.set("location",new Parse.GeoPoint({latitude:e.latitude,longitude:e.longitude}))}}),Object.defineProperty(o.prototype,"address",{get:function(){return this.get("address")},set:function(e){this.set("address",e)}}),Object.defineProperty(o.prototype,"image",{get:function(){return this.get("image")},set:function(e){this.set("image",e)}}),Object.defineProperty(o.prototype,"icon",{get:function(){return this.get("icon")},set:function(e){this.set("icon",e)}}),Object.defineProperty(o.prototype,"imageThumb",{get:function(){return this.get("imageThumb")},set:function(e){this.set("imageThumb",e)}}),Object.defineProperty(o.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(o.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),o}e.$inject=["$q","ParseCloud","moment"],angular.module("starter").factory("Gallery",e)}(),function(){"use strict";angular.module("starter").factory("GalleryFeedback",["$q","moment",function(e,t){var n=Parse.Object.extend("GalleryFeedback",{getStatus:function(){return this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var o=e.defer(),r=new n;return t.user=Parse.User.current(),r.save(t,{success:o.resolve,error:o.reject}),o.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},all:function(n){var o=e.defer(),r=new Parse.Query(this);if(""!=n.filter&&r.contains("words",n.filter),n.date&&null!==n.date){var i=t(n.date).startOf("day"),a=t(n.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return n.status&&null!==n.status&&("pending"===n.status?r.doesNotExist("isApproved"):"rejected"===n.status?r.equalTo("isApproved",!1):"approved"===n.status&&r.equalTo("isApproved",!0)),r.include("gallery"),r.include("User"),r.descending("createdAt"),r.limit(n.limit),r.skip(n.page*n.limit-n.limit),r.find({success:o.resolve,error:o.reject}),o.promise},count:function(n){var o=e.defer(),r=new Parse.Query(this);if(""!=n.filter&&r.contains("words",n.filter),n.date&&null!==n.date){var i=t(n.date).startOf("day"),a=t(n.date).endOf("day");r.greaterThanOrEqualTo("createdAt",i.toDate()),r.lessThanOrEqualTo("createdAt",a.toDate())}return n.order&&(n.order.indexOf("-")<-1?r.ascending(n.order):r.descending(n.order.replace("-"))),n.status&&null!==n.status&&("pending"===n.status?r.doesNotExist("isApproved"):"rejected"===n.status?r.equalTo("isApproved",!1):"approved"===n.status&&r.equalTo("isApproved",!0)),r.count({success:function(e){o.resolve(e)},error:function(e){o.reject(e)}}),o.promise}});return Object.defineProperty(n.prototype,"user",{get:function(){return this.get("user")},set:function(e){this.set("user",e)}}),Object.defineProperty(n.prototype,"subject",{get:function(){return this.get("subject")},set:function(e){this.set("subject",e)}}),Object.defineProperty(n.prototype,"message",{get:function(){return this.get("title")},set:function(e){this.set("title",e)}}),Object.defineProperty(n.prototype,"hashtags",{get:function(){return this.get("hashtags")},set:function(e){this.set("hashtags",e)}}),Object.defineProperty(n.prototype,"words",{get:function(){return this.get("words")},set:function(e){this.set("words",e)}}),Object.defineProperty(n.prototype,"isApproved",{get:function(){return this.get("isApproved")},set:function(e){this.set("isApproved",e)}}),Object.defineProperty(n.prototype,"expiresAt",{get:function(){return this.get("expiresAt")},set:function(e){this.set("expiresAt",e)}}),n}])}(),function(){"use strict";angular.module("starter").factory("GallerySetting",["$q","moment",function(e,t){var n=Parse.Object.extend("GallerySetting",{getStatus:function(){return t().toDate()>=this.expiresAt?"Expired":this.isApproved?"Approved":this.isApproved===!1?"Rejected":"Pending"}},{create:function(t){var o=e.defer(),r=new n;return r.save(t,{success:o.resolve,error:o.reject}),o.promise},update:function(t){var n=e.defer();return t.save(null,{success:n.resolve,error:n.reject}),n.promise},destroy:function(t){var n=e.defer();return t.destroy({success:n.resolve,error:n.reject}),n.promise},all:function(t){var n=e.defer(),o=new Parse.Query(this);return""!=t.filter&&o.contains("canonical",t.filter),o.descending("createdAt"),o.limit(t.limit),o.skip(t.page*t.limit-t.limit),o.find({success:n.resolve,error:n.reject}),n.promise},count:function(t){var n=e.defer(),o=new Parse.Query(this);return o.count({success:n.resolve,error:n.reject}),n.promise}});return Object.defineProperty(n.prototype,"key",{get:function(){return this.get("key")},set:function(e){this.set("key",e)}}),Object.defineProperty(n.prototype,"value",{get:function(){return this.get("value")},set:function(e){this.set("value",e)}}),n}])}(),function(){"use strict";function e(e,t){function n(n){var o=t.defer();return e.ready(function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){console.log(e),o.resolve(e)},function(e){o.reject(e)},{timeout:3e4,enableHighAccuracy:!0,maximumAge:75e3})}),o.promise}return{getCurrentPosition:n}}e.$inject=["$ionicPlatform","$q"],angular.module("starter").factory("Geolocation",e)}(),function(){"use strict";function e(e){function t(t){null!==t&&""!==t&&window.cordova?(e.debugMode(),e.startTrackerWithId(t),a=!0):console.warn("["+i+"]: Invalid Tracker ID or not using emulator")}function n(t,n,o){a&&e.trackEvent(t,n,o)}function o(t){a&&e.trackView(t)}function r(t,n){a&&e.trackException(t,n)}var i="AnalyticsService",a=!1;return{init:t,trackView:o,trackEvent:n,trackException:r}}e.$inject=["$cordovaGoogleAnalytics"],angular.module("starter").factory("GoogleAnalytics",e)}(),function(){"use strict";function e(e){function t(t){return e.run("install",t)}function n(t){return e.run("status",t)}return{start:t,status:n}}e.$inject=["ParseCloud"],angular.module("starter").factory("Install",e)}(),function(){"use strict";function e(e){function t(t,n){var o=e.defer();return Parse.Cloud.run(t,n,{success:o.resolve,error:o.reject}),o.promise}return{run:t}}e.$inject=["$q"],angular.module("starter").factory("ParseCloud",e)}(),function(){"use strict";angular.module("starter").factory("ParseFile",["$q",function(e){function t(t,n){var o=e.defer(),r="file.jpg";return n&&r.replace(".jpg",n),new Parse.File(r,t).save({success:o.resolve,error:o.reject}),o.promise}return{upload:t}}])}(),function(){"use strict";function e(e){function t(){var t=e.defer();return window.ParsePushPlugin?ParsePushPlugin.getInstallationId(function(e){console.log("device installationId: "+e),o(),t.resolve(e)},function(e){console.log("error",e),t.reject(e)}):t.reject("Not Parse Push"),t.promise}function n(){var t=e.defer();return ParsePushPlugin.getSubscriptions(function(e){console.log(e),t.resolve(e)},function(e){console.log("error",e),t.reject(e)}),t.promise}function o(){var t=e.defer(),n=Parse.User.current();return window.ParsePushPlugin&&n?i(n.username):t.reject("Not device"),t.promise}function r(e,t){window.ParsePushPlugin&&ParsePushPlugin.on(e,t)}function i(t){var n=e.defer();return window.ParsePushPlugin&&ParsePushPlugin.subscribe(t,function(e){console.log("Subcribe in channel",t),n.resolve(e)},function(e){console.log("Not Subcribe in channel",t),n.reject(e)}),n.promise}function a(t){var n=e.defer();return window.ParsePushPlugin&&ParsePushPlugin.unsubscribe(t,function(e){console.log("Unsubcribe in channel",t),n.resolve(e)},function(e){console.log("Not Unsubcribe in channel",t),n.reject(e)}),n.promise}return{init:t,on:r,subscribe:i,getSubscriptions:n,unsubscribe:a,subscribeUser:o}}e.$inject=["$q"],angular.module("starter").factory("ParsePush",e)}(),function(){"use strict";function e(e,t,n,o){function r(e,n){var r=t.defer();return e&&(i.image=e),n&&(i.title=n),o.plugins.socialsharing.shareWithOptions(i,r.success,r.reject),r.promise}var i={title:n.instant("Join me from ")+e.app.name+"!",subject:n.instant("I'm at ")+e.app.name+"!. Install the application and follow me! "+e.app.url,image:e.app.image,link:e.app.url};return{open:r}}e.$inject=["AppConfig","$q","$translate","$window"],angular.module("starter").factory("Share",e)}(),function(){"use strict";function e(e,t){function n(n){window.cordova?e.show(n.text,"short","bottom"):t.alert({title:n.title,template:n.text,okType:"button button-clear button-assertive"})}function o(e,n){return t.confirm({title:e,template:n})}return{alert:n,confirm:o}}e.$inject=["$cordovaToast","$ionicPopup"],angular.module("starter").factory("Toast",e)}(),function(){"use strict";function e(e,t,n,o,r){var i=Parse.User.extend({},{profile:function(e){return o.run("profile",{username:e})},list:function(e){return o.run("listUsers",e)},getFollowers:function(e){return o.run("getFollowers",{username:e})},getLikers:function(e){return o.run("getLikers",{galleryId:e})},getFollowing:function(e){return o.run("getFollowing",{username:e})},signIn:function(o){var a=e.defer();return Parse.User.logIn(o.username,o.password,{success:function(e){var o;if(window.cordova)o={device:n.getDevice(),cordova:n.getCordova(),model:n.getModel(),platform:n.getPlatform(),uuid:n.getUUID(),version:n.getVersion()};else{var s=window.navigator.userAgent.match(/(?:Chrom(?:e|ium)|Firefox)\/([0-9]+)\./);o={device:{device:s?s[0]:"emulator"},cordova:"",model:s?s[0]:"emulator",platform:window.navigator.platform,uuid:"",version:s?s[0]:"emulator"}}o.lang=t.use(),window.cordova&&r.init(),i.update(o).then(function(){a.resolve(e)})["catch"](a.reject)},error:a.reject}),a.promise},signUp:function(t){var n=e.defer(),o=(new Parse.User).set({name:t.name}).set({username:t.username}).set({email:t.email}).set({password:t.password}).set({roleName:"User"});return o.signUp(null,{success:n.resolve,error:n.reject}),n.promise},signInViaFacebook:function(t){var n={id:t.authResponse.userID,access_token:t.authResponse.accessToken,expiration_date:((new Date).getTime()+1e3).toString()};console.log(t,n);var o=e.defer();return Parse.FacebookUtils.logIn(n,{success:function(e){console.log("User",e),e.setACL(new Parse.ACL(e)),e.set("facebook",n.id),e.save(null,{success:function(e){r.init(),console.log("User",e),o.resolve(e)},error:o.reject})},error:o.reject}),o.promise},logOut:function(){return Parse.User.logOut()},findByEmail:function(e){return o.run("findUserByEmail",{email:e})},updateWithFacebookData:function(t){var n=e.defer();return console.log("updateWithFacebookData",t),o.run("saveFacebookPicture",{}).then(function(){var e=Parse.User.current();""===e.attributes.username&&e.set({username:t.email}),e.set({email:t.email}),e.set({name:t.name}),e.setACL(new Parse.ACL(e)),e.save(null,{success:function(){e.fetch().then(function(e){n.resolve(e)},function(e){n.reject(e)})}})})["catch"](n.reject),n.promise},getPublicData:function(t){console.log(t);var n=e.defer();return new Parse.Query("UserData").equalTo("user",t).first().then(function(e){e?n.resolve(e):n.reject(Parse.Promise.error({code:1,message:"User Data not found"}))},n.reject),n.promise},recoverPassword:function(t){var n=e.defer();return Parse.User.requestPasswordReset(t,{success:n.resolve,error:n.reject}),n.promise},destroy:function(){return Parse.User.current().destroy()},setPhoto:function(t){var n=e.defer(),o=Parse.User.current();return o.set({photo:t}),o.save(null,{success:n.resolve,error:n.reject}),n.promise},follow:function(e){return o.run("followUser",{userId:e})},all:function(e){return o.run("getUsers",e)},validateUsername:function(e){return o.run("validateUsername",{username:e})},validateEmail:function(e){return o.run("validateEmail",{email:e})},update:function(e){var n=Parse.User.current();return e.lang=t.use(),angular.forEach(e,function(e,t){n.set(t,e)}),n.save()},"delete":function(e){return o.run("destroyUser",e)},fetch:function(){var t=e.defer();return Parse.User.current()?Parse.User.current().fetch().then(t.resolve,t.reject):t.reject(),t.promise}});return Object.defineProperty(i.prototype,"name",{get:function(){return this.get("name")},set:function(e){this.set("name",e)}}),Object.defineProperty(i.prototype,"username",{get:function(){return this.get("username")},set:function(e){this.set("username",e)}}),Object.defineProperty(i.prototype,"status",{get:function(){return this.get("status")},set:function(e){this.set("status",e)}}),Object.defineProperty(i.prototype,"gender",{get:function(){return this.get("gender")},set:function(e){this.set("gender",e)}}),Object.defineProperty(i.prototype,"email",{get:function(){return this.get("email")},set:function(e){this.set("email",e)}}),Object.defineProperty(i.prototype,"photo",{get:function(){return this.get("photo")},set:function(e){this.set("photo",e)}}),Object.defineProperty(i.prototype,"photoThumb",{get:function(){return this.get("photoThumb")},set:function(e){this.set("photoThumb",e)}}),Object.defineProperty(i.prototype,"roleName",{get:function(){return this.get("roleName")},set:function(e){this.set("roleName",e)}}),i}e.$inject=["$q","$translate","$cordovaDevice","ParseCloud","ParsePush"],angular.module("starter").factory("User",e)}(),function(e,t,n,o,r){"use strict";var i={color:"#1D5ECE",bgcolor:"#eaeaea",semi:!1,rounded:!1,clockwise:!0,radius:"15",stroke:"5",max:100,iterations:50,animation:"easeOutCubic",interval:200,showProgressCircleInBrowser:!0,showProgressCircleInDevice:!0};t.module("ionic-cache-src",["ionic","angular-svg-round-progressbar","ngCordova","ngStorage"]).provider("$cacheSrc",function(){this.config=i,this.set=function(e,n){var o=typeof e;return"object"==o?t.extend(this.config,e):"string"==o&&(this.config[e]=n),this},this.$get=function(){return this.config}}).factory("cacheSrcStorage",["$localStorage",function(e){var t={};return t._cache=e.cache_src,t.get=function(e){return t._cache[e]&&getCacheDir()+t._cache[e]},t.set=function(e,n){return t._cache[e]=n,t},t}]).directive("cacheSrc",["$ionicPlatform","$interval","$timeout","$compile","$cacheSrc","$cordovaFileTransfer","$localStorage","$cordovaNetwork",function(e,r,i,a,s,l,c,u){return{restrict:"A",scope:{onProgress:"=?",onFinish:"=?",onError:"=?"},link:function(i,u,d){function p(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;16>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function m(e,n){return t.element(n('<div style="text-align:{{textAlign}}"><div round-progress  max="max"  current="progress"  color="{{color}}" bgcolor="{{bgcolor}}"  radius="{{radius}}"  stroke="{{stroke}}"  rounded="rounded" clockwise="clockwise" iterations="{{iterations}}"  animation="{{animation}}"></div></div>')(e))}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];if(0===e.indexOf(o))return!0}return!1}function h(e){return f(e,["http://","https://","ftp://"])?!0:!1}function g(e,t){e.progress=0,e.max=100,e.radius=t.radius,e.stroke=t.stroke,e.animation=t.animation,e.clockwise=t.clockwise,e.color=t.color,e.bgcolor=t.bgcolor,e.rounded=t.rounded,e.iterations=t.iterations,e.textAlign="center"}var v=o.Platform.isIOS(),b=o.Platform.isAndroid();if(n&v||b){var y,w,k=function(){switch(device.platform){case"iOS":return n.file.documentsDirectory;case"Android":return n.file.dataDirectory}return""},x={};t.extend(x,s),t.extend(x,d),g(i,x),i.onProgress=i.onProgress||function(){},i.onFinish=i.onFinish||function(){},i.onError=i.onError||function(){};var C=c.cache_src=c.cache_src||{},P=function(e){x.showProgressCircleInDevice&&(u.css("display",w),y.remove()),A(e)},A=function(e){u[0][x.srcIs||"src"]=e,i.onFinish(e)};d.$observe("cacheSrc",function(){d.cacheSrc&&(h(d.cacheSrc)?C[d.cacheSrc]?e.ready().then(function(){A(k()+C[d.cacheSrc])}):(x.showProgressCircleInDevice&&(y=m(i,a),w=u.css("display"),u.css("display","none"),u.after(y)),e.ready().then(function(){var e="."+d.cacheSrc.split(".").pop(),t=p()+e;l.download(d.cacheSrc,k()+t,{},!0).then(function(e){C[d.cacheSrc]=t,P(k()+t)},i.onError,function(e){i.progress=e.loaded/e.total*100,i.onProgress(i.progress)})})):A(d.cacheSrc))})}else{var y=m(i,a),x={};t.extend(x,s),t.extend(x,d),g(i,x),i.onProgress=i.onProgress||function(){},i.onFinish=i.onFinish||function(){},d.$observe("cacheSrc",function(){if(d.cacheSrc)if(h(d.cacheSrc)){if(x.showProgressCircleInBrowser){var e=u.css("display");u.css("display","none"),u.after(y)}var t=r(function(){i.progress+=10,i.onProgress(i.progress),100==i.progress&&(r.cancel(t),x.showProgressCircleInBrowser&&(u.css("display",e),y.remove()),u[0][x.srcIs||"src"]=d.cacheSrc,i.onFinish(d.cacheSrc))},x.interval)}else u[0][x.srcIs||"src"]=d.cacheSrc,i.onFinish(d.cacheSrc)})}}}}])}(window,window.angular,window.cordova,window.ionic),function(){"use strict";!function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];
window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),o=Math.max(0,16-(n-e)),r=window.setTimeout(function(){t(n+o)},o);return e=n+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)})}(),angular.module("angular-svg-round-progressbar",[]),angular.module("angular-svg-round-progressbar").constant("roundProgressConfig",{max:50,semi:!1,rounded:!1,responsive:!1,clockwise:!0,radius:100,color:"#45ccce",bgcolor:"#eaeaea",stroke:15,duration:800,animation:"easeOutCubic",animationDelay:0,offset:0}),angular.module("angular-svg-round-progressbar").service("roundProgressService",["$window",function(e){function t(e,t,n,o){var r=(o-90)*Math.PI/180,i=e+n*Math.cos(r),a=t+n*Math.sin(r);return i+" "+a}var n={},o=angular.isNumber,r=document.head.querySelector("base");return n.isSupported=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),n.resolveColor=r&&r.href?function(e){var t=e.indexOf("#");return t>-1&&e.indexOf("url")>-1?e.slice(0,t)+window.location.href+e.slice(t):e}:function(e){return e},n.toNumber=function(e){return o(e)?e:parseFloat((e+"").replace(",","."))},n.getOffset=function(e,t){var n=+t.offset||0;if("inherit"===t.offset)for(var o=e.$parent;o;){if(o.hasOwnProperty("$$getRoundProgressOptions")){var r=o.$$getRoundProgressOptions();n+=(+r.offset||0)+(+r.stroke||0)}o=o.$parent}return n},n.getTimestamp=e.performance&&e.performance.now&&angular.isNumber(e.performance.now())?function(){return e.performance.now()}:function(){return(new e.Date).getTime()},n.updateState=function(e,n,o,r,i,a){if(!i)return r;var s=e>0?Math.min(e,n):0,l=a?180:359.9999,c=0===n?0:s/n*l,u=t(i,i,o,c),d=t(i,i,o,0),p=180>=c?0:1,m="M "+u+" A "+o+" "+o+" 0 "+p+" 0 "+d;return r.attr("d",m)},n.animations={linearEase:function(e,t,n,o){return n*e/o+t},easeInQuad:function(e,t,n,o){return n*(e/=o)*e+t},easeOutQuad:function(e,t,n,o){return-n*(e/=o)*(e-2)+t},easeInOutQuad:function(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,o){return n*(e/=o)*e*e+t},easeOutCubic:function(e,t,n,o){return n*((e=e/o-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,o){return(e/=o/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,o){return n*(e/=o)*e*e*e+t},easeOutQuart:function(e,t,n,o){return-n*((e=e/o-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,o){return(e/=o/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,o){return n*(e/=o)*e*e*e*e+t},easeOutQuint:function(e,t,n,o){return n*((e=e/o-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,o){return(e/=o/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,o){return-n*Math.cos(e/o*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,o){return n*Math.sin(e/o*(Math.PI/2))+t},easeInOutSine:function(e,t,n,o){return-n/2*(Math.cos(Math.PI*e/o)-1)+t},easeInExpo:function(e,t,n,o){return 0==e?t:n*Math.pow(2,10*(e/o-1))+t},easeOutExpo:function(e,t,n,o){return e==o?t+n:n*(-Math.pow(2,-10*e/o)+1)+t},easeInOutExpo:function(e,t,n,o){return 0==e?t:e==o?t+n:(e/=o/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,n,o){return-n*(Math.sqrt(1-(e/=o)*e)-1)+t},easeOutCirc:function(e,t,n,o){return n*Math.sqrt(1-(e=e/o-1)*e)+t},easeInOutCirc:function(e,t,n,o){return(e/=o/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,o){var r=1.70158,i=0,a=n;return 0==e?t:1==(e/=o)?t+n:(i||(i=.3*o),a<Math.abs(n)?(a=n,r=i/4):r=i/(2*Math.PI)*Math.asin(n/a),-(a*Math.pow(2,10*(e-=1))*Math.sin((e*o-r)*(2*Math.PI)/i))+t)},easeOutElastic:function(e,t,n,o){var r=1.70158,i=0,a=n;return 0==e?t:1==(e/=o)?t+n:(i||(i=.3*o),a<Math.abs(n)?(a=n,r=i/4):r=i/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*e)*Math.sin((e*o-r)*(2*Math.PI)/i)+n+t)},easeInOutElastic:function(e,t,n,o){var r=1.70158,i=0,a=n;return 0==e?t:2==(e/=o/2)?t+n:(i||(i=o*(.3*1.5)),a<Math.abs(n)?(a=n,r=i/4):r=i/(2*Math.PI)*Math.asin(n/a),1>e?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*o-r)*(2*Math.PI)/i))+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*o-r)*(2*Math.PI)/i)*.5+n+t)},easeInBack:function(e,t,n,o,r){return void 0==r&&(r=1.70158),n*(e/=o)*e*((r+1)*e-r)+t},easeOutBack:function(e,t,n,o,r){return void 0==r&&(r=1.70158),n*((e=e/o-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(e,t,n,o,r){return void 0==r&&(r=1.70158),(e/=o/2)<1?n/2*(e*e*(((r*=1.525)+1)*e-r))+t:n/2*((e-=2)*e*(((r*=1.525)+1)*e+r)+2)+t},easeInBounce:function(e,t,o,r){return o-n.animations.easeOutBounce(r-e,0,o,r)+t},easeOutBounce:function(e,t,n,o){return(e/=o)<1/2.75?n*(7.5625*e*e)+t:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,o,r){return r/2>e?.5*n.animations.easeInBounce(2*e,0,o,r)+t:.5*n.animations.easeOutBounce(2*e-r,0,o,r)+.5*o+t}},n}]),angular.module("angular-svg-round-progressbar").directive("roundProgress",["$window","roundProgressService","roundProgressConfig",function(e,t,n){var o={restrict:"EA",replace:!0,transclude:!0,scope:{current:"=",max:"=",semi:"=",rounded:"=",clockwise:"=",responsive:"=",onRender:"=",radius:"@",color:"@",bgcolor:"@",stroke:"@",duration:"@",animation:"@",offset:"@",animationDelay:"@"}};return t.isSupported?angular.extend(o,{link:function(r,i,a){function s(e){return a.hasOwnProperty(e)}var l,c,u=!i.hasClass("round-progress-wrapper"),d=u?i:i.find("svg").eq(0),p=d.find("path").eq(0),m=d.find("circle").eq(0),f=angular.copy(n),h=0;r.$$getRoundProgressOptions=function(){return f};var g=function(){var e=f.semi,n=f.responsive,o=+f.radius||0,a=+f.stroke,s=2*o,l=o-a/2-t.getOffset(r,f);d.css({top:0,left:0,position:n?"absolute":"static",width:n?"100%":s+"px",height:n?"100%":(e?o:s)+"px",overflow:"hidden"}),u||d[0].setAttribute("viewBox","0 0 "+s+" "+(e?o:s)),i.css({width:n?"100%":"auto",position:"relative",paddingBottom:n?e?"50%":"100%":0}),p.css({stroke:t.resolveColor(f.color),strokeWidth:a,strokeLinecap:f.rounded?"round":"butt"}),e?p.attr("transform",f.clockwise?"translate(0, "+s+") rotate(-90)":"translate("+s+", "+s+") rotate(90) scale(-1, 1)"):p.attr("transform",f.clockwise?"":"scale(-1, 1) translate("+-s+" 0)"),m.attr({cx:o,cy:o,r:l>=0?l:0}).css({stroke:t.resolveColor(f.bgcolor),strokeWidth:a})},v=function(n,o,a){var s=t.toNumber(f.max||0),c=n>0?e.Math.min(n,s):0,u=o===c||0>o?0:o||0,m=c-u,g=t.animations[f.animation],v=+f.duration||0,b=a||n>s&&o>s||0>n&&0>o||25>v,y=t.toNumber(f.radius),w=y-f.stroke/2-t.getOffset(r,f),k=f.semi;d.attr({"aria-valuemax":s,"aria-valuenow":c});var x=function(){if(b)t.updateState(c,s,w,p,y,k),f.onRender&&f.onRender(c,f,i);else{var n=t.getTimestamp(),o=++h;e.requestAnimationFrame(function r(){var a=e.Math.min(t.getTimestamp()-n,v),l=g(a,u,m,v);t.updateState(l,s,w,p,y,k),f.onRender&&f.onRender(l,f,i),o===h&&v>a&&e.requestAnimationFrame(r)})}};f.animationDelay>0?(e.clearTimeout(l),e.setTimeout(x,f.animationDelay)):x()},b=Object.keys(o.scope).filter(function(e){return s(e)&&"current"!==e});r.$watchGroup(b,function(e){for(var t=0;t<e.length;t++)"undefined"!=typeof e[t]&&(f[b[t]]=e[t]);g(),r.$broadcast("$parentOffsetChanged"),"inherit"!==f.offset||c?"inherit"!==f.offset&&c&&c():c=r.$on("$parentOffsetChanged",function(){v(r.current,r.current,!0),g()})}),r.$watchGroup(["current","max","radius","stroke","semi","offset"].filter(s),function(e,n){v(t.toNumber(e[0]),t.toNumber(n[0]))})},template:function(e){for(var t=e.parent(),n="round-progress",o=['<svg class="'+n+'" xmlns="http://www.w3.org/2000/svg" role="progressbar" aria-valuemin="0">','<circle fill="none"/>','<path fill="none"/>',"<g ng-transclude></g>","</svg>"];t.length&&t[0].nodeName.toLowerCase()!==n&&"undefined"==typeof t.attr(n);)t=t.parent();return t&&t.length||(o.unshift('<div class="round-progress-wrapper">'),o.push("</div>")),o.join("\n")}}):angular.extend(o,{template:'<div class="round-progress" ng-transclude></div>'})}])}(),function(){"use strict";function e(e,n,o,r,i){function a(a,s,l){function c(){window.cordova&&window.StatusBar.styleDefault(),a.closeModal=function(){a.modal.hide(),window.cordova&&window.StatusBar.styleLightContent()},a.searchValue="",a.selectLanguage=function(e){console.log(e),n.use(e.code),moment.locale(e.code),a.language=e,r.start(),a.closeModal(),o(function(){r.end()},1e3)},i.fromTemplateUrl(t+"/modal-language.html",{scope:a,focusFirstInput:!0}).then(function(e){a.modal=e,a.modal.show()})}a.languages=e.locales,a.language=a.languages.filter(function(e){return e.code===n.use()})[0],console.log(a.language),s.bind("click",c)}return{restrict:"E",link:a,templateUrl:t+"/ion-language.html"}}e.$inject=["AppConfig","$translate","$timeout","Loading","$ionicModal"];var t="app/component/ion-language";angular.module("ion-language").directive("ionLanguage",e)}(),function(){"use strict";function e(e,t,n,o,r,i){function a(){var e=i.defer();if(k.location)r(function(){e.resolve(k.location)},1e3);else{var t={timeout:1e4,enableHighAccuracy:!1};n.getCurrentPosition(t).then(function(t){k.location={latitude:t.coords.latitude,longitude:t.coords.longitude},e.resolve(k.location)},function(t){o.alert({title:"Geo Error",template:t.message}),e.reject(t)})}return e.promise}function s(){var e=i.defer();return a().then(function(t){console.log(t),c(t.latitude,t.longitude).success(function(n){n.geolocation=t,console.log(n),e.resolve(n)}).error(l)}),e.promise}function l(e){console.log(e)}function c(t,n){return e.get("http://maps.google.com/maps/api/geocode/json?latlng="+t+","+n+"&sensor=true").success(function(e){e.address_normal=e.results[0].formatted_address,e.address=u(e.results[0].address_components),e.src=d(t,n,18,500,300)})}function u(e){return e?{numero:e[0].short_name,rua:e[1].long_name,bairro:e[2].short_name,cidade:e[3].short_name,estado:e[5].long_name,uf:e[5].short_name,pais:e[6].long_name,paisCode:e[6].short_name,cep:e[7].short_name}:!1}function d(e,t,n,o,r){return"http://maps.google.com/maps/api/staticmap?center="+e+","+t+"&zoom="+n+"&size="+o+"x"+r+"&maptype=roadmap&sensor=true"}function p(e){var t=i.defer();console.log("parseAddress",e),e||t.reject("not place");for(var n={resume:"",geo:{latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()}},o=h(n.geo.latitude,n.geo.longitude,16,900,200),r=0;r<e.address_components.length;r++){var a=e.address_components[r].types[0];if(y[a]){var s=e.address_components[r][y[a]];n[w[a]]=s}}return n.name=e.name,n.street=n.street+", "+n.number,n.image=o,n.resume=n.street+" - "+n.city+", "+n.state+", "+n.country,t.resolve(n),t.promise}function m(e){var t=i.defer();return v.getQueryPredictions({input:e},function(e){t.resolve(e)}),t.promise}function f(e){var t=i.defer();return b.getDetails({placeId:e},function(e){t.resolve(e)}),t.promise}function h(e,t,n,o,r){console.log("src latitude",e,t,n,o,r);var i="http://maps.googleapis.com/maps/api/staticmap?center="+e+","+t+"&zoom="+n+"&scale=1&size="+o+"x"+r+"&maptype=roadmap&format=jpg&visual_refresh=true&markers=size:small%7Ccolor:0xff2600%7Clabel:0%7C"+e+","+t+"&sensor=true";return console.log(i),i}var g={types:["geocode"]},v=new t.google.maps.places.AutocompleteService,b=new t.google.maps.places.PlacesService(t.document.createElement("input"),g),y={street_number:"long_name",route:"long_name",locality:"long_name",sublocality:"long_name",neighborhood:"long_name",political:"long_name",administrative_area_level_1:"long_name",country:"long_name",postal_code:"long_name"},w={street_number:"number",route:"street",locality:"city",administrative_area_level_1:"state",country:"country",postal_code:"zipcode",neighborhood:"district"},k={coords:{},src:""};return{src:h,getDetails:f,searchAddress:m,parseAddress:p,findMe:s}}e.$inject=["$http","$window","$cordovaGeolocation","$ionicPopup","$timeout","$q"],angular.module("ion-location").factory("GeoService",e)}(),function(){"use strict";function e(e,t){function n(n,o){o.bind("click",function(){function o(){n.search={},n.search.suggestions=[],n.search.query=""}function r(e){t.getDetails(e).then(function(e){t.parseAddress(e).then(function(e){console.log(e),n.location=e,n.closeModalLocation()})})}o(),n.findMe=function(){n.loading=!0,t.findMe().then(function(e){t.searchAddress(e.address_normal).then(function(e){console.log(e),n.search.suggestions=e,n.loading=!1})})},n.findMe(),n.choosePlace=function(e){r(e.place_id)},n.modalLocation=e.fromTemplate('<ion-modal-view><ion-header-bar class="bar bar-light item-input-inset"><ion-spinner ng-if="loading"></ion-spinner><button class="button button-clear button-icon ion-navigate" ng-click="findMe()" ng-hide="loading"></button><label class="item-input-wrapper"><input type="search" ng-model="search.query" ng-model-options="{ debounce: 1500 }" placeholder="{{ \'searchText\' | translate }}"></label><button class="button button-clear" ng-click="closeModalLocation()" translate="cancel"></button></ion-header-bar><ion-content padding="false"><ion-list><div class="center padding" ng-if="loading1"><ion-spinner ></ion-spinner></div><ion-item ng-repeat="suggestion in search.suggestions" ng-click="choosePlace(suggestion)" ng-bind="suggestion.description"></ion-item><ion-item class="item-divider"><img src="https://developers.google.com/maps/documentation/places/images/powered-by-google-on-white.png"alt=""/></ion-item></ion-list></ion-content></ion-modal-view>',{scope:n,focusFirstInput:!0}),n.modalLocation.show(),n.closeModalLocation=function(){n.modalLocation.hide(),n.modalLocation.remove()},n.$watch("search.query",function(e){e&&(n.loading1=!0,n.search.suggestions=[],t.searchAddress(e).then(function(e){console.log(e),n.search.suggestions=e,n.loading1=!1}))})})}return{restrict:"A",scope:{location:"=ngModel"},link:n}}e.$inject=["$ionicModal","GeoService"],angular.module("ion-location").directive("ionLocation",e)}(),function(){function e(e,t,n,o,r,i,a,s){function l(e){function t(){var e=angular.copy(l.form);a.start(),n.create(e).then(function(e){a.end(),s()})}function s(){l.modal.hide(),l.modal.remove(),delete l.modal}var l=o.$new();l.formFields=r.form,l.submitFeedback=t,l.closeModal=s,l.form={photogramId:e.id,subject:"complaint"},i.fromTemplateUrl("app/main/feedback/feedback-modal.html",{scope:l,focusFirstInput:!0}).then(function(e){l.modal=e,l.modal.show()})}t.path;return{modal:l}}e.$inject=["$q","AppConfig","GalleryFeedback","$rootScope","GalleryFeedbackForm","$ionicModal","Loading","Toast"],angular.module("app.main").factory("FeedbackModal",e)}(),function(){"use strict";function e(e){var t=[{key:"title",type:"input",templateOptions:{type:"text",placeholder:e.instant("feedbackTitle"),required:!0}},{key:"subject",type:"select",templateOptions:{label:e.instant("subject"),options:[{label:e.instant("complaint"),id:"complaint"},{label:e.instant("bug"),id:"bug"},{label:e.instant("suggestion"),id:"suggestion"}],valueProp:"id",labelProp:"label",icon:"icon-list",iconPlaceholder:!0}},{key:"status",type:"textarea",templateOptions:{type:"text",placeholder:e.instant("message"),icon:"ion-quote",required:!0,iconPlaceholder:!0}}];return{form:t}}e.$inject=["$translate"],angular.module("app.main").factory("GalleryFeedbackForm",e)}(),function(){"use strict";function e(e,t,n,o,r){return{restrict:"A",scope:{galleryId:"@"},template:"",link:function(i,a,s){function l(){i.form={}}function c(){l(),e.fromTemplateUrl("app/main/feedback/feedback-modal.html",{scope:i,focusFirstInput:!0}).then(function(e){i.modal=e,i.modal.show()})}function u(e){r.go(e),i.closeModal()}function d(){i.modal.hide(),i.modal.remove()}i.link=u,i.submitFeedback=submitFeedback,i.closeModal=d,a.bind("click",c),i.submitFeedback=function(e,r){if(e.$valid){o.start();var a=angular.copy(i.form);a.user=Parse.User.current(),n.get(i.galleryId).then(function(e){a.gallery=e,t.create(a).then(function(e){console.log(e),l(),i.closeModal(),o.stop()})})}}}}}e.$inject=["$ionicModal","GalleryFeedback","Gallery","Loading","$state"],angular.module("app.main").directive("feedback",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u,d){function p(){e.nocomments=!1,u.get(t.galleryId).then(function(t){e.form={gallery:t,text:""}})}function m(){e.loading=!0,u.comments({galleryId:t.galleryId}).then(function(t){e.comments=[],t.map(function(t){console.log(t),t.canEdit=t.user.obj.id===e.currentUser.id?!0:!1,e.comments.push(t)}),e.loading=!1,o.scrollBottom()})}e.currentUser=Parse.User.current(),e.loading=!0,e.backButton=function(){r.goBack()},m(),p(),e.myIndexValue="5",e.searchPeople=function(t){var o=[];return s.getFollowing().then(function(r){return _.each(r,function(e){e.imageUrl=e.photo?e.photo._url:"img/user.png",e.bio=e.status,e.name?e.name.toUpperCase().indexOf(t.toUpperCase())>=0&&o.push(e):(e.name="Not name",o.push(e))}),e.people=o,console.log(o),n.when(o)})},e.getPeopleTextRaw=function(e){return"@"+e.username},e.deleteComment=function(t,n){console.log(t),l.confirm("Delete comment","You are sure?").then(function(o){o&&d.get(t.id).then(function(t){d.destroy(t).then(function(t){e.comments.splice(n,1)})})})},e.editComment=function(t,n){console.log(t),e.formEdit={id:t.id,text:t.text},a.show({template:'<input type="text" ng-model="formEdit.text">',title:"Edit comment",scope:e,buttons:[{text:"Cancel"},{text:"<b>OK</b>",type:"button-positive",onTap:function(t){return console.log(e.formEdit),e.formEdit.text?e.formEdit:void t.preventDefault()}}]}).then(function(o){console.log(o),o&&d.get(t.id).then(function(t){t.text=o.text,e.comments[n].text=o.text,t.save()})})},e.submitComment=function(t,n){if(t.$valid){var o=angular.copy(n);e.loading=!0,d.create(o).then(function(t){m(),e.form.text=""})}}}e.$inject=["$scope","$stateParams","$q","$ionicScrollDelegate","$ionicHistory","Loading","$ionicPopup","User","Dialog","$timeout","Gallery","GalleryComment"],angular.module("starter").controller("GalleryComment",e)}(),function(){"use strict";function e(e,t,n,o,r,i){var a=t.currentUser;a?(console.log(a),a.name?i.go(r.routes.home,{clear:!0}):i.go("user.avatar",{clear:!0})):i.go(r.routes.login,{clear:!0}),e.$on("$ionicView.loaded",function(){n.ready(function(){navigator&&navigator.splashscreen&&o.hide()})})}e.$inject=["$scope","$rootScope","$ionicPlatform","$cordovaSplashscreen","AppConfig","$state"],angular.module("app.main").controller("LoadingCtrl",e)}(),function(){"use strict";function e(e,t,n){function o(){r.data={total:!1,galleries:[]},r.page=0,r.empty=!1,r.more=!1}var r=this;r.loading=!0,e.profile(n.username).then(function(e){console.log(e),console.log(Parse.User.current()),r.isMe=Parse.User.current().id===e.id?!0:!1,r.user=e,r.loading=!1}),r.openFollowers=function(){switch(console.log(t,n),t.current.name){case"tab.homeProfile":t.go("tab.homeProfileFollowers",{username:n.username});break;case"tab.activityProfile":t.go("tab.activityProfileFollowers",{username:n.username})}},r.openFollowing=function(){switch(console.log(t,n),t.current.name){case"tab.homeProfile":t.go("tab.homeProfileFollowing",{username:n.username});break;case"tab.activityProfile":t.go("tab.activityProfileFollowing",{username:n.username})}},r.follow=function(){r.loadingFollow=!0,e.follow(r.user.obj.id).then(function(e){console.log("Follow result",e),r.user.isFollow="follow"===e?!0:!1,"follow"==e&&(r.user.followersTotal+=1),"unfollow"==e&&(r.user.followersTotal-=1),r.loadingFollow=!1})},o(),r.tab={grid:!0,list:!1,album:!1,map:!1},r.changeTab=function(e){Object.keys(r.tab).map(function(t){t==e?r.tab[t]=!0:r.tab[t]=!1})}}e.$inject=["User","$state","$stateParams"],angular.module("app.main").controller("ProfileCtrl",e)}(),function(){"use strict";function e(e){var t=this;t.id=e.id}e.$inject=["$stateParams"],angular.module("app.main").controller("ProfilePhotoCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u){function d(){r.badge=0}var p=this;t.clearHistory(),r.storage=e,d(),i.$on("activity:clear",function(){d()}),s.ready(function(){n.init().then(function(){n.on("openPN",function(e){console.log("The user opened a notification:"+JSON.stringify(e)),r.$applyAsync()}),n.on("receivePN",function(e){console.log("yo i got this push notification:"+JSON.stringify(e)),r.badge++,r.$applyAsync()}),n.on("receivePN",function(e){console.log("message",e),r.$applyAsync()})})}),p.postPhoto=function(){a.open().then(a.modalPost).then(function(e){u.start(),console.log(e),c.upload({base64:e.image}).then(function(t){e.image=t,l.create(e).then(function(e){r.$emit("photoInclude",e),u.end()})})})}}e.$inject=["$localStorage","$ionicHistory","ParsePush","Facebook","$scope","$rootScope","PhotoService","$ionicPlatform","Gallery","ParseFile","Loading"],angular.module("app.main").controller("MainTabCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r){function i(){s.data={total:!1,galleries:[]},s.page=0,s.empty=!1,s.more=!1,a()}function a(){s.loadingFollowers=!0,s.loadingFollowing=!0,s.loadingPhotos=!0}var s=this;s.user=r.currentUser,s.photo=r.currentUser.attributes.photo,s.loading=!0,e.buttonTheme="button-"+t.theme,n.getPublicData(Parse.User.current()).then(function(e){console.log("Profile",e.attributes),s.user=e,s.loading=!1}),s.openFollowers=function(){o.go("tab.accountFollowers",{username:r.currentUser.attributes.username})},s.openFollowing=function(){o.go("tab.accountFollowing",{username:r.currentUser.attributes.username})},i(),s.tab={grid:!0,list:!1,album:!1,map:!1},s.changeTab=function(e){Object.keys(s.tab).map(function(t){t==e?s.tab[t]=!0:s.tab[t]=!1})}}e.$inject=["$scope","AppConfig","User","$state","$rootScope"],angular.module("app.main").controller("AccountCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r){function i(){e.loading||(e.loading=!0,r.feed(e.params).then(function(t){console.log(t),t.length>0?(e.params.page++,t.map(function(t){e.data.push(t)})):(0===e.data.length&&(e.showEmptyView=!0),e.moreDataCanBeLoaded=!1),e.loading=!1,n.$broadcast("scroll.infiniteScrollComplete"),n.$broadcast("scroll.refreshComplete")})["catch"](function(t){0===e.data.length&&(e.showErrorView=!0),e.$broadcast("scroll.refreshComplete")}))}function a(){e.params={},e.params.page=1,e.data=[],e.moreDataCanBeLoaded=!0,e.loading=!1,e.canEdit&&e.data.push({create:!0})}a(),e.openProfile=function(e){o.go("tab.activityProfile",{username:e})},e.follow=function(e){console.log(e.id,e.obj.id),e.loading=!0,t.follow(e.obj.id).then(function(t){console.log("Follow result",t),e.isFollow="follow"===t?!0:!1,"follow"==t&&(e.followersTotal+=1),"unfollow"==t&&(e.followersTotal-=1),e.loading=!1})},i(),n.$emit("activity:clear",!0),e.onLoadMore=function(){i()},e.onReload=function(){a(),i(),e.$broadcast("scroll.refreshComplete")}}e.$inject=["$scope","User","$rootScope","$state","GalleryActivity"],angular.module("app.main").controller("ActivityCtrl",e)}(),function(){"use strict";function e(e,t){var n=this;n.openProfile=function(t){e.go("tab.homeProfile",{username:t})},n.openLikers=function(t){e.go("tab.homeGalleryLikers",{galleryId:t})}}e.$inject=["$state","$ionicHistory"],angular.module("app.main").controller("HomeCtrl",e)}(),function(){"use strict";function e(e,t,n,o){function r(){e.loading||(e.loading=!0,n.search(e.params).then(function(t){t.length>0?(e.params.page++,t.map(function(t){e.data.push(t)})):(0===e.data.length&&(e.showEmptyView=!0),e.moreDataCanBeLoaded=!1),e.loading=!1,o.$broadcast("scroll.infiniteScrollComplete"),o.$broadcast("scroll.refreshComplete")})["catch"](function(t){0===e.data.length&&(e.showErrorView=!0),e.$broadcast("scroll.refreshComplete")}))}function i(){e.params.page=1,e.data=[],e.loading=!1,e.moreDataCanBeLoaded=!0,e.showEmptyView=!1,e.showErrorView=!1,e.canEdit&&e.data.push({create:!0})}e.params={},i(),e.onSearch=function(){var n=t("lowercase")(e.searchValue);e.params.search=n,e.data=[],e.onReload()},e.clearSearch=function(){e.params={},e.searchValue="",e.data=[],e.onReload()},r(),e.onLoadMore=function(){r()},e.onReload=function(){i(),r(),e.$broadcast("scroll.refreshComplete")}}e.$inject=["$scope","$filter","Gallery","$rootScope"],angular.module("app.main").controller("SearchCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a){function s(){e.galleries=[],m(),f(),e.map=new google.maps.Map(document.getElementById("map_canvas"),v),google.maps.event.addListener(e.map,"idle",function(){e.onSearchHere()})}function l(){i.getCurrentPosition().then(function(t){console.log(t),e.myLocation=c({latitude:t.coords.latitude,longitude:t.coords.longitude}),e.params.location=e.myLocation;var n={position:e.myLocation,title:"I am here",id:0};u(n),e.map.setCenter(e.params.location),p()},function(t){e.params.location=null;var n;n=1===t.code||3===t.code?"errorGpsDisabledText":"errorLocationMissingText",a.alert(n)})}function c(e){return e?new google.maps.LatLng(e.latitude,e.longitude):void 0}function u(n){var o={id:n.id,map:e.map,position:n.position,title:n.title,animation:google.maps.Animation.DROP};if(n.icon){var r=40;o.icon={url:n.icon,size:new google.maps.Size(r,r),scaledSize:new google.maps.Size(r,r),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(r/4,r/4)}}var i=new google.maps.Marker(o);google.maps.event.addListener(i,"click",function(){n.username&&t.go("tab.mapProfile",{username:n.username})}),h.push(i)}function d(t){e.galleries=t,t.map(function(t){if(t.location){var n={map:e.map,id:t.id,position:c(t.location),title:t.title,image:t.image.url(),icon:t.imageThumb.url(),username:t.attributes.user.attributes.username};_.some(h,{id:n.id})||u(n)}})}function p(){e.loading=!0,r.all(e.params).then(function(t){t.length>0?d(t):a.alert("galleriesNotFoundText"),e.loading=!1},function(){o.show("errorText")})}function m(){e.galleries=[]}function f(){_.each(h,function(e,t){t>0&&e.setMap(null)}),h=[]}var h=[];new google.maps.LatLngBounds;e.maxRating=5,e.storage=n,e.galleries=[],e.params={location:null,distance:100,page:1,limit:10},e.loading=!0,e.map,e.myLocation={};var g={latitude:-18.8800397,longitude:-47.05878999999999},v={center:c(g),zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};e.$on("$ionicView.enter",function(t,n){e.map||(s(),l())}),e.loadMyLocation=function(){e.params.location=e.myLocation,e.map.setCenter(e.params.location),console.log(e.map,e.params.location)},e.onSearchHere=function(){e.loading||(e.params.location.latitude=e.map.getCenter().lat(),e.params.location.longitude=e.map.getCenter().lng(),p())},e.onGalleryClicked=function(e){console.log(e)}}e.$inject=["$scope","$state","$localStorage","Toast","Gallery","Geolocation","Dialog"],angular.module("app.main").controller("SearchMapCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l){function c(){var e=r.getLoggedUser();n.form={name:e.name,email:e.email,status:e.status,gender:e.gender,img:e.img,username:e.username},console.log(n.form),console.log(n.formFields)}c(),n.photo=Parse.User.current().attributes.photo,n.submitAvatar=function(n,r){if(console.log(r),o.start(),n.$valid){var c=angular.copy(r);console.log(c),e.update(c).then(function(e){console.log(e),a.currentUser=Parse.User.current(),s.go(i.routes.home,{clear:!0}),o.end()})}else l.alert({title:t.instant("invalidForm"),text:t.instant("fillAllFields")}),o.end()}}e.$inject=["User","$translate","$scope","Loading","Auth","AppConfig","$rootScope","$state","Toast"],angular.module("app.main").controller("UserAvatarCtrl",e)}(),function(){"use strict";function e(e,t,n,o){return{restrict:"A",scope:{ngModel:"="},link:function(r,i){function a(){var i,a=r.ngModel,s=t.currentUser;return console.log(a),console.log(s),a.id!=s.id?!1:void e.image().then(function(e){return i=e,e}).then(function(e){r.loading=!0,n.upload({base64:e}).then(function(e){o.setPhoto(e).then(function(e){t.currentUser.photo=e.attributes.photo,r.loading=!1})})})}i.bind("click",a)}}}e.$inject=["ActionSheet","$rootScope","ParseFile","User"],angular.module("app.main").directive("userAvatar",e)}(),function(){"use strict";function e(e,t,n,o){var r=this;r.loading=!0,e.getFollowers(n.username).then(function(e){console.log(e),r.users=e,r.loading=!1}),t.clearSearch=function(){t.searchValue=""},r.openProfile=function(e){console.log("user",e),o.go("tab.homeProfile",{username:e.username})},r.follow=function(t){r.loadingFollow=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),r.loadingFollow=!1})}}e.$inject=["User","$scope","$stateParams","$state"],angular.module("starter").controller("UserFollowerCtrl",e)}(),function(){"use strict";function e(e,t,n,o){var r=this;r.loading=!0,e.getFollowing(n.username).then(function(e){console.log(e),r.users=e,r.loading=!1}),t.clearSearch=function(){t.searchValue=""},r.openProfile=function(e){console.log("user",e),o.go("tab.homeProfile",{username:e.username})},r.follow=function(t){r.loadingFollow=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),r.loadingFollow=!1})}}e.$inject=["User","$scope","$stateParams","$state"],angular.module("starter").controller("UserFollowingCtrl",e)}(),function(){"use strict";function e(e,t,n,o){var r=this,i=window.ionic.Platform.platform();r.slideIndex=0,r.slideChanged=function(e){r.slideIndex=e},r.next=function(){n.next()},r.previous=function(){n.previous()},i?r.device="android"===i?"android":"iphone":r.device="android",r.slides=[{text:"STEP1",img:"img/intro1.png"},{text:"STEP2",img:"img/intro2.png"},{text:"STEP3",img:"img/intro3.png"},{text:"STEP4",img:"img/intro4.png"},{text:"STEP5",img:"img/intro5.png"},{text:"STEP6",img:"img/intro6.png"},{text:"STEP7",img:"img/intro7.png"}],window.localStorage.walkthrough=!0,e.$on("$ionicView.loaded",function(){t.ready(function(){navigator&&navigator.splashscreen&&(o.hide(),window.StatusBar.styleLightContent())})})}e.$inject=["$scope","$ionicPlatform","$ionicSlideBoxDelegate","$cordovaSplashscreen"],angular.module("starter").controller("UserIntroCtrl",e)}(),function(){"use strict";function e(e,t,n,o){var r=this;r.loading=!0,e.getLikers(n.galleryId).then(function(e){console.log(e),r.users=e,r.loading=!1}),t.clearSearch=function(){t.searchValue=""},r.openProfile=function(e){console.log("user",e),o.go("tab.homeProfile",{username:e.username})},r.follow=function(t){r.loadingFollow=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),r.loadingFollow=!1})}}e.$inject=["User","$scope","$stateParams","$state"],angular.module("starter").controller("UserLikersCtrl",e)}(),function(){"use strict";function e(e,t,n,o){function r(){t.loading||(t.loading=!0,t.onSearch=function(){t.params.search=t.searchValue,t.onReload()},t.clearSearch=function(){t.params={},t.searchValue="",t.onReload()},e.list(t.params).then(function(e){console.log(e),e.length>0?(t.params.page++,e.map(function(e){t.data.push(e)})):(0===t.data.length&&(t.showEmptyView=!0),t.moreDataCanBeLoaded=!1),t.loading=!1,n.$broadcast("scroll.infiniteScrollComplete"),n.$broadcast("scroll.refreshComplete")})["catch"](function(e){0===t.data.length&&(t.showErrorView=!0),t.$broadcast("scroll.refreshComplete")}))}function i(){t.params.page=1,t.data=[],t.loading=!1,t.moreDataCanBeLoaded=!0,t.showEmptyView=!1,t.showErrorView=!1,t.canEdit&&t.data.push({create:!0})}t.params={},i(),r(),t.onLoadMore=function(){r()},t.onLoadMore=function(){r()},t.onReload=function(){i(),r()},t.openProfile=function(e){console.log("user",e),o.go("tab.homeProfile",{username:e.username})},t.follow=function(t){t.loading=!0,e.follow(t.userObj.id).then(function(e){console.log("Follow result",e),t.isFollow="follow"===e?!0:!1,"follow"==e&&(t.followersTotal+=1),"unfollow"==e&&(t.followersTotal-=1),t.loading=!1})}}e.$inject=["User","$scope","$rootScope","$state"],angular.module("starter").controller("UserListCtrl",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a){function s(){n.tempUser?t.form={email:n.tempUser.attributes.email,username:n.tempUser.attributes.username,password:""}:i.go("user.intro",{clear:!0})}var l=this;s(),t.submitMerge=function(t,s){console.log(t),console.table(s),
""!==l.form.password?(console.log(s),e.logIn(s).then(function(t){console.log(t),n.currentUser=t,e.getLoggedUser()&&r.link(Parse.User.current()).then(function(e){console.log(e),i.go(o.routes.home,{clear:!0})})["catch"](function(e){console.log(e),a.alert({title:"Ops",text:e.message})})})["catch"](function(e){a.alert({title:"Ops",text:e.message})})):a.alert({title:"Invalid form",text:"Please enter your email"})}}e.$inject=["Auth","$scope","$rootScope","AppConfig","Facebook","$state","Toast"],angular.module("app.main").controller("UserMergeCtrl",e)}(),function(){"use strict";function e(e,t,n,o){return{restrict:"A",scope:{login:"@",register:"@"},link:function(r,i){function a(){r.form={recovery:""},r.erro="",r.text={button:"",input:"Email"},t.show({scope:r,template:'<div class="popup-recovery"><form name="form.recovery" form-manager><label class="item item-input"><i class="icon ion-email placeholder-icon"></i><input type="email" ng-model="email" id="email" name="email" placeholder="{{ text.input }}" required ng-maxlength="80"></label><span class="error-msg">{{erro}}</span></form></div>',title:"A new password will be sent to your e-mail address",buttons:[{text:"Cancel",type:"button-calm"},{text:"Send",type:"button-positive",onTap:function(e){return r.form.recovery.$valid?r.form.recovery.email.$viewValue:(e.preventDefault(),void(r.erro="Invalid Email"))}}]}).then(function(t){if(!angular.isUndefined(t)){var r=t;console.log(t),n.start(),e.forgot(r).then(function(e){console.log(e),o.alert({login:"Forgot your password",text:"Access your accout mail"}),n.end()})["catch"](function(e){o.alert({login:"Ops",text:e}),n.end()})}})}i.bind("click",a)}}}e.$inject=["User","$ionicPopup","Loading","Toast"],angular.module("app.main").directive("recoveryPass",e)}(),function(){"use strict";function e(e,t){function n(){e.forgot(o.form).then(function(e){console.log(e)})["catch"](function(e){t.alert("Ops",e)})}var o=this;o.form={},o.submitForgot=n}e.$inject=["User","Toast"],angular.module("app.main").controller("UserRecoveryPassCtrl",e)}(),function(){"use strict";function e(e,t,n){function o(t,o){function r(){document.getElementById("browseBtn").click()}function i(){n.show({buttons:[{text:'<i class="icon ion-camera"></i>Photo Camera'},{text:'<i class="icon ion-images"></i> Photo Album'}],titleText:"Change Image",cancelText:"Cancel",cancel:function(){},buttonClicked:function(e){return 0===e&&console.log("Photo Camera"),1===e&&document.getElementById("browseBtn").click(),!0}})}function a(e){var n=e.target.files[0],o=new FileReader;o.readAsDataURL(n),o.onload=function(e){var n=e.target.result;t.crop(n)},angular.element(document.getElementById("browseBtn")).val("")}function s(n){console.log(t.option),e.crop({url:n,width:t.option?t.option.width:200,height:t.option?t.option.height:200,cancelText:"Cancel",chooseText:"Save"}).then(function(e){var n=e.toDataURL();console.log(n),t.ngModel=n})}t.action=i,o.bind("click",r),t.crop=s,angular.element(document.getElementById("browseBtn")).on("change",a)}return{restrict:"A",scope:{ngModel:"=",option:"=",cropSave:"&"},template:'<div><input type="file" id="browseBtn" image="image" accept="image/*" style="display: none"/></div>',link:o}}e.$inject=["$jrCrop","$translate","$ionicActionSheet"],angular.module("ion-photo").directive("ionCrop",e)}(),function(){"use strict";function e(){function e(e,t,n){console.log(e.filter),e.$watch("filter.slider.value",function(t){t&&(e.filter.slider.value=parseInt(t),e.filter.setSlider(e.filter.slider))})}return{restrict:"E",link:e,scope:{filter:"="},template:'<div class="item range range-positive"> <input type="range" name="filter.slider.name" min="-100" max="100" step="1" ng-model="filter.slider.value"  > </div>'}}angular.module("ion-photo").directive("sliderFilter",e)}(),function(){"use strict";angular.module("jrCrop",[]).factory("$jrCrop",["$ionicModal","$rootScope","$q",function(e,t,n){var o='<div class="jr-crop modal"><div class="jr-crop-center-container"><div class="jr-crop-img" ng-style="{width: width + \'px\', height: height + \'px\'}"></div></div><div class="jr-crop-center-container"><div class="jr-crop-select" style="overflow: hidden" ng-style="{width: width + \'px\', height: height + \'px\'}"></div></div><div class="bar bar-footer bar-dark jr-crop-footer"><button class="button button-clear" ng-click="cancel()">{{cancelText}}</button><div class="title">{{title}}</div><button class="button button-clear" ng-click="crop()">{{chooseText}}</button></div></div>',r=ionic.views.View.inherit({promise:null,imgWidth:null,imgHeight:null,imgSelect:null,imgFull:null,posX:0,posY:0,scale:1,rotate:0,last_scale:1,last_posX:0,last_posY:0,last_rotate:0,initialize:function(e){var t=this;t.options=e,t.promise=n.defer(),t.loadImage().then(function(e){t.imgWidth=e.naturalWidth,t.imgHeight=e.naturalHeight,t.options.modal.el.querySelector(".jr-crop-img").appendChild(t.imgSelect=e.cloneNode()),t.options.modal.el.querySelector(".jr-crop-select").appendChild(t.imgFull=e.cloneNode()),t.bindHandlers(),t.initImage()}),t.options.cancel=this.cancel.bind(this),t.options.crop=this.crop.bind(this)},initImage:function(){if(this.options.height<this.imgHeight||this.options.width<this.imgWidth){var e=this.imgWidth/this.imgHeight,t=this.options.width/this.options.height;t>e?this.scale=this.last_scale=this.options.width/this.imgWidth:this.scale=this.last_scale=this.options.height/this.imgHeight}var n=(this.imgWidth-this.options.width)/2,o=(this.imgHeight-this.options.height)/2;this.posX=this.last_posX=-n,this.posY=this.last_posY=-o,this.setImageTransform()},cancel:function(){var e=this;e.options.modal.remove().then(function(){e.promise.reject("canceled")})},bindHandlers:function(){function e(){t(),o.posX>r&&(o.posX=r),o.posX<a&&(o.posX=a),o.posY>i&&(o.posY=i),o.posY<s&&(o.posY=s)}function t(){var e=o.scale*o.imgWidth,t=o.scale*o.imgHeight;r=(e-o.imgWidth)/2,i=(t-o.imgHeight)/2,a=-(e-r-o.options.width),s=-(t-i-o.options.height)}var n,o=this,r=0,i=0,a=0,s=0,l=0,c=0,u=1,d=o.imgWidth/o.imgHeight,p=o.options.width/o.options.height;n=d>p?o.options.height/o.imgHeight:o.options.width/o.imgWidth;var m={prevent_default_directions:["left","right","up","down"]};ionic.onGesture("touch transform drag dragstart dragend rotate",function(t){switch(t.type){case"touch":o.last_scale=o.scale;break;case"drag":o.posX=o.last_posX+t.gesture.deltaX-l,o.posY=o.last_posY+t.gesture.deltaY-c,e();break;case"transform":o.scale=Math.max(n,Math.min(o.last_scale*t.gesture.scale,u)),e();break;case"dragend":o.last_posX=o.posX,o.last_posY=o.posY;break;case"dragstart":o.last_scale=o.scale,t.gesture.deltaX>1||t.gesture.deltaX<-1?(l=t.gesture.deltaX,c=t.gesture.deltaY):(l=0,c=0);break;case"rotate":o.rotate=o.last_rotate+t.gesture.rotation}o.setImageTransform()},o.options.modal.el,m)},setImageTransform:function(){var e=this,t="translate3d("+e.posX+"px,"+e.posY+"px, 0) scale3d("+e.scale+","+e.scale+", 1)rotate("+e.rotate+"deg)";e.imgSelect.style[ionic.CSS.TRANSFORM]=t,e.imgFull.style[ionic.CSS.TRANSFORM]=t},crop:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.options.width/this.scale,e.height=this.options.height/this.scale;var n=this.imgWidth*this.scale,o=this.imgHeight*this.scale,r=(n-this.imgWidth)/2,i=(o-this.imgHeight)/2,a=(this.posX-r)/this.scale,s=(this.posY-i)/this.scale;t.translate(a,s),t.translate(this.imgWidth/2,this.imgHeight/2),t.rotate(this.rotate*Math.PI/180),t.drawImage(this.imgFull,this.imgWidth/2*-1,this.imgHeight/2*-1),this.options.modal.remove(),this.promise.resolve(e)},loadImage:function(){var e=n.defer();return angular.element("<img />").bind("load",function(t){e.resolve(this)}).bind("error",e.reject).prop("src",this.options.url),e.promise}});return{defaultOptions:{width:0,height:0,aspectRatio:0,cancelText:"Cancel",chooseText:"Choose"},crop:function(n){n=this.initOptions(n);var i=t.$new(!0);return ionic.extend(i,n),i.modal=e.fromTemplate(o,{scope:i}),i.modal.show().then(function(){return new r(i).promise.promise})},initOptions:function(e){var t;return t=ionic.extend({},this.defaultOptions),t=ionic.extend(t,e),t.aspectRatio&&(!t.width&&t.height&&(t.width=200),t.width?t.height=t.width/t.aspectRatio:t.height&&(t.width=t.height*t.aspectRatio)),t}}}])}(),function(){"use strict";function e(e,t,n,o,r,i,a,s,l,c,u){function d(e){var t=u.defer();console.log(v),e&&(Object.keys(e).map(function(t,n){k[t]=e[t]}),console.log(k));var n={quality:k.quality,aspectRatio:k.aspectRatio,allowRotation:k.allowRotation,allowEdit:k.allowEdit,correctOrientation:k.correctOrientation,targetWidth:k.targetWidth,targetHeight:k.targetHeight,saveToPhotoAlbum:k.saveToPhotoAlbum,destinationType:window.cordova?Camera.DestinationType.DATA_URL:null,encodingType:window.cordova?Camera.EncodingType.JPEG:null,popoverOptions:window.cordova?CameraPopoverOptions:null};return m().then(function(e){console.log(e),h(e-1,n).then(p).then(t.resolve)["catch"](function(e){console.log(e)})}),t.promise}function p(e){var t=u.defer();return window.cordova&&(e="data:image/jpeg;base64,"+e),k.jrCrop?a.crop({url:e,aspectRatio:1,allowRotation:k.allowRotation,width:k.targetWidth,height:k.targetHeight,cancelText:r.instant("cancel"),chooseText:r.instant("submit")}).then(function(e){t.resolve(e.toDataURL())})["catch"](t.reject):t.resolve(e),t.promise}function m(){var e=u.defer();return f({title:r.instant("choseOption"),cancelText:r.instant("cancel"),options:[{text:r.instant("photo")},{text:r.instant("library")}]}).then(function(t){e.resolve(t)}).then(e.resolve)["catch"](e.reject),e.promise}function f(t){var n=u.defer();if(window.cordova){var o={title:t.title,buttonLabels:_.map(t.options,function(e){return e.text}),addCancelButtonWithLabel:t.cancelText,androidEnableCancelButton:!0,androidTheme:window.plugins.actionsheet.ANDROID_THEMES.THEME_HOLO_LIGHT};i.show(o).then(function(e){3!==e&&n.resolve(e),n.reject("cancel")})}else var r=e.show({buttons:t.options,titleText:t.title,cancelText:t.cancelText,cancel:function(){r()},buttonClicked:function(e){r(),3!==e&&n.resolve(e),n.reject("cancel")}});return n.promise}function h(e,n){function r(e){if(0===e&&w&&(n.sourceType=Camera.PictureSourceType.CAMERA),1===e&&w&&(n.sourceType=Camera.PictureSourceType.PHOTOLIBRARY),w)o.getPicture(n).then(a.resolve,a.reject);else{var t=angular.element('<input type="file" accept="image/x-png, image/gif, image/jpeg" max-size="2048" />');t[0].click(),t.on("change",function(e){y=e.currentTarget.files[0];var t=new FileReader;t.onload=function(e){a.resolve(e.target.result)},t.readAsDataURL(y)})}}function i(){t.captureVideo({limit:1,duration:5}).then(function(e){y=e[0].fullPath,a.resolve(y)},a.reject)}var a=u.defer();return 0===e&&r(0),1===e&&r(1),2===e&&i(),a.promise}function g(e){var t=u.defer(),o=s.$new();return o.image=e,o.form={title:"",facebookShare:!0},o.searchPeople=function(e){var t=[];return n.getFollowing().then(function(n){return _.each(n,function(n){n.imageUrl=n.photo?n.photo._url:"img/user.png",n.bio=n.status,n.name.toUpperCase().indexOf(e.toUpperCase())>=0&&t.push(n)}),o.people=t,u.when(t)})},o.getPeopleTextRaw=function(e){return"@"+e.username},o.theme=s.theme,l.fromTemplateUrl("app/main/share/share-modal.html",{scope:o,focusFirstInput:!0}).then(function(e){o.modalFilter=e,o.modalFilter.show()}),o.form.address={},o.closeAddress=function(){o.form.address={}},o.close=function(){o.modalFilter.hide()},o.$on("$destroy",function(){o.modal.remove()}),o.submit=function(e,n){if(e.$valid){var n=angular.copy(o.form);n.image=o.image,y="",o.close(),t.resolve(n)}else console.log("Error",e)},t.promise}var v=ionic.Platform.device(),b=ionic.Platform.isIOS();console.log("isIOS",b);var y,w=window.cordova,k={jrCrop:!1,quality:90,allowEdit:!0,filter:!0,correctOrientation:!0,targetWidth:640,targetHeight:640,saveToPhotoAlbum:!1,allowRotation:!0,aspectRatio:0};return{open:d,crop:p,modalPost:g}}e.$inject=["$ionicActionSheet","$cordovaCapture","User","$cordovaCamera","$translate","$cordovaActionSheet","$jrCrop","$rootScope","$ionicModal","ActionSheet","$q"],angular.module("ion-photo").factory("PhotoService",e)}(),function(){"use strict";function e(e,t){function n(t){e.resolveLocalFileSystemURL(t,function(e){return o(e)},a)}function o(t){var n=t.fullPath.substr(t.fullPath.lastIndexOf("/")+1),o=s()+n;e.resolveLocalFileSystemURL(cordova.file.dataDirectory,function(e){t.copyTo(e,o,function(e){return r(e)},a)},a)}function r(t){var n=t.nativeURL.slice(0,-4);e.PKVideoThumbnail.createThumbnail(t.nativeURL,n+".png",function(e){return i(e)},a)}function i(e){var t=e.slice(0,-4);t+=".MOV",l.resolve(t)}function a(e){console.log("FAIL: "+e.code),l.reject("ERROR")}function s(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;5>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var l=t.defer();return{saveVideo:function(e){return n(e[0].localURL),promise}}}e.$inject=["$window","$q"],angular.module("ion-photo").factory("Video",e)}(),function(){"use strict";angular.module("ionic").run(["$templateCache",function(e){e.put("app/directive/SigninModalDirective.html",'<ion-modal-view id="user-layout" class="modal-auth bg-animate" cache-view="false"><ion-header-bar><h1 class="title" \ntranslate="signin"></h1><a ng-click="closeModal()" class="button button-icon icon ion-ios-close-empty"></a>\n</ion-header-bar><ion-content class="padding" scroll="false"><div class="step2"><form name="myForm" \nnovalidate="novalidate" ng-submit="submitLogin(myForm, form)"><label class="item item-input"><i \nclass="icon icon-user placeholder-icon"></i> <input required="required" type="text" name="username" \nng-model="form.username" ng-minlength="4" ng-maxlength="12" ng-model-options="{debounce: 1000}" \nng-pattern="/^[a-zA-Z\'. -]+$/" placeholder="{{\'yourLogin\' | translate}}"></label><div ng-if="myForm.username.$dirty">\n<div ng-messages="myForm.username.$error" class="validation-error"><div ng-message="required" \ntranslate="usernameRequired"></div><div ng-message="email" translate="usernameInUse"></div></div><div \nng-messages="myForm.username.$pending" class="validation-pending"><div ng-message="email" translate="checkingUsername">\n</div></div></div><label class="item item-input"><i class="icon icon-lock placeholder-icon"></i> <input required \ntype="password" name="password" ng-model="form.password" placeholder="{{\'password\'|translate}}"></label><button \nclass="button button-block button-outline button-light" type="submit" translate="{{\'submit\' | translate}}"></button>\n</form><button class="button button-block button-clear button-light" ng-click="forgotPass()" \ntranslate="{{\'forgotPass\' | translate}}"></button> <span class="term">{{\'termAccept\' | translate}} <a \nhref="https://photogramapp.com">{{\'terms\' | translate}}</a></span></div></ion-content></ion-modal-view>'),e.put("app/directive/SignupModalDirective.html",'<ion-modal-view id="user-layout" class="modal-auth bg-animate" cache-view="false"><ion-header-bar><h1 class="title" \ntranslate="register"></h1><a ng-click="closeModal()" class="button button-icon icon ion-ios-close-empty"></a>\n</ion-header-bar><ion-content class="padding" scroll="false"><div class="step2"><form name="myForm" \nnovalidate="novalidate" ng-submit="submitRegister(myForm, form)"><label class="item item-input"><i \nclass="icon icon-envelope placeholder-icon"></i> <input required="required" type="email" name="email" \nng-model="form.email" email-validator ng-model-options="{debounce: 1000}" placeholder="user@example.com"></label><div \nng-if="myForm.email.$dirty"><div ng-messages="myForm.email.$error" class="validation-error"><div ng-message="required" \ntranslate="emailRequired"></div><div ng-message="email" translate="emailInUse"></div></div><div \nng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" translate="checkingEmail"></div>\n</div></div><label class="item item-input"><i class="icon icon-user placeholder-icon"></i> <input required="required" \ntype="text" name="username" ng-model="form.username" username-validator ng-minlength="4" ng-maxlength="12" \nng-model-options="{debounce: 1000}" ng-pattern="/^[a-zA-Z\'. -]+$/" placeholder="{{\'yourLogin\' | translate}}"></label>\n<div ng-if="myForm.username.$dirty"><div ng-messages="myForm.email.$error" class="validation-error"><div \nng-message="required" translate="usernameRequired"></div><div ng-message="email" translate="usernameInUse"></div></div>\n<div ng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" \ntranslate="checkingUsername"></div></div></div><label class="item item-input"><i \nclass="icon icon-lock placeholder-icon"></i> <input required type="password" name="password" ng-model="form.password" \nplaceholder="{{\'password\'|translate}}"></label><button class="button button-block button-outline button-light" \ntype="submit" translate="{{\'submit\' | translate}}"></button></form><span class="term">{{\'termAccept\' | translate}} <a \nhref="https://photogramapp.com">{{\'terms\' | translate}}</a></span></div></ion-content></ion-modal-view>'),e.put("app/directive/albumGridDirective.html",'<div class="center padding" ng-if="showErrorView"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading &&!data.length">\n<ion-spinner></ion-spinner></div><div class="row" ng-if="$index % 2 === 0" \nng-repeat="image in data | orderBy:\'createdAt\':true"><div class="col col-50 newAlbum" \nng-if="$index < data.length && data[$index].create" gallery-new-album-modal ng-model="ngModel"><div class="desc"><i \nclass="icon ion-ios-plus-empty"></i><h2 translate="createAlbum"></h2></div></div><div class="col col-50" \nng-if="$index < data.length && !data[$index].create" album-photo-grid album="data[$index].id" edit="canEdit"><img \nng-src="{{ ::data[$index].imageThumb._url || \'img/albumnone.png\'}}" width="100%"><div class="desc"><h2>\n{{::data[$index].title}}</h2><p>{{::data[$index].qtyPhotos}} photos</p></div></div><div class="col col-50" \nng-if="$index + 1 < data.length" album-photo-grid album="data[$index+1].id" edit="canEdit"><img \nng-src="{{ ::data[$index + 1].imageThumb._url || \'img/albumnone.png\'}}" width="100%"><div class="desc"><h2>\n{{::data[$index+1].title}}</h2><p>{{::data[$index+1].qtyPhotos}} photos</p></div></div></div><ion-infinite-scroll \non-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded" spinner distance="1%"></ion-infinite-scroll>'),e.put("app/directive/albumPhotoGridDirective.html",'<ion-modal-view cache-view="false"><ion-header-bar class="bar bar-{{theme}}"><a ng-click="closeAlbumPhotoGridModal()" \nclass="button button-icon icon ion-ios-close-empty"></a><h1 class="title" ng-bind="title"></h1><a \nclass="button button-icon icon ion-android-more-vertical" ng-if="canEdit" ng-click="openPopover($event)"></a>\n</ion-header-bar><ion-content class="padding"><div class="center padding" ng-if="loading"><ion-spinner></ion-spinner>\n</div><div class="row" ng-if="$index % 3 === 0" ng-repeat="image in data | orderBy:\'createdAt\':true"><div \nclass="col col-33" ng-if="$index < data.length"><img ng-if="profile" profile-modal user="data[$index].user.obj" \nng-src="{{ ::data[$index].imageThumb._url}}" width="100%"> <img ng-if="!profile" ion-slideshow ng-model="data" \nindex="$index" ng-src="{{ ::data[$index].imageThumb._url}}" width="100%"></div><div class="col col-33" \nng-if="$index + 1 < data.length"><img ng-if="profile" profile-modal user="data[$index + 1].user.obj" \nng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"> <img ng-if="!profile" ion-slideshow ng-model="data" \nindex="$index+1" ng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"></div><div class="col col-33" \nng-if="$index + 2 < data.length"><img ng-if="profile" profile-modal user="data[$index + 2].user.obj" \nng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"> <img ng-if="!profile" ion-slideshow ng-model="data" \nindex="$index+2" ng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"></div></div></ion-content>\n</ion-modal-view>'),e.put("app/directive/albumPhotoGridPopover.html",'<ion-popover-view><ion-content><div class="list"><a class="item item-icon-left" ng-click="uploadPhoto()"><i \nclass="icon ion-ios-camera-outline"></i> <span translate="addPhoto"></span> </a><a class="item item-icon-left" \nng-click="editAlbum()"><i class="icon ion-ios-compose-outline"></i> <span translate="editAlbum"></span> </a><a \nclass="item item-icon-left" ng-click="deleteAlbum()"><i class="icon ion-ios-trash-outline"></i> <span \ntranslate="deleteAlbum"></span></a></div></ion-content></ion-popover-view>'),e.put("app/directive/distanceModal.html",'<ion-modal-view><ion-header-bar class="bar bar-{{theme}}"><div class="buttons"><button \nclass="button button-clear button-icon ion-ios-close-empty" ng-click="closeDistanceModal()"></button></div><div \nclass="title">{{ "chooseDistanceText" | translate }}</div></ion-header-bar><ion-content><ion-list><ion-item \nclass="item item-icon-right" ng-repeat="distance in distances" ng-click="onDistanceSelected(distance.val)" bindonce><h2\n bo-bind="distance.text"></h2><i class="icon ion-checkmark" ng-show="params.distance === distance.val"></i></ion-item>\n</ion-list></ion-content></ion-modal-view>'),e.put("app/directive/follow.modal.html",'<ion-modal-view class="modal-profile photogram-profile"><ion-header-bar class="bar-positive"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\nFollow Users</div></ion-header-bar><ion-content><div class="list"><div class="item item-avatar item-button-right" \nng-repeat="item in data"><img ng-src="{{ ::item.src }}"><h2>{{ ::item.name }}</h2><p>{{ ::item.status }}</p><button \nclass="button" ng-click="item.follow = !item.follow" ng-class="item.follow ? \'button-positive\' : \'button-stable\'"><i \nclass="icon" ng-class="item.follow? \'ion-thumbsup\' : \'ion-plus\'"></i></button></div></div></ion-content>\n</ion-modal-view>'),e.put("app/directive/galleryAlbumModalDirective.html",'<ion-modal-view><ion-header-bar class="bar bar-{{theme}}"><a ng-click="closeModal()" class="button button-clear" \ntranslate="cancel"></a><h1 class="title" translate="selectAlbumText"></h1></ion-header-bar><ion-content><div \nclass="list"><div class="item item-thumbnail-left" gallery-new-album-modal ng-model="ngModel"><img \nsrc="img/albumnew.png"><h2>Create Album</h2></div><div class="item item-thumbnail-left" \nng-repeat="item in data | filter:searchValue" ng-click="selectAlbum(item)"><img \nng-src="{{item.imageThumb._url || \'img/albumnone.png\'}}"><h2 ng-bind="item.title"></h2><p>{{item.qtyPhotos}} photos</p>\n</div></div><ion-infinite-scroll on-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded" spinner></ion-infinite-scroll>\n</ion-content></ion-modal-view>'),e.put("app/directive/galleryNewAlbumModalDirective.html",'<ion-modal-view><form name="rForm" novalidate><ion-header-bar class="bar bar-{{theme}}"><button \nng-click="closeModal()" class="button button-clear" translate="cancel"></button><h1 class="title" \ntranslate="createAlbum" ng-if="!form.id"></h1><h1 class="title" translate="editAlbum" ng-if="form.id"></h1><button \nng-click="createAlbum(rForm, form)" class="button button-clear" translate="submit"></button></ion-header-bar>\n<ion-content><div class="list"><label class="item item-input"><input type="text" name="title" \nplaceholder="{{\'albumName\' | translate}}" ng-model="form.title" required></label><label class="item item-input">\n<textarea name="description" placeholder="{{\'albumDesc\' | translate}}" ng-model="form.description"></textarea></label>\n</div></ion-content></form></ion-modal-view>'),e.put("app/directive/likeDirective.html",'<ion-modal-view class="modal-comment"><ion-header-bar class="bar-dark"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\n{{ ::\'Likes\' | translate }} ({{ ::likes.length }})</div></ion-header-bar><ion-content><div class="list step1"><div \nng-repeat="item in likes" class="item item-avatar item-button-right"><img ng-src="{{ ::item.user.img }}"><h2>\n{{ ::item.user.name }}</h2><div>{{ ::item.text }}</div><p>{{ ::item.created | amTimeAgo }}</p><button \nclass="button button-positive button-outline"><i class="icon ion-ios-plus-empty"></i> {{ ::\'Follow\' }}</button></div>\n</div></ion-content></ion-modal-view>'),e.put("app/directive/mapPhotoUserDirective.html",'<div id="map_canvas" data-tap-disabled="true"></div>'),e.put("app/directive/photoCommentDirective.html",'<ion-modal-view class="modal-comment"><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\n<span translate="commentPhotoText"></span>({{ comments.length }})</div></ion-header-bar><ion-content><div \nclass="padding center" ng-if="loading"><ion-spinner></ion-spinner></div><ion-list class="list" \nng-show="comments.length" can-swipe="true"><ion-item ng-repeat="item in comments | orderBy:createdAt" \nclass="item item-avatar"><img ng-src="{{ ::item.user.photo._url || \'./img/user.png\'}}"><div class="row"><h2>\n{{ ::item.user.name }}</h2></div><div class="row"><div class="text">{{ ::item.text }}</div></div><div class="row"><p>\n{{ ::item.createdAt | amTimeAgo }}</p></div><div ng-if="item.user.id === currentUser.id"><ion-option-button \nclass="button-info" ng-click="editComment(item)" translate="edit">Edit</ion-option-button><ion-option-button \nclass="button-assertive" ng-click="deleteComment(item)" translate="remove">Remove</ion-option-button></div></ion-item>\n</ion-list><div class="center-ico" ng-if="nocomments"><i class="icon ion-ios-chatbubble-outline"></i><h1 \ntranslate="noComments"></h1></div></ion-content><form name="rForm" ng-submit="submitComment(rForm, form)" novalidate>\n<ion-footer-bar class="bar-stable item-input-inset message-footer" keyboard-attach><label class="item-input-wrapper"><i\n class="icon ion-ios-compose-outline placeholder-icon"></i><textarea mentio mentio-trigger-char="\'@\'" \nmentio-items="people" mentio-template-url="app/mentio/people-mentions.html" mentio-search="searchPeople(term)" \nmentio-select="getPeopleTextRaw(item)" mentio-id="\'theTextArea\'" ng-trim="false" ng-model="form.text" \nplaceholder="Send a comment..." required minlength="1" maxlength="1500">\n                </textarea></label><div \nclass="footer-btn-wrap"><button class="button button-positive button-outline" type="submit" \nng-disabled="!form.text || form.text === \'\'">Publish</button></div></ion-footer-bar></form></ion-modal-view>'),e.put("app/directive/photoGridDirective.html",'<div class="center padding" ng-if="showErrorView"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading &&!data.length">\n<ion-spinner></ion-spinner></div><div class="row" ng-if="$index % 3 === 0" \nng-repeat="image in data | orderBy:\'createdAt\':true"><div class="col col-33" ng-if="$index < data.length"><img \nng-if="profile" profile-modal user="data[$index].user.obj" ng-src="{{ ::data[$index].imageThumb._url}}" width="100%"> \n<img ng-if="!profile" ion-slideshow ng-model="data" index="$index" ng-src="{{ ::data[$index].imageThumb._url}}" \nwidth="100%"></div><div class="col col-33" ng-if="$index + 1 < data.length"><img ng-if="profile" profile-modal \nuser="data[$index + 1].user.obj" ng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nion-slideshow ng-model="data" index="$index+1" ng-src="{{ ::data[$index + 1].imageThumb._url}}" width="100%"></div><div\n class="col col-33" ng-if="$index + 2 < data.length"><img ng-if="profile" profile-modal \nuser="data[$index + 2].user.obj" ng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"> <img ng-if="!profile" \nion-slideshow ng-model="data" index="$index+2" ng-src="{{ ::data[$index + 2].imageThumb._url}}" width="100%"></div>\n</div><ion-infinite-scroll on-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded" spinner distance="1%">\n</ion-infinite-scroll>'),e.put("app/directive/photoListDirective.html",'<div class="center padding" ng-if="showErrorView"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading &&!data.length">\n<ion-spinner></ion-spinner></div><div class="list card" ng-repeat="gallery in data | orderBy:\'createdAt\':true"><div \nclass="item item-avatar" ng-click="load(gallery.user.username)" ion-affix data-affix-within-parent-with-class="card">\n<img ng-if="profile" ng-src="{{ ::gallery.user.photo._url}}"> <img \nng-src="{{ ::gallery.user.photo._url || \'img/user.png\'}}"><h2>{{ ::gallery.user.name}}</h2><p>\n{{ ::gallery.user.status}}</p><span>{{ ::gallery.createdAt | amTimeAgo}}</span></div><div class="item item-body" \non-double-tap="like(gallery.id)" ng-model="gallery"><div class="icon ion-ios-heart heart" \nng-class="gallery.isLiked ? \'happy\' : \'broken\' "></div><i class="icon" ng-if="like"></i> <img \nng-src="{{ gallery.image._url}}" id="{{ ::gallery.id}}"></div><div class="item item-buttons"><div class="row"><div \nclass="col col-30"><ion-spinner ng-show="gallery.progress"></ion-spinner><button photo-like ng-model="gallery" \nng-if="!gallery.progress" ng-class="gallery.isLiked ? \'ion-ios-heart\' : \'ion-ios-heart-outline\' " \nclass="button-clear button-icon button-heart"></button> <button ng-click="openComment(gallery.id)" ng-model="gallery" \nclass="button-clear button-icon ion-ios-chatbubble-outline"></button> <button ng-click="share(gallery)" \nphotogram="{{ :: gallery.id }}" class="button-clear button-icon ion-android-share"></button></div><div \nclass="col album-name text-center" album-photo-grid album="gallery.album.id" edit="gallery.canEdit"><div \nng-bind="gallery.album.attributes.title"></div></div><div class="col text-right"><button ng-click="action(gallery)" \nphotogram="{{ :: gallery.id }}" class="button-clear button-icon ion-android-more-vertical"></button></div></div></div>\n<div class="padding"><span class="likes" ng-click="openLikers(gallery.id)"><i class="icon ion-ios-heart"></i> <span \nng-if="!gallery.progress">{{ gallery.likesTotal }}</span> <span translate="likesText"></span></span><div \nclass="list-comments"><div class="comment-item"><span profile-modal username="gallery.user.username" class="username">\n{{ :: gallery.user.name }}</span> <span class="comment" ng-bind-html="gallery.title | hashtag "></span></div><div \nclass="comment-item" ng-repeat="item in gallery.comments |limitTo:3 | orderBy:\'createdAt\':true"><span class="username" \nprofile-modal username="gallery.user.username">{{ :: item.user.name }}</span> <span class="comment" \nng-bind-html="item.text | hashtag"></span></div><a class="comment-item" photo-comment ng-model="gallery" \nng-if="gallery.commentsTotal>3" translate="seeAllCommentText"></a></div><button \nclass="button button-block button-clear button-comment" photo-comment ng-model="gallery"><span translate="addComment">\n</span></button></div></div><ion-infinite-scroll on-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded" spinner>\n</ion-infinite-scroll>'),
e.put("app/directive/profile-edit-modal.html",'<ion-modal-view class="profile-edit"><ion-header-bar class="bar bar-{{theme}}"><button class="button button-clear" \nng-click="closeModal()" translate="cancel"></button><div class="title">{{ ::\'editProfile\' | translate }}</div>\n</ion-header-bar><ion-content class="view-avatar"><div class="step2"><form name="rForm" \nng-submit="submitUpdateProfile(rForm, form)" novalidate><img class="avatar" user-avatar ng-model="currentUser" \nng-src="{{ currentUser.photo.url() || \'img/user.png\' }}"><label class="item item-input"><i \nclass="icon ion-clipboard placeholder-icon"></i> <input required="required" type="text" name="name" \nng-model="form.name" placeholder="{{\'name\' | translate}}"></label><label class="item item-input"><i \nclass="icon ion-at placeholder-icon"></i> <input required="required" type="text" name="username" \nng-model="form.username" ng-minlength="4" ng-maxlength="12" ng-pattern="/^[a-zA-Z\'. -]+$/" \nplaceholder="{{\'username\' | translate}}"></label><label class="item item-input"><i \nclass="icon ion-earth placeholder-icon"></i> <input type="url" name="website" ng-model="form.website" \nplaceholder="{{\'site\' | translate}}"></label><label class="item item-input"><i \nclass="icon ion-information-circled placeholder-icon"></i> <input required="required" type="text" name="status" \nng-model="form.status" placeholder="{{\'status\' | translate}}"></label><ion-item class="item-divider" \ntranslate="privateInformation"></ion-item><label class="item item-input"><i \nclass="icon icon-envelope placeholder-icon"></i> <input type="email" name="email" ng-model="form.email" \ndisabled="disabled" ng-model-options="{debounce: 1000}" placeholder="user@example.com"></label><label \nclass="item item-input"><i class="icon ion-iphone placeholder-icon"></i> <input required="required" type="tel" \nname="phone" ng-model="form.phone" placeholder="{{\'phone\' | translate }}"></label><div class="padding"><button \ntype="submit" class="button button-block button-positive" translate="submit"></button></div></form></div></ion-content>\n</ion-modal-view>'),e.put("app/directive/profile-modal.html",'<ion-modal-view id="account-view"><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title">\n{{ user.name }}</div></ion-header-bar><ion-content overflow-scroll="true"><div class="profile-top"><div class="row">\n<div class="col-25"><img class="avatar" ng-src="{{ user.photo._url || \'img/user.png\'}}"></div><div \nclass="col col-statics"><div class="row"><div class="row"><div class="col"><span class="text-center">\n{{ ::user.galleriesTotal || 0}}</span><h3 translate="postsText"></h3></div><div class="col"><span class="text-center">\n{{ user.followersTotal || 0}}</span><h3 translate="followersText"></h3></div><div class="col"><span \nclass="text-center">{{ ::user.followingsTotal || 0}}</span><h3 translate="followingText"></h3></div></div></div><div \nclass="row col-edit"><div class="col"><photogram-loading loading="loadingFollow"></photogram-loading><button \nng-class="{\'button-unfollow\': user.isFollow, \'button-follow\': !user.isFollow}" ng-click="follow()" class="button"><span\n ng-show="!user.isFollow" translate>Follow</span> <span ng-show="user.isFollow" translate>Following</span></button>\n</div></div></div></div><div class="padding"><span class="user-username">{{ user.name }}</span><p class="user-status">\n{{ user.status }}</p></div></div><div class="item bar"><div class="button-bar"><button \nclass="button button-icon icon ion-grid" ng-class="{active: tab.grid}" ng-click="changeTab(\'grid\')"></button> <button \nclass="button button-icon icon ion-drag" ng-class="{active: tab.list}" ng-click="changeTab(\'list\')"></button> <button \nclass="button button-icon icon ion-ios-location"></button></div></div><div class="item item-divider" \ntranslate="recent"></div><div class="tab" ng-if="tab.list"></div><div class="tab" ng-if="tab.grid"></div></ion-content>\n</ion-modal-view>'),e.put("app/directive/search-directive.html",'<label class="item item-input"><i class="icon ion-search placeholder-icon"></i> <input type="search" ng-model="input" \nplaceholder="{{\'SEARCH.FORM.INPUT\' | translate }}"> <button class="button button-icon" ng-if="input.length" \nng-click="clearSearch()"><i class="icon ion-close"></i></button></label>'),e.put("app/directive/settings-modal.html",'<ion-modal-view class="modal-profile"><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeSettingModal()"></button><div \nclass="title" translate="settingTitle"></div></ion-header-bar><ion-content class="animated fadeIn"><div class="list">\n<ion-language></ion-language><ion-toggle class="toggle-positive" ng-model="form.push"><h3><small \ntranslate="notificationText"></small></h3><p ng-if="form.push" translate="on"></p><p ng-if="!form.push" \ntranslate="off"></p></ion-toggle><ion-item class="item-icon-right" href="http://photogramapp.com"><h3><small \ntranslate="terms"></small></h3><i class="icon ion-ios-arrow-right"></i></ion-item></div><div class="padding"><button \nng-click="logout()" class="button button-block button-positive" translate="logout"></button></div></ion-content>\n</ion-modal-view>'),e.put("app/mentio/people-mentions.html",'<ul class="list-group user-search"><li mentio-menu-item="person" ng-repeat="person in items" class="list-group-item">\n<img ng-src="{{person.imageUrl}}" class="user-photo"><div class="description"><span class="text-primary" \nng-bind-html="person.username | mentioHighlight:typedTerm:\'menu-highlighted\' | unsafe"></span> <em class="text-muted" \nng-bind="person.status | words:5"></em></div></li></ul>'),e.put("app/mentio/photo-mentions.html",'<ul class="list-group product-search demo-scrollable-menu"><li mentio-menu-item="product" ng-repeat="product in items" \nclass="list-group-item clearfix"><div class="row"><div class="col-xs-2 text-center"><img ng-src="{{product.imageUrl}}" \nclass="product-photo"></div><div class="col-xs-10"><h4 class="list-group-item-heading">{{product.title | words:5}}</h4>\n<p class="list-group-item-text">{{product.description | words:7}}</p></div></div></li></ul>'),e.put("app/component/ion-language/ion-language.html",'<button class="button button-block button-clear button-{{theme}} button-language">{{language.translation | translate}} \n<i class="icon ion-android-arrow-dropdown"></i></button>'),e.put("app/component/ion-language/modal-language.html",'<ion-modal-view><ion-header-bar><h1 class="title" translate="selectLanguageText"></h1><a ng-click="closeModal()" \nclass="button button-icon icon ion-close"></a></ion-header-bar><div \nclass="bar bar-subheader item-input-inset bar-stable"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="search" placeholder="{{\'searchText\' | translate}}" \nng-model="searchValue"></label><button type="button" class="button button-clear" ng-show="searchValue.length" \nng-click="searchValue=\'\'">Clear</button></div><ion-content class="has-subheader has-header"><ion-list><ion-item \nclass="item" ng-click="selectLanguage(item)" ng-repeat="item in languages | filter:searchValue" \nng-bind-html="item.translation | translate"></ion-item></ion-list></ion-content></ion-modal-view>'),e.put("app/component/ion-slideshow/image-popover.html",'<div class="modal image-modal transparent" ng-click="closeModal()"><ion-slide-box \non-slide-changed="slideChanged(index)" show-pager="true" active-slide="activeSlide"><ion-slide \nng-repeat="item in allImages"><img ng-src="{{item.image._url}}" class="fullscreen-image"></ion-slide></ion-slide-box>\n</div>'),e.put("app/component/ion-slideshow/video-popover.html",'<div class="modal transparent fullscreen-player" ng-click="closeModal()"><video ng-src="{{clipSrc}}" class="centerme" \ncontrols="controls" autoplay></video></div>'),e.put("app/main/account-friend-list/account-friend-list.html","<ion-view><ion-content></ion-content></ion-view>"),e.put("app/main/feedback/feedback-modal.html",'<ion-modal-view class="modal-profile"><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModal()"></button><div class="title" \ntranslate="feedbackTitle"></div></ion-header-bar><ion-content><form name="myForm" novalidate="novalidate" \nng-submit="submitFeedback(myForm, form)"><label class="item item-input"><i class="icon icon-envelope placeholder-icon">\n</i> <input required="required" type="text" name="title" ng-model="form.title" \nplaceholder="{{\'feedbackTitle\' | translate}}"></label><label class="item item-input item-select"><i \nclass="icon ion-ios-information-outline placeholder-icon"></i><div class="input-label" translate>subject</div><select \nng-model="form.subject"><option selected="selected" translate>complaint</option><option translate>bug</option><option \ntranslate>suggestion</option></select></label><label class="item item-input"><i \nclass="icon ion-ios-compose-outline placeholder-icon"></i><textarea ng-model="form.message" \nplaceholder="{{\'message\' | translate}}"></textarea></label><div class="padding"><button \nclass="button button-block button-positive" type="submit" translate="{{\'submit\' | translate}}"></button></div></form>\n</ion-content></ion-modal-view>'),e.put("app/main/gallery-comment/gallery-comment.html",'<ion-view class="modal-comment" cache-view="false"><ion-nav-bar class="bar bar-{{theme}}"><ion-nav-buttons side="left">\n<button class="button button-icon button-clear ion-ios-arrow-left" ng-click="$ionicGoBack()"></button>\n</ion-nav-buttons><ion-nav-title><div class="title"><span translate="commentPhotoText"></span>({{ comments.length }})\n</div></ion-nav-title></ion-nav-bar><ion-content><div class="padding center" ng-if="loading"><ion-spinner>\n</ion-spinner></div><ion-list class="list" ng-if="!loading" can-swipe="true"><ion-item \nng-repeat="item in comments | orderBy:\'createdAt\':false" class="item item-avatar"><img \nng-src="{{ ::item.user.photo._url || \'./img/user.png\'}}"><div class="row"><h2>{{ ::item.user.name }}</h2></div><div \nclass="row"><div class="text">{{ ::item.text }}</div></div><div class="row"><p>{{ ::item.createdAt | amTimeAgo }}</p>\n</div><div ng-if="item.canEdit"><ion-option-button class="button-info" ng-click="editComment(item, $index)" \ntranslate="edit">Edit</ion-option-button><ion-option-button class="button-assertive" \nng-click="deleteComment(item, $index)" translate="remove">Remove</ion-option-button></div></ion-item></ion-list><div \nclass="center-ico" ng-if="nocomments"><i class="icon ion-ios-chatbubble-outline"></i><h1 translate="noComments"></h1>\n</div></ion-content><form name="rForm" ng-submit="submitComment(rForm, form)" novalidate><ion-footer-bar \nng-hide="loading" class="bar-stable item-input-inset message-footer" keyboard-attach><label class="item-input-wrapper">\n<i class="icon ion-ios-compose-outline placeholder-icon"></i><textarea mentio mentio-trigger-char="\'@\'" \nmentio-items="people" mentio-template-url="app/mentio/people-mentions.html" mentio-search="searchPeople(term)" \nmentio-select="getPeopleTextRaw(item)" mentio-id="\'theTextArea\'" ng-trim="false" ng-model="form.text" focus-me \nid="textComment" placeholder="Send a comment..." required minlength="1" maxlength="1500">\n                </textarea>\n</label><div class="footer-btn-wrap"><button class="button button-positive button-outline" type="submit" \nng-disabled="!form.text || form.text === \'\'">Publish</button></div></ion-footer-bar></form></ion-view>'),e.put("app/main/loading/loading.html",'<ion-view id="user-layout" class="bg-animate"><ion-content></ion-content></ion-view>'),e.put("app/main/profile/profile.html",'<ion-view cache-view="false" id="account-view"><ion-nav-bar class="bar bar-{{theme}}"><ion-nav-back-button>\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span>{{ vm.user.name }}</span></ion-nav-title><ion-content \nscroll-sista="header-tabs" class="animated fadeIn"><ion-refresher pulling-text="Loading" on-refresh="onReload()">\n</ion-refresher><div class="profile-top"><div class="row"><div class="col-25"><img class="avatar" user-avatar \nng-model="vm.user" ng-src="{{ vm.user.photo._url || \'img/user.png\' }}"></div><div class="col col-statics"><div \nclass="row"><div class="col"><span class="text-center">{{ vm.user.galleriesTotal || 0}}</span><h3 \ntranslate="postsText"></h3></div><div class="col" ng-click="vm.openFollowers()"><span class="text-center">\n{{ vm.user.followersTotal || 0}}</span><h3 translate="followersText"></h3></div><div class="col" \nng-click="vm.openFollowing()"><span class="text-center">{{ vm.user.followingsTotal || 0}}</span><h3 \ntranslate="followingText"></h3></div></div><div class="row col-edit"><div class="col center" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="col" ng-if="vm.isMe && !vm.loading"><button profile-modal-edit \nuser="vm.user" class="button"><div translate="editProfile"></div></button></div><div class="col" \nng-if="!vm.isMe && !vm.loading"><button \nng-class="{\'button-unfollow\': vm.user.isFollow, \'button-follow\': !vm.user.isFollow}" ng-click="vm.follow()" \nclass="button"><span ng-show="!vm.user.isFollow" translate>Follow</span> <span ng-show="vm.user.isFollow" translate>\nFollowing</span></button></div></div></div></div><div class="padding"><span class="user-username">{{ vm.user.name }}\n</span><p class="user-status">{{ vm.user.status }}</p></div></div><div class="item bar"><div class="button-bar"><button\n class="button button-icon icon ion-grid" ng-class="{\'active\': vm.tab.grid}" ng-click="vm.changeTab(\'grid\')"></button> \n<button class="button button-icon icon ion-ios-camera-outline" ng-class="{\'active\': vm.tab.album}" \nng-click="vm.changeTab(\'album\')"></button> <button class="button button-icon icon ion-drag" \nng-class="{\'active\': vm.tab.list}" ng-click="vm.changeTab(\'list\')"></button> <button \nclass="button button-icon icon ion-ios-location-outline" ng-class="{\'active\': vm.tab.map}" \nng-click="vm.changeTab(\'map\')"></button></div></div><div ng-if="!vm.loading"><div class="tab" \nng-if="vm.tab.grid && !vm.loading"><div class="item item-divider" translate="recent"></div><photo-grid \nusername="vm.user.username" on-reload="onReload"></photo-grid></div><div class="tab" \nng-if="vm.tab.album && !vm.loading"><div class="item item-divider" translate="albums"></div><album-grid \nusername="vm.user.username" on-reload="onReload"></album-grid></div><div class="tab" \nng-if="vm.tab.list && !vm.loading"><div class="item item-divider" translate="recent"></div><photo-list \nusername="vm.user.username" on-reload="onReload"></photo-list></div><div class="tab" ng-if="vm.tab.map && !vm.loading">\n<div class="item item-divider" translate="map"></div><map-photo-user username="vm.user.username" on-reload="onReload">\n</map-photo-user></div></div></ion-content></ion-view>'),e.put("app/main/profile-photo/profile-photo.html",'<ion-view cache-view="false" id="account-view"><ion-nav-bar class="bar bar-{{theme}}"><ion-nav-back-button>\n</ion-nav-back-button></ion-nav-bar><ion-nav-title><span translate="photo"></span></ion-nav-title><ion-content \nscroll-sista="header-tabs" class="animated fadeIn"><photo-list id="vm.id" profile="true" load="vm.openProfile" \nopen-likers="vm.openLikers" on-reload="onReload"></photo-list></ion-content></ion-view>'),e.put("app/main/share/post-modal.html",'<ion-modal-view class="modal-post"><ion-header-bar class="bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closePost()"></button><div class="title" \ntranslate="SHARE.TITLE"></div><button class="button button-positive" ng-click="submitPost(form)"><i \nclass="icon ion-arrow-right-b"></i></button></ion-header-bar><ion-content><div id="image"><img ng-src="{{image}}">\n</div><ul class="list"><li class="item"><textarea ng-model="form.title" \nplaceholder="{{ \'SHARE.FORM.LEGEND\' | translate }}"></textarea></li></ul></ion-content></ion-modal-view>'),e.put("app/main/share/share-modal.html",'<ion-modal-view class="modal-share"><form name="rForm" novalidate><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-clear" ng-click="close()" translate="cancel"></button><div class="title" \ntranslate="shareGalleryText"></div><button class="button button-clear" ng-click="submit(rForm, form)" \ntranslate="submit"></button></ion-header-bar><ion-content><div class="list"><div class="item item-thumbnail-left"><img \nng-src="{{image}}" ng-click="editFilter()"><textarea mentio mentio-trigger-char="\'@\'" mentio-items="people" \nmentio-template-url="app/mentio/people-mentions.html" mentio-search="searchPeople(term)" \nmentio-select="getPeopleTextRaw(item)" mentio-id="\'theTextArea\'" ng-trim="false" type="text" ng-model="form.title" \nplaceholder="{{ \'description\'|translate }}"></textarea></div><div class="item item-divider" translate="shareLocation">\n</div><div class="item item-icon-left" ion-location ng-model="form.address" ng-if="!form.address.resume"><i \nclass="icon ion-ios-location"></i> <span translate="addLocale"></span></div><a \nclass="item item-icon-left item-button-right" ng-if="form.address.resume"><i class="icon ion-ios-location"></i><h2>\n{{form.address.name || form.address.resume}}</h2><p>{{form.address.resume}}</p><button class="button button-icon" \nng-click="closeAddress()"><i class="icon ion-ios-close"></i></button></a><div class="item item-divider" \ntranslate="selectAlbumText"></div><div class="item item-thumbnail-left" gallery-album-modal ng-model="form.album"><img \nng-src="{{form.album.imageThumb._url || \'img/albumnone.png\'}}"><h2 ng-if="!form.album.title" \ntranslate="clickSelectAlbum"></h2><h2 ng-if="form.album" ng-bind="form.album.title"></h2><p ng-if="form.album">\n{{form.album.qtyPhotos}} photos</p></div></div></ion-content></form></ion-modal-view>'),e.put("app/main/tab/main-tab.html",'<ion-view cache-view="true"><ion-nav-bar class="bar bar-{{theme}}"><ion-nav-back-button></ion-nav-back-button>\n</ion-nav-bar><ion-tabs class="tabs-light tabs-photogram"><ion-tab icon-on="ion-ios-home" \nicon-off="ion-ios-home-outline" ui-sref="tab.home"><ion-nav-view name="tabHome"></ion-nav-view></ion-tab><ion-tab \nicon-on="ion-ios-world" icon-off="ion-ios-world-outline" ui-sref="tab.search"><ion-nav-view name="tabSearch">\n</ion-nav-view></ion-tab><ion-tab icon-on="ion-ios-camera" icon-off="ion-ios-camera-outline" ng-click="vm.postPhoto()">\n<ion-nav-view name="tabCapture"></ion-nav-view></ion-tab><ion-tab icon-on="ion-ios-heart" \nicon-off="ion-ios-heart-outline" badge="badge" ui-sref="tab.activity"><ion-nav-view name="tabActivity"></ion-nav-view>\n</ion-tab><ion-tab icon-on="ion-ios-person" icon-off="ion-ios-person-outline" ui-sref="tab.account"><ion-nav-view \nname="tabProfile"></ion-nav-view></ion-tab></ion-tabs></ion-view>'),e.put("app/main/tab-account/account.html",'<ion-view cache-view="false" id="account-view"><ion-nav-title><span>{{ vm.user.attributes.name }}</span>\n</ion-nav-title><ion-nav-buttons side="right"><button settings-modal class="button button-icon icon ion-gear-a">\n</button></ion-nav-buttons><ion-content><div class="profile-top"><div class="row"><div class="col-25"><img \nclass="avatar" user-avatar ng-model="currentUser" ng-src="{{ currentUser.photo.url() || \'img/user.png\' }}"></div><div \nclass="col col-statics"><div class="row"><div class="col"><span ng-if="!vm.loading" class="text-center">\n{{ vm.user.attributes.galleriesTotal || 0}}</span><ion-spinner ng-if="vm.loading"></ion-spinner><h3 \ntranslate="postsText"></h3></div><div class="col" ng-click="vm.openFollowers()"><span ng-if="!vm.loading" \nclass="text-center">{{ vm.user.attributes.followersTotal || 0}}</span><ion-spinner ng-if="vm.loading"></ion-spinner><h3\n translate="followersText"></h3></div><div class="col" ng-click="vm.openFollowing()"><span ng-if="!vm.loading" \nclass="text-center">{{ vm.user.attributes.followingsTotal || 0}}</span><ion-spinner ng-if="vm.loading"></ion-spinner>\n<h3 translate="followingText"></h3></div></div><div class="row col-edit"><div class="col"><button profile-modal-edit \nuser="vm.user" class="button"><div translate="editProfile"></div></button></div></div></div></div><div class="padding">\n<span class="user-username">{{ vm.user.attributes.name }}</span><p class="user-status">{{ vm.user.attributes.status }}\n</p></div></div><div class="item bar"><div class="button-bar"><button class="button button-icon icon ion-grid" \nng-class="{\'active\': vm.tab.grid}" ng-click="vm.changeTab(\'grid\')"></button> <button \nclass="button button-icon icon ion-ios-camera-outline" ng-class="{\'active\': vm.tab.album}" \nng-click="vm.changeTab(\'album\')"></button> <button class="button button-icon icon ion-drag" \nng-class="{\'active\': vm.tab.list}" ng-click="vm.changeTab(\'list\')"></button> <button \nclass="button button-icon icon ion-ios-location-outline" ng-class="{\'active\': vm.tab.map}" \nng-click="vm.changeTab(\'map\')"></button></div></div><div class="tab" ng-if="vm.tab.grid && !vm.loading"><div \nclass="item item-divider" translate="recent"></div><photo-grid username="vm.user.attributes.username" \non-reload="onReload"></photo-grid></div><div class="tab" ng-if="vm.tab.album && !vm.loading"><div \nclass="item item-divider" translate="albums"></div><album-grid username="vm.user.attributes.username" \non-reload="onReload"></album-grid></div><div class="tab" ng-if="vm.tab.list && !vm.loading"><div \nclass="item item-divider" translate="recent"></div><photo-list username="vm.user.attributes.username" \non-reload="onReload"></photo-list></div><div class="tab" ng-if="vm.tab.map && !vm.loading"><div \nclass="item item-divider" translate="map"></div><map-photo-user username="vm.user.attributes.username" \non-reload="onReload"></map-photo-user></div></ion-content></ion-view>'),e.put("app/main/tab-activity/activity.html",'<ion-view class="list-activity"><ion-nav-title><span translate="activities"></span></ion-nav-title><ion-content><div \nclass="center padding" ng-if="loading &&!data.length"><ion-spinner></ion-spinner></div><div class="center padding" \nng-if="showErrorView"><div class="error"><i class="icon icon-large ion-ios-cloud-download-outline"></i><p>\n{{ "errorText" | translate }}</p><button class="button button-positive" ng-click="onReload()">\n{{ "tryAgainText" | translate }}</button></div></div><div class="center padding" ng-if="showEmptyView"><div \nclass="error"><i class="icon icon-large ion-android-alert"></i><p>{{ "activityNotFoundText" | translate }}</p></div>\n</div><ion-refresher pulling-text="{{\'loadingText\'| translate}}" on-refresh="onReload()"></ion-refresher><div \nclass="list"><div class="item item-avatar item-animate1" ng-repeat="item in data | orderBy:\'createdAt\':true"><img \nng-src="{{ item.user.photo._url  || \'./img/user.png\'}}"><h2 ng-click="openProfile(item.user.username)">\n{{ item.user.username}}</h2><div class="text">{{ item.action | translate }}</div><p>{{ item.createdAt | amTimeAgo }}\n</p><div class="img-right" ng-if="item.item.gallery"><img ng-src="{{ item.item.gallery.attributes.imageThumb._url}}">\n</div><div class="item-button-right" ng-if="!item.item.gallery"><button class="button button-positive" \nng-disabled="item.user.loading" \nng-class="{\'button-unfollow\': item.user.isFollow, \'button-outline\': !item.user.isFollow}" ng-click="follow(item.user)">\n<div ng-show="!item.user.isFollow" translate>follow</div><div ng-show="item.user.isFollow" translate>unfollow</div>\n</button></div></div></div><ion-infinite-scroll on-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded" spinner \ndistance="1%"></ion-infinite-scroll></ion-content></ion-view>'),e.put("app/main/tab-home/home.html",'<ion-view class="view-home"><ion-nav-buttons side="left"><button \nclass="button button-icon icon ion-ios-personadd-outline" ui-sref="tab.homeUserlist"></button></ion-nav-buttons>\n<ion-nav-title><span class="icon2-logo"></span></ion-nav-title><ion-content><ion-refresher pulling-text="Loading" \non-refresh="onReload()"></ion-refresher><photo-list profile="true" load="vm.openProfile" open-likers="vm.openLikers" \non-reload="onReload"></photo-list></ion-content></ion-view>'),e.put("app/main/tab-search/search.html",'<ion-view><ion-nav-title><span>{{ \'searchText\' | translate }}</span></ion-nav-title><ion-nav-buttons side="right">\n<button class="button button-icon ion-ios-location" ui-sref="tab.map"></button></ion-nav-buttons><ion-header-bar \nclass="bar bar-{{theme}} bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" ng-change="onSearch()" \nng-model-options="{debounce:1000}" style="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}">\n</label><button class="button button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><ion-refresher pulling-text="Loading" \non-refresh="onReload()"></ion-refresher><div class="center padding" ng-if="showErrorView"><div class="error"><i \nclass="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button \nclass="button button-primary" ng-click="onReload">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><div class="center padding" ng-if="loading"><ion-spinner>\n</ion-spinner></div><div class="row" ng-if="$index % 3 === 0" ng-repeat="image in data | orderBy:\'createdAt\':true"><div\n class="col col-33" ui-sref="tab.searchProfile({username: data[$index].user.username})"><img profile-modal \nuser="data[$index].user.obj" ng-src="{{ data[$index].imageThumb._url}}" width="100%"></div><div class="col col-33" \nng-if="$index + 1" ui-sref="tab.searchProfile({username: data[$index].user.username})"><img profile-modal \nuser="data[$index + 1].user.obj" ng-src="{{ data[$index + 1].imageThumb._url}}" width="100%"></div><div \nclass="col col-33" ng-if="$index + 2" ui-sref="tab.searchProfile({username: data[$index].user.username})"><img \nprofile-modal user="data[$index + 2].user.obj" ng-src="{{ data[$index + 2].imageThumb._url}}" width="100%"></div></div>\n<ion-infinite-scroll on-infinite="onLoadMore()" ng-if="moreDataCanBeLoaded" spinner distance="1%">\n</ion-infinite-scroll></ion-content></ion-view>'),e.put("app/main/tab-search-map/searchMap.html",'<ion-view id="view-map"><ion-nav-title>{{ \'mapTitle\' | translate }}</ion-nav-title><ion-content scroll="false"><div \nid="map_canvas" data-tap-disabled="true"></div></ion-content><ion-footer-bar><div class="row" ng-if="loading"><div \nclass="col"><div class="center"><ion-spinner></ion-spinner></div></div></div><button ng-if="!loading" \nclass="button button-positive button-block button-outline" ng-click="loadMyLocation()">{{ \'searchInHere\' | translate }}\n</button></ion-footer-bar></ion-view>'),e.put("app/main/user-avatar/user-avatar.html",'<ion-view id="user-layout" class="bg-animate"><ion-content class="padding view-avatar"><div class="row step1"><div \nclass="col"><img class="avatar" user-avatar ng-model="user" ng-src="{{ user._url || \'img/user.png\' }}"></div></div><div\n class="step2"><form name="myForm" novalidate="novalidate" ng-submit="submitAvatar(myForm, form)"><label \nclass="item item-input"><i class="icon icon-envelope placeholder-icon"></i> <input required="required" type="email" \nname="email" ng-model="form.email" disabled="disabled" placeholder="user@example.com"></label><label \nclass="item item-input"><i class="icon ion-at placeholder-icon"></i> <input required="required" type="text" \nname="username" ng-model="form.username" ng-minlength="4" ng-maxlength="12" ng-model-options="{debounce: 1000}" \nng-pattern="/^[a-zA-Z\'. -]+$/" placeholder="{{\'yourLogin\' | translate}}"></label><div ng-if="myForm.username.$dirty">\n<div ng-messages="myForm.email.$error" class="validation-error"><div ng-message="required" \ntranslate="usernameRequired"></div><div ng-message="email" translate="usernameInUse"></div></div><div \nng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" translate="checkingUsername">\n</div></div></div><label class="item item-input"><i class="icon icon-user placeholder-icon"></i> <input required \ntype="name" name="name" ng-model="form.name" placeholder="{{\'name\'|translate}}"></label><label class="item item-input">\n<i class="icon ion-pound placeholder-icon"></i> <input required type="status" name="status" ng-model="form.status" \nplaceholder="{{\'status\'|translate}}"></label><button class="button button-block button-outline button-light" \ntype="submit" translate="{{\'submit\' | translate}}"></button></form></div></ion-content></ion-view>'),e.put("app/main/user-followers/user-followers.html",'<ion-view id="user-list"><ion-nav-title><span translate="followersText"></span></ion-nav-title><ion-header-bar \nclass="bar bar-{{theme}} bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="list"><div ng-repeat="user in vm.users | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" \nng-click="vm.follow(user)"><div ng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>\nUnfollow</div></button> </a><span class="row"><span class="col" ng-repeat="gallery in user.galleries"><img \nng-src="{{ gallery.imageThumb._url}}" id="{{ ::gallery.id}}"></span></span></div></div></ion-content></ion-view>'),e.put("app/main/user-following/user-following.html",'<ion-view id="user-list"><ion-nav-title><span translate="followingText"></span></ion-nav-title><ion-header-bar \nclass="bar bar-{{theme}} bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="list"><div ng-repeat="user in vm.users | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" \nng-click="vm.follow(user)"><div ng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>\nUnfollow</div></button> </a><span class="row"><span class="col" ng-repeat="gallery in user.galleries"><img \nng-src="{{ gallery.imageThumb._url}}" id="{{ ::gallery.id}}"></span></span></div></div></ion-content></ion-view>'),
e.put("app/main/user-intro/user-intro.html",'<ion-view id="user-layout" class="view-intro bg-animate" cache-view="false"><div class="bar bar-header"><ion-language>\n</ion-language></div><ion-content scroll="false"><div class="intro-slider"><ion-slide-box active-slide="slideIndex" \nshow-pager="true" on-slide-changed="vm.slideChanged($index)"><ion-slide ng-repeat="item in vm.slides track by $index">\n<div class="content" ng-if="$index == vm.slideIndex"><span class="top"><h2>{{ item.text | translate }}</h2></span><div \nclass="phone {{ vm.device }}"><img ng-src="{{ item.img }}"></div></div></ion-slide></ion-slide-box></div><button \nclass="button button-positive button-fab left" ng-if="vm.slideIndex" ng-click="vm.previous()"><i \nclass="icon ion-ios-arrow-left"></i></button> <button class="button button-positive button-fab right" \nng-hide="vm.slideIndex === vm.slides.length-1" ng-click="vm.next()"><i class="icon ion-ios-arrow-right"></i></button>\n</ion-content><ion-footer-bar><facebook-login></facebook-login><div class="row"><button \nclass="button button-block button-calm" translate="register" signup-modal></button> <button \nclass="button button-block button-positive" translate="signin" signin-modal></button></div></ion-footer-bar></ion-view>'),e.put("app/main/user-layout/user-layout.html",'<ion-view id="user-layout" class="bg-animate"><ion-content padding="false"><ion-nav-view></ion-nav-view></ion-content>\n</ion-view>'),e.put("app/main/user-likers/user-likers.html",'<ion-view id="user-list"><ion-nav-title><span translate="likersText"></span></ion-nav-title><ion-header-bar \nclass="bar bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" \nstyle="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}"></label><button \nclass="button button-positive button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="vm.loading">\n<ion-spinner></ion-spinner></div><div class="list"><div ng-repeat="user in vm.users | filter:searchValue"><a \nclass="item item-avatar item-button-right"><img ng-src="{{ user.photo._url || \'img/user.png\'}}" \nng-click="vm.openProfile(user)"><h2 ng-click="vm.openProfile(user)">{{user.username}}</h2><p>{{user.status}}</p><button\n class="button button-positive" ng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" \nng-click="vm.follow(user)"><div ng-show="!user.isFollow" translate>Follow</div><div ng-show="user.isFollow" translate>\nUnfollow</div></button> </a><span class="row"><span class="col" ng-repeat="gallery in user.galleries"><img \nng-src="{{ gallery.imageThumb._url}}" id="{{ ::gallery.id}}"></span></span></div></div></ion-content></ion-view>'),e.put("app/main/user-list/user-list.html",'<ion-view id="user-list" cache-view="true"><ion-nav-title><span translate="findPeople"></span></ion-nav-title>\n<ion-header-bar class="bar bar-{{theme}} bar-subheader item-input-inset"><label class="item-input-wrapper"><i \nclass="icon ion-ios-search placeholder-icon"></i> <input type="text" ng-model="searchValue" ng-change="onSearch()" \nng-model-options="{debounce:1000}" style="text-transform:lowercase" placeholder="{{ \'searchText\' | translate }}">\n</label><button class="button button-clear" ng-if="searchValue.length>1" ng-click="clearSearch()" translate="cancel">\n</button></ion-header-bar><ion-content class="has-subheader"><div class="center padding" ng-if="showErrorView"><div \nclass="error"><i class="icon icon-large ion-ios-cloud-download-outline"></i><p>{{ "errorText" | translate }}</p><button\n class="button button-primary" ng-click="onReload()">{{ "tryAgainText" | translate }}</button></div></div><div \nclass="center padding" ng-if="showEmptyView"><div class="error"><i class="icon icon-large ion-android-alert"></i><p>\n{{ "galleriesNotFoundText" | translate }}</p></div></div><ion-refresher pulling-text="{{\'loadingText\'| translate}}" \non-refresh="onReload()"></ion-refresher><div class="center padding" ng-if="loading &&!data.length"><ion-spinner>\n</ion-spinner></div><div class="list"><div ng-repeat="user in data "><a class="item item-avatar item-button-right"><img\n ng-src="{{ user.photo._url || \'img/user.png\'}}" ng-click="openProfile(user)"><h2 ng-click="openProfile(user)">\n{{user.username}}</h2><p>{{user.status}}</p><button class="button button-positive" ng-disabled="user.loading" \nng-class="{\'button-unfollow\': user.isFollow, \'button-outline\': !user.isFollow}" ng-click="follow(user)"><div \nng-show="!user.isFollow" translate>follow</div><div ng-show="user.isFollow" translate>unfollow</div></button> </a><span\n class="row"><span class="col" ng-repeat="gallery in user.galleries"><img ng-src="{{ gallery.imageThumb._url}}" \nid="{{ ::gallery.id}}"></span></span></div></div><ion-infinite-scroll on-infinite="onLoadMore()" \nng-if="moreDataCanBeLoaded" spinner distance="1%"></ion-infinite-scroll></ion-content></ion-view>'),e.put("app/main/user-merge/merge.html",'<ion-view id="user-layout" class="bg-animate" cache-view="false"><ion-content class="view-avatar padding"><div \nclass="row step1"><div class="col"><img class="avatar" user-avatar \nng-src="{{ tempUser.attributes.photo._url || \'./img/user.png\' }}"></div></div><div class="step2"><form name="myForm" \nnovalidate="novalidate" ng-submit="submitMerge(myForm, form)"><label class="item item-input"><i \nclass="icon icon-envelope placeholder-icon"></i> <input required="required" type="email" name="email" \nng-model="form.email" disabled="disabled" placeholder="user@example.com"></label><label class="item item-input"><i \nclass="icon icon-user placeholder-icon"></i> <input required="required" type="text" name="username" \nng-model="form.username" username-validator ng-minlength="4" ng-maxlength="12" ng-model-options="{debounce: 1000}" \nng-pattern="/^[a-zA-Z\'. -]+$/" placeholder="{{\'yourLogin\' | translate}}"></label><div ng-if="myForm.username.$dirty">\n<div ng-messages="myForm.email.$error" class="validation-error"><div ng-message="required" \ntranslate="usernameRequired"></div><div ng-message="email" translate="usernameInUse"></div></div><div \nng-messages="myForm.email.$pending" class="validation-pending"><div ng-message="email" translate="checkingUsername">\n</div></div></div><label class="item item-input"><i class="icon icon-lock placeholder-icon"></i> <input required \ntype="password" name="password" ng-model="form.password" placeholder="{{\'password\'|translate}}"></label><button \nclass="button button-block button-outline button-light" type="submit" translate="{{\'submit\' | translate}}"></button>\n</form></div><div class="padding step3"><button ng-click="vm.submit(rForm, vm.form)" \nclass="button button-block button-facebook"><i class="icon ion-social-facebook"></i> <span translate="mergeAccount">\n</span></button></div></ion-content></ion-view>'),e.put("app/component/ion-photo/view/filter.modal.html",'<ion-modal-view id="photo-filter"><ion-header-bar class="bar bar-{{theme}}"><button \nclass="button button-clear button-icon ion-ios-arrow-thin-left" ng-click="closeModalFilter()"></button><div \nclass="title">{{ \'Filter\' | translate }}</div><button class="button button-icon" ng-click="submitFilter()"><i \nclass="icon ion-ios-arrow-thin-right"></i></button></ion-header-bar><ion-content><div class="box-image"><img \nid="image" src="{{form.photo}}" ng-hide="loading"><ion-spinner ng-show="loading"></ion-spinner></div><img id="image3" \nsrc="" style="display: none"><div ng-show="showFilter" class="slider-filters animate1"><ion-scroll direction="x" \nclass="image-filter"><a ng-repeat="filter in imageFilters" ng-click="applyFilter(filter)"><p>{{ filter.name }}</p><img \nid="{{filter.id}}" class="img-filter" src=""></a></ion-scroll><div class="row"><div class="col"><button \nclass="button button-block bold">Filter</button></div><div class="col"><button class="button button-block" \nng-click="actionShowFilter(false)">Edit</button></div></div></div><div ng-hide="showFilter" class="slider-filters"><div\n ng-show="filterEdit" class="slider-filters"><p class="text-center">{{filter.name}}</p><div \nclass="item range range-positive"><input type="range" min="-100" max="100" ng-model="filter.slider.value" \nng-model-options="{debounce:100}" step="0.1"></div><div class="row"><div class="col"><button \nclass="button button-block" ng-click="cancelFilter(filter)">Cancel</button></div><div class="col"><button \nclass="button button-block bold" ng-click="doneFilter()">Done</button></div></div></div><div ng-show="!filterEdit" \nclass="slider-filters"><ion-scroll direction="x"><a ng-repeat="filter in filters" ng-click="selectFilter(filter)"><p>\n{{ filter.name }}</p><i class="icon {{filter.icon}}"></i> </a><a ng-click="reset()"><p>Reset</p><i \nclass="icon ion-android-refresh"></i></a></ion-scroll><div class="row"><div class="col"><button \nclass="button button-block" ng-click="actionShowFilter(true)">Filter</button></div><div class="col"><button \nclass="button button-block bold">Edit</button></div></div></div></div></ion-content></ion-modal-view>'),e.put("app/component/ion-photo/view/modal.share.photo.html",'<ion-modal-view class="modal-share"><ion-header-bar class="bar-dark"><div class="title">{{ ::\'Share\' | translate }}\n</div><button class="button button-positive" ng-click="modal.hide()"><i class="icon ion-arrow-right-b"></i></button>\n</ion-header-bar><ion-content ng-cloak><div id="image"><img ng-src="{{ ::form.photo}}"><div class="title">\n{{ ::form.title }}</div></div><ul class="list"><li class="padding"><button ng-repeat="social in sociais" \nng-click="share(form, social)" class="button button-block button-{{ social }}"><i class="icon ion-social-{{ social }}">\n</i> {{ ::social | uppercase }}</button></li></ul></ion-content></ion-modal-view>')}])}();
//# sourceMappingURL=../maps/scripts/app-fbfdb69b28.js.map
